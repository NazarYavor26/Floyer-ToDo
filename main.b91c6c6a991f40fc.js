"use strict";(self.webpackChunkfloyer_todo=self.webpackChunkfloyer_todo||[]).push([[179],{2011:(ot,be,P)=>{P.d(be,{Dh:()=>fe,GT:()=>re,cc:()=>Ee,hO:()=>Be,on:()=>j,pX:()=>te,xv:()=>he});var v=P(4650),Q=P(127),O=P(5813);ot=P.hmd(ot);const oe=["ngOnDestroy"],te=(Ce,De,Ne,Ie={})=>new Proxy(Ce,{get:(_e,Se)=>Ne.runOutsideAngular(()=>{var Ue;if(Ce[Se])return!(null===(Ue=Ie?.spy)||void 0===Ue)&&Ue.get&&Ie.spy.get(Se,Ce[Se]),Ce[Se];if(oe.indexOf(Se)>-1)return()=>{};const Me=De.toPromise().then(V=>{const ve=V&&V[Se];return"function"==typeof ve?ve.bind(V):ve&&ve.then?ve.then(Ve=>Ne.run(()=>Ve)):Ne.run(()=>ve)});return new Proxy(()=>{},{get:(V,ve)=>Me[ve],apply:(V,ve,Ve)=>Me.then(We=>{var it;const Ke=We&&We(...Ve);return!(null===(it=Ie?.spy)||void 0===it)&&it.apply&&Ie.spy.apply(Se,Ve,Ke),Ke})})})}),re=(Ce,De)=>{De.forEach(Ne=>{Object.getOwnPropertyNames(Ne.prototype||Ne).forEach(Ie=>{Object.defineProperty(Ce.prototype,Ie,Object.getOwnPropertyDescriptor(Ne.prototype||Ne,Ie))})})};class ge{constructor(De){return De}}const fe=new v.OlP("angularfire2.app.options"),he=new v.OlP("angularfire2.app.name");function j(Ce,De,Ne){const _e="object"==typeof Ne&&Ne||{};_e.name=_e.name||"string"==typeof Ne&&Ne||"[DEFAULT]";const Ue=Q.Z.apps.filter(Me=>Me&&Me.name===_e.name)[0]||De.runOutsideAngular(()=>Q.Z.initializeApp(Ce,_e));try{JSON.stringify(Ce)!==JSON.stringify(Ue.options)&&B("error",`${Ue.name} Firebase App already initialized with different options${ot.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ge(Ue)}const B=(Ce,...De)=>{(0,v.X6Q)()&&typeof console<"u"&&console[Ce](...De)},K={provide:ge,useFactory:j,deps:[fe,v.R0b,[new v.FiY,he]]};let Be=(()=>{class Ce{constructor(Ne){Q.Z.registerVersion("angularfire",O.q4.full,"core"),Q.Z.registerVersion("angularfire",O.q4.full,"app-compat"),Q.Z.registerVersion("angular",v.q4F.full,Ne.toString())}static initializeApp(Ne,Ie){return{ngModule:Ce,providers:[{provide:fe,useValue:Ne},{provide:he,useValue:Ie}]}}}return Ce.\u0275fac=function(Ne){return new(Ne||Ce)(v.LFG(v.Lbi))},Ce.\u0275mod=v.oAB({type:Ce}),Ce.\u0275inj=v.cJS({providers:[K]}),Ce})();function Ee(Ce,De,Ne,Ie,_e){const[,Se,Ue]=globalThis.\u0275AngularfireInstanceCache.find(Me=>Me[0]===Ce)||[];if(Se)return function $e(Ce,De){try{return Ce.toString()===De.toString()}catch{return Ce===De}}(_e,Ue)||(pe("error",`${De} was already initialized on the ${Ne} Firebase App with different settings.${nt?" You may need to reload as Firebase is not HMR aware.":""}`),pe("warn",{is:_e,was:Ue})),Se;{const Me=Ie();return globalThis.\u0275AngularfireInstanceCache.push([Ce,Me,_e]),Me}}const nt=!!ot.hot,pe=(Ce,...De)=>{(0,v.X6Q)()&&typeof console<"u"&&console[Ce](...De)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(ot,be,P)=>{P.d(be,{q4:()=>yu,iC:()=>Vn,HU:()=>ya,vb:()=>_r,JM:()=>Rr});var v=P(4650),Q=P(5867),O=P(5861),oe=P(9681),te=P(2090),re=P(4859),ge=P(1877),fe=P(8766);const he="@firebase/installations",j="0.5.12",B=1e4,K=`w:${j}`,Be="FIS_v2",Ee="https://firebaseinstallations.googleapis.com/v1",$e=36e5,De=new te.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ne(E){return E instanceof te.ZR&&E.code.includes("request-failed")}function Ie({projectId:E}){return`${Ee}/projects/${E}/installations`}function _e(E){return{token:E.token,requestStatus:2,expiresIn:We(E.expiresIn),creationTime:Date.now()}}function Se(E,T){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,O.Z)(function*(E,T){const L=(yield T.json()).error;return De.create("request-failed",{requestName:E,serverCode:L.code,serverMessage:L.message,serverStatus:L.status})})).apply(this,arguments)}function Me({apiKey:E}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":E})}function ve(E){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,O.Z)(function*(E){const T=yield E();return T.status>=500&&T.status<600?E():T})).apply(this,arguments)}function We(E){return Number(E.replace("s","000"))}function an(){return(an=(0,O.Z)(function*({appConfig:E,heartbeatServiceProvider:T},{fid:x}){const L=Ie(E),Z=Me(E),ie=T.getImmediate({optional:!0});if(ie){const Y=yield ie.getHeartbeatsHeader();Y&&Z.append("x-firebase-client",Y)}const qe={method:"POST",headers:Z,body:JSON.stringify({fid:x,authVersion:Be,appId:E.appId,sdkVersion:K})},ht=yield ve(()=>fetch(L,qe));if(ht.ok){const Y=yield ht.json();return{fid:Y.fid||x,registrationStatus:2,refreshToken:Y.refreshToken,authToken:_e(Y.authToken)}}throw yield Se("Create Installation",ht)})).apply(this,arguments)}function Zn(E){return new Promise(T=>{setTimeout(T,E)})}const Si=/^[cdef][\w-]{21}$/,ne="";function ce(){try{const E=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(E),E[0]=112+E[0]%16;const x=function ue(E){return function Pn(E){return btoa(String.fromCharCode(...E)).replace(/\+/g,"-").replace(/\//g,"_")}(E).substr(0,22)}(E);return Si.test(x)?x:ne}catch{return ne}}function ee(E){return`${E.appName}!${E.appId}`}const ke=new Map;function Oe(E,T){const x=ee(E);Pt(x,T),function ft(E,T){const x=function Wt(){return!kt&&"BroadcastChannel"in self&&(kt=new BroadcastChannel("[Firebase] FID Change"),kt.onmessage=E=>{Pt(E.data.key,E.data.fid)}),kt}();x&&x.postMessage({key:E,fid:T}),function $t(){0===ke.size&&kt&&(kt.close(),kt=null)}()}(x,T)}function Pt(E,T){const x=ke.get(E);if(x)for(const L of x)L(T)}let kt=null;const Hn="firebase-installations-database",Yn=1,fn="firebase-installations-store";let Sn=null;function Ur(){return Sn||(Sn=(0,fe.X3)(Hn,Yn,{upgrade:(E,T)=>{0===T&&E.createObjectStore(fn)}})),Sn}function pn(E,T){return st.apply(this,arguments)}function st(){return(st=(0,O.Z)(function*(E,T){const x=ee(E),Z=(yield Ur()).transaction(fn,"readwrite"),ie=Z.objectStore(fn),we=yield ie.get(x);return yield ie.put(T,x),yield Z.done,(!we||we.fid!==T.fid)&&Oe(E,T.fid),T})).apply(this,arguments)}function hi(E){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,O.Z)(function*(E){const T=ee(E),L=(yield Ur()).transaction(fn,"readwrite");yield L.objectStore(fn).delete(T),yield L.done})).apply(this,arguments)}function wn(E,T){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,O.Z)(function*(E,T){const x=ee(E),Z=(yield Ur()).transaction(fn,"readwrite"),ie=Z.objectStore(fn),we=yield ie.get(x),qe=T(we);return void 0===qe?yield ie.delete(x):yield ie.put(qe,x),yield Z.done,qe&&(!we||we.fid!==qe.fid)&&Oe(E,qe.fid),qe})).apply(this,arguments)}function ni(E){return Xt.apply(this,arguments)}function Xt(){return Xt=(0,O.Z)(function*(E){let T;const x=yield wn(E.appConfig,L=>{const Z=function un(E){return ar(E||{fid:ce(),registrationStatus:0})}(L),ie=function dt(E,T){if(0===T.registrationStatus){if(!navigator.onLine)return{installationEntry:T,registrationPromise:Promise.reject(De.create("app-offline"))};const x={fid:T.fid,registrationStatus:1,registrationTime:Date.now()},L=function vt(E,T){return fi.apply(this,arguments)}(E,x);return{installationEntry:x,registrationPromise:L}}return 1===T.registrationStatus?{installationEntry:T,registrationPromise:An(E)}:{installationEntry:T}}(E,Z);return T=ie.registrationPromise,ie.installationEntry});return x.fid===ne?{installationEntry:yield T}:{installationEntry:x,registrationPromise:T}}),Xt.apply(this,arguments)}function fi(){return fi=(0,O.Z)(function*(E,T){try{const x=yield function Ke(E,T){return an.apply(this,arguments)}(E,T);return pn(E.appConfig,x)}catch(x){throw Ne(x)&&409===x.customData.serverCode?yield hi(E.appConfig):yield pn(E.appConfig,{fid:T.fid,registrationStatus:0}),x}}),fi.apply(this,arguments)}function An(E){return In.apply(this,arguments)}function In(){return(In=(0,O.Z)(function*(E){let T=yield Wi(E.appConfig);for(;1===T.registrationStatus;)yield Zn(100),T=yield Wi(E.appConfig);if(0===T.registrationStatus){const{installationEntry:x,registrationPromise:L}=yield ni(E);return L||x}return T})).apply(this,arguments)}function Wi(E){return wn(E,T=>{if(!T)throw De.create("installation-not-found");return ar(T)})}function ar(E){return function no(E){return 1===E.registrationStatus&&E.registrationTime+B<Date.now()}(E)?{fid:E.fid,registrationStatus:0}:E}function Vr(){return(Vr=(0,O.Z)(function*({appConfig:E,heartbeatServiceProvider:T},x){const L=function Vt(E,{fid:T}){return`${Ie(E)}/${T}/authTokens:generate`}(E,x),Z=function V(E,{refreshToken:T}){const x=Me(E);return x.append("Authorization",function it(E){return`${Be} ${E}`}(T)),x}(E,x),ie=T.getImmediate({optional:!0});if(ie){const Y=yield ie.getHeartbeatsHeader();Y&&Z.append("x-firebase-client",Y)}const qe={method:"POST",headers:Z,body:JSON.stringify({installation:{sdkVersion:K,appId:E.appId}})},ht=yield ve(()=>fetch(L,qe));if(ht.ok)return _e(yield ht.json());throw yield Se("Generate Auth Token",ht)})).apply(this,arguments)}function q(E){return U.apply(this,arguments)}function U(){return U=(0,O.Z)(function*(E,T=!1){let x;const L=yield wn(E.appConfig,ie=>{if(!at(ie))throw De.create("not-registered");const we=ie.authToken;if(!T&&function tn(E){return 2===E.requestStatus&&!function Jt(E){const T=Date.now();return T<E.creationTime||E.creationTime+E.expiresIn<T+$e}(E)}(we))return ie;if(1===we.requestStatus)return x=function F(E,T){return $.apply(this,arguments)}(E,T),ie;{if(!navigator.onLine)throw De.create("app-offline");const qe=function nn(E){const T={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},E),{authToken:T})}(ie);return x=function Te(E,T){return je.apply(this,arguments)}(E,qe),qe}});return x?yield x:L.authToken}),U.apply(this,arguments)}function $(){return($=(0,O.Z)(function*(E,T){let x=yield H(E.appConfig);for(;1===x.authToken.requestStatus;)yield Zn(100),x=yield H(E.appConfig);const L=x.authToken;return 0===L.requestStatus?q(E,T):L})).apply(this,arguments)}function H(E){return wn(E,T=>{if(!at(T))throw De.create("not-registered");return function Et(E){return 1===E.requestStatus&&E.requestTime+B<Date.now()}(T.authToken)?Object.assign(Object.assign({},T),{authToken:{requestStatus:0}}):T})}function je(){return je=(0,O.Z)(function*(E,T){try{const x=yield function Qt(E,T){return Vr.apply(this,arguments)}(E,T),L=Object.assign(Object.assign({},T),{authToken:x});return yield pn(E.appConfig,L),x}catch(x){if(!Ne(x)||401!==x.customData.serverCode&&404!==x.customData.serverCode){const L=Object.assign(Object.assign({},T),{authToken:{requestStatus:0}});yield pn(E.appConfig,L)}else yield hi(E.appConfig);throw x}}),je.apply(this,arguments)}function at(E){return void 0!==E&&2===E.registrationStatus}function Qn(){return(Qn=(0,O.Z)(function*(E){const T=E,{installationEntry:x,registrationPromise:L}=yield ni(T);return L?L.catch(console.error):q(T).catch(console.error),x.fid})).apply(this,arguments)}function ls(){return ls=(0,O.Z)(function*(E,T=!1){const x=E;return yield function za(E){return Ai.apply(this,arguments)}(x),(yield q(x,T)).token}),ls.apply(this,arguments)}function Ai(){return(Ai=(0,O.Z)(function*(E){const{registrationPromise:T}=yield ni(E);T&&(yield T)})).apply(this,arguments)}function so(E){return De.create("missing-app-config-values",{valueName:E})}const Wl="installations",En=E=>{const T=E.getProvider("app").getImmediate(),x=function sc(E){if(!E||!E.options)throw so("App Configuration");if(!E.name)throw so("App Name");const T=["projectId","apiKey","appId"];for(const x of T)if(!E.options[x])throw so(x);return{appName:E.name,projectId:E.options.projectId,apiKey:E.options.apiKey,appId:E.options.appId}}(T);return{app:T,appConfig:x,heartbeatServiceProvider:(0,oe._getProvider)(T,"heartbeat"),_delete:()=>Promise.resolve()}},oc=E=>{const T=E.getProvider("app").getImmediate(),x=(0,oe._getProvider)(T,Wl).getImmediate();return{getId:()=>function xn(E){return Qn.apply(this,arguments)}(x),getToken:Z=>function Bt(E){return ls.apply(this,arguments)}(x,Z)}};(function Yt(){(0,oe._registerComponent)(new re.wA(Wl,En,"PUBLIC")),(0,oe._registerComponent)(new re.wA("installations-internal",oc,"PRIVATE"))})(),(0,oe.registerVersion)(he,j),(0,oe.registerVersion)(he,j,"esm2017");const kn="@firebase/remote-config",gr=new te.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Cs{constructor(T,x,L,Z){this.client=T,this.storage=x,this.storageCache=L,this.logger=Z}isCachedDataFresh(T,x){if(!x)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const L=Date.now()-x,Z=L<=T;return this.logger.debug(`Config fetch cache check. Cache age millis: ${L}. Cache max age millis (minimumFetchIntervalMillis setting): ${T}. Is cache hit: ${Z}.`),Z}fetch(T){var x=this;return(0,O.Z)(function*(){const[L,Z]=yield Promise.all([x.storage.getLastSuccessfulFetchTimestampMillis(),x.storage.getLastSuccessfulFetchResponse()]);if(Z&&x.isCachedDataFresh(T.cacheMaxAgeMillis,L))return Z;T.eTag=Z&&Z.eTag;const ie=yield x.client.fetch(T),we=[x.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ie.status&&we.push(x.storage.setLastSuccessfulFetchResponse(ie)),yield Promise.all(we),ie})()}}function mi(E=navigator){return E.languages&&E.languages[0]||E.language}class hs{constructor(T,x,L,Z,ie,we){this.firebaseInstallations=T,this.sdkVersion=x,this.namespace=L,this.projectId=Z,this.apiKey=ie,this.appId=we}fetch(T){var x=this;return(0,O.Z)(function*(){var L,Z,ie;const[we,qe]=yield Promise.all([x.firebaseInstallations.getId(),x.firebaseInstallations.getToken()]),Y=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${x.projectId}/namespaces/${x.namespace}:fetch?key=${x.apiKey}`,pt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":T.eTag||"*"},lt={sdk_version:x.sdkVersion,app_instance_id:we,app_instance_id_token:qe,app_id:x.appId,language_code:mi()},hn={method:"POST",headers:pt,body:JSON.stringify(lt)},gt=fetch(Y,hn),va=new Promise((Li,Fi)=>{T.signal.addEventListener(()=>{const Pc=new Error("The operation was aborted.");Pc.name="AbortError",Fi(Pc)})});let qr;try{yield Promise.race([gt,va]),qr=yield gt}catch(Li){let Fi="fetch-client-network";throw"AbortError"===(null===(L=Li)||void 0===L?void 0:L.name)&&(Fi="fetch-timeout"),gr.create(Fi,{originalErrorMessage:null===(Z=Li)||void 0===Z?void 0:Z.message})}let Ze=qr.status;const Oc=qr.headers.get("ETag")||void 0;let _t,Kr;if(200===qr.status){let Li;try{Li=yield qr.json()}catch(Fi){throw gr.create("fetch-client-parse",{originalErrorMessage:null===(ie=Fi)||void 0===ie?void 0:ie.message})}_t=Li.entries,Kr=Li.state}if("INSTANCE_STATE_UNSPECIFIED"===Kr?Ze=500:"NO_CHANGE"===Kr?Ze=304:("NO_TEMPLATE"===Kr||"EMPTY_CONFIG"===Kr)&&(_t={}),304!==Ze&&200!==Ze)throw gr.create("fetch-status",{httpStatus:Ze});return{status:Ze,eTag:Oc,config:_t}})()}}class Mi{constructor(T,x){this.client=T,this.storage=x}fetch(T){var x=this;return(0,O.Z)(function*(){const L=(yield x.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return x.attemptFetch(T,L)})()}attemptFetch(T,{throttleEndTimeMillis:x,backoffCount:L}){var Z=this;return(0,O.Z)(function*(){yield function Zi(E,T){return new Promise((x,L)=>{const Z=Math.max(T-Date.now(),0),ie=setTimeout(x,Z);E.addEventListener(()=>{clearTimeout(ie),L(gr.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(T.signal,x);try{const ie=yield Z.client.fetch(T);return yield Z.storage.deleteThrottleMetadata(),ie}catch(ie){if(!function en(E){if(!(E instanceof te.ZR&&E.customData))return!1;const T=Number(E.customData.httpStatus);return 429===T||500===T||503===T||504===T}(ie))throw ie;const we={throttleEndTimeMillis:Date.now()+(0,te.$s)(L),backoffCount:L+1};return yield Z.storage.setThrottleMetadata(we),Z.attemptFetch(T,we)}})()}}class lo{constructor(T,x,L,Z,ie){this.app=T,this._client=x,this._storageCache=L,this._storage=Z,this._logger=ie,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Ss(E,T){var x;const L=E.target.error||void 0;return gr.create(T,{originalErrorMessage:L&&(null===(x=L)||void 0===x?void 0:x.message)})}const Ar="app_namespace_store";class yi{constructor(T,x,L,Z=function Br(){return new Promise((E,T)=>{var x;try{const L=indexedDB.open("firebase_remote_config",1);L.onerror=Z=>{T(Ss(Z,"storage-open"))},L.onsuccess=Z=>{E(Z.target.result)},L.onupgradeneeded=Z=>{0===Z.oldVersion&&Z.target.result.createObjectStore(Ar,{keyPath:"compositeKey"})}}catch(L){T(gr.create("storage-open",{originalErrorMessage:null===(x=L)||void 0===x?void 0:x.message}))}})}()){this.appId=T,this.appName=x,this.namespace=L,this.openDbPromise=Z}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(T){return this.set("last_fetch_status",T)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(T){return this.set("last_successful_fetch_timestamp_millis",T)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(T){return this.set("last_successful_fetch_response",T)}getActiveConfig(){return this.get("active_config")}setActiveConfig(T){return this.set("active_config",T)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(T){return this.set("active_config_etag",T)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(T){return this.set("throttle_metadata",T)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(T){var x=this;return(0,O.Z)(function*(){const L=yield x.openDbPromise;return new Promise((Z,ie)=>{var we;const ht=L.transaction([Ar],"readonly").objectStore(Ar),Y=x.createCompositeKey(T);try{const pt=ht.get(Y);pt.onerror=lt=>{ie(Ss(lt,"storage-get"))},pt.onsuccess=lt=>{const hn=lt.target.result;Z(hn?hn.value:void 0)}}catch(pt){ie(gr.create("storage-get",{originalErrorMessage:null===(we=pt)||void 0===we?void 0:we.message}))}})})()}set(T,x){var L=this;return(0,O.Z)(function*(){const Z=yield L.openDbPromise;return new Promise((ie,we)=>{var qe;const Y=Z.transaction([Ar],"readwrite").objectStore(Ar),pt=L.createCompositeKey(T);try{const lt=Y.put({compositeKey:pt,value:x});lt.onerror=hn=>{we(Ss(hn,"storage-set"))},lt.onsuccess=()=>{ie()}}catch(lt){we(gr.create("storage-set",{originalErrorMessage:null===(qe=lt)||void 0===qe?void 0:qe.message}))}})})()}delete(T){var x=this;return(0,O.Z)(function*(){const L=yield x.openDbPromise;return new Promise((Z,ie)=>{var we;const ht=L.transaction([Ar],"readwrite").objectStore(Ar),Y=x.createCompositeKey(T);try{const pt=ht.delete(Y);pt.onerror=lt=>{ie(Ss(lt,"storage-delete"))},pt.onsuccess=()=>{Z()}}catch(pt){ie(gr.create("storage-delete",{originalErrorMessage:null===(we=pt)||void 0===we?void 0:we.message}))}})})()}createCompositeKey(T){return[this.appId,this.appName,this.namespace,T].join()}}class qo{constructor(T){this.storage=T}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var T=this;return(0,O.Z)(function*(){const x=T.storage.getLastFetchStatus(),L=T.storage.getLastSuccessfulFetchTimestampMillis(),Z=T.storage.getActiveConfig(),ie=yield x;ie&&(T.lastFetchStatus=ie);const we=yield L;we&&(T.lastSuccessfulFetchTimestampMillis=we);const qe=yield Z;qe&&(T.activeConfig=qe)})()}setLastFetchStatus(T){return this.lastFetchStatus=T,this.storage.setLastFetchStatus(T)}setLastSuccessfulFetchTimestampMillis(T){return this.lastSuccessfulFetchTimestampMillis=T,this.storage.setLastSuccessfulFetchTimestampMillis(T)}setActiveConfig(T){return this.activeConfig=T,this.storage.setActiveConfig(T)}}function Ko(){return Hh.apply(this,arguments)}function Hh(){return(Hh=(0,O.Z)(function*(){if(!(0,te.hl)())return!1;try{return yield(0,te.eu)()}catch{return!1}})).apply(this,arguments)}!function vi(){(0,oe._registerComponent)(new re.wA("remote-config",function E(T,{instanceIdentifier:x}){const L=T.getProvider("app").getImmediate(),Z=T.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw gr.create("registration-window");if(!(0,te.hl)())throw gr.create("indexed-db-unavailable");const{projectId:ie,apiKey:we,appId:qe}=L.options;if(!ie)throw gr.create("registration-project-id");if(!we)throw gr.create("registration-api-key");if(!qe)throw gr.create("registration-app-id");const ht=new yi(qe,L.name,x=x||"firebase"),Y=new qo(ht),pt=new ge.Yd(kn);pt.logLevel=ge.in.ERROR;const lt=new hs(Z,oe.SDK_VERSION,x,ie,we,qe),hn=new Mi(lt,ht),gt=new Cs(hn,ht,Y,pt),va=new lo(L,gt,Y,ht,pt);return function yn(E){const T=(0,te.m9)(E);T._initializePromise||(T._initializePromise=T._storageCache.loadFromStorage().then(()=>{T._isInitializationComplete=!0}))}(va),va},"PUBLIC").setMultipleInstances(!0)),(0,oe.registerVersion)(kn,"0.3.11"),(0,oe.registerVersion)(kn,"0.3.11","esm2017")}();const lc="/firebase-messaging-sw.js",Yi="/firebase-cloud-messaging-push-scope",ho="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Zo="https://fcmregistrations.googleapis.com/v1",dc="google.c.a.c_id",zh="google.c.a.c_l",Gh="google.c.a.ts",Gp="google.c.a.e";var As=(()=>{return(E=As||(As={})).PUSH_RECEIVED="push-received",E.NOTIFICATION_CLICKED="notification-clicked",As;var E})();function Ri(E){const T=new Uint8Array(E);return btoa(String.fromCharCode(...T)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Wp(E){const x=(E+"=".repeat((4-E.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),L=atob(x),Z=new Uint8Array(L.length);for(let ie=0;ie<L.length;++ie)Z[ie]=L.charCodeAt(ie);return Z}const hc="fcm_token_details_db",fc=5,xr="fcm_token_object_Store";function Yl(){return Yl=(0,O.Z)(function*(E){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ie=>ie.name).includes(hc))return null;let T=null;return(yield(0,fe.X3)(hc,fc,{upgrade:(L=(0,O.Z)(function*(Z,ie,we,qe){var ht;if(ie<2||!Z.objectStoreNames.contains(xr))return;const Y=qe.objectStore(xr),pt=yield Y.index("fcmSenderId").get(E);if(yield Y.clear(),pt)if(2===ie){const lt=pt;if(!lt.auth||!lt.p256dh||!lt.endpoint)return;T={token:lt.fcmToken,createTime:null!==(ht=lt.createTime)&&void 0!==ht?ht:Date.now(),subscriptionOptions:{auth:lt.auth,p256dh:lt.p256dh,endpoint:lt.endpoint,swScope:lt.swScope,vapidKey:"string"==typeof lt.vapidKey?lt.vapidKey:Ri(lt.vapidKey)}}}else if(3===ie){const lt=pt;T={token:lt.fcmToken,createTime:lt.createTime,subscriptionOptions:{auth:Ri(lt.auth),p256dh:Ri(lt.p256dh),endpoint:lt.endpoint,swScope:lt.swScope,vapidKey:Ri(lt.vapidKey)}}}else if(4===ie){const lt=pt;T={token:lt.fcmToken,createTime:lt.createTime,subscriptionOptions:{auth:Ri(lt.auth),p256dh:Ri(lt.p256dh),endpoint:lt.endpoint,swScope:lt.swScope,vapidKey:Ri(lt.vapidKey)}}}}),function(ie,we,qe,ht){return L.apply(this,arguments)})})).close(),yield(0,fe.Lj)(hc),yield(0,fe.Lj)("fcm_vapid_details_db"),yield(0,fe.Lj)("undefined"),function Wh(E){if(!E||!E.subscriptionOptions)return!1;const{subscriptionOptions:T}=E;return"number"==typeof E.createTime&&E.createTime>0&&"string"==typeof E.token&&E.token.length>0&&"string"==typeof T.auth&&T.auth.length>0&&"string"==typeof T.p256dh&&T.p256dh.length>0&&"string"==typeof T.endpoint&&T.endpoint.length>0&&"string"==typeof T.swScope&&T.swScope.length>0&&"string"==typeof T.vapidKey&&T.vapidKey.length>0}(T)?T:null;var L}),Yl.apply(this,arguments)}const Ga="firebase-messaging-database",xs=1,Ms="firebase-messaging-store";let Wa=null;function po(){return Wa||(Wa=(0,fe.X3)(Ga,xs,{upgrade:(E,T)=>{0===T&&E.createObjectStore(Ms)}})),Wa}function qa(E){return go.apply(this,arguments)}function go(){return go=(0,O.Z)(function*(E){const T=yo(E),L=yield(yield po()).transaction(Ms).objectStore(Ms).get(T);if(L)return L;{const Z=yield function pc(E){return Yl.apply(this,arguments)}(E.appConfig.senderId);if(Z)return yield Rs(E,Z),Z}}),go.apply(this,arguments)}function Rs(E,T){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,O.Z)(function*(E,T){const x=yo(E),Z=(yield po()).transaction(Ms,"readwrite");return yield Z.objectStore(Ms).put(T,x),yield Z.done,T})).apply(this,arguments)}function mo(){return(mo=(0,O.Z)(function*(E){const T=yo(E),L=(yield po()).transaction(Ms,"readwrite");yield L.objectStore(Ms).delete(T),yield L.done})).apply(this,arguments)}function yo({appConfig:E}){return E.appId}const Dn=new te.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Ka(E,T){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,O.Z)(function*(E,T){var x;const L=yield Os(E),Z=Qo(T),ie={method:"POST",headers:L,body:JSON.stringify(Z)};let we;try{we=yield(yield fetch(_o(E.appConfig),ie)).json()}catch(qe){throw Dn.create("token-subscribe-failed",{errorInfo:null===(x=qe)||void 0===x?void 0:x.toString()})}if(we.error)throw Dn.create("token-subscribe-failed",{errorInfo:we.error.message});if(!we.token)throw Dn.create("token-subscribe-no-token");return we.token})).apply(this,arguments)}function Ns(){return(Ns=(0,O.Z)(function*(E,T){var x;const L=yield Os(E),Z=Qo(T.subscriptionOptions),ie={method:"PATCH",headers:L,body:JSON.stringify(Z)};let we;try{we=yield(yield fetch(`${_o(E.appConfig)}/${T.token}`,ie)).json()}catch(qe){throw Dn.create("token-update-failed",{errorInfo:null===(x=qe)||void 0===x?void 0:x.toString()})}if(we.error)throw Dn.create("token-update-failed",{errorInfo:we.error.message});if(!we.token)throw Dn.create("token-update-no-token");return we.token})).apply(this,arguments)}function Fn(E,T){return gc.apply(this,arguments)}function gc(){return(gc=(0,O.Z)(function*(E,T){var x;const Z={method:"DELETE",headers:yield Os(E)};try{const we=yield(yield fetch(`${_o(E.appConfig)}/${T}`,Z)).json();if(we.error)throw Dn.create("token-unsubscribe-failed",{errorInfo:we.error.message})}catch(ie){throw Dn.create("token-unsubscribe-failed",{errorInfo:null===(x=ie)||void 0===x?void 0:x.toString()})}})).apply(this,arguments)}function _o({projectId:E}){return`${Zo}/projects/${E}/registrations`}function Os(E){return zn.apply(this,arguments)}function zn(){return(zn=(0,O.Z)(function*({appConfig:E,installations:T}){const x=yield T.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":E.apiKey,"x-goog-firebase-installations-auth":`FIS ${x}`})})).apply(this,arguments)}function Qo({p256dh:E,auth:T,endpoint:x,vapidKey:L}){const Z={web:{endpoint:x,auth:T,p256dh:E}};return L!==ho&&(Z.web.applicationPubKey=L),Z}const wo=6048e5;function Qi(){return Qi=(0,O.Z)(function*(E){const T=yield function mc(E,T){return yc.apply(this,arguments)}(E.swRegistration,E.vapidKey),x={vapidKey:E.vapidKey,swScope:E.swRegistration.scope,endpoint:T.endpoint,auth:Ri(T.getKey("auth")),p256dh:Ri(T.getKey("p256dh"))},L=yield qa(E.firebaseDependencies);if(L){if(function Ja(E,T){return T.vapidKey===E.vapidKey&&T.endpoint===E.endpoint&&T.auth===E.auth&&T.p256dh===E.p256dh}(L.subscriptionOptions,x))return Date.now()>=L.createTime+wo?function It(E,T){return Ya.apply(this,arguments)}(E,{token:L.token,createTime:Date.now(),subscriptionOptions:x}):L.token;try{yield Fn(E.firebaseDependencies,L.token)}catch(Z){console.warn(Z)}return Jl(E.firebaseDependencies,x)}return Jl(E.firebaseDependencies,x)}),Qi.apply(this,arguments)}function Xo(){return Xo=(0,O.Z)(function*(E){const T=yield qa(E.firebaseDependencies);T&&(yield Fn(E.firebaseDependencies,T.token),yield function Ql(E){return mo.apply(this,arguments)}(E.firebaseDependencies));const x=yield E.swRegistration.pushManager.getSubscription();return!x||x.unsubscribe()}),Xo.apply(this,arguments)}function Ya(){return Ya=(0,O.Z)(function*(E,T){try{const x=yield function vo(E,T){return Ns.apply(this,arguments)}(E.firebaseDependencies,T),L=Object.assign(Object.assign({},T),{token:x,createTime:Date.now()});return yield Rs(E.firebaseDependencies,L),x}catch(x){throw yield function Jo(E){return Xo.apply(this,arguments)}(E),x}}),Ya.apply(this,arguments)}function Jl(E,T){return Qa.apply(this,arguments)}function Qa(){return(Qa=(0,O.Z)(function*(E,T){const L={token:yield Ka(E,T),createTime:Date.now(),subscriptionOptions:T};return yield Rs(E,L),L.token})).apply(this,arguments)}function yc(){return(yc=(0,O.Z)(function*(E,T){return(yield E.pushManager.getSubscription())||E.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Wp(T)})})).apply(this,arguments)}function qh(E){const T={from:E.from,collapseKey:E.collapse_key,messageId:E.fcmMessageId};return function vc(E,T){if(!T.notification)return;E.notification={};const x=T.notification.title;x&&(E.notification.title=x);const L=T.notification.body;L&&(E.notification.body=L);const Z=T.notification.image;Z&&(E.notification.image=Z)}(T,E),function me(E,T){T.data&&(E.data=T.data)}(T,E),function zt(E,T){var x,L,Z,ie,we;if(!(T.fcmOptions||null!==(x=T.notification)&&void 0!==x&&x.click_action))return;E.fcmOptions={};const qe=null!==(Z=null===(L=T.fcmOptions)||void 0===L?void 0:L.link)&&void 0!==Z?Z:null===(ie=T.notification)||void 0===ie?void 0:ie.click_action;qe&&(E.fcmOptions.link=qe);const ht=null===(we=T.fcmOptions)||void 0===we?void 0:we.analytics_label;ht&&(E.fcmOptions.analyticsLabel=ht)}(T,E),T}function Xl(E,T){const x=[];for(let L=0;L<E.length;L++)x.push(E.charAt(L)),L<T.length&&x.push(T.charAt(L));return x.join("")}function ea(E){return Dn.create("missing-app-config-values",{valueName:E})}Xl("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Xl("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Xa{constructor(T,x,L){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Z=function cr(E){if(!E||!E.options)throw ea("App Configuration Object");if(!E.name)throw ea("App Name");const T=["projectId","apiKey","appId","messagingSenderId"],{options:x}=E;for(const L of T)if(!x[L])throw ea(L);return{appName:E.name,projectId:x.projectId,apiKey:x.apiKey,appId:x.appId,senderId:x.messagingSenderId}}(T);this.firebaseDependencies={app:T,appConfig:Z,installations:x,analyticsProvider:L}}_delete(){return Promise.resolve()}}function Hr(E){return eu.apply(this,arguments)}function eu(){return(eu=(0,O.Z)(function*(E){var T;try{E.swRegistration=yield navigator.serviceWorker.register(lc,{scope:Yi}),E.swRegistration.update().catch(()=>{})}catch(x){throw Dn.create("failed-service-worker-registration",{browserErrorMessage:null===(T=x)||void 0===T?void 0:T.message})}})).apply(this,arguments)}function ed(){return(ed=(0,O.Z)(function*(E,T){if(!T&&!E.swRegistration&&(yield Hr(E)),T||!E.swRegistration){if(!(T instanceof ServiceWorkerRegistration))throw Dn.create("invalid-sw-registration");E.swRegistration=T}})).apply(this,arguments)}function nu(){return(nu=(0,O.Z)(function*(E,T){T?E.vapidKey=T:E.vapidKey||(E.vapidKey=ho)})).apply(this,arguments)}function zr(){return zr=(0,O.Z)(function*(E,T){if(!navigator)throw Dn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Dn.create("permission-blocked");return yield function wc(E,T){return nu.apply(this,arguments)}(E,T?.vapidKey),yield function tu(E,T){return ed.apply(this,arguments)}(E,T?.serviceWorkerRegistration),function Za(E){return Qi.apply(this,arguments)}(E)}),zr.apply(this,arguments)}function Ps(){return(Ps=(0,O.Z)(function*(E,T,x){const L=function Ni(E){switch(E){case As.NOTIFICATION_CLICKED:return"notification_open";case As.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(T);(yield E.firebaseDependencies.analyticsProvider.get()).logEvent(L,{message_id:x[dc],message_name:x[zh],message_time:x[Gh],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function ta(){return ta=(0,O.Z)(function*(E,T){const x=T.data;if(!x.isFirebaseMessaging)return;E.onMessageHandler&&x.messageType===As.PUSH_RECEIVED&&("function"==typeof E.onMessageHandler?E.onMessageHandler(qh(x)):E.onMessageHandler.next(qh(x)));const L=x.data;(function _c(E){return"object"==typeof E&&!!E&&dc in E})(L)&&"1"===L[Gp]&&(yield function fs(E,T,x){return Ps.apply(this,arguments)}(E,x.messageType,L))}),ta.apply(this,arguments)}const nd="@firebase/messaging",Ec=E=>{const T=new Xa(E.getProvider("app").getImmediate(),E.getProvider("installations-internal").getImmediate(),E.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",x=>function td(E,T){return ta.apply(this,arguments)}(T,x)),T},Ji=E=>{const T=E.getProvider("messaging").getImmediate();return{getToken:L=>function Gn(E,T){return zr.apply(this,arguments)}(T,L)}};function Dc(){return id.apply(this,arguments)}function id(){return(id=(0,O.Z)(function*(){try{yield(0,te.eu)()}catch{return!1}return typeof window<"u"&&(0,te.hl)()&&(0,te.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function rd(){(0,oe._registerComponent)(new re.wA("messaging",Ec,"PUBLIC")),(0,oe._registerComponent)(new re.wA("messaging-internal",Ji,"PRIVATE")),(0,oe.registerVersion)(nd,"0.9.16"),(0,oe.registerVersion)(nd,"0.9.16","esm2017")}();const od="analytics",Mr="firebase_id",Io="origin",ln=6e4,Eo="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",bc="https://www.googletagmanager.com/gtag/js",lr=new ge.Yd("@firebase/analytics");function Yh(E){return Promise.all(E.map(T=>T.catch(x=>x)))}function ks(){return(ks=(0,O.Z)(function*(E,T,x,L,Z,ie){const we=L[Z];try{if(we)yield T[we];else{const ht=(yield Yh(x)).find(Y=>Y.measurementId===Z);ht&&(yield T[ht.appId])}}catch(qe){lr.error(qe)}E("config",Z,ie)})).apply(this,arguments)}function ps(){return(ps=(0,O.Z)(function*(E,T,x,L,Z){try{let ie=[];if(Z&&Z.send_to){let we=Z.send_to;Array.isArray(we)||(we=[we]);const qe=yield Yh(x);for(const ht of we){const Y=qe.find(lt=>lt.measurementId===ht),pt=Y&&T[Y.appId];if(!pt){ie=[];break}ie.push(pt)}}0===ie.length&&(ie=Object.values(T)),yield Promise.all(ie),E("event",L,Z||{})}catch(ie){lr.error(ie)}})).apply(this,arguments)}const si=new te.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),iu=30,ud=new class Ls{constructor(T={},x=1e3){this.throttleMetadata=T,this.intervalMillis=x}getThrottleMetadata(T){return this.throttleMetadata[T]}setThrottleMetadata(T,x){this.throttleMetadata[T]=x}deleteThrottleMetadata(T){delete this.throttleMetadata[T]}};function Qh(E){return new Headers({Accept:"application/json","x-goog-api-key":E})}function sa(){return(sa=(0,O.Z)(function*(E){var T;const{appId:x,apiKey:L}=E,Z={method:"GET",headers:Qh(L)},ie=Eo.replace("{app-id}",x),we=yield fetch(ie,Z);if(200!==we.status&&304!==we.status){let qe="";try{const ht=yield we.json();null!==(T=ht.error)&&void 0!==T&&T.message&&(qe=ht.error.message)}catch{}throw si.create("config-fetch-failed",{httpStatus:we.status,responseMessage:qe})}return we.json()})).apply(this,arguments)}function oa(){return(oa=(0,O.Z)(function*(E,T=ud,x){const{appId:L,apiKey:Z,measurementId:ie}=E.options;if(!L)throw si.create("no-app-id");if(!Z){if(ie)return{measurementId:ie,appId:L};throw si.create("no-api-key")}const we=T.getThrottleMetadata(L)||{backoffCount:0,throttleEndTimeMillis:Date.now()},qe=new aa;return setTimeout((0,O.Z)(function*(){qe.abort()}),void 0!==x?x:ln),Xi({appId:L,apiKey:Z,measurementId:ie},we,qe,T)})).apply(this,arguments)}function Xi(E,T,x){return es.apply(this,arguments)}function es(){return es=(0,O.Z)(function*(E,{throttleEndTimeMillis:T,backoffCount:x},L,Z=ud){var ie,we;const{appId:qe,measurementId:ht}=E;try{yield function bo(E,T){return new Promise((x,L)=>{const Z=Math.max(T-Date.now(),0),ie=setTimeout(x,Z);E.addEventListener(()=>{clearTimeout(ie),L(si.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(L,T)}catch(Y){if(ht)return lr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ht} provided in the "measurementId" field in the local Firebase config. [${null===(ie=Y)||void 0===ie?void 0:ie.message}]`),{appId:qe,measurementId:ht};throw Y}try{const Y=yield function Fs(E){return sa.apply(this,arguments)}(E);return Z.deleteThrottleMetadata(qe),Y}catch(Y){const pt=Y;if(!function Cc(E){if(!(E instanceof te.ZR&&E.customData))return!1;const T=Number(E.customData.httpStatus);return 429===T||500===T||503===T||504===T}(pt)){if(Z.deleteThrottleMetadata(qe),ht)return lr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ht} provided in the "measurementId" field in the local Firebase config. [${pt?.message}]`),{appId:qe,measurementId:ht};throw Y}const lt=503===Number(null===(we=pt?.customData)||void 0===we?void 0:we.httpStatus)?(0,te.$s)(x,Z.intervalMillis,iu):(0,te.$s)(x,Z.intervalMillis),hn={throttleEndTimeMillis:Date.now()+lt,backoffCount:x+1};return Z.setThrottleMetadata(qe,hn),lr.debug(`Calling attemptFetch again in ${lt} millis`),Xi(E,hn,L,Z)}}),es.apply(this,arguments)}class aa{constructor(){this.listeners=[]}addEventListener(T){this.listeners.push(T)}abort(){this.listeners.forEach(T=>T())}}let su,ys;function ms(){return(ms=(0,O.Z)(function*(E,T,x,L,Z){if(Z&&Z.global)E("event",x,L);else{const ie=yield T;E("event",x,Object.assign(Object.assign({},L),{send_to:ie}))}})).apply(this,arguments)}function Sc(){return(Sc=(0,O.Z)(function*(){var E;if(!(0,te.hl)())return lr.warn(si.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,te.eu)()}catch(T){return lr.warn(si.create("indexeddb-unavailable",{errorInfo:null===(E=T)||void 0===E?void 0:E.toString()}).message),!1}return!0})).apply(this,arguments)}function fa(){return fa=(0,O.Z)(function*(E,T,x,L,Z,ie,we){var qe;const ht=function vn(E){return oa.apply(this,arguments)}(E);ht.then(gt=>{x[gt.measurementId]=gt.appId,E.options.measurementId&&gt.measurementId!==E.options.measurementId&&lr.warn(`The measurement ID in the local Firebase config (${E.options.measurementId}) does not match the measurement ID fetched from the server (${gt.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(gt=>lr.error(gt)),T.push(ht);const Y=function ha(){return Sc.apply(this,arguments)}().then(gt=>{if(gt)return L.getId()}),[pt,lt]=yield Promise.all([ht,Y]);(function Do(){const E=window.document.getElementsByTagName("script");for(const T of Object.values(E))if(T.src&&T.src.includes(bc))return T;return null})()||function Kp(E,T){const x=document.createElement("script");x.src=`${bc}?l=${E}&id=${T}`,x.async=!0,document.head.appendChild(x)}(ie,pt.measurementId),ys&&(Z("consent","default",ys),function da(E){ys=E}(void 0)),Z("js",new Date);const hn=null!==(qe=we?.config)&&void 0!==qe?qe:{};return hn[Io]="firebase",hn.update=!0,null!=lt&&(hn[Mr]=lt),Z("config",pt.measurementId,hn),su&&(Z("set",su),function uu(E){su=E}(void 0)),pt.measurementId}),fa.apply(this,arguments)}class cd{constructor(T){this.app=T}_delete(){return delete Oi[this.app.options.appId],Promise.resolve()}}let Oi={},cu=[];const Vs={};let lu,ts,Pi="dataLayer",ld="gtag",_i=!1;function du(E,T,x){!function dd(){const E=[];if((0,te.ru)()&&E.push("This is a browser extension environment."),(0,te.zI)()||E.push("Cookies are not available."),E.length>0){const T=E.map((L,Z)=>`(${Z+1}) ${L}`).join(" "),x=si.create("invalid-analytics-context",{errorInfo:T});lr.warn(x.message)}}();const L=E.options.appId;if(!L)throw si.create("no-app-id");if(!E.options.apiKey){if(!E.options.measurementId)throw si.create("no-api-key");lr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${E.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Oi[L])throw si.create("already-exists",{id:L});if(!_i){!function Zp(E){let T=[];Array.isArray(window[E])?T=window[E]:window[E]=T}(Pi);const{wrappedGtag:ie,gtagCore:we}=function ia(E,T,x,L,Z){let ie=function(...we){window[L].push(arguments)};return window[Z]&&"function"==typeof window[Z]&&(ie=window[Z]),window[Z]=function ra(E,T,x,L){function ie(){return ie=(0,O.Z)(function*(we,qe,ht){try{"event"===we?yield function Tc(E,T,x,L,Z){return ps.apply(this,arguments)}(E,T,x,qe,ht):"config"===we?yield function na(E,T,x,L,Z,ie){return ks.apply(this,arguments)}(E,T,x,L,qe,ht):"consent"===we?E("consent","update",ht):E("set",qe)}catch(Y){lr.error(Y)}}),ie.apply(this,arguments)}return function Z(we,qe,ht){return ie.apply(this,arguments)}}(ie,E,T,x),{gtagCore:ie,wrappedGtag:window[Z]}}(Oi,cu,Vs,Pi,ld);ts=ie,lu=we,_i=!0}return Oi[L]=function Us(E,T,x,L,Z,ie,we){return fa.apply(this,arguments)}(E,cu,Vs,T,lu,Pi,x),new cd(E)}function hu(){return ns.apply(this,arguments)}function ns(){return(ns=(0,O.Z)(function*(){if((0,te.ru)()||!(0,te.zI)()||!(0,te.hl)())return!1;try{return yield(0,te.eu)()}catch{return!1}})).apply(this,arguments)}const Ht="@firebase/analytics";!function Qp(){(0,oe._registerComponent)(new re.wA(od,(T,{options:x})=>du(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),x),"PUBLIC")),(0,oe._registerComponent)(new re.wA("analytics-internal",function E(T){try{const x=T.getProvider(od).getImmediate();return{logEvent:(L,Z,ie)=>function Xh(E,T,x,L){E=(0,te.m9)(E),function ou(E,T,x,L,Z){return ms.apply(this,arguments)}(ts,Oi[E.app.options.appId],T,x,L).catch(Z=>lr.error(Z))}(x,L,Z,ie)}}catch(x){throw si.create("interop-component-reg-failed",{reason:x})}},"PRIVATE")),(0,oe.registerVersion)(Ht,"0.8.0"),(0,oe.registerVersion)(Ht,"0.8.0","esm2017")}();var pu=P(4408),tf=P(7565);const nf=new class pd extends tf.v{}(class ef extends pu.o{constructor(T,x){super(T,x),this.scheduler=T,this.work=x}schedule(T,x=0){return x>0?super.schedule(T,x):(this.delay=x,this.state=T,this.scheduler.flush(this),this)}execute(T,x){return x>0||this.closed?super.execute(T,x):this._execute(T,x)}requestAsyncId(T,x,L=0){return null!=L&&L>0||null==L&&this.delay>0?super.requestAsyncId(T,x,L):(T.flush(this),0)}});var rf=P(4986),Rc=P(8505),dn=P(9468),mu=P(5363);const yu=new v.GfV("7.6.1"),Nc="__angularfire_symbol__analyticsIsSupportedValue",Gr="__angularfire_symbol__analyticsIsSupported",ki="__angularfire_symbol__remoteConfigIsSupportedValue",vu="__angularfire_symbol__remoteConfigIsSupported",ma="__angularfire_symbol__messagingIsSupportedValue",Ao="__angularfire_symbol__messagingIsSupported";function Rr(E,T,x){if(T){if(1===T.length)return T[0];const ie=T.filter(we=>we.app===x);if(1===ie.length)return ie[0]}return x.container.getProvider(E).getImmediate({optional:!0})}globalThis[Gr]||(globalThis[Gr]=hu().then(E=>globalThis[Nc]=E).catch(()=>globalThis[Nc]=!1)),globalThis[Ao]||(globalThis[Ao]=Dc().then(E=>globalThis[ma]=E).catch(()=>globalThis[ma]=!1)),globalThis[vu]||(globalThis[vu]=Ko().then(E=>globalThis[ki]=E).catch(()=>globalThis[ki]=!1));const _r=(E,T)=>{const x=T?[T]:(0,Q.C6)(),L=[];return x.forEach(Z=>{Z.container.getProvider(E).instances.forEach(we=>{L.includes(we)||L.push(we)})}),L};function wi(){}class oi{constructor(T,x=nf){this.zone=T,this.delegate=x}now(){return this.delegate.now()}schedule(T,x,L){const Z=this.zone;return this.delegate.schedule(function(we){Z.runGuarded(()=>{T.apply(this,[we])})},x,L)}}class rn{constructor(T){this.zone=T,this.task=null}call(T,x){const L=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",wi,{},wi,wi)),x.pipe((0,Rc.b)({next:L,complete:L,error:L})).subscribe(T).add(L)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let ya=(()=>{class E{constructor(x){this.ngZone=x,this.outsideAngular=x.runOutsideAngular(()=>new oi(Zone.current)),this.insideAngular=x.run(()=>new oi(Zone.current,rf.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return E.\u0275fac=function(x){return new(x||E)(v.LFG(v.R0b))},E.\u0275prov=v.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"}),E})();function tt(){const E=globalThis.\u0275AngularFireScheduler;if(!E)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return E}function Vn(E){return tt(),function vs(E){return function(x){return(x=x.lift(new rn(E.ngZone))).pipe((0,dn.R)(E.outsideAngular),(0,mu.Q)(E.insideAngular))}}(tt())(E)}},2090:(ot,be,P)=>{P.d(be,{$s:()=>no,BH:()=>Be,G6:()=>Me,L:()=>fe,LL:()=>an,Mn:()=>Se,Sg:()=>Ee,UG:()=>pe,US:()=>re,ZB:()=>B,ZR:()=>Ke,b$:()=>Ne,d:()=>Ie,eu:()=>ve,hl:()=>V,jU:()=>Ce,m9:()=>Vt,ne:()=>Ur,pd:()=>fn,r3:()=>ct,ru:()=>De,tV:()=>he,uI:()=>nt,vZ:()=>kt,w1:()=>_e,xO:()=>Hn,xb:()=>Pt,z$:()=>$e,zI:()=>Ve,zd:()=>Yn});const oe=function(q){const U=[];let F=0;for(let $=0;$<q.length;$++){let H=q.charCodeAt($);H<128?U[F++]=H:H<2048?(U[F++]=H>>6|192,U[F++]=63&H|128):55296==(64512&H)&&$+1<q.length&&56320==(64512&q.charCodeAt($+1))?(H=65536+((1023&H)<<10)+(1023&q.charCodeAt(++$)),U[F++]=H>>18|240,U[F++]=H>>12&63|128,U[F++]=H>>6&63|128,U[F++]=63&H|128):(U[F++]=H>>12|224,U[F++]=H>>6&63|128,U[F++]=63&H|128)}return U},re={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(q,U){if(!Array.isArray(q))throw Error("encodeByteArray takes an array as a parameter");this.init_();const F=U?this.byteToCharMapWebSafe_:this.byteToCharMap_,$=[];for(let H=0;H<q.length;H+=3){const Te=q[H],je=H+1<q.length,at=je?q[H+1]:0,tn=H+2<q.length,Jt=tn?q[H+2]:0;let xn=(15&at)<<2|Jt>>6,Qn=63&Jt;tn||(Qn=64,je||(xn=64)),$.push(F[Te>>2],F[(3&Te)<<4|at>>4],F[xn],F[Qn])}return $.join("")},encodeString(q,U){return this.HAS_NATIVE_SUPPORT&&!U?btoa(q):this.encodeByteArray(oe(q),U)},decodeString(q,U){return this.HAS_NATIVE_SUPPORT&&!U?atob(q):function(q){const U=[];let F=0,$=0;for(;F<q.length;){const H=q[F++];if(H<128)U[$++]=String.fromCharCode(H);else if(H>191&&H<224){const Te=q[F++];U[$++]=String.fromCharCode((31&H)<<6|63&Te)}else if(H>239&&H<365){const tn=((7&H)<<18|(63&q[F++])<<12|(63&q[F++])<<6|63&q[F++])-65536;U[$++]=String.fromCharCode(55296+(tn>>10)),U[$++]=String.fromCharCode(56320+(1023&tn))}else{const Te=q[F++],je=q[F++];U[$++]=String.fromCharCode((15&H)<<12|(63&Te)<<6|63&je)}}return U.join("")}(this.decodeStringToByteArray(q,U))},decodeStringToByteArray(q,U){this.init_();const F=U?this.charToByteMapWebSafe_:this.charToByteMap_,$=[];for(let H=0;H<q.length;){const Te=F[q.charAt(H++)],at=H<q.length?F[q.charAt(H)]:0;++H;const Jt=H<q.length?F[q.charAt(H)]:64;++H;const Et=H<q.length?F[q.charAt(H)]:64;if(++H,null==Te||null==at||null==Jt||null==Et)throw Error();$.push(Te<<2|at>>4),64!==Jt&&($.push(at<<4&240|Jt>>2),64!==Et&&$.push(Jt<<6&192|Et))}return $},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let q=0;q<this.ENCODED_VALS.length;q++)this.byteToCharMap_[q]=this.ENCODED_VALS.charAt(q),this.charToByteMap_[this.byteToCharMap_[q]]=q,this.byteToCharMapWebSafe_[q]=this.ENCODED_VALS_WEBSAFE.charAt(q),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[q]]=q,q>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(q)]=q,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(q)]=q)}}},fe=function(q){return function(q){const U=oe(q);return re.encodeByteArray(U,!0)}(q).replace(/\./g,"")},he=function(q){try{return re.decodeString(q,!0)}catch(U){console.error("base64Decode failed: ",U)}return null};function B(q,U){if(!(U instanceof Object))return U;switch(U.constructor){case Date:return new Date(U.getTime());case Object:void 0===q&&(q={});break;case Array:q=[];break;default:return U}for(const F in U)!U.hasOwnProperty(F)||!K(F)||(q[F]=B(q[F],U[F]));return q}function K(q){return"__proto__"!==q}class Be{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((U,F)=>{this.resolve=U,this.reject=F})}wrapCallback(U){return(F,$)=>{F?this.reject(F):this.resolve($),"function"==typeof U&&(this.promise.catch(()=>{}),1===U.length?U(F):U(F,$))}}}function Ee(q,U){if(q.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const $=U||"demo-project",H=q.iat||0,Te=q.sub||q.user_id;if(!Te)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const je=Object.assign({iss:`https://securetoken.google.com/${$}`,aud:$,iat:H,exp:H+3600,auth_time:H,sub:Te,user_id:Te,firebase:{sign_in_provider:"custom",identities:{}}},q);return[fe(JSON.stringify({alg:"none",type:"JWT"})),fe(JSON.stringify(je)),""].join(".")}function $e(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function nt(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test($e())}function pe(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Ce(){return"object"==typeof self&&self.self===self}function De(){const q="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof q&&void 0!==q.id}function Ne(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ie(){return $e().indexOf("Electron/")>=0}function _e(){const q=$e();return q.indexOf("MSIE ")>=0||q.indexOf("Trident/")>=0}function Se(){return $e().indexOf("MSAppHost/")>=0}function Me(){return!pe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function V(){return"object"==typeof indexedDB}function ve(){return new Promise((q,U)=>{try{let F=!0;const $="validate-browser-context-for-indexeddb-analytics-module",H=self.indexedDB.open($);H.onsuccess=()=>{H.result.close(),F||self.indexedDB.deleteDatabase($),q(!0)},H.onupgradeneeded=()=>{F=!1},H.onerror=()=>{var Te;U((null===(Te=H.error)||void 0===Te?void 0:Te.message)||"")}}catch(F){U(F)}})}function Ve(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Ke extends Error{constructor(U,F,$){super(F),this.code=U,this.customData=$,this.name="FirebaseError",Object.setPrototypeOf(this,Ke.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,an.prototype.create)}}class an{constructor(U,F,$){this.service=U,this.serviceName=F,this.errors=$}create(U,...F){const $=F[0]||{},H=`${this.service}/${U}`,Te=this.errors[U],je=Te?function Zn(q,U){return q.replace(Pn,(F,$)=>{const H=U[$];return null!=H?String(H):`<${$}?>`})}(Te,$):"Error";return new Ke(H,`${this.serviceName}: ${je} (${H}).`,$)}}const Pn=/\{\$([^}]+)}/g;function ct(q,U){return Object.prototype.hasOwnProperty.call(q,U)}function Pt(q){for(const U in q)if(Object.prototype.hasOwnProperty.call(q,U))return!1;return!0}function kt(q,U){if(q===U)return!0;const F=Object.keys(q),$=Object.keys(U);for(const H of F){if(!$.includes(H))return!1;const Te=q[H],je=U[H];if(Wt(Te)&&Wt(je)){if(!kt(Te,je))return!1}else if(Te!==je)return!1}for(const H of $)if(!F.includes(H))return!1;return!0}function Wt(q){return null!==q&&"object"==typeof q}function Hn(q){const U=[];for(const[F,$]of Object.entries(q))Array.isArray($)?$.forEach(H=>{U.push(encodeURIComponent(F)+"="+encodeURIComponent(H))}):U.push(encodeURIComponent(F)+"="+encodeURIComponent($));return U.length?"&"+U.join("&"):""}function Yn(q){const U={};return q.replace(/^\?/,"").split("&").forEach($=>{if($){const[H,Te]=$.split("=");U[decodeURIComponent(H)]=decodeURIComponent(Te)}}),U}function fn(q){const U=q.indexOf("?");if(!U)return"";const F=q.indexOf("#",U);return q.substring(U,F>0?F:void 0)}function Ur(q,U){const F=new pn(q,U);return F.subscribe.bind(F)}class pn{constructor(U,F){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=F,this.task.then(()=>{U(this)}).catch($=>{this.error($)})}next(U){this.forEachObserver(F=>{F.next(U)})}error(U){this.forEachObserver(F=>{F.error(U)}),this.close(U)}complete(){this.forEachObserver(U=>{U.complete()}),this.close()}subscribe(U,F,$){let H;if(void 0===U&&void 0===F&&void 0===$)throw new Error("Missing Observer.");H=function hi(q,U){if("object"!=typeof q||null===q)return!1;for(const F of U)if(F in q&&"function"==typeof q[F])return!0;return!1}(U,["next","error","complete"])?U:{next:U,error:F,complete:$},void 0===H.next&&(H.next=Gi),void 0===H.error&&(H.error=Gi),void 0===H.complete&&(H.complete=Gi);const Te=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?H.error(this.finalError):H.complete()}catch{}}),this.observers.push(H),Te}unsubscribeOne(U){void 0===this.observers||void 0===this.observers[U]||(delete this.observers[U],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(U){if(!this.finalized)for(let F=0;F<this.observers.length;F++)this.sendOne(F,U)}sendOne(U,F){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[U])try{F(this.observers[U])}catch($){typeof console<"u"&&console.error&&console.error($)}})}close(U){this.finalized||(this.finalized=!0,void 0!==U&&(this.finalError=U),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Gi(){}const An=1e3,In=2,Wi=144e5,ar=.5;function no(q,U=An,F=In){const $=U*Math.pow(F,q),H=Math.round(ar*$*(Math.random()-.5)*2);return Math.min(Wi,$+H)}function Vt(q){return q&&q._delegate?q._delegate:q}},3730:(ot,be,P)=>{var v=P(4650);let Q=null;function O(){return Q}class te{}const re=new v.OlP("DocumentToken");let ge=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=v.Yz7({token:n,factory:function(){return function fe(){return(0,v.LFG)(j)}()},providedIn:"platform"}),n})();const he=new v.OlP("Location Initialized");let j=(()=>{class n extends ge{constructor(t){super(),this._doc=t,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,o){B()?this._history.pushState(t,r,o):this._location.hash=o}replaceState(t,r,o){B()?this._history.replaceState(t,r,o):this._location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(re))},n.\u0275prov=v.Yz7({token:n,factory:function(){return function K(){return new j((0,v.LFG)(re))}()},providedIn:"platform"}),n})();function B(){return!!window.history.pushState}function Be(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ee(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function $e(n){return n&&"?"!==n[0]?"?"+n:n}let nt=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=v.Yz7({token:n,factory:function(){return(0,v.f3M)(Ce)},providedIn:"root"}),n})();const pe=new v.OlP("appBaseHref");let Ce=(()=>{class n extends nt{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,v.f3M)(re).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Be(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+$e(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,u){const l=this.prepareExternalUrl(o+$e(u));this._platformLocation.pushState(t,r,l)}replaceState(t,r,o,u){const l=this.prepareExternalUrl(o+$e(u));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(ge),v.LFG(pe,8))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),De=(()=>{class n extends nt{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Be(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,u){let l=this.prepareExternalUrl(o+$e(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,o,u){let l=this.prepareExternalUrl(o+$e(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(ge),v.LFG(pe,8))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})(),Ne=(()=>{class n{constructor(t){this._subject=new v.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function Ue(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(Ee(Se(r))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+$e(r))}normalize(t){return n.stripTrailingSlash(function _e(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,Se(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._locationStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+$e(r)),o)}replaceState(t,r="",o=null){this._locationStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+$e(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.normalizeQueryParams=$e,n.joinWithSlash=Be,n.stripTrailingSlash=Ee,n.\u0275fac=function(t){return new(t||n)(v.LFG(nt))},n.\u0275prov=v.Yz7({token:n,factory:function(){return function Ie(){return new Ne((0,v.LFG)(nt))}()},providedIn:"root"}),n})();function Se(n){return n.replace(/\/index.html$/,"")}const ri=/\s+/,Qe=[];let Tt=(()=>{class n{constructor(t,r,o,u){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=o,this._renderer=u,this.initialClasses=Qe,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(ri):Qe}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(ri):t}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const r of t)this._updateState(r,!0);else if(null!=t)for(const r of Object.keys(t))this._updateState(r,Boolean(t[r]));this._applyStateDiff()}_updateState(t,r){const o=this.stateMap.get(t);void 0!==o?(o.enabled!==r&&(o.changed=!0,o.enabled=r),o.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const r=t[0],o=t[1];o.changed?(this._toggleClass(r,o.enabled),o.changed=!1):o.touched||(o.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),o.touched=!1}}_toggleClass(t,r){(t=t.trim()).length>0&&t.split(ri).forEach(o=>{r?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}}return n.\u0275fac=function(t){return new(t||n)(v.Y36(v.ZZ4),v.Y36(v.aQg),v.Y36(v.SBq),v.Y36(v.Qsj))},n.\u0275dir=v.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class Ln{constructor(e,t,r,o){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let pi=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((o,u,l)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new Ln(o.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===u?void 0:u);else if(null!==u){const g=r.get(u);r.move(g,l),yn(g,o)}});for(let o=0,u=r.length;o<u;o++){const g=r.get(o).context;g.index=o,g.count=u,g.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{yn(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(v.Y36(v.s_b),v.Y36(v.Rgc),v.Y36(v.ZZ4))},n.\u0275dir=v.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function yn(n,e){n.context.$implicit=e.item}let hc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=v.oAB({type:n}),n.\u0275inj=v.cJS({}),n})();const xr="server";function Ga(n){return n===xr}let po=(()=>{class n{}return n.\u0275prov=(0,v.Yz7)({token:n,providedIn:"root",factory:()=>new qa((0,v.LFG)(re),window)}),n})();class qa{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Rs(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const u=o.shadowRoot;if(u){const l=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(l)return l}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],o-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=go(this.window.history)||go(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function go(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class ps extends te{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class ra extends ps{static makeCurrent(){!function oe(n){Q||(Q=n)}(new ra)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Do(){return ia=ia||document.querySelector("base"),ia?ia.getAttribute("href"):null}();return null==t?null:function si(n){gs=gs||document.createElement("a"),gs.setAttribute("href",n);const e=gs.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){ia=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function oo(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let gs,ia=null;const iu=new v.OlP("TRANSITION_ID"),Ls=[{provide:v.ip1,useFactory:function ad(n,e,t){return()=>{t.get(v.CZH).donePromise.then(()=>{const r=O(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<o.length;u++)r.remove(o[u])})}},deps:[iu,re,v.zs3],multi:!0}];let Qh=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})();const Fs=new v.OlP("EventManagerPlugins");let sa=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>{o.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let u=0;u<o.length;u++){const l=o[u];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(Fs),v.LFG(v.R0b))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})();class vn{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=O().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let oa=(()=>{class n{constructor(){this.usageCount=new Map}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)0===this.changeUsageCount(r,-1)&&this.onStyleRemoved(r)}onStyleRemoved(t){}onStyleAdded(t){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(t,r){const o=this.usageCount;let u=o.get(t)??0;return u+=r,u>0?o.set(t,u):o.delete(t),u}ngOnDestroy(){for(const t of this.getAllStyles())this.onStyleRemoved(t);this.usageCount.clear()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})(),Xi=(()=>{class n extends oa{constructor(t){super(),this.doc=t,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.forEach(u=>u.remove()),r.delete(t)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}addStyleToHost(t,r){const o=this.doc.createElement("style");o.textContent=r,t.appendChild(o);const u=this.styleRef.get(r);u?u.push(o):this.styleRef.set(r,[o])}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(re))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})();const es={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},bo=/%COMP%/g,To=new v.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function ca(n,e){return e.flat(100).map(t=>t.replace(bo,n))}function au(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let vr=(()=>{class n{constructor(t,r,o,u){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestory=u,this.rendererByCompId=new Map,this.defaultRenderer=new la(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;const o=this.getOrCreateRenderer(t,r);return o instanceof Sc?o.applyToHost(t):o instanceof ha&&o.applyStyles(),o}getOrCreateRenderer(t,r){const o=this.rendererByCompId;let u=o.get(r.id);if(!u){const l=this.eventManager,g=this.sharedStylesHost,I=this.removeStylesOnCompDestory;switch(r.encapsulation){case v.ifc.Emulated:u=new Sc(l,g,r,this.appId,I);break;case v.ifc.ShadowDom:return new uu(l,g,t,r);default:u=new ha(l,g,r,I)}u.onDestroy=()=>o.delete(r.id),o.set(r.id,u)}return u}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(sa),v.LFG(Xi),v.LFG(v.AFp),v.LFG(To))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})();class la{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(es[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(da(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(da(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const u=es[o];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=es[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(v.JOm.DashCase|v.JOm.Important)?e.style.setProperty(t,r,o&v.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&v.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,au(r)):this.eventManager.addEventListener(e,t,au(r))}}function da(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class uu extends la{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=ca(o.id,o.styles);for(const l of u){const g=document.createElement("style");g.textContent=l,this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class ha extends la{constructor(e,t,r,o,u=r.id){super(e),this.sharedStylesHost=t,this.removeStylesOnCompDestory=o,this.rendererUsageCount=0,this.styles=ca(u,r.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class Sc extends ha{constructor(e,t,r,o,u){const l=o+"-"+r.id;super(e,t,r,u,l),this.contentAttr=function Co(n){return"_ngcontent-%COMP%".replace(bo,n)}(l),this.hostAttr=function ua(n){return"_nghost-%COMP%".replace(bo,n)}(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let Us=(()=>{class n extends vn{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(re))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})();const fa=["alt","control","meta","shift"],cd={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Oi={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let cu=(()=>{class n extends vn{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const u=n.parseEventName(r),l=n.eventCallback(u.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,u.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const u=n._normalizeKey(r.pop());let l="",g=r.indexOf("code");if(g>-1&&(r.splice(g,1),l="code."),fa.forEach(b=>{const A=r.indexOf(b);A>-1&&(r.splice(A,1),l+=b+".")}),l+=u,0!=r.length||0===u.length)return null;const I={};return I.domEventName=o,I.fullKey=l,I}static matchEventFullKeyCode(t,r){let o=cd[t.key]||t.key,u="";return r.indexOf("code.")>-1&&(o=t.code,u="code."),!(null==o||!o)&&(o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),fa.forEach(l=>{l!==o&&(0,Oi[l])(t)&&(u+=l+".")}),u+=o,u===r)}static eventCallback(t,r,o){return u=>{n.matchEventFullKeyCode(u,t)&&o.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(re))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})();const hd=(0,v.eFA)(v._c5,"browser",[{provide:v.Lbi,useValue:"browser"},{provide:v.g9A,useValue:function _i(){ra.makeCurrent()},multi:!0},{provide:re,useFactory:function dd(){return(0,v.RDi)(document),document},deps:[]}]),Ac=new v.OlP(""),hu=[{provide:v.rWj,useClass:class ud{addToWindow(e){v.dqk.getAngularTestability=(r,o=!0)=>{const u=e.findTestabilityInTree(r,o);if(null==u)throw new Error("Could not find testability for element.");return u},v.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),v.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),v.dqk.frameworkStabilizers||(v.dqk.frameworkStabilizers=[]),v.dqk.frameworkStabilizers.push(r=>{const o=v.dqk.getAllAngularTestabilities();let u=o.length,l=!1;const g=function(I){l=l||I,u--,0==u&&r(l)};o.forEach(function(I){I.whenStable(g)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:v.lri,useClass:v.dDg,deps:[v.R0b,v.eoX,v.rWj]},{provide:v.dDg,useClass:v.dDg,deps:[v.R0b,v.eoX,v.rWj]}],ns=[{provide:v.zSh,useValue:"root"},{provide:v.qLn,useFactory:function Yp(){return new v.qLn},deps:[]},{provide:Fs,useClass:Us,multi:!0,deps:[re,v.R0b,v.Lbi]},{provide:Fs,useClass:cu,multi:!0,deps:[re]},{provide:vr,useClass:vr,deps:[sa,Xi,v.AFp,To]},{provide:v.FYo,useExisting:vr},{provide:oa,useExisting:Xi},{provide:Xi,useClass:Xi,deps:[re]},{provide:sa,useClass:sa,deps:[Fs,v.R0b]},{provide:class Ql{},useClass:Qh,deps:[]},[]];let pa=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:v.AFp,useValue:t.appId},{provide:iu,useExisting:v.AFp},Ls]}}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(Ac,12))},n.\u0275mod=v.oAB({type:n}),n.\u0275inj=v.cJS({providers:[...ns,...hu],imports:[hc,v.hGG]}),n})(),Xh=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(re))},n.\u0275prov=v.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function ga(){return new Xh((0,v.LFG)(re))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var _r=P(2011),wi=P(4986),oi=P(9751),rn=P(8996),ya=P(7669);function tt(...n){const e=(0,ya.yG)(n);return(0,rn.D)(n,e)}var Un=P(5813),Wr=P(8189);function wu(...n){return function Jp(){return(0,Wr.J)(1)}()((0,rn.D)(n,(0,ya.yG)(n)))}var Vn=P(4482);function vs(...n){const e=(0,ya.yG)(n);return(0,Vn.e)((t,r)=>{(e?wu(n,t,e):wu(n,t)).subscribe(r)})}var Xn=P(5403);function xo(){return(0,Vn.e)((n,e)=>{let t,r=!1;n.subscribe((0,Xn.x)(e,o=>{const u=t;t=o,r&&e.next([u,o]),r=!0}))})}var E=P(4004);function x(n,e){return(0,Vn.e)(function T(n,e,t,r,o){return(u,l)=>{let g=t,I=e,b=0;u.subscribe((0,Xn.x)(l,A=>{const N=b++;I=g?n(I,A,N):(g=!0,A),r&&l.next(I)},o&&(()=>{g&&l.next(I),l.complete()})))}}(n,e,arguments.length>=2,!0))}var L=P(4671);function ie(n,e){return n===e}function we(n,e){return(0,Vn.e)((t,r)=>{let o=0;t.subscribe((0,Xn.x)(r,u=>n.call(e,u,o++)&&r.next(u)))})}P(1451);var Ze,ht=P(3942),Y=P(5861),pt=P(9681),lt=P(4859),hn=P(1877),gt=P(2090),va=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},qr={},Oc=Oc||{},_t=va||self;function Kr(){}function Li(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Fi(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var gd="closure_uid_"+(1e9*Math.random()>>>0),Xp=0;function Y_(n,e,t){return n.call.apply(n.bind,arguments)}function eg(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function wr(n,e,t){return(wr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Y_:eg).apply(null,arguments)}function Bs(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Nr(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,o,u){for(var l=Array(arguments.length-2),g=2;g<arguments.length;g++)l[g-2]=arguments[g];return e.prototype[o].apply(r,l)}}function _a(){this.s=this.s,this.o=this.o}var Q_={};_a.prototype.s=!1,_a.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function Pc(n){return Object.prototype.hasOwnProperty.call(n,gd)&&n[gd]||(n[gd]=++Xp)}(this);delete Q_[n]}},_a.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const ty=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},ny=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,o="string"==typeof n?n.split(""):n;for(let u=0;u<r;u++)u in o&&e.call(t,o[u],u,n)};function ry(n){return Array.prototype.concat.apply([],arguments)}function kc(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Lc(n){return/^[\s\xa0]*$/.test(n)}var Pr,md=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Or(n,e){return-1!=n.indexOf(e)}function yd(n,e){return n<e?-1:n>e?1:0}e:{var Ui=_t.navigator;if(Ui){var tg=Ui.userAgent;if(tg){Pr=tg;break e}}Pr=""}function uf(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function ng(n){const e={};for(const t in n)e[t]=n[t];return e}var cf="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Iu(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let u=0;u<cf.length;u++)t=cf[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function lf(n){return lf[" "](n),n}lf[" "]=Kr;var Eu,n,iy=Or(Pr,"Opera"),Mo=Or(Pr,"Trident")||Or(Pr,"MSIE"),rg=Or(Pr,"Edge"),Fc=rg||Mo,Zr=Or(Pr,"Gecko")&&!(Or(Pr.toLowerCase(),"webkit")&&!Or(Pr,"Edge"))&&!(Or(Pr,"Trident")||Or(Pr,"MSIE"))&&!Or(Pr,"Edge"),vd=Or(Pr.toLowerCase(),"webkit")&&!Or(Pr,"Edge");function _d(){var n=_t.document;return n?n.documentMode:void 0}e:{var dr="",wa=(n=Pr,Zr?/rv:([^\);]+)(\)|;)/.exec(n):rg?/Edge\/([\d\.]+)/.exec(n):Mo?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):vd?/WebKit\/(\S+)/.exec(n):iy?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(wa&&(dr=wa?wa[1]:""),Mo){var hf=_d();if(null!=hf&&hf>parseFloat(dr)){Eu=String(hf);break e}}Eu=dr}var Ro={};var ig=_t.document&&Mo&&(_d()||parseInt(Eu,10))||void 0,ff=function(){if(!_t.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{_t.addEventListener("test",Kr,e),_t.removeEventListener("test",Kr,e)}catch{}return n}();function Ir(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Uc(n,e){if(Ir.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Zr){e:{try{lf(e.nodeName);var o=!0;break e}catch{}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:pf[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Uc.Z.h.call(this)}}Ir.prototype.h=function(){this.defaultPrevented=!0},Nr(Uc,Ir);var pf={2:"touch",3:"pen",4:"mouse"};Uc.prototype.h=function(){Uc.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Ia="closure_listenable_"+(1e6*Math.random()|0),gf=0;function mf(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=o,this.key=++gf,this.ca=this.fa=!1}function No(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function Ed(n){this.src=n,this.g={},this.h=0}function yf(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],o=ty(r,e);(u=0<=o)&&Array.prototype.splice.call(r,o,1),u&&(No(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Vc(n,e,t,r){for(var o=0;o<n.length;++o){var u=n[o];if(!u.ca&&u.listener==e&&u.capture==!!t&&u.ia==r)return o}return-1}Ed.prototype.add=function(n,e,t,r,o){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var l=Vc(n,e,r,o);return-1<l?(e=n[l],t||(e.fa=!1)):((e=new mf(e,this.src,u,!!r,o)).fa=t,n.push(e)),e};var Bc="closure_lm_"+(1e6*Math.random()|0),jc={};function js(n,e,t,r,o){if(r&&r.once)return bd(n,e,t,r,o);if(Array.isArray(e)){for(var u=0;u<e.length;u++)js(n,e[u],t,r,o);return null}return t=If(t),n&&n[Ia]?n.N(e,t,Fi(r)?!!r.capture:!!r,o):Dd(n,e,t,!1,r,o)}function Dd(n,e,t,r,o,u){if(!e)throw Error("Invalid event type");var l=Fi(o)?!!o.capture:!!o,g=_f(n);if(g||(n[Bc]=g=new Ed(n)),(t=g.add(e,t,r,l,u)).proxy)return t;if(r=function sg(){var e=Td;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)ff||(o=l),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(og(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function bd(n,e,t,r,o){if(Array.isArray(e)){for(var u=0;u<e.length;u++)bd(n,e[u],t,r,o);return null}return t=If(t),n&&n[Ia]?n.O(e,t,Fi(r)?!!r.capture:!!r,o):Dd(n,e,t,!0,r,o)}function Du(n,e,t,r,o){if(Array.isArray(e))for(var u=0;u<e.length;u++)Du(n,e[u],t,r,o);else r=Fi(r)?!!r.capture:!!r,t=If(t),n&&n[Ia]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Vc(u=n.g[e],t,r,o))&&(No(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=_f(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Vc(e,t,r,o)),(t=-1<n?e[n]:null)&&vf(t))}function vf(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Ia])yf(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(og(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=_f(e))?(yf(t,n),0==t.h&&(t.src=null,e[Bc]=null)):No(n)}}}function og(n){return n in jc?jc[n]:jc[n]="on"+n}function Td(n,e){if(n.ca)n=!0;else{e=new Uc(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&vf(n),n=t.call(r,e)}return n}function _f(n){return(n=n[Bc])instanceof Ed?n:null}var wf="__closure_events_fn_"+(1e9*Math.random()>>>0);function If(n){return"function"==typeof n?n:(n[wf]||(n[wf]=function(e){return n.handleEvent(e)}),n[wf])}function Wn(){_a.call(this),this.i=new Ed(this),this.P=this,this.I=null}function er(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Ir(e,n);else if(e instanceof Ir)e.target=e.target||n;else{var o=e;Iu(e=new Ir(r,n),o)}if(o=!0,t)for(var u=t.length-1;0<=u;u--){var l=e.g=t[u];o=$c(l,r,!0,e)&&o}if(o=$c(l=e.g=n,r,!0,e)&&o,o=$c(l,r,!1,e)&&o,t)for(u=0;u<t.length;u++)o=$c(l=e.g=t[u],r,!1,e)&&o}function $c(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,u=0;u<e.length;++u){var l=e[u];if(l&&!l.ca&&l.capture==t){var g=l.listener,I=l.ia||l.src;l.fa&&yf(n.i,l),o=!1!==g.call(I,r)&&o}}return o&&!r.defaultPrevented}Nr(Wn,_a),Wn.prototype[Ia]=!0,Wn.prototype.removeEventListener=function(n,e,t,r){Du(this,n,e,t,r)},Wn.prototype.M=function(){if(Wn.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)No(t[r]);delete n.g[e],n.h--}}this.I=null},Wn.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Wn.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Hc=_t.JSON.stringify;function oy(){var n=Da;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Sd,Ef=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new Df,n=>n.reset());class Df{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Ea(n){_t.setTimeout(()=>{throw n},0)}function Cd(n,e){Sd||function ay(){var n=_t.Promise.resolve(void 0);Sd=function(){n.then(Tf)}}(),bf||(Sd(),bf=!0),Da.add(n,e)}var bf=!1,Da=new class zc{constructor(){this.h=this.g=null}add(e,t){const r=Ef.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function Tf(){for(var n;n=oy();){try{n.h.call(n.g)}catch(t){Ea(t)}var e=Ef;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}bf=!1}function bu(n,e){Wn.call(this),this.h=n||1,this.g=e||_t,this.j=wr(this.kb,this),this.l=Date.now()}function Ad(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function Tu(n,e,t){if("function"==typeof n)t&&(n=wr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=wr(n.handleEvent,n)}return 2147483647<Number(e)?-1:_t.setTimeout(n,e||0)}function xd(n){n.g=Tu(()=>{n.g=null,n.i&&(n.i=!1,xd(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Nr(bu,Wn),(Ze=bu.prototype).da=!1,Ze.S=null,Ze.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),er(this,"tick"),this.da&&(Ad(this),this.start()))}},Ze.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ze.M=function(){bu.Z.M.call(this),Ad(this),delete this.g};class ai extends _a{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:xd(this)}M(){super.M(),this.g&&(_t.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Vi(n){_a.call(this),this.h=n,this.g={}}Nr(Vi,_a);var Cu=[];function Cf(n,e,t,r){Array.isArray(t)||(t&&(Cu[0]=t.toString()),t=Cu);for(var o=0;o<t.length;o++){var u=js(e,t[o],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function Su(n){uf(n.g,function(e,t){this.g.hasOwnProperty(t)&&vf(e)},n),n.g={}}function Oo(){this.g=!0}function xu(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function ag(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var u=o[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var l=1;l<o.length;l++)o[l]=""}}}return Hc(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Vi.prototype.M=function(){Vi.Z.M.call(this),Su(this)},Vi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Oo.prototype.Aa=function(){this.g=!1},Oo.prototype.info=function(){};var ba={},ug=null;function Gc(){return ug=ug||new Wn}function Md(n){Ir.call(this,ba.Ma,n)}function Bn(n){const e=Gc();er(e,new Md(e,n))}function Mu(n,e){Ir.call(this,ba.STAT_EVENT,n),this.stat=e}function Rn(n){const e=Gc();er(e,new Mu(e,n))}function cg(n,e){Ir.call(this,ba.Na,n),this.size=e}function Ii(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return _t.setTimeout(function(){n()},e)}ba.Ma="serverreachability",Nr(Md,Ir),ba.STAT_EVENT="statevent",Nr(Mu,Ir),ba.Na="timingevent",Nr(cg,Ir);var Ta={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Af={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Ru(){}function Wc(){}Ru.prototype.h=null;var Nd,Po={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function qc(){Ir.call(this,"d")}function Rd(){Ir.call(this,"c")}function m(){}function h(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new Vi(this),this.P=_,this.W=new bu(n=Fc?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new p}function p(){this.i=null,this.g="",this.h=!1}Nr(qc,Ir),Nr(Rd,Ir),Nr(m,Ru),m.prototype.g=function(){return new XMLHttpRequest},m.prototype.i=function(){return{}},Nd=new m;var _=45e3,S={},R={};function z(n,e,t){n.K=1,n.v=ly(Bi(e)),n.s=t,n.U=!0,se(n,null)}function se(n,e){n.F=Date.now(),ut(n),n.A=Bi(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),hy(t.h,"t",r),n.C=0,t=n.l.H,n.h=new p,n.g=Eg(n.l,t?e:null,!n.s),0<n.O&&(n.L=new ai(wr(n.Ia,n,n.g),n.O)),Cf(n.V,n.g,"readystatechange",n.gb),e=n.H?ng(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),Bn(1),function Sf(n,e,t,r,o,u){n.info(function(){if(n.g)if(u)for(var l="",g=u.split("&"),I=0;I<g.length;I++){var b=g[I].split("=");if(1<b.length){var A=b[0];b=b[1];var N=A.split("_");l=2<=N.length&&"type"==N[1]?l+(A+"=")+b+"&":l+(A+"=redacted&")}}else l=null;else l=u;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.X,n.s)}function Pe(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function et(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=wt(n,t),o==R){4==e&&(n.o=4,Rn(14),r=!1),xu(n.j,n.m,null,"[Incomplete Response]");break}if(o==S){n.o=4,Rn(15),xu(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}xu(n.j,n.m,o,null),Kc(n,o)}Pe(n)&&o!=R&&o!=S&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Rn(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),Jc(e),e.L=!0,Rn(11))):(xu(n.j,n.m,t,"[Invalid Chunked Response]"),Hs(n),Ca(n))}function wt(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?R:(t=Number(e.substring(t,r)),isNaN(t)?S:(r+=1)+t>e.length?R:(e=e.substr(r,t),n.C=r+t,e))}function ut(n){n.Y=Date.now()+n.P,tr(n,n.P)}function tr(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Ii(wr(n.eb,n),e)}function Ei(n){n.B&&(_t.clearTimeout(n.B),n.B=null)}function Ca(n){0==n.l.G||n.I||y0(n.l,n)}function Hs(n){Ei(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Ad(n.W),Su(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Kc(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||o0(t.i,n)))if(t.I=n.N,!n.J&&o0(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;Bf(t),Ld(t)}Lu(t),Rn(18)}}else t.ta=o[1],0<t.ta-t.U&&37500>o[2]&&t.N&&0==t.A&&!t.v&&(t.v=Ii(wr(t.ab,t),6e3));if(1>=PE(t.i)&&t.ka){try{t.ka()}catch{}t.ka=void 0}}else Xc(t,11)}else if((n.J||t.g==n)&&Bf(t),!Lc(e))for(o=t.Ca.g.parse(e),e=0;e<o.length;e++){let b=o[e];if(t.U=b[0],b=b[1],2==t.G)if("c"==b[0]){t.J=b[1],t.la=b[2];const A=b[3];null!=A&&(t.ma=A,t.h.info("VER="+t.ma));const N=b[4];null!=N&&(t.za=N,t.h.info("SVER="+t.za));const W=b[5];null!=W&&"number"==typeof W&&0<W&&(t.K=r=1.5*W,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const X=n.g;if(X){const de=X.g?X.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(de){var u=r.i;!u.g&&(Or(de,"spdy")||Or(de,"quic")||Or(de,"h2"))&&(u.j=u.l,u.g=new Set,u.h&&(Yc(u,u.h),u.h=null))}if(r.D){const Fe=X.g?X.g.getResponseHeader("X-HTTP-Session-Id"):null;Fe&&(r.sa=Fe,_n(r.F,r.D,Fe))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var l=n;if((r=t).oa=vy(r,r.H?r.la:null,r.W),l.J){pg(r.i,l);var g=l,I=r.K;I&&g.setTimeout(I),g.B&&(Ei(g),ut(g)),r.g=l}else g0(r);0<t.l.length&&Ig(t)}else"stop"!=b[0]&&"close"!=b[0]||Xc(t,7);else 3==t.G&&("stop"==b[0]||"close"==b[0]?"stop"==b[0]?Xc(t,7):my(t):"noop"!=b[0]&&t.j&&t.j.wa(b),t.A=0)}Bn(4)}catch{}}function Od(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Li(n)||"string"==typeof n)ny(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(Li(n)||"string"==typeof n){t=[];for(var r=n.length,o=0;o<r;o++)t.push(o)}else for(o in t=[],r=0,n)t[r++]=o;r=function dg(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(Li(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length;for(var u=0;u<o;u++)e.call(void 0,r[u],t&&t[u],n)}}function ko(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof ko)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function Nu(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];kr(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var o={};for(t=e=0;e<n.g.length;)kr(o,r=n.g[e])||(n.g[t++]=r,o[r]=1),e++;n.g.length=t}}function kr(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(Ze=h.prototype).setTimeout=function(n){this.P=n},Ze.gb=function(n){n=n.target;const e=this.L;e&&3==Sa(n)?e.l():this.Ia(n)},Ze.Ia=function(n){try{if(n==this.g)e:{const A=Sa(this.g);var e=this.g.Da();const N=this.g.ba();if(!(3>A)&&(3!=A||Fc||this.g&&(this.h.h||this.g.ga()||l0(this.g)))){this.I||4!=A||7==e||Bn(8==e||0>=N?3:2),Ei(this);var t=this.g.ba();this.N=t;t:if(Pe(this)){var r=l0(this.g);n="";var o=r.length,u=4==Sa(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Hs(this),Ca(this);var l="";break t}this.h.i=new _t.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.ga();if(this.i=200==t,function Au(n,e,t,r,o,u,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+u+" "+l})}(this.j,this.u,this.A,this.m,this.X,A,t),this.i){if(this.$&&!this.J){t:{if(this.g){var g,I=this.g;if((g=I.g?I.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Lc(g)){var b=g;break t}}b=null}if(!(t=b)){this.i=!1,this.o=3,Rn(12),Hs(this),Ca(this);break e}xu(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Kc(this,t)}this.U?(et(this,A,l),Fc&&this.i&&3==A&&(Cf(this.V,this.W,"tick",this.fb),this.W.start())):(xu(this.j,this.m,l,null),Kc(this,l)),4==A&&Hs(this),this.i&&!this.I&&(4==A?y0(this.l,this):(this.i=!1,ut(this)))}else 400==t&&0<l.indexOf("Unknown SID")?(this.o=3,Rn(12)):(this.o=0,Rn(13)),Hs(this),Ca(this)}}}catch{}},Ze.fb=function(){if(this.g){var n=Sa(this.g),e=this.g.ga();this.C<e.length&&(Ei(this),et(this,n,e),this.i&&4!=n&&ut(this))}},Ze.cancel=function(){this.I=!0,Hs(this)},Ze.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function $s(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Bn(3),Rn(17)),Hs(this),this.o=2,Ca(this)):tr(this,this.Y-n)},(Ze=ko.prototype).R=function(){Nu(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},Ze.T=function(){return Nu(this),this.g.concat()},Ze.get=function(n,e){return kr(this.h,n)?this.h[n]:e},Ze.set=function(n,e){kr(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},Ze.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var o=t[r],u=this.get(o);n.call(e,u,o,this)}};var Lo=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Fo(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Fo){this.g=void 0!==e?e:n.g,Mf(this,n.j),this.s=n.s,uy(this,n.i),cy(this,n.m),this.l=n.l,e=n.h;var t=new Of;t.i=e.i,e.g&&(t.g=new ko(e.g),t.h=e.h),hg(this,t),this.o=n.o}else n&&(t=String(n).match(Lo))?(this.g=!!e,Mf(this,t[1]||"",!0),this.s=Rf(t[2]||""),uy(this,t[3]||"",!0),cy(this,t[4]),this.l=Rf(t[5]||"",!0),hg(this,t[6]||"",!0),this.o=Rf(t[7]||"")):(this.g=!!e,this.h=new Of(null,this.g))}function Bi(n){return new Fo(n)}function Mf(n,e,t){n.j=t?Rf(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function uy(n,e,t){n.i=t?Rf(e,!0):e}function cy(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function hg(n,e,t){e instanceof Of?(n.h=e,function RE(n,e){e&&!n.j&&(gn(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(n0(this,r),hy(this,o,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Nf(e,ME)),n.h=new Of(e,n.g))}function _n(n,e,t){n.h.set(e,t)}function ly(n){return _n(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Rf(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Nf(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,xE),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function xE(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Fo.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Nf(e,e0,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Nf(e,e0,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Nf(t,"/"==t.charAt(0)?fg:t0,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Nf(t,dy)),n.join("")};var e0=/[#\/\?@]/g,t0=/[#\?:]/g,fg=/[#\?]/g,ME=/[#\?@]/g,dy=/#/g;function Of(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function gn(n){n.g||(n.g=new ko,n.h=0,n.i&&function xf(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var u=n[t].substring(0,r);o=n[t].substring(r+1)}else u=n[t];e(u,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function n0(n,e){gn(n),e=Zc(n,e),kr(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,kr((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&Nu(n)))}function r0(n,e){return gn(n),e=Zc(n,e),kr(n.g.h,e)}function hy(n,e,t){n0(n,e),0<t.length&&(n.i=null,n.g.set(Zc(n,e),kc(t)),n.h+=t.length)}function Zc(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}(Ze=Of.prototype).add=function(n,e){gn(this),this.i=null,n=Zc(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Ze.forEach=function(n,e){gn(this),this.g.forEach(function(t,r){ny(t,function(o){n.call(e,o,r,this)},this)},this)},Ze.T=function(){gn(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var o=n[r],u=0;u<o.length;u++)t.push(e[r]);return t},Ze.R=function(n){gn(this);var e=[];if("string"==typeof n)r0(this,n)&&(e=ry(e,this.g.get(Zc(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=ry(e,n[t])}return e},Ze.set=function(n,e){return gn(this),this.i=null,r0(this,n=Zc(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Ze.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},Ze.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],o=encodeURIComponent(String(r));r=this.R(r);for(var u=0;u<r.length;u++){var l=o;""!==r[u]&&(l+="="+encodeURIComponent(String(r[u]))),n.push(l)}}return this.i=n.join("&")};var NE=class{constructor(n,e){this.h=n,this.g=e}};function s0(n){this.l=n||OE,n=_t.PerformanceNavigationTiming?0<(n=_t.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(_t.g&&_t.g.Ea&&_t.g.Ea()&&_t.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var OE=10;function fy(n){return!!n.h||!!n.g&&n.g.size>=n.j}function PE(n){return n.h?1:n.g?n.g.size:0}function o0(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Yc(n,e){n.g?n.g.add(e):n.h=e}function pg(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function py(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return kc(n.i)}function gg(){}function a0(){this.g=new gg}function UT(n,e,t){const r=t||"";try{Od(n,function(o,u){let l=o;Fi(o)&&(l=Hc(o)),e.push(r+u+"="+encodeURIComponent(l))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function Pf(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch{}}function Pd(n){this.l=n.$b||null,this.j=n.ib||!1}function kd(n,e){Wn.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=u0,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}s0.prototype.cancel=function(){if(this.i=py(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},gg.prototype.stringify=function(n){return _t.JSON.stringify(n,void 0)},gg.prototype.parse=function(n){return _t.JSON.parse(n,void 0)},Nr(Pd,Ru),Pd.prototype.g=function(){return new kd(this.l,this.j)},Pd.prototype.i=function(n){return function(){return n}}({}),Nr(kd,Wn);var u0=0;function mg(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function kf(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Qc(n)}function Qc(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Ze=kd.prototype).open=function(n,e){if(this.readyState!=u0)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Qc(this)},Ze.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||_t).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Ze.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,kf(this)),this.readyState=u0},Ze.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Qc(this)),this.g&&(this.readyState=3,Qc(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof _t.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;mg(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},Ze.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?kf(this):Qc(this),3==this.readyState&&mg(this)}},Ze.Ua=function(n){this.g&&(this.response=this.responseText=n,kf(this))},Ze.Ta=function(n){this.g&&(this.response=n,kf(this))},Ze.ha=function(){this.g&&kf(this)},Ze.setRequestHeader=function(n,e){this.v.append(n,e)},Ze.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Ze.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(kd.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var c0=_t.JSON.parse;function nr(n){Wn.call(this),this.headers=new ko,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Ou,this.K=this.L=!1}Nr(nr,Wn);var Ou="",LE=/^https?$/i,gy=["POST","PUT"];function FE(n){return"content-type"==n.toLowerCase()}function vg(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Lf(n),Ff(n)}function Lf(n){n.D||(n.D=!0,er(n,"complete"),er(n,"error"))}function Pu(n){if(n.h&&typeof Oc<"u"&&(!n.C[1]||4!=Sa(n)||2!=n.ba()))if(n.v&&4==Sa(n))Tu(n.Fa,0,n);else if(er(n,"readystatechange"),4==Sa(n)){n.h=!1;try{const g=n.ba();e:switch(g){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===g){var o=String(n.H).match(Lo)[1]||null;if(!o&&_t.self&&_t.self.location){var u=_t.self.location.protocol;o=u.substr(0,u.length-1)}r=!LE.test(o?o.toLowerCase():"")}t=r}if(t)er(n,"complete"),er(n,"success");else{n.m=6;try{var l=2<Sa(n)?n.g.statusText:""}catch{l=""}n.j=l+" ["+n.ba()+"]",Lf(n)}}finally{Ff(n)}}}function Ff(n,e){if(n.g){_g(n);const t=n.g,r=n.C[0]?Kr:null;n.g=null,n.C=null,e||er(n,"ready");try{t.onreadystatechange=r}catch{}}}function _g(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(_t.clearTimeout(n.A),n.A=null)}function Sa(n){return n.g?n.g.readyState:0}function l0(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case Ou:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function ku(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function d0(n){let e="";return uf(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):_n(n,e,t))}function Uf(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function h0(n){this.za=0,this.l=[],this.h=new Oo,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Uf("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Uf("baseRetryDelayMs",5e3,n),this.$a=Uf("retryDelaySeedMs",1e4,n),this.Ya=Uf("forwardChannelMaxRetries",2,n),this.ra=Uf("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new s0(n&&n.concurrentRequestLimit),this.Ca=new a0,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function my(n){if(f0(n),3==n.G){var e=n.V++,t=Bi(n.F);_n(t,"SID",n.J),_n(t,"RID",e),_n(t,"TYPE","terminate"),Vf(n,t),(e=new h(n,n.h,e,void 0)).K=2,e.v=ly(Bi(t)),t=!1,_t.navigator&&_t.navigator.sendBeacon&&(t=_t.navigator.sendBeacon(e.v.toString(),"")),!t&&_t.Image&&((new Image).src=e.v,t=!0),t||(e.g=Eg(e.l,null),e.g.ea(e.v)),e.F=Date.now(),ut(e)}yy(n)}function Ld(n){n.g&&(Jc(n),n.g.cancel(),n.g=null)}function f0(n){Ld(n),n.u&&(_t.clearTimeout(n.u),n.u=null),Bf(n),n.i.cancel(),n.m&&("number"==typeof n.m&&_t.clearTimeout(n.m),n.m=null)}function wg(n,e){n.l.push(new NE(n.Za++,e)),3==n.G&&Ig(n)}function Ig(n){fy(n.i)||n.m||(n.m=!0,Cd(n.Ha,n),n.C=0)}function UE(n,e){var t;t=e?e.m:n.V++;const r=Bi(n.F);_n(r,"SID",n.J),_n(r,"RID",t),_n(r,"AID",n.U),Vf(n,r),n.o&&n.s&&ku(r,n.o,n.s),t=new h(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=Fd(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),Yc(n.i,t),z(t,r,e)}function Vf(n,e){n.j&&Od({},function(t,r){_n(e,r,t)})}function Fd(n,e,t){t=Math.min(n.l.length,t);var r=n.j?wr(n.j.Oa,n.j,n):null;e:{var o=n.l;let u=-1;for(;;){const l=["count="+t];-1==u?0<t?(u=o[0].h,l.push("ofs="+u)):u=0:l.push("ofs="+u);let g=!0;for(let I=0;I<t;I++){let b=o[I].h;const A=o[I].g;if(b-=u,0>b)u=Math.max(0,o[I].h-100),g=!1;else try{UT(A,l,"req"+b+"_")}catch{r&&r(A)}}if(g){r=l.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function g0(n){n.g||n.u||(n.Y=1,Cd(n.Ga,n),n.A=0)}function Lu(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Ii(wr(n.Ga,n),v0(n,n.A)),n.A++,0))}function Jc(n){null!=n.B&&(_t.clearTimeout(n.B),n.B=null)}function m0(n){n.g=new h(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=Bi(n.oa);_n(e,"RID","rpc"),_n(e,"SID",n.J),_n(e,"CI",n.N?"0":"1"),_n(e,"AID",n.U),Vf(n,e),_n(e,"TYPE","xmlhttp"),n.o&&n.s&&ku(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=ly(Bi(e)),t.s=null,t.U=!0,se(t,n)}function Bf(n){null!=n.v&&(_t.clearTimeout(n.v),n.v=null)}function y0(n,e){var t=null;if(n.g==e){Bf(n),Jc(n),n.g=null;var r=2}else{if(!o0(n.i,e))return;t=e.D,pg(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;er(r=Gc(),new cg(r,t,e,o)),Ig(n)}else g0(n);else if(3==(o=e.o)||0==o&&0<n.I||!(1==r&&function p0(n,e){return!(PE(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Ii(wr(n.Ha,n,e),v0(n,n.C)),n.C++,0)))}(n,e)||2==r&&Lu(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),o){case 1:Xc(n,5);break;case 4:Xc(n,10);break;case 3:Xc(n,6);break;default:Xc(n,2)}}function v0(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function Xc(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=wr(n.jb,n);t||(t=new Fo("//www.google.com/images/cleardot.gif"),_t.location&&"http"==_t.location.protocol||Mf(t,"https"),ly(t)),function kE(n,e){const t=new Oo;if(_t.Image){const r=new Image;r.onload=Bs(Pf,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Bs(Pf,t,r,"TestLoadImage: error",!1,e),r.onabort=Bs(Pf,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Bs(Pf,t,r,"TestLoadImage: timeout",!1,e),_t.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Rn(2);n.G=0,n.j&&n.j.va(e),yy(n),f0(n)}function yy(n){n.G=0,n.I=-1,n.j&&((0!=py(n.i).length||0!=n.l.length)&&(n.i.i.length=0,kc(n.l),n.l.length=0),n.j.ua())}function vy(n,e,t){let r=function FT(n){return n instanceof Fo?Bi(n):new Fo(n,void 0)}(t);if(""!=r.i)e&&uy(r,e+"."+r.i),cy(r,r.m);else{const o=_t.location;r=function X_(n,e,t,r){var o=new Fo(null,void 0);return n&&Mf(o,n),e&&uy(o,e),t&&cy(o,t),r&&(o.l=r),o}(o.protocol,e?e+"."+o.hostname:o.hostname,+o.port,t)}return n.aa&&uf(n.aa,function(o,u){_n(r,u,o)}),t=n.sa,(e=n.D)&&t&&_n(r,e,t),_n(r,"VER",n.ma),Vf(n,r),r}function Eg(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new nr(t&&n.Ba&&!n.qa?new Pd({ib:!0}):n.qa)).L=n.H,e}function Dg(){}function bg(){if(Mo&&!(10<=Number(ig)))throw Error("Environmental error: no available transport.")}function Di(n,e){Wn.call(this),this.g=new h0(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!Lc(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Lc(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Vd(this)}function Ud(n){qc.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function _0(){Rd.call(this),this.status=1}function Vd(n){this.g=n}(Ze=nr.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Nd.g(),this.C=function lg(n){return n.h||(n.h=n.i())}(this.u?this.u:Nd),this.g.onreadystatechange=wr(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void vg(this,u)}n=t||"";const o=new ko(this.headers);r&&Od(r,function(u,l){o.set(l,u)}),r=function J_(n){e:{var e=FE;const t=n.length,r="string"==typeof n?n.split(""):n;for(let o=0;o<t;o++)if(o in r&&e.call(void 0,r[o],o,n)){e=o;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(o.T()),t=_t.FormData&&n instanceof _t.FormData,!(0<=ty(gy,e))||r||t||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(u,l){this.g.setRequestHeader(l,u)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{_g(this),0<this.B&&((this.K=function yg(n){return Mo&&function sy(){return function df(n){var e=Ro;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=md(String(Eu)).split("."),t=md("9").split("."),r=Math.max(e.length,t.length);for(let l=0;0==n&&l<r;l++){var o=e[l]||"",u=t[l]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==o[0].length&&0==u[0].length)break;n=yd(0==o[1].length?0:parseInt(o[1],10),0==u[1].length?0:parseInt(u[1],10))||yd(0==o[2].length,0==u[2].length)||yd(o[2],u[2]),o=o[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=wr(this.pa,this)):this.A=Tu(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){vg(this,u)}},Ze.pa=function(){typeof Oc<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,er(this,"timeout"),this.abort(8))},Ze.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,er(this,"complete"),er(this,"abort"),Ff(this))},Ze.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ff(this,!0)),nr.Z.M.call(this)},Ze.Fa=function(){this.s||(this.F||this.v||this.l?Pu(this):this.cb())},Ze.cb=function(){Pu(this)},Ze.ba=function(){try{return 2<Sa(this)?this.g.status:-1}catch{return-1}},Ze.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}},Ze.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),c0(e)}},Ze.Da=function(){return this.m},Ze.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ze=h0.prototype).ma=8,Ze.G=1,Ze.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch{}},Ze.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const o=new h(this,this.h,n,void 0);let u=this.s;if(this.P&&(u?(u=ng(u),Iu(u,this.P)):u=this.P),null===this.o&&(o.H=u),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Fd(this,o,e),_n(t=Bi(this.F),"RID",n),_n(t,"CVER",22),this.D&&_n(t,"X-HTTP-Session-Id",this.D),Vf(this,t),this.o&&u&&ku(t,this.o,u),Yc(this.i,o),this.Ra&&_n(t,"TYPE","init"),this.ja?(_n(t,"$req",e),_n(t,"SID","null"),o.$=!0,z(o,t,null)):z(o,t,e),this.G=2}}else 3==this.G&&(n?UE(this,n):0==this.l.length||fy(this.i)||UE(this))},Ze.Ga=function(){if(this.u=null,m0(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Ii(wr(this.bb,this),n)}},Ze.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Rn(10),Ld(this),m0(this))},Ze.ab=function(){null!=this.v&&(this.v=null,Ld(this),Lu(this),Rn(19))},Ze.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Rn(2)):(this.h.info("Failed to ping google.com"),Rn(1))},(Ze=Dg.prototype).xa=function(){},Ze.wa=function(){},Ze.va=function(){},Ze.ua=function(){},Ze.Oa=function(){},bg.prototype.g=function(n,e){return new Di(n,e)},Nr(Di,Wn),Di.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),Cd(wr(n.hb,n,e))),Rn(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=vy(n,null,n.W),Ig(n)},Di.prototype.close=function(){my(this.g)},Di.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,wg(this.g,e)}else this.v?((e={}).__data__=Hc(n),wg(this.g,e)):wg(this.g,n)},Di.prototype.M=function(){this.g.j=null,delete this.j,my(this.g),delete this.g,Di.Z.M.call(this)},Nr(Ud,qc),Nr(_0,Rd),Nr(Vd,Dg),Vd.prototype.xa=function(){er(this.g,"a")},Vd.prototype.wa=function(n){er(this.g,new Ud(n))},Vd.prototype.va=function(n){er(this.g,new _0(n))},Vd.prototype.ua=function(){er(this.g,"b")},bg.prototype.createWebChannel=bg.prototype.g,Di.prototype.send=Di.prototype.u,Di.prototype.open=Di.prototype.m,Di.prototype.close=Di.prototype.close,Ta.NO_ERROR=0,Ta.TIMEOUT=8,Ta.HTTP_ERROR=6,Af.COMPLETE="complete",Wc.EventType=Po,Po.OPEN="a",Po.CLOSE="b",Po.ERROR="c",Po.MESSAGE="d",Wn.prototype.listen=Wn.prototype.N,nr.prototype.listenOnce=nr.prototype.O,nr.prototype.getLastError=nr.prototype.La,nr.prototype.getLastErrorCode=nr.prototype.Da,nr.prototype.getStatus=nr.prototype.ba,nr.prototype.getResponseJson=nr.prototype.Qa,nr.prototype.getResponseText=nr.prototype.ga,nr.prototype.send=nr.prototype.ea;var VE=qr.createWebChannelTransport=function(){return new bg},BE=qr.getStatEventTarget=function(){return Gc()},_y=qr.ErrorCode=Ta,jE=qr.EventType=Af,$E=qr.Event=ba,el=qr.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Aa=qr.FetchXmlHttpFactory=Pd,Tg=qr.WebChannel=Wc,HE=qr.XhrIo=nr;const zE="@firebase/firestore";class Yr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Yr.UNAUTHENTICATED=new Yr(null),Yr.GOOGLE_CREDENTIALS=new Yr("google-credentials-uid"),Yr.FIRST_PARTY=new Yr("first-party-uid"),Yr.MOCK_USER=new Yr("mock-user");let tl="9.9.1";const nl=new hn.Yd("@firebase/firestore");function Cg(){return nl.logLevel}function Re(n,...e){if(nl.logLevel<=hn.in.DEBUG){const t=e.map(wy);nl.debug(`Firestore (${tl}): ${n}`,...t)}}function rr(n,...e){if(nl.logLevel<=hn.in.ERROR){const t=e.map(wy);nl.error(`Firestore (${tl}): ${n}`,...t)}}function jf(n,...e){if(nl.logLevel<=hn.in.WARN){const t=e.map(wy);nl.warn(`Firestore (${tl}): ${n}`,...t)}}function wy(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function Je(n="Unexpected state"){const e=`FIRESTORE (${tl}) INTERNAL ASSERTION FAILED: `+n;throw rr(e),new Error(e)}function Dt(n,e){n||Je()}function Xe(n,e){return n}const le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ae extends gt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Lr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Iy{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class GE{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Yr.UNAUTHENTICATED))}shutdown(){}}class WE{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class qE{constructor(e){this.t=e,this.currentUser=Yr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const u=b=>this.i!==o?(o=this.i,t(b)):Promise.resolve();let l=new Lr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Lr,e.enqueueRetryable(()=>u(this.currentUser))};const g=()=>{const b=l;e.enqueueRetryable((0,Y.Z)(function*(){yield b.promise,yield u(r.currentUser)}))},I=b=>{Re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.auth.addAuthTokenListener(this.o),g()};this.t.onInit(b=>I(b)),setTimeout(()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?I(b):(Re("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Lr)}},0),g()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Dt("string"==typeof r.accessToken),new Iy(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Dt(null===e||"string"==typeof e),new Yr(e)}}class At{constructor(e,t,r){this.type="FirstParty",this.user=Yr.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const o=e.auth.getAuthHeaderValueForFirstParty([]);o&&this.headers.set("Authorization",o),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class E0{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new At(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Yr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ey{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class D0{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=u=>{null!=u.error&&Re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const l=u.token!==this.p;return this.p=u.token,Re("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const o=u=>{Re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.g.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.g.getImmediate({optional:!0});u?o(u):Re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Dt("string"==typeof t.token),this.p=t.token,new Ey(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function KE(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class Dy{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=KE(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+=e.charAt(o[u]%e.length))}return r}}function Rt(n,e){return n<e?-1:n>e?1:0}function rl(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function b0(n){return n+"\0"}class Nn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ae(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ae(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ae(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ae(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Nn.fromMillis(Date.now())}static fromDate(e){return Nn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Nn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Rt(this.nanoseconds,e.nanoseconds):Rt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class bt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new bt(e)}static min(){return new bt(new Nn(0,0))}static max(){return new bt(new Nn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Bd{constructor(e,t,r){void 0===t?t=0:t>e.length&&Je(),void 0===r?r=e.length-t:r>e.length-t&&Je(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Bd.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Bd?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=e.get(o),l=t.get(o);if(u<l)return-1;if(u>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Kt extends Bd{construct(e,t,r){return new Kt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ae(le.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new Kt(t)}static emptyPath(){return new Kt([])}}const il=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ir extends Bd{construct(e,t,r){return new ir(e,t,r)}static isValidIdentifier(e){return il.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ir.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ir(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(0===r.length)throw new Ae(le.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;o<e.length;){const g=e[o];if("\\"===g){if(o+1===e.length)throw new Ae(le.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const I=e[o+1];if("\\"!==I&&"."!==I&&"`"!==I)throw new Ae(le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=I,o+=2}else"`"===g?(l=!l,o++):"."!==g||l?(r+=g,o++):(u(),o++)}if(u(),l)throw new Ae(le.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ir(t)}static emptyPath(){return new ir([])}}class Ge{constructor(e){this.path=e}static fromPath(e){return new Ge(Kt.fromString(e))}static fromName(e){return new Ge(Kt.fromString(e).popFirst(5))}static empty(){return new Ge(Kt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Kt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Kt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ge(new Kt(e.slice()))}}class jd{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function by(n){return n.fields.find(e=>2===e.kind)}function $d(n){return n.fields.filter(e=>2!==e.kind)}jd.UNKNOWN_ID=-1;class Ty{constructor(e,t){this.fieldPath=e,this.kind=t}}class Sg{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Sg(0,_s.min())}}function T0(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=bt.fromTimestamp(1e9===r?new Nn(t+1,0):new Nn(t,r));return new _s(o,Ge.empty(),e)}function Cy(n){return new _s(n.readTime,n.key,-1)}class _s{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new _s(bt.min(),Ge.empty(),-1)}static max(){return new _s(bt.max(),Ge.empty(),-1)}}function Sy(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ge.comparator(n.documentKey,e.documentKey),0!==t?t:Rt(n.largestBatchId,e.largestBatchId))}const sl="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class C0{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function xa(n){return Hd.apply(this,arguments)}function Hd(){return Hd=(0,Y.Z)(function*(n){if(n.code!==le.FAILED_PRECONDITION||n.message!==sl)throw n;Re("LocalStore","Unexpectedly lost primary lease")}),Hd.apply(this,arguments)}class ae{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Je(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ae((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ae?t:ae.resolve(t)}catch(t){return ae.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ae.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ae.reject(t)}static resolve(e){return new ae((t,r)=>{t(e)})}static reject(e){return new ae((t,r)=>{r(e)})}static waitFor(e){return new ae((t,r)=>{let o=0,u=0,l=!1;e.forEach(g=>{++o,g.next(()=>{++u,l&&u===o&&t()},I=>r(I))}),l=!0,u===o&&t()})}static or(e){let t=ae.resolve(!1);for(const r of e)t=t.next(o=>o?ae.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,u)=>{r.push(t.call(this,o,u))}),this.waitFor(r)}static mapArray(e,t){return new ae((r,o)=>{const u=e.length,l=new Array(u);let g=0;for(let I=0;I<u;I++){const b=I;t(e[b]).next(A=>{l[b]=A,++g,g===u&&r(l)},A=>o(A))}})}static doWhile(e,t){return new ae((r,o)=>{const u=()=>{!0===e()?t().next(()=>{u()},o):r()};u()})}}class $f{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.T=new Lr,this.transaction.oncomplete=()=>{this.T.resolve()},this.transaction.onabort=()=>{t.error?this.T.reject(new Hf(e,t.error)):this.T.resolve()},this.transaction.onerror=r=>{const o=Ag(r.target.error);this.T.reject(new Hf(e,o))}}static open(e,t,r,o){try{return new $f(t,e.transaction(o,r))}catch(u){throw new Hf(t,u)}}get A(){return this.T.promise}abort(e){e&&this.T.reject(e),this.aborted||(Re("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}R(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new YE(t)}}class zs{constructor(e,t,r){this.name=e,this.version=t,this.P=r,12.2===zs.v((0,gt.z$)())&&rr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Re("SimpleDb","Removing database:",e),Uu(window.indexedDB.deleteDatabase(e)).toPromise()}static V(){if(!(0,gt.hl)())return!1;if(zs.S())return!0;const e=(0,gt.z$)(),t=zs.v(e),r=0<t&&t<10,o=zs.D(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static S(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.C)}static N(e,t){return e.store(t)}static v(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static D(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}k(e){var t=this;return(0,Y.Z)(function*(){return t.db||(Re("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=l=>{r(l.target.result)},u.onblocked=()=>{o(new Hf(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=l=>{const g=l.target.error;o("VersionError"===g.name?new Ae(le.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===g.name?new Ae(le.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+g):new Hf(e,g))},u.onupgradeneeded=l=>{Re("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.P.O(l.target.result,u.transaction,l.oldVersion,t.version).next(()=>{Re("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.M&&(t.db.onversionchange=r=>t.M(r)),t.db})()}F(e){this.M=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var u=this;return(0,Y.Z)(function*(){const l="readonly"===t;let g=0;for(;;){++g;try{u.db=yield u.k(e);const I=$f.open(u.db,e,l?"readonly":"readwrite",r),b=o(I).next(A=>(I.R(),A)).catch(A=>(I.abort(A),ae.reject(A))).toPromise();return b.catch(()=>{}),yield I.A,b}catch(I){const b=I,A="FirebaseError"!==b.name&&g<3;if(Re("SimpleDb","Transaction failed with error:",b.message,"Retrying:",A),u.close(),!A)return Promise.reject(b)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class ZE{constructor(e){this.$=e,this.B=!1,this.L=null}get isDone(){return this.B}get U(){return this.L}set cursor(e){this.$=e}done(){this.B=!0}q(e){this.L=e}delete(){return Uu(this.$.delete())}}class Hf extends Ae{constructor(e,t){super(le.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Fu(n){return"IndexedDbTransactionError"===n.name}class YE{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Re("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Re("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Uu(r)}add(e){return Re("SimpleDb","ADD",this.store.name,e,e),Uu(this.store.add(e))}get(e){return Uu(this.store.get(e)).next(t=>(void 0===t&&(t=null),Re("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Re("SimpleDb","DELETE",this.store.name,e),Uu(this.store.delete(e))}count(){return Re("SimpleDb","COUNT",this.store.name),Uu(this.store.count())}K(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),u=[];return this.G(o,(l,g)=>{u.push(g)}).next(()=>u)}{const o=this.store.getAll(r.range);return new ae((u,l)=>{o.onerror=g=>{l(g.target.error)},o.onsuccess=g=>{u(g.target.result)}})}}j(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ae((o,u)=>{r.onerror=l=>{u(l.target.error)},r.onsuccess=l=>{o(l.target.result)}})}W(e,t){Re("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const o=this.cursor(r);return this.G(o,(u,l,g)=>g.delete())}J(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.G(o,t)}Y(e){const t=this.cursor({});return new ae((r,o)=>{t.onerror=u=>{const l=Ag(u.target.error);o(l)},t.onsuccess=u=>{const l=u.target.result;l?e(l.primaryKey,l.value).next(g=>{g?l.continue():r()}):r()}})}G(e,t){const r=[];return new ae((o,u)=>{e.onerror=l=>{u(l.target.error)},e.onsuccess=l=>{const g=l.target.result;if(!g)return void o();const I=new ZE(g),b=t(g.primaryKey,g.value,I);if(b instanceof ae){const A=b.catch(N=>(I.done(),ae.reject(N)));r.push(A)}I.isDone?o():null===I.U?g.continue():g.continue(I.U)}}).next(()=>ae.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Uu(n){return new ae((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=Ag(r.target.error);t(o)}})}let S0=!1;function Ag(n){const e=zs.v((0,gt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ae("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return S0||(S0=!0,setTimeout(()=>{throw r},0)),r}}return n}class A0{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}Z(e){var t=this;Re("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Y.Z)(function*(){t.task=null;try{Re("IndexBackiller",`Documents written: ${yield t.X.tt()}`)}catch(r){Fu(r)?Re("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield xa(r)}yield t.Z(1)}))}}class Ay{constructor(e,t){this.localStore=e,this.persistence=t}tt(e=50){var t=this;return(0,Y.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.et(r,e))})()}et(e,t){const r=new Set;let o=t,u=!0;return ae.doWhile(()=>!0===u&&o>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return Re("IndexBackiller",`Processing collection: ${l}`),this.nt(e,l,o).next(g=>{o-=g,r.add(l)});u=!1})).next(()=>t-o)}nt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(o=>this.localStore.localDocuments.getNextDocuments(e,t,o,r).next(u=>{const l=u.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.st(o,u)).next(g=>(Re("IndexBackiller",`Updating offset: ${g}`),this.localStore.indexManager.updateCollectionGroup(e,t,g))).next(()=>l.size)}))}st(e,t){let r=e;return t.changes.forEach((o,u)=>{const l=Cy(u);Sy(l,r)>0&&(r=l)}),new _s(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class rs{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.it(r),this.rt=r=>t.writeSequenceNumber(r))}it(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.rt&&this.rt(e),e}}function xg(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ol(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function QE(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}rs.ot=-1;class mn{constructor(e,t){this.comparator=e,this.root=t||Qr.EMPTY}insert(e,t){return new mn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Qr.BLACK,null,null))}remove(e){return new mn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Qr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new zf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new zf(this.root,e,this.comparator,!1)}getReverseIterator(){return new zf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new zf(this.root,e,this.comparator,!0)}}class zf{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Qr{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=r??Qr.RED,this.left=o??Qr.EMPTY,this.right=u??Qr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new Qr(e??this.key,t??this.value,r??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===u?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Qr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return Qr.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Qr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Qr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Je();const e=this.left.check();if(e!==this.right.check())throw Je();return e+(this.isRed()?0:1)}}Qr.EMPTY=null,Qr.RED=!0,Qr.BLACK=!1,Qr.EMPTY=new class{constructor(){this.size=0}get key(){throw Je()}get value(){throw Je()}get color(){throw Je()}get left(){throw Je()}get right(){throw Je()}copy(n,e,t,r,o){return this}insert(n,e,t){return new Qr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class sn{constructor(e){this.comparator=e,this.data=new mn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new x0(this.data.getIterator())}getIteratorFrom(e){return new x0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof sn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(o,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new sn(this.comparator);return t.data=e,t}}class x0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function zd(n){return n.hasNext()?n.getNext():void 0}class ui{constructor(e){this.fields=e,e.sort(ir.comparator)}static empty(){return new ui([])}unionWith(e){let t=new sn(ir.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new ui(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return rl(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class sr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new sr(t)}static fromUint8Array(e){const t=function(r){let o="";for(let u=0;u<r.length;++u)o+=String.fromCharCode(r[u]);return o}(e);return new sr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Rt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}sr.EMPTY_BYTE_STRING=new sr("");const Gf=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Uo(n){if(Dt(!!n),"string"==typeof n){let e=0;const t=Gf.exec(n);if(Dt(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:bn(n.seconds),nanos:bn(n.nanos)}}function bn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Vu(n){return"string"==typeof n?sr.fromBase64String(n):sr.fromUint8Array(n)}function Wf(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Mg(n){const e=n.mapValue.fields.__previous_value__;return Wf(e)?Mg(e):e}function al(n){const e=Uo(n.mapValue.fields.__local_write_time__.timestampValue);return new Nn(e.seconds,e.nanos)}class M0{constructor(e,t,r,o,u,l,g,I){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=l,this.autoDetectLongPolling=g,this.useFetchStreams=I}}class Gs{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Gs("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Gs&&e.projectId===this.projectId&&e.database===this.database}}function qf(n){return null==n}function Kf(n){return 0===n&&1/n==-1/0}function xy(n){return"number"==typeof n&&Number.isInteger(n)&&!Kf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Bu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Zf={nullValue:"NULL_VALUE"};function ju(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Wf(n)?4:k0(n)?9007199254740991:10:Je()}function Vo(n,e){if(n===e)return!0;const t=ju(n);if(t!==ju(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return al(n).isEqual(al(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const u=Uo(r.timestampValue),l=Uo(o.timestampValue);return u.seconds===l.seconds&&u.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,Vu(n.bytesValue).isEqual(Vu(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return bn(r.geoPointValue.latitude)===bn(o.geoPointValue.latitude)&&bn(r.geoPointValue.longitude)===bn(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return bn(r.integerValue)===bn(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const u=bn(r.doubleValue),l=bn(o.doubleValue);return u===l?Kf(u)===Kf(l):isNaN(u)&&isNaN(l)}return!1}(n,e);case 9:return rl(n.arrayValue.values||[],e.arrayValue.values||[],Vo);case 10:return function(r,o){const u=r.mapValue.fields||{},l=o.mapValue.fields||{};if(xg(u)!==xg(l))return!1;for(const g in u)if(u.hasOwnProperty(g)&&(void 0===l[g]||!Vo(u[g],l[g])))return!1;return!0}(n,e);default:return Je()}var o}function Yf(n,e){return void 0!==(n.values||[]).find(t=>Vo(t,e))}function hr(n,e){if(n===e)return 0;const t=ju(n),r=ju(e);if(t!==r)return Rt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Rt(n.booleanValue,e.booleanValue);case 2:return function(o,u){const l=bn(o.integerValue||o.doubleValue),g=bn(u.integerValue||u.doubleValue);return l<g?-1:l>g?1:l===g?0:isNaN(l)?isNaN(g)?0:-1:1}(n,e);case 3:return R0(n.timestampValue,e.timestampValue);case 4:return R0(al(n),al(e));case 5:return Rt(n.stringValue,e.stringValue);case 6:return function(o,u){const l=Vu(o),g=Vu(u);return l.compareTo(g)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const l=o.split("/"),g=u.split("/");for(let I=0;I<l.length&&I<g.length;I++){const b=Rt(l[I],g[I]);if(0!==b)return b}return Rt(l.length,g.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const l=Rt(bn(o.latitude),bn(u.latitude));return 0!==l?l:Rt(bn(o.longitude),bn(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,u){const l=o.values||[],g=u.values||[];for(let I=0;I<l.length&&I<g.length;++I){const b=hr(l[I],g[I]);if(b)return b}return Rt(l.length,g.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,u){if(o===Bu.mapValue&&u===Bu.mapValue)return 0;if(o===Bu.mapValue)return 1;if(u===Bu.mapValue)return-1;const l=o.fields||{},g=Object.keys(l),I=u.fields||{},b=Object.keys(I);g.sort(),b.sort();for(let A=0;A<g.length&&A<b.length;++A){const N=Rt(g[A],b[A]);if(0!==N)return N;const W=hr(l[g[A]],I[b[A]]);if(0!==W)return W}return Rt(g.length,b.length)}(n.mapValue,e.mapValue);default:throw Je()}}function R0(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Rt(n,e);const t=Uo(n),r=Uo(e),o=Rt(t.seconds,r.seconds);return 0!==o?o:Rt(t.nanos,r.nanos)}function Wd(n){return N0(n)}function N0(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=Uo(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Vu(n.bytesValue).toBase64():"referenceValue"in n?Ge.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",u=!0;for(const l of r.values||[])u?u=!1:o+=",",o+=N0(l);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",l=!0;for(const g of o)l?l=!1:u+=",",u+=`${g}:${N0(r.fields[g])}`;return u+"}"}(n.mapValue):Je();var e}function Ma(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Rg(n){return!!n&&"integerValue"in n}function Qf(n){return!!n&&"arrayValue"in n}function O0(n){return!!n&&"nullValue"in n}function P0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Jf(n){return!!n&&"mapValue"in n}function Xf(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return ol(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Xf(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Xf(n.arrayValue.values[t]);return e}return Object.assign({},n)}function k0(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function My(n){return"nullValue"in n?Zf:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Ma(Gs.empty(),Ge.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:Je()}function JE(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Ma(Gs.empty(),Ge.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Bu:Je()}function L0(n,e){const t=hr(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function F0(n,e){const t=hr(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Jr{constructor(e){this.value=e}static empty(){return new Jr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Jf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Xf(t)}setAll(e){let t=ir.emptyPath(),r={},o=[];e.forEach((l,g)=>{if(!t.isImmediateParentOf(g)){const I=this.getFieldsMap(t);this.applyChanges(I,r,o),r={},o=[],t=g.popLast()}l?r[g.lastSegment()]=Xf(l):o.push(g.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());Jf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Vo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];Jf(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){ol(t,(o,u)=>e[o]=u);for(const o of r)delete e[o]}clone(){return new Jr(Xf(this.value))}}function U0(n){const e=[];return ol(n.fields,(t,r)=>{const o=new ir([t]);if(Jf(r)){const u=U0(r.mapValue).fields;if(0===u.length)e.push(o);else for(const l of u)e.push(o.child(l))}else e.push(o)}),new ui(e)}class Zt{constructor(e,t,r,o,u,l){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.data=u,this.documentState=l}static newInvalidDocument(e){return new Zt(e,0,bt.min(),bt.min(),Jr.empty(),0)}static newFoundDocument(e,t,r){return new Zt(e,1,t,bt.min(),r,0)}static newNoDocument(e,t){return new Zt(e,2,t,bt.min(),Jr.empty(),0)}static newUnknownDocument(e,t){return new Zt(e,3,t,bt.min(),Jr.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Jr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Jr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=bt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Zt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Zt(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ry{constructor(e,t=null,r=[],o=[],u=null,l=null,g=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=l,this.endAt=g,this.ut=null}}function V0(n,e=null,t=[],r=[],o=null,u=null,l=null){return new Ry(n,e,t,r,o,u,l)}function ul(n){const e=Xe(n);if(null===e.ut){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(o=r).field.canonicalString()+o.op.toString()+Wd(o.value);var o}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),qf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Wd(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Wd(r)).join(",")),e.ut=t}return e.ut}function ep(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let o=0;o<n.orderBy.length;o++)if(!Oy(n.orderBy[o],e.orderBy[o]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let o=0;o<n.filters.length;o++)if((t=n.filters[o]).op!==(r=e.filters[o]).op||!t.field.isEqual(r.field)||!Vo(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!tp(n.startAt,e.startAt)&&tp(n.endAt,e.endAt)}function Ng(n){return Ge.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Og(n,e){return n.filters.filter(t=>t instanceof Xr&&t.field.isEqual(e))}function Pg(n,e,t){let r=Zf,o=!0;for(const u of Og(n,e)){let l=Zf,g=!0;switch(u.op){case"<":case"<=":l=My(u.value);break;case"==":case"in":case">=":l=u.value;break;case">":l=u.value,g=!1;break;case"!=":case"not-in":l=Zf}L0({value:r,inclusive:o},{value:l,inclusive:g})<0&&(r=l,o=g)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];L0({value:r,inclusive:o},{value:l,inclusive:t.inclusive})<0&&(r=l,o=t.inclusive);break}return{value:r,inclusive:o}}function j0(n,e,t){let r=Bu,o=!0;for(const u of Og(n,e)){let l=Bu,g=!0;switch(u.op){case">=":case">":l=JE(u.value),g=!1;break;case"==":case"in":case"<=":l=u.value;break;case"<":l=u.value,g=!1;break;case"!=":case"not-in":l=Bu}F0({value:r,inclusive:o},{value:l,inclusive:g})>0&&(r=l,o=g)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];F0({value:r,inclusive:o},{value:l,inclusive:t.inclusive})>0&&(r=l,o=t.inclusive);break}return{value:r,inclusive:o}}class Xr extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.ct(e,t,r):new kg(e,t,r):"array-contains"===t?new Ny(e,r):"in"===t?new BT(e,r):"not-in"===t?new $0(e,r):"array-contains-any"===t?new H0(e,r):new Xr(e,t,r)}static ct(e,t,r){return"in"===t?new Lg(e,r):new Fg(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.at(hr(t,this.value)):null!==t&&ju(this.value)===ju(t)&&this.at(hr(t,this.value))}at(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Je()}}ht(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class kg extends Xr{constructor(e,t,r){super(e,t,r),this.key=Ge.fromName(r.referenceValue)}matches(e){const t=Ge.comparator(e.key,this.key);return this.at(t)}}class Lg extends Xr{constructor(e,t){super(e,"in",t),this.keys=XE(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Fg extends Xr{constructor(e,t){super(e,"not-in",t),this.keys=XE(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function XE(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ge.fromName(r.referenceValue))}class Ny extends Xr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Qf(t)&&Yf(t.arrayValue,this.value)}}class BT extends Xr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Yf(this.value.arrayValue,t)}}class $0 extends Xr{constructor(e,t){super(e,"not-in",t)}matches(e){if(Yf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Yf(this.value.arrayValue,t)}}class H0 extends Xr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Qf(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Yf(this.value.arrayValue,r))}}class Ra{constructor(e,t){this.position=e,this.inclusive=t}}class cl{constructor(e,t="asc"){this.field=e,this.dir=t}}function Oy(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function Bo(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const u=e[o],l=n.position[o];if(r=u.field.isKeyField()?Ge.comparator(Ge.fromName(l.referenceValue),t.key):hr(l,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function tp(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Vo(n.position[t],e.position[t]))return!1;return!0}class ws{constructor(e,t=null,r=[],o=[],u=null,l="F",g=null,I=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=l,this.startAt=g,this.endAt=I,this.lt=null,this.ft=null}}function qd(n,e,t,r,o,u,l,g){return new ws(n,e,t,r,o,u,l,g)}function Kd(n){return new ws(n)}function Ug(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Py(n){for(const e of n.filters)if(e.ht())return e.field;return null}function ky(n){return null!==n.collectionGroup}function jo(n){const e=Xe(n);if(null===e.lt){e.lt=[];const t=Py(e),r=Ug(e);if(null!==t&&null===r)t.isKeyField()||e.lt.push(new cl(t)),e.lt.push(new cl(ir.keyField(),"asc"));else{let o=!1;for(const u of e.explicitOrderBy)e.lt.push(u),u.field.isKeyField()&&(o=!0);if(!o){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.lt.push(new cl(ir.keyField(),u))}}}return e.lt}function Is(n){const e=Xe(n);if(!e.ft)if("F"===e.limitType)e.ft=V0(e.path,e.collectionGroup,jo(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of jo(e))t.push(new cl(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new Ra(e.endAt.position,e.endAt.inclusive):null,o=e.startAt?new Ra(e.startAt.position,e.startAt.inclusive):null;e.ft=V0(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e.ft}function eD(n,e,t){return new ws(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function np(n,e){return ep(Is(n),Is(e))&&n.limitType===e.limitType}function G0(n){return`${ul(Is(n))}|lt:${n.limitType}`}function Ly(n){return`Query(target=${function B0(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Wd(r.value)}`;var r}).join(", ")}]`),qf(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Wd(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Wd(t)).join(",")),`Target(${e})`}(Is(n))}; limitType=${n.limitType})`}function Fy(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):Ge.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of t.explicitOrderBy)if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,u,l){const g=Bo(o,u,l);return o.inclusive?g<=0:g<0}(t.startAt,jo(t),r)||t.endAt&&!function(o,u,l){const g=Bo(o,u,l);return o.inclusive?g>=0:g>0}(t.endAt,jo(t),r)));var t,r}function W0(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function q0(n){return(e,t)=>{let r=!1;for(const o of jo(n)){const u=tD(o,e,t);if(0!==u)return u;r=r||o.field.isKeyField()}return 0}}function tD(n,e,t){const r=n.field.isKeyField()?Ge.comparator(e.key,t.key):function(o,u,l){const g=u.data.field(o),I=l.data.field(o);return null!==g&&null!==I?hr(g,I):Je()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Je()}}function Uy(n,e){if(n.dt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Kf(e)?"-0":e}}function Vy(n){return{integerValue:""+n}}function K0(n,e){return xy(e)?Vy(e):Uy(n,e)}class Zd{constructor(){this._=void 0}}function nD(n,e,t){return n instanceof Yd?function(r,o){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(u.fields.__previous_value__=o),{mapValue:u}}(t,e):n instanceof ll?Y0(n,e):n instanceof dl?By(n,e):function(r,o){const u=Z0(r,o),l=Q0(u)+Q0(r._t);return Rg(u)&&Rg(r._t)?Vy(l):Uy(r.wt,l)}(n,e)}function rD(n,e,t){return n instanceof ll?Y0(n,e):n instanceof dl?By(n,e):t}function Z0(n,e){return n instanceof hl?Rg(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Yd extends Zd{}class ll extends Zd{constructor(e){super(),this.elements=e}}function Y0(n,e){const t=iD(e);for(const r of n.elements)t.some(o=>Vo(o,r))||t.push(r);return{arrayValue:{values:t}}}class dl extends Zd{constructor(e){super(),this.elements=e}}function By(n,e){let t=iD(e);for(const r of n.elements)t=t.filter(o=>!Vo(o,r));return{arrayValue:{values:t}}}class hl extends Zd{constructor(e,t){super(),this.wt=e,this._t=t}}function Q0(n){return bn(n.integerValue||n.doubleValue)}function iD(n){return Qf(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Qd{constructor(e,t){this.field=e,this.transform=t}}class Vg{constructor(e,t){this.version=e,this.transformResults=t}}class jn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new jn}static exists(e){return new jn(void 0,e)}static updateTime(e){return new jn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Bg(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Jd{}function J0(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Ws(n.key,jn.none()):new Oa(n.key,n.data,jn.none());{const t=n.data,r=Jr.empty();let o=new sn(ir.comparator);for(let u of e.fields)if(!o.has(u)){let l=t.field(u);null===l&&u.length>1&&(u=u.popLast(),l=t.field(u)),null===l?r.delete(u):r.set(u,l),o=o.add(u)}return new fr(n.key,r,new ui(o.toArray()),jn.none())}}function $o(n,e,t){n instanceof Oa?function(r,o,u){const l=r.value.clone(),g=fl(r.fieldTransforms,o,u.transformResults);l.setAll(g),o.convertToFoundDocument(u.version,l).setHasCommittedMutations()}(n,e,t):n instanceof fr?function(r,o,u){if(!Bg(r.precondition,o))return void o.convertToUnknownDocument(u.version);const l=fl(r.fieldTransforms,o,u.transformResults),g=o.data;g.setAll(jg(r)),g.setAll(l),o.convertToFoundDocument(u.version,g).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Na(n,e,t,r){return n instanceof Oa?function(o,u,l,g){if(!Bg(o.precondition,u))return l;const I=o.value.clone(),b=pl(o.fieldTransforms,g,u);return I.setAll(b),u.convertToFoundDocument(u.version,I).setHasLocalMutations(),null}(n,e,t,r):n instanceof fr?function(o,u,l,g){if(!Bg(o.precondition,u))return l;const I=pl(o.fieldTransforms,g,u),b=u.data;return b.setAll(jg(o)),b.setAll(I),u.convertToFoundDocument(u.version,b).setHasLocalMutations(),null===l?null:l.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(A=>A.field))}(n,e,t,r):(l=t,Bg(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):l);var u,l}function ci(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),u=Z0(r.transform,o||null);null!=u&&(null===t&&(t=Jr.empty()),t.set(r.field,u))}return t||null}function $u(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&rl(t,r,(o,u)=>function jT(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof ll&&r instanceof ll||t instanceof dl&&r instanceof dl?rl(t.elements,r.elements,Vo):t instanceof hl&&r instanceof hl?Vo(t._t,r._t):t instanceof Yd&&r instanceof Yd);var t,r}(o,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Oa extends Jd{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class fr extends Jd{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function jg(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function fl(n,e,t){const r=new Map;Dt(n.length===t.length);for(let o=0;o<t.length;o++){const u=n[o],l=u.transform,g=e.data.field(u.field);r.set(u.field,rD(l,g,t[o]))}return r}function pl(n,e,t){const r=new Map;for(const o of n){const u=o.transform,l=t.data.field(o.field);r.set(o.field,nD(u,l,e))}return r}class Ws extends Jd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Hu extends Jd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Xd{constructor(e){this.count=e}}var Tn,jt;function gl(n){switch(n){default:return Je();case le.CANCELLED:case le.UNKNOWN:case le.DEADLINE_EXCEEDED:case le.RESOURCE_EXHAUSTED:case le.INTERNAL:case le.UNAVAILABLE:case le.UNAUTHENTICATED:return!1;case le.INVALID_ARGUMENT:case le.NOT_FOUND:case le.ALREADY_EXISTS:case le.PERMISSION_DENIED:case le.FAILED_PRECONDITION:case le.ABORTED:case le.OUT_OF_RANGE:case le.UNIMPLEMENTED:case le.DATA_LOSS:return!0}}function ml(n){if(void 0===n)return rr("GRPC error has no .code"),le.UNKNOWN;switch(n){case Tn.OK:return le.OK;case Tn.CANCELLED:return le.CANCELLED;case Tn.UNKNOWN:return le.UNKNOWN;case Tn.DEADLINE_EXCEEDED:return le.DEADLINE_EXCEEDED;case Tn.RESOURCE_EXHAUSTED:return le.RESOURCE_EXHAUSTED;case Tn.INTERNAL:return le.INTERNAL;case Tn.UNAVAILABLE:return le.UNAVAILABLE;case Tn.UNAUTHENTICATED:return le.UNAUTHENTICATED;case Tn.INVALID_ARGUMENT:return le.INVALID_ARGUMENT;case Tn.NOT_FOUND:return le.NOT_FOUND;case Tn.ALREADY_EXISTS:return le.ALREADY_EXISTS;case Tn.PERMISSION_DENIED:return le.PERMISSION_DENIED;case Tn.FAILED_PRECONDITION:return le.FAILED_PRECONDITION;case Tn.ABORTED:return le.ABORTED;case Tn.OUT_OF_RANGE:return le.OUT_OF_RANGE;case Tn.UNIMPLEMENTED:return le.UNIMPLEMENTED;case Tn.DATA_LOSS:return le.DATA_LOSS;default:return Je()}}(jt=Tn||(Tn={}))[jt.OK=0]="OK",jt[jt.CANCELLED=1]="CANCELLED",jt[jt.UNKNOWN=2]="UNKNOWN",jt[jt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",jt[jt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",jt[jt.NOT_FOUND=5]="NOT_FOUND",jt[jt.ALREADY_EXISTS=6]="ALREADY_EXISTS",jt[jt.PERMISSION_DENIED=7]="PERMISSION_DENIED",jt[jt.UNAUTHENTICATED=16]="UNAUTHENTICATED",jt[jt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",jt[jt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",jt[jt.ABORTED=10]="ABORTED",jt[jt.OUT_OF_RANGE=11]="OUT_OF_RANGE",jt[jt.UNIMPLEMENTED=12]="UNIMPLEMENTED",jt[jt.INTERNAL=13]="INTERNAL",jt[jt.UNAVAILABLE=14]="UNAVAILABLE",jt[jt.DATA_LOSS=15]="DATA_LOSS";class Pa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,u]of r)if(this.equalsFn(o,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){ol(this.inner,(t,r)=>{for(const[o,u]of r)e(o,u)})}isEmpty(){return QE(this.inner)}size(){return this.innerSize}}const X0=new mn(Ge.comparator);function bi(){return X0}const jy=new mn(Ge.comparator);function eh(...n){let e=jy;for(const t of n)e=e.insert(t.key,t);return e}function $y(n){let e=jy;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function qs(){return th()}function Hy(){return th()}function th(){return new Pa(n=>n.toString(),(n,e)=>n.isEqual(e))}const sD=new mn(Ge.comparator),oD=new sn(Ge.comparator);function Nt(...n){let e=oD;for(const t of n)e=e.add(t);return e}const aD=new sn(Rt);function rp(){return aD}class yl{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,vl.createSynthesizedTargetChangeForCurrentChange(e,t)),new yl(bt.min(),r,rp(),bi(),Nt())}}class vl{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t){return new vl(sr.EMPTY_BYTE_STRING,t,Nt(),Nt(),Nt())}}class $g{constructor(e,t,r,o){this.gt=e,this.removedTargetIds=t,this.key=r,this.yt=o}}class ip{constructor(e,t){this.targetId=e,this.It=t}}class sp{constructor(e,t,r=sr.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class Hg{constructor(){this.Tt=0,this.Et=Gg(),this.At=sr.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}get current(){return this.Rt}get resumeToken(){return this.At}get Pt(){return 0!==this.Tt}get vt(){return this.bt}Vt(e){e.approximateByteSize()>0&&(this.bt=!0,this.At=e)}St(){let e=Nt(),t=Nt(),r=Nt();return this.Et.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:Je()}}),new vl(this.At,this.Rt,e,t,r)}Dt(){this.bt=!1,this.Et=Gg()}Ct(e,t){this.bt=!0,this.Et=this.Et.insert(e,t)}xt(e){this.bt=!0,this.Et=this.Et.remove(e)}Nt(){this.Tt+=1}kt(){this.Tt-=1}Ot(){this.bt=!0,this.Rt=!0}}class uD{constructor(e){this.Mt=e,this.Ft=new Map,this.$t=bi(),this.Bt=zg(),this.Lt=new sn(Rt)}Ut(e){for(const t of e.gt)e.yt&&e.yt.isFoundDocument()?this.qt(t,e.yt):this.Kt(t,e.key,e.yt);for(const t of e.removedTargetIds)this.Kt(t,e.key,e.yt)}Gt(e){this.forEachTarget(e,t=>{const r=this.Qt(t);switch(e.state){case 0:this.jt(t)&&r.Vt(e.resumeToken);break;case 1:r.kt(),r.Pt||r.Dt(),r.Vt(e.resumeToken);break;case 2:r.kt(),r.Pt||this.removeTarget(t);break;case 3:this.jt(t)&&(r.Ot(),r.Vt(e.resumeToken));break;case 4:this.jt(t)&&(this.Wt(t),r.Vt(e.resumeToken));break;default:Je()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ft.forEach((r,o)=>{this.jt(o)&&t(o)})}zt(e){const t=e.targetId,r=e.It.count,o=this.Ht(t);if(o){const u=o.target;if(Ng(u))if(0===r){const l=new Ge(u.path);this.Kt(t,l,Zt.newNoDocument(l,bt.min()))}else Dt(1===r);else this.Jt(t)!==r&&(this.Wt(t),this.Lt=this.Lt.add(t))}}Yt(e){const t=new Map;this.Ft.forEach((u,l)=>{const g=this.Ht(l);if(g){if(u.current&&Ng(g.target)){const I=new Ge(g.target.path);null!==this.$t.get(I)||this.Xt(l,I)||this.Kt(l,I,Zt.newNoDocument(I,e))}u.vt&&(t.set(l,u.St()),u.Dt())}});let r=Nt();this.Bt.forEach((u,l)=>{let g=!0;l.forEachWhile(I=>{const b=this.Ht(I);return!b||2===b.purpose||(g=!1,!1)}),g&&(r=r.add(u))}),this.$t.forEach((u,l)=>l.setReadTime(e));const o=new yl(e,t,this.Lt,this.$t,r);return this.$t=bi(),this.Bt=zg(),this.Lt=new sn(Rt),o}qt(e,t){if(!this.jt(e))return;const r=this.Xt(e,t.key)?2:0;this.Qt(e).Ct(t.key,r),this.$t=this.$t.insert(t.key,t),this.Bt=this.Bt.insert(t.key,this.Zt(t.key).add(e))}Kt(e,t,r){if(!this.jt(e))return;const o=this.Qt(e);this.Xt(e,t)?o.Ct(t,1):o.xt(t),this.Bt=this.Bt.insert(t,this.Zt(t).delete(e)),r&&(this.$t=this.$t.insert(t,r))}removeTarget(e){this.Ft.delete(e)}Jt(e){const t=this.Qt(e).St();return this.Mt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Nt(e){this.Qt(e).Nt()}Qt(e){let t=this.Ft.get(e);return t||(t=new Hg,this.Ft.set(e,t)),t}Zt(e){let t=this.Bt.get(e);return t||(t=new sn(Rt),this.Bt=this.Bt.insert(e,t)),t}jt(e){const t=null!==this.Ht(e);return t||Re("WatchChangeAggregator","Detected inactive target",e),t}Ht(e){const t=this.Ft.get(e);return t&&t.Pt?null:this.Mt.te(e)}Wt(e){this.Ft.set(e,new Hg),this.Mt.getRemoteKeysForTarget(e).forEach(t=>{this.Kt(e,t,null)})}Xt(e,t){return this.Mt.getRemoteKeysForTarget(e).has(t)}}function zg(){return new mn(Ge.comparator)}function Gg(){return new mn(Ge.comparator)}const ew={asc:"ASCENDING",desc:"DESCENDING"},tw={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class zy{constructor(e,t){this.databaseId=e,this.dt=t}}function nh(n,e){return n.dt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Gy(n,e){return n.dt?e.toBase64():e.toUint8Array()}function Wy(n,e){return nh(n,e.toTimestamp())}function Er(n){return Dt(!!n),bt.fromTimestamp(function(e){const t=Uo(e);return new Nn(t.seconds,t.nanos)}(n))}function qy(n,e){return(t=n,new Kt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Ky(n){const e=Kt.fromString(n);return Dt(hD(e)),e}function rh(n,e){return qy(n.databaseId,e.path)}function Ks(n,e){const t=Ky(e);if(t.get(1)!==n.databaseId.projectId)throw new Ae(le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ae(le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ge(rw(t))}function Wg(n,e){return qy(n.databaseId,e)}function nw(n){const e=Ky(n);return 4===e.length?Kt.emptyPath():rw(e)}function op(n){return new Kt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function rw(n){return Dt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Zy(n,e,t){return{name:rh(n,e),fields:t.value.mapValue.fields}}function qg(n,e,t){const r=Ks(n,e.name),o=Er(e.updateTime),u=new Jr({mapValue:{fields:e.fields}}),l=Zt.newFoundDocument(r,o,u);return t&&l.setHasCommittedMutations(),t?l.setHasCommittedMutations():l}function ih(n,e){let t;if(e instanceof Oa)t={update:Zy(n,e.key,e.value)};else if(e instanceof Ws)t={delete:rh(n,e.key)};else if(e instanceof fr)t={update:Zy(n,e.key,e.data),updateMask:ev(e.fieldMask)};else{if(!(e instanceof Hu))return Je();t={verify:rh(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const l=u.transform;if(l instanceof Yd)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof ll)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof dl)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof hl)return{fieldPath:u.field.canonicalString(),increment:l._t};throw Je()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:Wy(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:Je()),t;var o}function Kg(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?jn.updateTime(Er(o.updateTime)):void 0!==o.exists?jn.exists(o.exists):jn.none():jn.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(u,l){let g=null;"setToServerValue"in l?(Dt("REQUEST_TIME"===l.setToServerValue),g=new Yd):"appendMissingElements"in l?g=new ll(l.appendMissingElements.values||[]):"removeAllFromArray"in l?g=new dl(l.removeAllFromArray.values||[]):"increment"in l?g=new hl(u,l.increment):Je();const I=ir.fromServerFormat(l.fieldPath);return new Qd(I,g)}(n,o)):[];var o;if(e.update){const o=Ks(n,e.update.name),u=new Jr({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new ui((e.updateMask.fieldPaths||[]).map(b=>ir.fromServerFormat(b)));return new fr(o,u,l,t,r)}return new Oa(o,u,t,r)}if(e.delete){const o=Ks(n,e.delete);return new Ws(o,t)}if(e.verify){const o=Ks(n,e.verify);return new Hu(o,t)}return Je()}function Yy(n,e){return{documents:[Wg(n,e.path)]}}function Qy(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Wg(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Wg(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(I){if(0===I.length)return;const b=I.map(A=>function(N){if("=="===N.op){if(P0(N.value))return{unaryFilter:{field:zu(N.field),op:"IS_NAN"}};if(O0(N.value))return{unaryFilter:{field:zu(N.field),op:"IS_NULL"}}}else if("!="===N.op){if(P0(N.value))return{unaryFilter:{field:zu(N.field),op:"IS_NOT_NAN"}};if(O0(N.value))return{unaryFilter:{field:zu(N.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:zu(N.field),op:lD(N.op),value:N.value}}}(A));return 1===b.length?b[0]:{compositeFilter:{op:"AND",filters:b}}}(e.filters);o&&(t.structuredQuery.where=o);const u=function(I){if(0!==I.length)return I.map(b=>{return{field:zu((A=b).field),direction:cD(A.dir)};var A})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const l=(b=e.limit,n.dt||qf(b)?b:{value:b});var b,g,I;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(g=e.startAt).inclusive,values:g.position}),e.endAt&&(t.structuredQuery.endAt={before:!(I=e.endAt).inclusive,values:I.position}),t}function Jy(n){let e=nw(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){Dt(1===r);const A=t.from[0];A.allDescendants?o=A.collectionId:e=e.child(A.collectionId)}let u=[];t.where&&(u=ka(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(A=>{return new cl(Es((N=A).field),function(W){switch(W){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction));var N}));let g=null;t.limit&&(g=function(A){let N;return N="object"==typeof A?A.value:A,qf(N)?null:N}(t.limit));let I=null;var A;t.startAt&&(I=new Ra((A=t.startAt).values||[],!!A.before));let b=null;return t.endAt&&(b=function(A){return new Ra(A.values||[],!A.before)}(t.endAt)),qd(e,o,l,u,g,"F",I,b)}function ka(n){return n?void 0!==n.unaryFilter?[dD(n)]:void 0!==n.fieldFilter?[Xy(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>ka(e)).reduce((e,t)=>e.concat(t)):Je():[]}function cD(n){return ew[n]}function lD(n){return tw[n]}function zu(n){return{fieldPath:n.canonicalString()}}function Es(n){return ir.fromServerFormat(n.fieldPath)}function Xy(n){return Xr.create(Es(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Je()}}(n.fieldFilter.op),n.fieldFilter.value)}function dD(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Es(n.unaryFilter.field);return Xr.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Es(n.unaryFilter.field);return Xr.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Es(n.unaryFilter.field);return Xr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Es(n.unaryFilter.field);return Xr.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Je()}}function ev(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function hD(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function ji(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=aw(e)),e=fD(n.get(t),e);return aw(e)}function fD(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const u=n.charAt(o);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function aw(n){return n+"\x01\x01"}function Zs(n){const e=n.length;if(Dt(e>=2),2===e)return Dt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Kt.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const l=n.indexOf("\x01",u);switch((l<0||l>t)&&Je(),n.charAt(l+1)){case"\x01":const g=n.substring(u,l);let I;0===o.length?I=g:(o+=g,I=o,o=""),r.push(I);break;case"\x10":o+=n.substring(u,l),o+="\0";break;case"\x11":o+=n.substring(u,l+1);break;default:Je()}u=l+2}return new Kt(r)}const uw=["userId","batchId"];function qn(n,e){return[n,ji(e)]}function tv(n,e,t){return[n,ji(e),t]}const pD={},gD=["prefixPath","collectionGroup","readTime","documentId"],cw=["prefixPath","collectionGroup","documentId"],mD=["collectionGroup","readTime","prefixPath","documentId"],lw=["canonicalId","targetId"],dw=["targetId","path"],sh=["path","targetId"],yD=["collectionId","parent"],vD=["indexId","uid"],hw=["uid","sequenceNumber"],_D=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],fw=["indexId","uid","orderedDocumentKey"],$T=["userId","collectionPath","documentId"],pw=["userId","collectionPath","largestBatchId"],gw=["userId","collectionGroup","largestBatchId"],Ys=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],wD=[...Ys,"documentOverlays"],mw=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Qs=mw,Js=[...Qs,"indexConfiguration","indexState","indexEntries"];class is extends C0{constructor(e,t){super(),this.ee=e,this.currentSequenceNumber=t}}function Dr(n,e){const t=Xe(n);return zs.N(t.ee,e)}class Yg{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&$o(u,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Na(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Na(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Hy();return this.mutations.forEach(o=>{const u=e.get(o.key),l=u.overlayedDocument;let g=this.applyToLocalView(l,u.mutatedFields);g=t.has(o.key)?null:g;const I=J0(l,g);null!==I&&r.set(o.key,I),l.isValidDocument()||l.convertToNoDocument(bt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Nt())}isEqual(e){return this.batchId===e.batchId&&rl(this.mutations,e.mutations,(t,r)=>$u(t,r))&&rl(this.baseMutations,e.baseMutations,(t,r)=>$u(t,r))}}class nv{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){Dt(e.mutations.length===r.length);let o=sD;const u=e.mutations;for(let l=0;l<u.length;l++)o=o.insert(u[l].key,r[l].version);return new nv(e,t,r,o)}}class rv{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Gu{constructor(e,t,r,o,u=bt.min(),l=bt.min(),g=sr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=g}withSequenceNumber(e){return new Gu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Gu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Gu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class yw{constructor(e){this.ne=e}}function oh(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Qg(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:rh(o=n.ne,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:nh(o,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Wu(e.version)};else{if(!e.isUnknownDocument())return Je();r.unknownDocument={path:t.path.toArray(),version:Wu(e.version)}}var o,u;return r}function Qg(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Wu(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function _l(n){const e=new Nn(n.seconds,n.nanoseconds);return bt.fromTimestamp(e)}function wl(n,e){const t=(e.baseMutations||[]).map(u=>Kg(n.ne,u));for(let u=0;u<e.mutations.length-1;++u)u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(e.mutations[u].updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u);const r=e.mutations.map(u=>Kg(n.ne,u)),o=Nn.fromMillis(e.localWriteTimeMs);return new Yg(e.batchId,o,t,r)}function ah(n){const e=_l(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?_l(n.lastLimboFreeSnapshotVersion):bt.min();let r;var o;return void 0!==n.query.documents?(Dt(1===(o=n.query).documents.length),r=Is(Kd(nw(o.documents[0])))):r=Is(Jy(n.query)),new Gu(r,n.targetId,0,n.lastListenSequenceNumber,e,t,sr.fromBase64String(n.resumeToken))}function sv(n,e){const t=Wu(e.snapshotVersion),r=Wu(e.lastLimboFreeSnapshotVersion);let o;o=Ng(e.target)?Yy(n.ne,e.target):Qy(n.ne,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ul(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function uh(n){const e=Jy({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?eD(e,e.limit,"L"):e}function ov(n,e){return new rv(e.largestBatchId,Kg(n.ne,e.overlayMutation))}function av(n,e){const t=e.path.lastSegment();return[n,ji(e.path.popLast()),t]}function uv(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Wu(r.readTime),documentKey:ji(r.documentKey.path),largestBatchId:r.largestBatchId}}class vw{getBundleMetadata(e,t){return ap(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:_l(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return ap(e).put({bundleId:(r=t).id,createTime:Wu(Er(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return cv(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:uh(o.bundledQuery),readTime:_l(o.readTime)};var o})}saveNamedQuery(e,t){return cv(e).put({name:(r=t).name,readTime:Wu(Er(r.readTime)),bundledQuery:r.bundledQuery});var r}}function ap(n){return Dr(n,"bundles")}function cv(n){return Dr(n,"namedQueries")}class up{constructor(e,t){this.wt=e,this.userId=t}static se(e,t){return new up(e,t.uid||"")}getOverlay(e,t){return ch(e).get(av(this.userId,t)).next(r=>r?ov(this.wt,r):null)}getOverlays(e,t){const r=qs();return ae.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){const o=[];return r.forEach((u,l)=>{const g=new rv(t,l);o.push(this.ie(e,g))}),ae.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(l=>o.add(ji(l.getCollectionPath())));const u=[];return o.forEach(l=>{const g=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);u.push(ch(e).W("collectionPathOverlayIndex",g))}),ae.waitFor(u)}getOverlaysForCollection(e,t,r){const o=qs(),u=ji(t),l=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return ch(e).K("collectionPathOverlayIndex",l).next(g=>{for(const I of g){const b=ov(this.wt,I);o.set(b.getKey(),b)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const u=qs();let l;const g=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return ch(e).J({index:"collectionGroupOverlayIndex",range:g},(I,b,A)=>{const N=ov(this.wt,b);u.size()<o||N.largestBatchId===l?(u.set(N.getKey(),N),l=N.largestBatchId):A.done()}).next(()=>u)}ie(e,t){return ch(e).put(function(r,o,u){const[l,g,I]=av(o,u.mutation.key);return{userId:o,collectionPath:g,documentId:I,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:ih(r.ne,u.mutation)}}(this.wt,this.userId,t))}}function ch(n){return Dr(n,"documentOverlays")}class qu{constructor(){}re(e,t){this.oe(e,t),t.ue()}oe(e,t){if("nullValue"in e)this.ce(t,5);else if("booleanValue"in e)this.ce(t,10),t.ae(e.booleanValue?1:0);else if("integerValue"in e)this.ce(t,15),t.ae(bn(e.integerValue));else if("doubleValue"in e){const r=bn(e.doubleValue);isNaN(r)?this.ce(t,13):(this.ce(t,15),Kf(r)?t.ae(0):t.ae(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ce(t,20),"string"==typeof r?t.he(r):(t.he(`${r.seconds||""}`),t.ae(r.nanos||0))}else if("stringValue"in e)this.le(e.stringValue,t),this.fe(t);else if("bytesValue"in e)this.ce(t,30),t.de(Vu(e.bytesValue)),this.fe(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ce(t,45),t.ae(r.latitude||0),t.ae(r.longitude||0)}else"mapValue"in e?k0(e)?this.ce(t,Number.MAX_SAFE_INTEGER):(this.we(e.mapValue,t),this.fe(t)):"arrayValue"in e?(this.me(e.arrayValue,t),this.fe(t)):Je()}le(e,t){this.ce(t,25),this.ge(e,t)}ge(e,t){t.he(e)}we(e,t){const r=e.fields||{};this.ce(t,55);for(const o of Object.keys(r))this.le(o,t),this.oe(r[o],t)}me(e,t){const r=e.values||[];this.ce(t,50);for(const o of r)this.oe(o,t)}_e(e,t){this.ce(t,37),Ge.fromName(e).path.forEach(r=>{this.ce(t,60),this.ge(r,t)})}ce(e,t){e.ae(t)}fe(e){e.ae(2)}}function _w(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function lv(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const u=_w(255&t[o]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}qu.ye=new qu;class ww{constructor(){this.buffer=new Uint8Array(1024),this.position=0}pe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ie(r.value),r=t.next();this.Te()}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ie(r);else if(r<2048)this.Ie(960|r>>>6),this.Ie(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ie(480|r>>>12),this.Ie(128|63&r>>>6),this.Ie(128|63&r);else{const o=t.codePointAt(0);this.Ie(240|o>>>18),this.Ie(128|63&o>>>12),this.Ie(128|63&o>>>6),this.Ie(128|63&o)}}this.Te()}Pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const o=t.codePointAt(0);this.Ae(240|o>>>18),this.Ae(128|63&o>>>12),this.Ae(128|63&o>>>6),this.Ae(128|63&o)}}this.Re()}ve(e){const t=this.Ve(e),r=lv(t);this.Se(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}De(e){const t=this.Ve(e),r=lv(t);this.Se(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}Ce(){this.xe(255),this.xe(255)}Ne(){this.ke(255),this.ke(255)}reset(){this.position=0}seed(e){this.Se(e.length),this.buffer.set(e,this.position),this.position+=e.length}Oe(){return this.buffer.slice(0,this.position)}Ve(e){const t=function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}Ie(e){const t=255&e;0===t?(this.xe(0),this.xe(255)):255===t?(this.xe(255),this.xe(0)):this.xe(t)}Ae(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(e)}Te(){this.xe(0),this.xe(1)}Re(){this.ke(0),this.ke(1)}xe(e){this.Se(1),this.buffer[this.position++]=e}ke(e){this.Se(1),this.buffer[this.position++]=~e}Se(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class Iw{constructor(e){this.Me=e}de(e){this.Me.pe(e)}he(e){this.Me.be(e)}ae(e){this.Me.ve(e)}ue(){this.Me.Ce()}}class ID{constructor(e){this.Me=e}de(e){this.Me.Ee(e)}he(e){this.Me.Pe(e)}ae(e){this.Me.De(e)}ue(){this.Me.Ne()}}class cp{constructor(){this.Me=new ww,this.Fe=new Iw(this.Me),this.$e=new ID(this.Me)}seed(e){this.Me.seed(e)}Be(e){return 0===e?this.Fe:this.$e}Oe(){return this.Me.Oe()}reset(){this.Me.reset()}}class Il{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}Le(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Il(this.indexId,this.documentKey,this.arrayValue,r)}}function El(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=Ew(n.arrayValue,e.arrayValue),0!==t?t:(t=Ew(n.directionalValue,e.directionalValue),0!==t?t:Ge.comparator(n.documentKey,e.documentKey)))}function Ew(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class ED{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ue=e.orderBy,this.qe=[];for(const t of e.filters){const r=t;r.ht()?this.Ke=r:this.qe.push(r)}}Ge(e){const t=by(e);if(void 0!==t&&!this.Qe(t))return!1;const r=$d(e);let o=0,u=0;for(;o<r.length&&this.Qe(r[o]);++o);if(o===r.length)return!0;if(void 0!==this.Ke){const l=r[o];if(!this.je(this.Ke,l)||!this.We(this.Ue[u++],l))return!1;++o}for(;o<r.length;++o)if(u>=this.Ue.length||!this.We(this.Ue[u++],r[o]))return!1;return!0}Qe(e){for(const t of this.qe)if(this.je(t,e))return!0;return!1}je(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}We(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class DD{constructor(){this.ze=new dv}addToCollectionParentIndex(e,t){return this.ze.add(t),ae.resolve()}getCollectionParents(e,t){return ae.resolve(this.ze.getEntries(t))}addFieldIndex(e,t){return ae.resolve()}deleteFieldIndex(e,t){return ae.resolve()}getDocumentsMatchingTarget(e,t){return ae.resolve(null)}getIndexType(e,t){return ae.resolve(0)}getFieldIndexes(e,t){return ae.resolve([])}getNextCollectionGroupToUpdate(e){return ae.resolve(null)}getMinOffset(e,t){return ae.resolve(_s.min())}getMinOffsetFromCollectionGroup(e,t){return ae.resolve(_s.min())}updateCollectionGroup(e,t,r){return ae.resolve()}updateIndexEntries(e,t){return ae.resolve()}}class dv{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new sn(Kt.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new sn(Kt.comparator)).toArray()}}const Jg=new Uint8Array(0);class bD{constructor(e,t){this.user=e,this.databaseId=t,this.He=new dv,this.Je=new Pa(r=>ul(r),(r,o)=>ep(r,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.He.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.He.add(t)});const u={collectionId:r,parent:ji(o)};return Dw(e).put(u)}return ae.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[b0(t),""],!1,!0);return Dw(e).K(o).next(u=>{for(const l of u){if(l.collectionId!==t)break;r.push(Zs(l.parent))}return r})}addFieldIndex(e,t){const r=Xg(e),o={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(g=>[g.fieldPath.canonicalString(),g.kind])};var l;delete o.indexId;const u=r.add(o);if(t.indexState){const l=dp(e);return u.next(g=>{l.put(uv(g,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=Xg(e),o=dp(e),u=lp(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=lp(e);let o=!0;const u=new Map;return ae.forEach(this.Ye(t),l=>this.Xe(e,l).next(g=>{o&&(o=!!g),u.set(l,g)})).next(()=>{if(o){let l=Nt();const g=[];return ae.forEach(u,(I,b)=>{var A;Re("IndexedDbIndexManager",`Using index ${A=I,`id=${A.indexId}|cg=${A.collectionGroup}|f=${A.fields.map(Ft=>`${Ft.fieldPath}:${Ft.kind}`).join(",")}`} to execute ${ul(t)}`);const N=function(Ft,St){const Ut=by(St);if(void 0===Ut)return null;for(const on of Og(Ft,Ut.fieldPath))switch(on.op){case"array-contains-any":return on.value.arrayValue.values||[];case"array-contains":return[on.value]}return null}(b,I),W=function(Ft,St){const Ut=new Map;for(const on of $d(St))for(const zi of Og(Ft,on.fieldPath))switch(zi.op){case"==":case"in":Ut.set(on.fieldPath.canonicalString(),zi.value);break;case"not-in":case"!=":return Ut.set(on.fieldPath.canonicalString(),zi.value),Array.from(Ut.values())}return null}(b,I),X=function(Ft,St){const Ut=[];let on=!0;for(const zi of $d(St)){const K_=0===zi.kind?Pg(Ft,zi.fieldPath,Ft.startAt):j0(Ft,zi.fieldPath,Ft.startAt);Ut.push(K_.value),on&&(on=K_.inclusive)}return new Ra(Ut,on)}(b,I),de=function(Ft,St){const Ut=[];let on=!0;for(const zi of $d(St)){const K_=0===zi.kind?j0(Ft,zi.fieldPath,Ft.endAt):Pg(Ft,zi.fieldPath,Ft.endAt);Ut.push(K_.value),on&&(on=K_.inclusive)}return new Ra(Ut,on)}(b,I),Fe=this.Ze(I,b,X),He=this.Ze(I,b,de),Ot=this.tn(I,b,W),Mt=this.en(I.indexId,N,Fe,X.inclusive,He,de.inclusive,Ot);return ae.forEach(Mt,Ft=>r.j(Ft,t.limit).next(St=>{St.forEach(Ut=>{const on=Ge.fromSegments(Ut.documentKey);l.has(on)||(l=l.add(on),g.push(on))})}))}).next(()=>g)}return ae.resolve(null)})}Ye(e){let t=this.Je.get(e);return t||(t=[e],this.Je.set(e,t),t)}en(e,t,r,o,u,l,g){const I=(null!=t?t.length:1)*Math.max(r.length,u.length),b=I/(null!=t?t.length:1),A=[];for(let N=0;N<I;++N){const W=t?this.nn(t[N/b]):Jg,X=this.sn(e,W,r[N%b],o),de=this.rn(e,W,u[N%b],l),Fe=g.map(He=>this.sn(e,W,He,!0));A.push(...this.createRange(X,de,Fe))}return A}sn(e,t,r,o){const u=new Il(e,Ge.empty(),t,r);return o?u:u.Le()}rn(e,t,r,o){const u=new Il(e,Ge.empty(),t,r);return o?u.Le():u}Xe(e,t){const r=new ED(t),o=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(u=>{let l=null;for(const g of u)r.Ge(g)&&(!l||g.fields.length>l.fields.length)&&(l=g);return l})}getIndexType(e,t){let r=2;return ae.forEach(this.Ye(t),o=>this.Xe(e,o).next(u=>{u?0!==r&&u.fields.length<function(l){let g=new sn(ir.comparator),I=!1;for(const b of l.filters){const A=b;A.field.isKeyField()||("array-contains"===A.op||"array-contains-any"===A.op?I=!0:g=g.add(A.field))}for(const b of l.orderBy)b.field.isKeyField()||(g=g.add(b.field));return g.size+(I?1:0)}(o)&&(r=1):r=0})).next(()=>r)}on(e,t){const r=new cp;for(const o of $d(e)){const u=t.data.field(o.fieldPath);if(null==u)return null;const l=r.Be(o.kind);qu.ye.re(u,l)}return r.Oe()}nn(e){const t=new cp;return qu.ye.re(e,t.Be(0)),t.Oe()}un(e,t){const r=new cp;return qu.ye.re(Ma(this.databaseId,t),r.Be(function(o){const u=$d(o);return 0===u.length?0:u[u.length-1].kind}(e))),r.Oe()}tn(e,t,r){if(null===r)return[];let o=[];o.push(new cp);let u=0;for(const l of $d(e)){const g=r[u++];for(const I of o)if(this.cn(t,l.fieldPath)&&Qf(g))o=this.an(o,l,g);else{const b=I.Be(l.kind);qu.ye.re(g,b)}}return this.hn(o)}Ze(e,t,r){return this.tn(e,t,r.position)}hn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Oe();return t}an(e,t,r){const o=[...e],u=[];for(const l of r.arrayValue.values||[])for(const g of o){const I=new cp;I.seed(g.Oe()),qu.ye.re(l,I.Be(t.kind)),u.push(I)}return u}cn(e,t){return!!e.filters.find(r=>r instanceof Xr&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Xg(e),o=dp(e);return(t?r.K("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.K()).next(u=>{const l=[];return ae.forEach(u,g=>o.get([g.indexId,this.uid]).next(I=>{l.push(function(b,A){const N=A?new Sg(A.sequenceNumber,new _s(_l(A.readTime),new Ge(Zs(A.documentKey)),A.largestBatchId)):Sg.empty(),W=b.fields.map(([X,de])=>new Ty(ir.fromServerFormat(X),de));return new jd(b.indexId,b.collectionGroup,W,N)}(g,I))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==u?u:Rt(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=Xg(e),u=dp(e);return this.ln(e).next(l=>o.K("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(g=>ae.forEach(g,I=>u.put(uv(I.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return ae.forEach(t,(o,u)=>{const l=r.get(o.collectionGroup);return(l?ae.resolve(l):this.getFieldIndexes(e,o.collectionGroup)).next(g=>(r.set(o.collectionGroup,g),ae.forEach(g,I=>this.fn(e,o,I).next(b=>{const A=this.dn(u,I);return b.isEqual(A)?ae.resolve():this._n(e,u,I,b,A)}))))})}wn(e,t,r,o){return lp(e).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,orderedDocumentKey:this.un(r,t.key),documentKey:t.key.path.toArray()})}mn(e,t,r,o){return lp(e).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,this.un(r,t.key),t.key.path.toArray()])}fn(e,t,r){const o=lp(e);let u=new sn(El);return o.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.un(r,t)])},(l,g)=>{u=u.add(new Il(r.indexId,t,g.arrayValue,g.directionalValue))}).next(()=>u)}dn(e,t){let r=new sn(El);const o=this.on(t,e);if(null==o)return r;const u=by(t);if(null!=u){const l=e.data.field(u.fieldPath);if(Qf(l))for(const g of l.arrayValue.values||[])r=r.add(new Il(t.indexId,e.key,this.nn(g),o))}else r=r.add(new Il(t.indexId,e.key,Jg,o));return r}_n(e,t,r,o,u){Re("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(g,I,b,A,N){const W=g.getIterator(),X=I.getIterator();let de=zd(W),Fe=zd(X);for(;de||Fe;){let He=!1,Ot=!1;if(de&&Fe){const Mt=b(de,Fe);Mt<0?Ot=!0:Mt>0&&(He=!0)}else null!=de?Ot=!0:He=!0;He?(A(Fe),Fe=zd(X)):Ot?(N(de),de=zd(W)):(de=zd(W),Fe=zd(X))}}(o,u,El,g=>{l.push(this.wn(e,t,r,g))},g=>{l.push(this.mn(e,t,r,g))}),ae.waitFor(l)}ln(e){let t=1;return dp(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,u)=>{u.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,g)=>El(l,g)).filter((l,g,I)=>!g||0!==El(l,I[g-1]));const o=[];o.push(e);for(const l of r){const g=El(l,e),I=El(l,t);if(0===g)o[0]=e.Le();else if(g>0&&I<0)o.push(l),o.push(l.Le());else if(I>0)break}o.push(t);const u=[];for(let l=0;l<o.length;l+=2)u.push(IDBKeyRange.bound([o[l].indexId,this.uid,o[l].arrayValue,o[l].directionalValue,Jg,[]],[o[l+1].indexId,this.uid,o[l+1].arrayValue,o[l+1].directionalValue,Jg,[]]));return u}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(bw)}getMinOffset(e,t){return ae.mapArray(this.Ye(t),r=>this.Xe(e,r).next(o=>o||Je())).next(bw)}}function Dw(n){return Dr(n,"collectionParents")}function lp(n){return Dr(n,"indexEntries")}function Xg(n){return Dr(n,"indexConfiguration")}function dp(n){return Dr(n,"indexState")}function bw(n){Dt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const o=n[r].indexState.offset;Sy(o,e)<0&&(e=o),t<o.largestBatchId&&(t=o.largestBatchId)}return new _s(e.readTime,e.documentKey,t)}const Tw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class $i{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new $i(e,$i.DEFAULT_COLLECTION_PERCENTILE,$i.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Cw(n,e,t){const r=n.store("mutations"),o=n.store("documentMutations"),u=[],l=IDBKeyRange.only(t.batchId);let g=0;const I=r.J({range:l},(A,N,W)=>(g++,W.delete()));u.push(I.next(()=>{Dt(1===g)}));const b=[];for(const A of t.mutations){const N=tv(e,A.key.path,t.batchId);u.push(o.delete(N)),b.push(A.key)}return ae.waitFor(u).next(()=>b)}function hp(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Je();e=n.noDocument}return JSON.stringify(e).length}$i.DEFAULT_COLLECTION_PERCENTILE=10,$i.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,$i.DEFAULT=new $i(41943040,$i.DEFAULT_COLLECTION_PERCENTILE,$i.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),$i.DISABLED=new $i(-1,0,0);class fp{constructor(e,t,r,o){this.userId=e,this.wt=t,this.indexManager=r,this.referenceDelegate=o,this.gn={}}static se(e,t,r,o){Dt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new fp(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return La(e).J({index:"userMutationsIndex",range:r},(o,u,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const u=Dl(e),l=La(e);return l.add({}).next(g=>{Dt("number"==typeof g);const I=new Yg(g,t,r,o),b=function(W,X,de){const Fe=de.baseMutations.map(Ot=>ih(W.ne,Ot)),He=de.mutations.map(Ot=>ih(W.ne,Ot));return{userId:X,batchId:de.batchId,localWriteTimeMs:de.localWriteTime.toMillis(),baseMutations:Fe,mutations:He}}(this.wt,this.userId,I),A=[];let N=new sn((W,X)=>Rt(W.canonicalString(),X.canonicalString()));for(const W of o){const X=tv(this.userId,W.key.path,g);N=N.add(W.key.path.popLast()),A.push(l.put(b)),A.push(u.put(X,pD))}return N.forEach(W=>{A.push(this.indexManager.addToCollectionParentIndex(e,W))}),e.addOnCommittedListener(()=>{this.gn[g]=I.keys()}),ae.waitFor(A).next(()=>I)})}lookupMutationBatch(e,t){return La(e).get(t).next(r=>r?(Dt(r.userId===this.userId),wl(this.wt,r)):null)}yn(e,t){return this.gn[t]?ae.resolve(this.gn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.gn[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return La(e).J({index:"userMutationsIndex",range:o},(l,g,I)=>{g.userId===this.userId&&(Dt(g.batchId>=r),u=wl(this.wt,g)),I.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return La(e).J({index:"userMutationsIndex",range:t,reverse:!0},(o,u,l)=>{r=u.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return La(e).K("userMutationsIndex",t).next(r=>r.map(o=>wl(this.wt,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=qn(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return Dl(e).J({range:o},(l,g,I)=>{const[b,A,N]=l,W=Zs(A);if(b===this.userId&&t.path.isEqual(W))return La(e).get(N).next(X=>{if(!X)throw Je();Dt(X.userId===this.userId),u.push(wl(this.wt,X))});I.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new sn(Rt);const o=[];return t.forEach(u=>{const l=qn(this.userId,u.path),g=IDBKeyRange.lowerBound(l),I=Dl(e).J({range:g},(b,A,N)=>{const[W,X,de]=b,Fe=Zs(X);W===this.userId&&u.path.isEqual(Fe)?r=r.add(de):N.done()});o.push(I)}),ae.waitFor(o).next(()=>this.pn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=qn(this.userId,r),l=IDBKeyRange.lowerBound(u);let g=new sn(Rt);return Dl(e).J({range:l},(I,b,A)=>{const[N,W,X]=I,de=Zs(W);N===this.userId&&r.isPrefixOf(de)?de.length===o&&(g=g.add(X)):A.done()}).next(()=>this.pn(e,g))}pn(e,t){const r=[],o=[];return t.forEach(u=>{o.push(La(e).get(u).next(l=>{if(null===l)throw Je();Dt(l.userId===this.userId),r.push(wl(this.wt,l))}))}),ae.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return Cw(e.ee,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.In(t.batchId)}),ae.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}In(e){delete this.gn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ae.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return Dl(e).J({range:r},(u,l,g)=>{if(u[0]===this.userId){const I=Zs(u[1]);o.push(I)}else g.done()}).next(()=>{Dt(0===o.length)})})}containsKey(e,t){return hv(e,this.userId,t)}Tn(e){return fv(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function hv(n,e,t){const r=qn(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let l=!1;return Dl(n).J({range:u,H:!0},(g,I,b)=>{const[A,N,W]=g;A===e&&N===o&&(l=!0),b.done()}).next(()=>l)}function La(n){return Dr(n,"mutations")}function Dl(n){return Dr(n,"documentMutations")}function fv(n){return Dr(n,"mutationQueues")}class Ku{constructor(e){this.En=e}next(){return this.En+=2,this.En}static An(){return new Ku(0)}static Rn(){return new Ku(-1)}}class Sw{constructor(e,t){this.referenceDelegate=e,this.wt=t}allocateTargetId(e){return this.bn(e).next(t=>{const r=new Ku(t.highestTargetId);return t.highestTargetId=r.next(),this.Pn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.bn(e).next(t=>bt.fromTimestamp(new Nn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.bn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.bn(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.Pn(e,o)))}addTargetData(e,t){return this.vn(e,t).next(()=>this.bn(e).next(r=>(r.targetCount+=1,this.Vn(t,r),this.Pn(e,r))))}updateTargetData(e,t){return this.vn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>bl(e).delete(t.targetId)).next(()=>this.bn(e)).next(r=>(Dt(r.targetCount>0),r.targetCount-=1,this.Pn(e,r)))}removeTargets(e,t,r){let o=0;const u=[];return bl(e).J((l,g)=>{const I=ah(g);I.sequenceNumber<=t&&null===r.get(I.targetId)&&(o++,u.push(this.removeTargetData(e,I)))}).next(()=>ae.waitFor(u)).next(()=>o)}forEachTarget(e,t){return bl(e).J((r,o)=>{const u=ah(o);t(u)})}bn(e){return pv(e).get("targetGlobalKey").next(t=>(Dt(null!==t),t))}Pn(e,t){return pv(e).put("targetGlobalKey",t)}vn(e,t){return bl(e).put(sv(this.wt,t))}Vn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.bn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=ul(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return bl(e).J({range:o,index:"queryTargetsIndex"},(l,g,I)=>{const b=ah(g);ep(t,b.target)&&(u=b,I.done())}).next(()=>u)}addMatchingKeys(e,t,r){const o=[],u=Fa(e);return t.forEach(l=>{const g=ji(l.path);o.push(u.put({targetId:r,path:g})),o.push(this.referenceDelegate.addReference(e,r,l))}),ae.waitFor(o)}removeMatchingKeys(e,t,r){const o=Fa(e);return ae.forEach(t,u=>{const l=ji(u.path);return ae.waitFor([o.delete([r,l]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=Fa(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=Fa(e);let u=Nt();return o.J({range:r,H:!0},(l,g,I)=>{const b=Zs(l[1]),A=new Ge(b);u=u.add(A)}).next(()=>u)}containsKey(e,t){const r=ji(t.path),o=IDBKeyRange.bound([r],[b0(r)],!1,!0);let u=0;return Fa(e).J({index:"documentTargetsIndex",H:!0,range:o},([l,g],I,b)=>{0!==l&&(u++,b.done())}).next(()=>u>0)}te(e,t){return bl(e).get(t).next(r=>r?ah(r):null)}}function bl(n){return Dr(n,"targets")}function pv(n){return Dr(n,"targetGlobal")}function Fa(n){return Dr(n,"targetDocuments")}function Zu([n,e],[t,r]){const o=Rt(n,t);return 0===o?Rt(e,r):o}class TD{constructor(e){this.Sn=e,this.buffer=new sn(Zu),this.Dn=0}Cn(){return++this.Dn}xn(e){const t=[e,this.Cn()];if(this.buffer.size<this.Sn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Zu(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class CD{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Nn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.kn(6e4)}stop(){this.Nn&&(this.Nn.cancel(),this.Nn=null)}get started(){return null!==this.Nn}kn(e){var t=this;Re("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Nn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Y.Z)(function*(){t.Nn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Fu(r)?Re("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield xa(r)}yield t.kn(3e5)}))}}class lh{constructor(e,t){this.On=e,this.params=t}calculateTargetCount(e,t){return this.On.Mn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ae.resolve(rs.ot);const r=new TD(t);return this.On.forEachTarget(e,o=>r.xn(o.sequenceNumber)).next(()=>this.On.Fn(e,o=>r.xn(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.On.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.On.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Re("LruGarbageCollector","Garbage collection skipped; disabled"),ae.resolve(Tw)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Re("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Tw):this.$n(e,t))}getCacheSize(e){return this.On.getCacheSize(e)}$n(e,t){let r,o,u,l,g,I,b;const A=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(N=>(N>this.params.maximumSequenceNumbersToCollect?(Re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${N}`),o=this.params.maximumSequenceNumbersToCollect):o=N,l=Date.now(),this.nthSequenceNumber(e,o))).next(N=>(r=N,g=Date.now(),this.removeTargets(e,r,t))).next(N=>(u=N,I=Date.now(),this.removeOrphanedDocuments(e,r))).next(N=>(b=Date.now(),Cg()<=hn.in.DEBUG&&Re("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-A}ms\n\tDetermined least recently used ${o} in `+(g-l)+`ms\n\tRemoved ${u} targets in `+(I-g)+`ms\n\tRemoved ${N} documents in `+(b-I)+`ms\nTotal Duration: ${b-A}ms`),ae.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:N})))}}class HT{constructor(e,t){this.db=e,this.garbageCollector=new lh(this,t)}Mn(e){const t=this.Bn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}Bn(e){let t=0;return this.Fn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Fn(e,t){return this.Ln(e,(r,o)=>t(o))}addReference(e,t,r){return dh(e,r)}removeReference(e,t,r){return dh(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return dh(e,t)}Un(e,t){return function(r,o){let u=!1;return fv(r).Y(l=>hv(r,l,o).next(g=>(g&&(u=!0),ae.resolve(!g)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Ln(e,(l,g)=>{if(g<=t){const I=this.Un(e,l).next(b=>{if(!b)return u++,r.getEntry(e,l).next(()=>(r.removeEntry(l,bt.min()),Fa(e).delete([0,ji(l.path)])))});o.push(I)}}).next(()=>ae.waitFor(o)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return dh(e,t)}Ln(e,t){const r=Fa(e);let o,u=rs.ot;return r.J({index:"documentTargetsIndex"},([l,g],{path:I,sequenceNumber:b})=>{0===l?(u!==rs.ot&&t(new Ge(Zs(o)),u),u=b,o=I):u=rs.ot}).next(()=>{u!==rs.ot&&t(new Ge(Zs(o)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function dh(n,e){return Fa(n).put((r=n.currentSequenceNumber,{targetId:0,path:ji(e.path),sequenceNumber:r}));var r}class SD{constructor(){this.changes=new Pa(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Zt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ae.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Aw{constructor(e){this.wt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Tl(e).put(r)}removeEntry(e,t,r){return Tl(e).delete(function(o,u){const l=o.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],Qg(u),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.qn(e,r)))}getEntry(e,t){let r=Zt.newInvalidDocument(t);return Tl(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(pp(t))},(o,u)=>{r=this.Kn(t,u)}).next(()=>r)}Gn(e,t){let r={size:0,document:Zt.newInvalidDocument(t)};return Tl(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(pp(t))},(o,u)=>{r={document:this.Kn(t,u),size:hp(u)}}).next(()=>r)}getEntries(e,t){let r=bi();return this.Qn(e,t,(o,u)=>{const l=this.Kn(o,u);r=r.insert(o,l)}).next(()=>r)}jn(e,t){let r=bi(),o=new mn(Ge.comparator);return this.Qn(e,t,(u,l)=>{const g=this.Kn(u,l);r=r.insert(u,g),o=o.insert(u,hp(l))}).next(()=>({documents:r,Wn:o}))}Qn(e,t,r){if(t.isEmpty())return ae.resolve();let o=new sn(Cl);t.forEach(I=>o=o.add(I));const u=IDBKeyRange.bound(pp(o.first()),pp(o.last())),l=o.getIterator();let g=l.getNext();return Tl(e).J({index:"documentKeyIndex",range:u},(I,b,A)=>{const N=Ge.fromSegments([...b.prefixPath,b.collectionGroup,b.documentId]);for(;g&&Cl(g,N)<0;)r(g,null),g=l.getNext();g&&g.isEqual(N)&&(r(g,b),g=l.hasNext()?l.getNext():null),g?A.q(pp(g)):A.done()}).next(()=>{for(;g;)r(g,null),g=l.hasNext()?l.getNext():null})}getAllFromCollection(e,t,r){const o=[t.popLast().toArray(),t.lastSegment(),Qg(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Tl(e).K(IDBKeyRange.bound(o,u,!0)).next(l=>{let g=bi();for(const I of l){const b=this.Kn(Ge.fromSegments(I.prefixPath.concat(I.collectionGroup,I.documentId)),I);g=g.insert(b.key,b)}return g})}getAllFromCollectionGroup(e,t,r,o){let u=bi();const l=xw(t,r),g=xw(t,_s.max());return Tl(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,g,!0)},(I,b,A)=>{const N=this.Kn(Ge.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);u=u.insert(N.key,N),u.size===o&&A.done()}).next(()=>u)}newChangeBuffer(e){return new zT(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return mt(e).get("remoteDocumentGlobalKey").next(t=>(Dt(!!t),t))}qn(e,t){return mt(e).put("remoteDocumentGlobalKey",t)}Kn(e,t){if(t){const r=function iv(n,e){let t;if(e.document)t=qg(n.ne,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ge.fromSegments(e.noDocument.path),o=_l(e.noDocument.readTime);t=Zt.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Je();{const r=Ge.fromSegments(e.unknownDocument.path),o=_l(e.unknownDocument.version);t=Zt.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(r){const o=new Nn(r[0],r[1]);return bt.fromTimestamp(o)}(e.readTime)),t}(this.wt,t);if(!r.isNoDocument()||!r.version.isEqual(bt.min()))return r}return Zt.newInvalidDocument(e)}}function gv(n){return new Aw(n)}class zT extends SD{constructor(e,t){super(),this.zn=e,this.trackRemovals=t,this.Hn=new Pa(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new sn((u,l)=>Rt(u.canonicalString(),l.canonicalString()));return this.changes.forEach((u,l)=>{const g=this.Hn.get(u);if(t.push(this.zn.removeEntry(e,u,g.readTime)),l.isValidDocument()){const I=oh(this.zn.wt,l);o=o.add(u.path.popLast());const b=hp(I);r+=b-g.size,t.push(this.zn.addEntry(e,u,I))}else if(r-=g.size,this.trackRemovals){const I=oh(this.zn.wt,l.convertToNoDocument(bt.min()));t.push(this.zn.addEntry(e,u,I))}}),o.forEach(u=>{t.push(this.zn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.zn.updateMetadata(e,r)),ae.waitFor(t)}getFromCache(e,t){return this.zn.Gn(e,t).next(r=>(this.Hn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.zn.jn(e,t).next(({documents:r,Wn:o})=>(o.forEach((u,l)=>{this.Hn.set(u,{size:l,readTime:r.get(u).readTime})}),r))}}function mt(n){return Dr(n,"remoteDocumentGlobal")}function Tl(n){return Dr(n,"remoteDocumentsV14")}function pp(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function xw(n,e){const t=e.documentKey.path.toArray();return[n,Qg(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Cl(n,e){const t=n.path.toArray(),r=e.path.toArray();let o=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(o=Rt(t[u],r[u]),o)return o;return o=Rt(t.length,r.length),o||(o=Rt(t[t.length-2],r[r.length-2]),o||Rt(t[t.length-1],r[r.length-1]))}class AD{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class gp{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(r=o,this.getBaseDocument(e,t,r))).next(o=>(null!==r&&Na(r.mutation,o,ui.empty(),Nn.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Nt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Nt()){const o=qs();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,r).next(u=>{let l=eh();return u.forEach((g,I)=>{l=l.insert(g,I.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=qs();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Nt()))}populateOverlays(e,t,r){const o=[];return r.forEach(u=>{t.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(e,o).next(u=>{u.forEach((l,g)=>{t.set(l,g)})})}computeViews(e,t,r,o){let u=bi();const l=th(),g=th();return t.forEach((I,b)=>{const A=r.get(b.key);o.has(b.key)&&(void 0===A||A.mutation instanceof fr)?u=u.insert(b.key,b):void 0!==A&&(l.set(b.key,A.mutation.getFieldMask()),Na(A.mutation,b,A.mutation.getFieldMask(),Nn.now()))}),this.recalculateAndSaveOverlays(e,u).next(I=>(I.forEach((b,A)=>l.set(b,A)),t.forEach((b,A)=>{var N;return g.set(b,new AD(A,null!==(N=l.get(b))&&void 0!==N?N:null))}),g))}recalculateAndSaveOverlays(e,t){const r=th();let o=new mn((l,g)=>l-g),u=Nt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const g of l)g.keys().forEach(I=>{const b=t.get(I);if(null===b)return;let A=r.get(I)||ui.empty();A=g.applyToLocalView(b,A),r.set(I,A);const N=(o.get(g.batchId)||Nt()).add(I);o=o.insert(g.batchId,N)})}).next(()=>{const l=[],g=o.getReverseIterator();for(;g.hasNext();){const I=g.getNext(),b=I.key,A=I.value,N=Hy();A.forEach(W=>{if(!u.has(W)){const X=J0(t.get(W),r.get(W));null!==X&&N.set(W,X),u=u.add(W)}}),l.push(this.documentOverlayCache.saveOverlays(e,b,N))}return ae.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Ge.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):ky(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var o}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next(u=>{const l=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-u.size):ae.resolve(qs());let g=-1,I=u;return l.next(b=>ae.forEach(b,(A,N)=>(g<N.largestBatchId&&(g=N.largestBatchId),u.get(A)?ae.resolve():this.getBaseDocument(e,A,N).next(W=>{I=I.insert(A,W)}))).next(()=>this.populateOverlays(e,b,u)).next(()=>this.computeViews(e,I,b,Nt())).next(A=>({batchId:g,changes:$y(A)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ge(t)).next(r=>{let o=eh();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const o=t.collectionGroup;let u=eh();return this.indexManager.getCollectionParents(e,o).next(l=>ae.forEach(l,g=>{const I=(b=t,A=g.child(o),new ws(A,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt));var b,A;return this.getDocumentsMatchingCollectionQuery(e,I,r).next(b=>{b.forEach((A,N)=>{u=u.insert(A,N)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let o;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(u=>(o=u,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(u=>{u.forEach((g,I)=>{const b=I.getKey();null===o.get(b)&&(o=o.insert(b,Zt.newInvalidDocument(b)))});let l=eh();return o.forEach((g,I)=>{const b=u.get(g);void 0!==b&&Na(b.mutation,I,ui.empty(),Nn.now()),Fy(t,I)&&(l=l.insert(g,I))}),l})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):ae.resolve(Zt.newInvalidDocument(t))}}class em{constructor(e){this.wt=e,this.Jn=new Map,this.Yn=new Map}getBundleMetadata(e,t){return ae.resolve(this.Jn.get(t))}saveBundleMetadata(e,t){var r;return this.Jn.set(t.id,{id:(r=t).id,version:r.version,createTime:Er(r.createTime)}),ae.resolve()}getNamedQuery(e,t){return ae.resolve(this.Yn.get(t))}saveNamedQuery(e,t){return this.Yn.set(t.name,{name:(r=t).name,query:uh(r.bundledQuery),readTime:Er(r.readTime)}),ae.resolve();var r}}class Kn{constructor(){this.overlays=new mn(Ge.comparator),this.Xn=new Map}getOverlay(e,t){return ae.resolve(this.overlays.get(t))}getOverlays(e,t){const r=qs();return ae.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((o,u)=>{this.ie(e,t,u)}),ae.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.Xn.get(r);return void 0!==o&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.Xn.delete(r)),ae.resolve()}getOverlaysForCollection(e,t,r){const o=qs(),u=t.length+1,l=new Ge(t.child("")),g=this.overlays.getIteratorFrom(l);for(;g.hasNext();){const I=g.getNext().value,b=I.getKey();if(!t.isPrefixOf(b.path))break;b.path.length===u&&I.largestBatchId>r&&o.set(I.getKey(),I)}return ae.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new mn((b,A)=>b-A);const l=this.overlays.getIterator();for(;l.hasNext();){const b=l.getNext().value;if(b.getKey().getCollectionGroup()===t&&b.largestBatchId>r){let A=u.get(b.largestBatchId);null===A&&(A=qs(),u=u.insert(b.largestBatchId,A)),A.set(b.getKey(),b)}}const g=qs(),I=u.getIterator();for(;I.hasNext()&&(I.getNext().value.forEach((b,A)=>g.set(b,A)),!(g.size()>=o)););return ae.resolve(g)}ie(e,t,r){const o=this.overlays.get(r.key);if(null!==o){const l=this.Xn.get(o.largestBatchId).delete(r.key);this.Xn.set(o.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new rv(t,r));let u=this.Xn.get(t);void 0===u&&(u=Nt(),this.Xn.set(t,u)),this.Xn.set(t,u.add(r.key))}}class Mw{constructor(){this.Zn=new sn(br.ts),this.es=new sn(br.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,t){const r=new br(e,t);this.Zn=this.Zn.add(r),this.es=this.es.add(r)}ss(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.rs(new br(e,t))}os(e,t){e.forEach(r=>this.removeReference(r,t))}us(e){const t=new Ge(new Kt([])),r=new br(t,e),o=new br(t,e+1),u=[];return this.es.forEachInRange([r,o],l=>{this.rs(l),u.push(l.key)}),u}cs(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const t=new Ge(new Kt([])),r=new br(t,e),o=new br(t,e+1);let u=Nt();return this.es.forEachInRange([r,o],l=>{u=u.add(l.key)}),u}containsKey(e){const t=new br(e,0),r=this.Zn.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class br{constructor(e,t){this.key=e,this.ls=t}static ts(e,t){return Ge.comparator(e.key,t.key)||Rt(e.ls,t.ls)}static ns(e,t){return Rt(e.ls,t.ls)||Ge.comparator(e.key,t.key)}}class Rw{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.fs=1,this.ds=new sn(br.ts)}checkEmpty(e){return ae.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,o){const u=this.fs;this.fs++;const l=new Yg(u,t,r,o);this.mutationQueue.push(l);for(const g of o)this.ds=this.ds.add(new br(g.key,u)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return ae.resolve(l)}lookupMutationBatch(e,t){return ae.resolve(this._s(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.ws(t+1),u=o<0?0:o;return ae.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ae.resolve(0===this.mutationQueue.length?-1:this.fs-1)}getAllMutationBatches(e){return ae.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new br(t,0),o=new br(t,Number.POSITIVE_INFINITY),u=[];return this.ds.forEachInRange([r,o],l=>{const g=this._s(l.ls);u.push(g)}),ae.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new sn(Rt);return t.forEach(o=>{const u=new br(o,0),l=new br(o,Number.POSITIVE_INFINITY);this.ds.forEachInRange([u,l],g=>{r=r.add(g.ls)})}),ae.resolve(this.gs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;Ge.isDocumentKey(u)||(u=u.child(""));const l=new br(new Ge(u),0);let g=new sn(Rt);return this.ds.forEachWhile(I=>{const b=I.key.path;return!!r.isPrefixOf(b)&&(b.length===o&&(g=g.add(I.ls)),!0)},l),ae.resolve(this.gs(g))}gs(e){const t=[];return e.forEach(r=>{const o=this._s(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){Dt(0===this.ys(t.batchId,"removed")),this.mutationQueue.shift();let r=this.ds;return ae.forEach(t.mutations,o=>{const u=new br(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.ds=r})}In(e){}containsKey(e,t){const r=new br(t,0),o=this.ds.firstAfterOrEqual(r);return ae.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return ae.resolve()}ys(e,t){return this.ws(e)}ws(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}_s(e){const t=this.ws(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class xD{constructor(e){this.ps=e,this.docs=new mn(Ge.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,l=this.ps(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ae.resolve(r?r.document.mutableCopy():Zt.newInvalidDocument(t))}getEntries(e,t){let r=bi();return t.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():Zt.newInvalidDocument(o))}),ae.resolve(r)}getAllFromCollection(e,t,r){let o=bi();const u=new Ge(t.child("")),l=this.docs.getIteratorFrom(u);for(;l.hasNext();){const{key:g,value:{document:I}}=l.getNext();if(!t.isPrefixOf(g.path))break;g.path.length>t.length+1||Sy(Cy(I),r)<=0||(o=o.insert(I.key,I.mutableCopy()))}return ae.resolve(o)}getAllFromCollectionGroup(e,t,r,o){Je()}Is(e,t){return ae.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Nw(this)}getSize(e){return ae.resolve(this.size)}}class Nw extends SD{constructor(e){super(),this.zn=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.zn.addEntry(e,o)):this.zn.removeEntry(r)}),ae.waitFor(t)}getFromCache(e,t){return this.zn.getEntry(e,t)}getAllFromCache(e,t){return this.zn.getEntries(e,t)}}class Ow{constructor(e){this.persistence=e,this.Ts=new Pa(t=>ul(t),ep),this.lastRemoteSnapshotVersion=bt.min(),this.highestTargetId=0,this.Es=0,this.As=new Mw,this.targetCount=0,this.Rs=Ku.An()}forEachTarget(e,t){return this.Ts.forEach((r,o)=>t(o)),ae.resolve()}getLastRemoteSnapshotVersion(e){return ae.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ae.resolve(this.Es)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),ae.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Es&&(this.Es=t),ae.resolve()}vn(e){this.Ts.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Rs=new Ku(t),this.highestTargetId=t),e.sequenceNumber>this.Es&&(this.Es=e.sequenceNumber)}addTargetData(e,t){return this.vn(t),this.targetCount+=1,ae.resolve()}updateTargetData(e,t){return this.vn(t),ae.resolve()}removeTargetData(e,t){return this.Ts.delete(t.target),this.As.us(t.targetId),this.targetCount-=1,ae.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.Ts.forEach((l,g)=>{g.sequenceNumber<=t&&null===r.get(g.targetId)&&(this.Ts.delete(l),u.push(this.removeMatchingKeysForTargetId(e,g.targetId)),o++)}),ae.waitFor(u).next(()=>o)}getTargetCount(e){return ae.resolve(this.targetCount)}getTargetData(e,t){const r=this.Ts.get(t)||null;return ae.resolve(r)}addMatchingKeys(e,t,r){return this.As.ss(t,r),ae.resolve()}removeMatchingKeys(e,t,r){this.As.os(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(l=>{u.push(o.markPotentiallyOrphaned(e,l))}),ae.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.As.us(t),ae.resolve()}getMatchingKeysForTargetId(e,t){const r=this.As.hs(t);return ae.resolve(r)}containsKey(e,t){return ae.resolve(this.As.containsKey(t))}}class mv{constructor(e,t){this.bs={},this.overlays={},this.Ps=new rs(0),this.vs=!1,this.vs=!0,this.referenceDelegate=e(this),this.Vs=new Ow(this),this.indexManager=new DD,this.remoteDocumentCache=new xD(r=>this.referenceDelegate.Ss(r)),this.wt=new yw(t),this.Ds=new em(this.wt)}start(){return Promise.resolve()}shutdown(){return this.vs=!1,Promise.resolve()}get started(){return this.vs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Kn,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.bs[e.toKey()];return r||(r=new Rw(t,this.referenceDelegate),this.bs[e.toKey()]=r),r}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ds}runTransaction(e,t,r){Re("MemoryPersistence","Starting transaction:",e);const o=new Pw(this.Ps.next());return this.referenceDelegate.Cs(),r(o).next(u=>this.referenceDelegate.xs(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Ns(e,t){return ae.or(Object.values(this.bs).map(r=>()=>r.containsKey(e,t)))}}class Pw extends C0{constructor(e){super(),this.currentSequenceNumber=e}}class tm{constructor(e){this.persistence=e,this.ks=new Mw,this.Os=null}static Ms(e){return new tm(e)}get Fs(){if(this.Os)return this.Os;throw Je()}addReference(e,t,r){return this.ks.addReference(r,t),this.Fs.delete(r.toString()),ae.resolve()}removeReference(e,t,r){return this.ks.removeReference(r,t),this.Fs.add(r.toString()),ae.resolve()}markPotentiallyOrphaned(e,t){return this.Fs.add(t.toString()),ae.resolve()}removeTarget(e,t){this.ks.us(t.targetId).forEach(o=>this.Fs.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.Fs.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}Cs(){this.Os=new Set}xs(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ae.forEach(this.Fs,r=>{const o=Ge.fromPath(r);return this.$s(e,o).next(u=>{u||t.removeEntry(o,bt.min())})}).next(()=>(this.Os=null,t.apply(e)))}updateLimboDocument(e,t){return this.$s(e,t).next(r=>{r?this.Fs.delete(t.toString()):this.Fs.add(t.toString())})}Ss(e){return 0}$s(e,t){return ae.or([()=>ae.resolve(this.ks.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ns(e,t)])}}class MD{constructor(e){this.wt=e}O(e,t,r,o){const u=new $f("createOrUpgrade",t);var g;r<1&&o>=1&&(e.createObjectStore("owner"),(g=e).createObjectStore("mutationQueues",{keyPath:"userId"}),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",uw,{unique:!0}),g.createObjectStore("documentMutations"),kw(e),function(g){g.createObjectStore("remoteDocuments")}(e));let l=ae.resolve();return r<3&&o>=3&&(0!==r&&(function(g){g.deleteObjectStore("targetDocuments"),g.deleteObjectStore("targets"),g.deleteObjectStore("targetGlobal")}(e),kw(e)),l=l.next(()=>function(g){const I=g.store("targetGlobal"),b={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:bt.min().toTimestamp(),targetCount:0};return I.put("targetGlobalKey",b)}(u))),r<4&&o>=4&&(0!==r&&(l=l.next(()=>function(g,I){return I.store("mutations").K().next(b=>{g.deleteObjectStore("mutations"),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",uw,{unique:!0});const A=I.store("mutations"),N=b.map(W=>A.put(W));return ae.waitFor(N)})}(e,u))),l=l.next(()=>{!function(g){g.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&o>=5&&(l=l.next(()=>this.Bs(u))),r<6&&o>=6&&(l=l.next(()=>(function(g){g.createObjectStore("remoteDocumentGlobal")}(e),this.Ls(u)))),r<7&&o>=7&&(l=l.next(()=>this.Us(u))),r<8&&o>=8&&(l=l.next(()=>this.qs(e,u))),r<9&&o>=9&&(l=l.next(()=>{!function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&o>=10&&(l=l.next(()=>this.Ks(u))),r<11&&o>=11&&(l=l.next(()=>{(function(g){g.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(g){g.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(l=l.next(()=>{!function(g){const I=g.createObjectStore("documentOverlays",{keyPath:$T});I.createIndex("collectionPathOverlayIndex",pw,{unique:!1}),I.createIndex("collectionGroupOverlayIndex",gw,{unique:!1})}(e)})),r<13&&o>=13&&(l=l.next(()=>function(g){const I=g.createObjectStore("remoteDocumentsV14",{keyPath:gD});I.createIndex("documentKeyIndex",cw),I.createIndex("collectionGroupIndex",mD)}(e)).next(()=>this.Gs(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(l=l.next(()=>this.Qs(e,u))),r<15&&o>=15&&(l=l.next(()=>function(g){g.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),g.createObjectStore("indexState",{keyPath:vD}).createIndex("sequenceNumberIndex",hw,{unique:!1}),g.createObjectStore("indexEntries",{keyPath:_D}).createIndex("documentKeyIndex",fw,{unique:!1})}(e))),l}Ls(e){let t=0;return e.store("remoteDocuments").J((r,o)=>{t+=hp(o)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Bs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.K().next(o=>ae.forEach(o,u=>{const l=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.K("userMutationsIndex",l).next(g=>ae.forEach(g,I=>{Dt(I.userId===u.userId);const b=wl(this.wt,I);return Cw(e,u.userId,b).next(()=>{})}))}))}Us(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const u=[];return r.J((l,g)=>{const I=new Kt(l),b=[0,ji(I)];u.push(t.get(b).next(A=>A?ae.resolve():t.put({targetId:0,path:ji(I),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>ae.waitFor(u))})}qs(e,t){e.createObjectStore("collectionParents",{keyPath:yD});const r=t.store("collectionParents"),o=new dv,u=l=>{if(o.add(l)){const g=l.lastSegment(),I=l.popLast();return r.put({collectionId:g,parent:ji(I)})}};return t.store("remoteDocuments").J({H:!0},(l,g)=>{const I=new Kt(l);return u(I.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([l,g,I],b)=>{const A=Zs(g);return u(A.popLast())}))}Ks(e){const t=e.store("targets");return t.J((r,o)=>{const u=ah(o),l=sv(this.wt,u);return t.put(l)})}Gs(e,t){const r=t.store("remoteDocuments"),o=[];return r.J((u,l)=>{const g=t.store("remoteDocumentsV14"),I=(b=l,b.document?new Ge(Kt.fromString(b.document.name).popFirst(5)):b.noDocument?Ge.fromSegments(b.noDocument.path):b.unknownDocument?Ge.fromSegments(b.unknownDocument.path):Je()).path.toArray();var b;const A={prefixPath:I.slice(0,I.length-2),collectionGroup:I[I.length-2],documentId:I[I.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};o.push(g.put(A))}).next(()=>ae.waitFor(o))}Qs(e,t){const r=t.store("mutations"),o=gv(this.wt),u=new mv(tm.Ms,this.wt.ne);return r.K().next(l=>{const g=new Map;return l.forEach(I=>{var b;let A=null!==(b=g.get(I.userId))&&void 0!==b?b:Nt();wl(this.wt,I).keys().forEach(N=>A=A.add(N)),g.set(I.userId,A)}),ae.forEach(g,(I,b)=>{const A=new Yr(b),N=up.se(this.wt,A),W=u.getIndexManager(A),X=fp.se(A,this.wt,W,u.referenceDelegate);return new gp(o,X,N,W).recalculateAndSaveOverlaysForDocumentKeys(new is(t,rs.ot),I).next()})})}}function kw(n){n.createObjectStore("targetDocuments",{keyPath:dw}).createIndex("documentTargetsIndex",sh,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",lw,{unique:!0}),n.createObjectStore("targetGlobal")}const Sl="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class yv{constructor(e,t,r,o,u,l,g,I,b,A,N=14){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.js=u,this.window=l,this.document=g,this.Ws=b,this.zs=A,this.Hs=N,this.Ps=null,this.vs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Js=null,this.inForeground=!1,this.Ys=null,this.Xs=null,this.Zs=Number.NEGATIVE_INFINITY,this.ti=W=>Promise.resolve(),!yv.V())throw new Ae(le.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new HT(this,o),this.ei=t+"main",this.wt=new yw(I),this.ni=new zs(this.ei,this.Hs,new MD(this.wt)),this.Vs=new Sw(this.referenceDelegate,this.wt),this.remoteDocumentCache=gv(this.wt),this.Ds=new vw,this.window&&this.window.localStorage?this.si=this.window.localStorage:(this.si=null,!1===A&&rr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ii().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ae(le.FAILED_PRECONDITION,Sl);return this.ri(),this.oi(),this.ui(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Vs.getHighestSequenceNumber(e))}).then(e=>{this.Ps=new rs(e,this.Ws)}).then(()=>{this.vs=!0}).catch(e=>(this.ni&&this.ni.close(),Promise.reject(e)))}ci(e){var t=this;return this.ti=function(){var r=(0,Y.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ni.F(function(){var t=(0,Y.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.js.enqueueAndForget((0,Y.Z)(function*(){t.started&&(yield t.ii())})))}ii(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>nm(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.ai(e).next(t=>{t||(this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)))})}).next(()=>this.hi(e)).next(t=>this.isPrimary&&!t?this.li(e).next(()=>!1):!!t&&this.fi(e).next(()=>!0))).catch(e=>{if(Fu(e))return Re("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Re("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.js.enqueueRetryable(()=>this.ti(e)),this.isPrimary=e})}ai(e){return mp(e).get("owner").next(t=>ae.resolve(this.di(t)))}_i(e){return nm(e).delete(this.clientId)}wi(){var e=this;return(0,Y.Z)(function*(){if(e.isPrimary&&!e.mi(e.Zs,18e5)){e.Zs=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=Dr(r,"clientMetadata");return o.K().next(u=>{const l=e.gi(u,18e5),g=u.filter(I=>-1===l.indexOf(I));return ae.forEach(g,I=>o.delete(I.clientId)).next(()=>g)})}).catch(()=>[]);if(e.si)for(const r of t)e.si.removeItem(e.yi(r.clientId))}})()}ui(){this.Xs=this.js.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ii().then(()=>this.wi()).then(()=>this.ui()))}di(e){return!!e&&e.ownerId===this.clientId}hi(e){return this.zs?ae.resolve(!0):mp(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)){if(this.di(t)&&this.networkEnabled)return!0;if(!this.di(t)){if(!t.allowTabSynchronization)throw new Ae(le.FAILED_PRECONDITION,Sl);return!1}}return!(!this.networkEnabled||!this.inForeground)||nm(e).K().next(r=>void 0===this.gi(r,5e3).find(o=>!(this.clientId===o.clientId||!(!this.networkEnabled&&o.networkEnabled||!this.inForeground&&o.inForeground&&this.networkEnabled===o.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Re("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Y.Z)(function*(){e.vs=!1,e.Ii(),e.Xs&&(e.Xs.cancel(),e.Xs=null),e.Ti(),e.Ei(),yield e.ni.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new is(t,rs.ot);return e.li(r).next(()=>e._i(r))}),e.ni.close(),e.Ai()})()}gi(e,t){return e.filter(r=>this.mi(r.updateTimeMs,t)&&!this.pi(r.clientId))}Ri(){return this.runTransaction("getActiveClients","readonly",e=>nm(e).K().next(t=>this.gi(t,18e5).map(r=>r.clientId)))}get started(){return this.vs}getMutationQueue(e,t){return fp.se(e,this.wt,t,this.referenceDelegate)}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new bD(e,this.wt.ne.databaseId)}getDocumentOverlayCache(e){return up.se(this.wt,e)}getBundleCache(){return this.Ds}runTransaction(e,t,r){Re("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",u=15===(l=this.Hs)?Js:14===l?Qs:13===l?mw:12===l?wD:11===l?Ys:void Je();var l;let g;return this.ni.runTransaction(e,o,u,I=>(g=new is(I,this.Ps?this.Ps.next():rs.ot),"readwrite-primary"===t?this.ai(g).next(b=>!!b||this.hi(g)).next(b=>{if(!b)throw rr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)),new Ae(le.FAILED_PRECONDITION,sl);return r(g)}).next(b=>this.fi(g).next(()=>b)):this.bi(g).next(()=>r(g)))).then(I=>(g.raiseOnCommittedEvent(),I))}bi(e){return mp(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)&&!this.di(t)&&!(this.zs||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ae(le.FAILED_PRECONDITION,Sl)})}fi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return mp(e).put("owner",t)}static V(){return zs.V()}li(e){const t=mp(e);return t.get("owner").next(r=>this.di(r)?(Re("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ae.resolve())}mi(e,t){const r=Date.now();return!(e<r-t||e>r&&(rr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ys=()=>{this.js.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ii()))},this.document.addEventListener("visibilitychange",this.Ys),this.inForeground="visible"===this.document.visibilityState)}Ti(){this.Ys&&(this.document.removeEventListener("visibilitychange",this.Ys),this.Ys=null)}oi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Js=()=>{this.Ii(),(0,gt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.js.enterRestrictedMode(!0),this.js.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Js))}Ei(){this.Js&&(this.window.removeEventListener("pagehide",this.Js),this.Js=null)}pi(e){var t;try{const r=null!==(null===(t=this.si)||void 0===t?void 0:t.getItem(this.yi(e)));return Re("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return rr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ii(){if(this.si)try{this.si.setItem(this.yi(this.clientId),String(Date.now()))}catch(e){rr("Failed to set zombie client id.",e)}}Ai(){if(this.si)try{this.si.removeItem(this.yi(this.clientId))}catch{}}yi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function mp(n){return Dr(n,"owner")}function nm(n){return Dr(n,"clientMetadata")}function hh(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class rm{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Pi=r,this.vi=o}static Vi(e,t){let r=Nt(),o=Nt();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new rm(e,t.fromCache,r,o)}}class vv{constructor(){this.Si=!1}initialize(e,t){this.Di=e,this.indexManager=t,this.Si=!0}getDocumentsMatchingQuery(e,t,r,o){return this.Ci(e,t).next(u=>u||this.xi(e,t,o,r)).next(u=>u||this.Ni(e,t))}Ci(e,t){return ae.resolve(null)}xi(e,t,r,o){return function z0(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}(t)||o.isEqual(bt.min())?this.Ni(e,t):this.Di.getDocuments(e,r).next(u=>{const l=this.ki(t,u);return this.Oi(t,l,r,o)?this.Ni(e,t):(Cg()<=hn.in.DEBUG&&Re("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Ly(t)),this.Mi(e,l,t,T0(o,-1)))})}ki(e,t){let r=new sn(q0(e));return t.forEach((o,u)=>{Fy(e,u)&&(r=r.add(u))}),r}Oi(e,t,r,o){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ni(e,t){return Cg()<=hn.in.DEBUG&&Re("QueryEngine","Using full collection scan to execute query:",Ly(t)),this.Di.getDocumentsMatchingQuery(e,t,_s.min())}Mi(e,t,r,o){return this.Di.getDocumentsMatchingQuery(e,r,o).next(u=>(t.forEach(l=>{u=u.insert(l.key,l)}),u))}}class Lw{constructor(e,t,r,o){this.persistence=e,this.Fi=t,this.wt=o,this.$i=new mn(Rt),this.Bi=new Pa(u=>ul(u),ep),this.Li=new Map,this.Ui=e.getRemoteDocumentCache(),this.Vs=e.getTargetCache(),this.Ds=e.getBundleCache(),this.qi(r)}qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new gp(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.$i))}}function Fw(n,e,t,r){return new Lw(n,e,t,r)}function fh(n,e){return Al.apply(this,arguments)}function Al(){return Al=(0,Y.Z)(function*(n,e){const t=Xe(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next(u=>(o=u,t.qi(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const l=[],g=[];let I=Nt();for(const b of o){l.push(b.batchId);for(const A of b.mutations)I=I.add(A.key)}for(const b of u){g.push(b.batchId);for(const A of b.mutations)I=I.add(A.key)}return t.localDocuments.getDocuments(r,I).next(b=>({Ki:b,removedBatchIds:l,addedBatchIds:g}))})})}),Al.apply(this,arguments)}function Uw(n){const e=Xe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Vs.getLastRemoteSnapshotVersion(t))}function _v(n,e,t){let r=Nt(),o=Nt();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let l=bi();return t.forEach((g,I)=>{const b=u.get(g);I.isFoundDocument()!==b.isFoundDocument()&&(o=o.add(g)),I.isNoDocument()&&I.version.isEqual(bt.min())?(e.removeEntry(g,I.readTime),l=l.insert(g,I)):!b.isValidDocument()||I.version.compareTo(b.version)>0||0===I.version.compareTo(b.version)&&b.hasPendingWrites?(e.addEntry(I),l=l.insert(g,I)):Re("LocalStore","Ignoring outdated watch update for ",g,". Current version:",b.version," Watch version:",I.version)}),{Gi:l,Qi:o}})}function Vw(n,e){const t=Xe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function xl(n,e){const t=Xe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.Vs.getTargetData(r,e).next(u=>u?(o=u,ae.resolve(o)):t.Vs.allocateTargetId(r).next(l=>(o=new Gu(e,l,0,r.currentSequenceNumber),t.Vs.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.$i.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.$i=t.$i.insert(r.targetId,r),t.Bi.set(e,r.targetId)),r})}function ph(n,e,t){return im.apply(this,arguments)}function im(){return im=(0,Y.Z)(function*(n,e,t){const r=Xe(n),o=r.$i.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,l=>r.persistence.referenceDelegate.removeTarget(l,o)))}catch(l){if(!Fu(l))throw l;Re("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.$i=r.$i.remove(e),r.Bi.delete(o.target)}),im.apply(this,arguments)}function sm(n,e,t){const r=Xe(n);let o=bt.min(),u=Nt();return r.persistence.runTransaction("Execute query","readonly",l=>function(g,I,b){const A=Xe(g),N=A.Bi.get(b);return void 0!==N?ae.resolve(A.$i.get(N)):A.Vs.getTargetData(I,b)}(r,l,Is(e)).next(g=>{if(g)return o=g.lastLimboFreeSnapshotVersion,r.Vs.getMatchingKeysForTargetId(l,g.targetId).next(I=>{u=I})}).next(()=>r.Fi.getDocumentsMatchingQuery(l,e,t?o:bt.min(),t?u:Nt())).next(g=>(PD(r,W0(e),g),{documents:g,ji:u})))}function Bw(n,e){const t=Xe(n),r=Xe(t.Vs),o=t.$i.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",u=>r.te(u,e).next(l=>l?l.target:null))}function OD(n,e){const t=Xe(n),r=t.Li.get(e)||bt.min();return t.persistence.runTransaction("Get new document changes","readonly",o=>t.Ui.getAllFromCollectionGroup(o,e,T0(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>(PD(t,e,o),o))}function PD(n,e,t){let r=bt.min();t.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Li.set(e,r)}function jw(){return jw=(0,Y.Z)(function*(n,e,t,r){const o=Xe(n);let u=Nt(),l=bi();for(const b of t){const A=e.Wi(b.metadata.name);b.document&&(u=u.add(A));const N=e.zi(b);N.setReadTime(e.Hi(b.metadata.readTime)),l=l.insert(A,N)}const g=o.Ui.newChangeBuffer({trackRemovals:!0}),I=yield xl(o,(b=r,Is(Kd(Kt.fromString(`__bundle__/docs/${b}`)))));var b;return o.persistence.runTransaction("Apply bundle documents","readwrite",b=>_v(b,g,l).next(A=>(g.apply(b),A)).next(A=>o.Vs.removeMatchingKeysForTargetId(b,I.targetId).next(()=>o.Vs.addMatchingKeys(b,u,I.targetId)).next(()=>o.localDocuments.getLocalViewOfDocuments(b,A.Gi,A.Qi)).next(()=>A.Gi)))}),jw.apply(this,arguments)}function $w(n,e){return gh.apply(this,arguments)}function gh(){return gh=(0,Y.Z)(function*(n,e,t=Nt()){const r=yield xl(n,Is(uh(e.bundledQuery))),o=Xe(n);return o.persistence.runTransaction("Save named query","readwrite",u=>{const l=Er(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return o.Ds.saveNamedQuery(u,e);const g=r.withResumeToken(sr.EMPTY_BYTE_STRING,l);return o.$i=o.$i.insert(g.targetId,g),o.Vs.updateTargetData(u,g).next(()=>o.Vs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>o.Vs.addMatchingKeys(u,t,r.targetId)).next(()=>o.Ds.saveNamedQuery(u,e))})}),gh.apply(this,arguments)}function Hw(n,e){return`firestore_clients_${n}_${e}`}function zw(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function om(n,e){return`firestore_targets_${n}_${e}`}class Yu{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static Ji(e,t,r){const o=JSON.parse(r);let u,l="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return l&&o.error&&(l="string"==typeof o.error.message&&"string"==typeof o.error.code,l&&(u=new Ae(o.error.code,o.error.message))),l?new Yu(e,t,o.state,u):(rr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class yp{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ji(e,t){const r=JSON.parse(t);let o,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(o=new Ae(r.error.code,r.error.message))),u?new yp(e,r.state,o):(rr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class am{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ji(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,u=rp();for(let l=0;o&&l<r.activeTargetIds.length;++l)o=xy(r.activeTargetIds[l]),u=u.add(r.activeTargetIds[l]);return o?new am(e,u):(rr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class wv{constructor(e,t){this.clientId=e,this.onlineState=t}static Ji(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new wv(t.clientId,t.onlineState):(rr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Iv{constructor(){this.activeTargetIds=rp()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Gw{constructor(e,t,r,o,u){this.window=e,this.js=t,this.persistenceKey=r,this.tr=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new mn(Rt),this.started=!1,this.ir=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.rr=Hw(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new Iv),this.cr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.ar=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(g){return`firestore_bundle_loaded_v2_${g}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static V(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Y.Z)(function*(){const t=yield e.syncEngine.Ri();for(const o of t){if(o===e.tr)continue;const u=e.getItem(Hw(e.persistenceKey,o));if(u){const l=am.Ji(o,u);l&&(e.sr=e.sr.insert(l.clientId,l))}}e._r();const r=e.storage.getItem(e.lr);if(r){const o=e.wr(r);o&&e.mr(o)}for(const o of e.ir)e.nr(o);e.ir=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let t=!1;return this.sr.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,t,r){this.yr(e,t,r),this.pr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(om(this.persistenceKey,e));if(r){const o=yp.Ji(e,r);o&&(t=o.state)}}return this.Ir.Xi(e),this._r(),t}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(om(this.persistenceKey,e))}updateQueryState(e,t,r){this.Tr(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.pr(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Re("SharedClientState","READ",e,t),t}setItem(e,t){Re("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Re("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Re("SharedClientState","EVENT",r.key,r.newValue),r.key===this.rr)return void rr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.js.enqueueRetryable((0,Y.Z)(function*(){if(t.started){if(null!==r.key)if(t.cr.test(r.key)){if(null==r.newValue){const o=t.Rr(r.key);return t.br(o,null)}{const o=t.Pr(r.key,r.newValue);if(o)return t.br(o.clientId,o)}}else if(t.ar.test(r.key)){if(null!==r.newValue){const o=t.vr(r.key,r.newValue);if(o)return t.Vr(o)}}else if(t.hr.test(r.key)){if(null!==r.newValue){const o=t.Sr(r.key,r.newValue);if(o)return t.Dr(o)}}else if(r.key===t.lr){if(null!==r.newValue){const o=t.wr(r.newValue);if(o)return t.mr(o)}}else if(r.key===t.ur){const o=function(u){let l=rs.ot;if(null!=u)try{const g=JSON.parse(u);Dt("number"==typeof g),l=g}catch(g){rr("SharedClientState","Failed to read sequence number from WebStorage",g)}return l}(r.newValue);o!==rs.ot&&t.sequenceNumberHandler(o)}else if(r.key===t.dr){const o=t.Cr(r.newValue);yield Promise.all(o.map(u=>t.syncEngine.Nr(u)))}}else t.ir.push(r)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,t,r){const o=new Yu(this.currentUser,e,t,r),u=zw(this.persistenceKey,this.currentUser,e);this.setItem(u,o.Yi())}pr(e){const t=zw(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Er(e){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:e}))}Tr(e,t,r){const o=om(this.persistenceKey,e),u=new yp(e,t,r);this.setItem(o,u.Yi())}Ar(e){const t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}Rr(e){const t=this.cr.exec(e);return t?t[1]:null}Pr(e,t){const r=this.Rr(e);return am.Ji(r,t)}vr(e,t){const r=this.ar.exec(e),o=Number(r[1]);return Yu.Ji(new Yr(void 0!==r[2]?r[2]:null),o,t)}Sr(e,t){const r=this.hr.exec(e),o=Number(r[1]);return yp.Ji(o,t)}wr(e){return wv.Ji(e)}Cr(e){return JSON.parse(e)}Vr(e){var t=this;return(0,Y.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.kr(e.batchId,e.state,e.error);Re("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Dr(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}br(e,t){const r=t?this.sr.insert(e,t):this.sr.remove(e),o=this.gr(this.sr),u=this.gr(r),l=[],g=[];return u.forEach(I=>{o.has(I)||l.push(I)}),o.forEach(I=>{u.has(I)||g.push(I)}),this.syncEngine.Mr(l,g).then(()=>{this.sr=r})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let t=rp();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class Ww{constructor(){this.Fr=new Iv,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,r){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new Iv,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class qw{Br(e){}shutdown(){}}class Kw{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Kr(),this.Gr=[],this.Qr()}Br(e){this.Gr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){Re("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Gr)e(0)}Kr(){Re("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Gr)e(1)}static V(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const kD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class vp{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class LD extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,r,o,u){const l=this.oo(e,t);Re("RestConnection","Sending: ",l,r);const g={};return this.uo(g,o,u),this.co(e,l,g,r).then(I=>(Re("RestConnection","Received: ",I),I),I=>{throw jf("RestConnection",`${e} failed with error: `,I,"url: ",l,"request:",r),I})}ao(e,t,r,o,u,l){return this.ro(e,t,r,o,u)}uo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+tl,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),r&&r.headers.forEach((o,u)=>e[u]=o)}oo(e,t){return`${this.so}/v1/${t}:${kD[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,t,r,o){return new Promise((u,l)=>{const g=new HE;g.listenOnce(jE.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case _y.NO_ERROR:const b=g.getResponseJson();Re("Connection","XHR received:",JSON.stringify(b)),u(b);break;case _y.TIMEOUT:Re("Connection",'RPC "'+e+'" timed out'),l(new Ae(le.DEADLINE_EXCEEDED,"Request time out"));break;case _y.HTTP_ERROR:const A=g.getStatus();if(Re("Connection",'RPC "'+e+'" failed with status:',A,"response text:",g.getResponseText()),A>0){const N=g.getResponseJson().error;if(N&&N.status&&N.message){const W=function(X){const de=X.toLowerCase().replace(/_/g,"-");return Object.values(le).indexOf(de)>=0?de:le.UNKNOWN}(N.status);l(new Ae(W,N.message))}else l(new Ae(le.UNKNOWN,"Server responded with status "+g.getStatus()))}else l(new Ae(le.UNAVAILABLE,"Connection failed."));break;default:Je()}}finally{Re("Connection",'RPC "'+e+'" completed.')}});const I=JSON.stringify(o);g.send(t,"POST",I,r,15)})}ho(e,t,r){const o=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=VE(),l=BE(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(g.xmlHttpFactory=new Aa({})),this.uo(g.initMessageHeaders,t,r),(0,gt.uI)()||(0,gt.b$)()||(0,gt.d)()||(0,gt.w1)()||(0,gt.Mn)()||(0,gt.ru)()||(g.httpHeadersOverwriteParam="$httpHeaders");const I=o.join("");Re("Connection","Creating WebChannel: "+I,g);const b=u.createWebChannel(I,g);let A=!1,N=!1;const W=new vp({jr:de=>{N?Re("Connection","Not sending because WebChannel is closed:",de):(A||(Re("Connection","Opening WebChannel transport."),b.open(),A=!0),Re("Connection","WebChannel sending:",de),b.send(de))},Wr:()=>b.close()}),X=(de,Fe,He)=>{de.listen(Fe,Ot=>{try{He(Ot)}catch(Mt){setTimeout(()=>{throw Mt},0)}})};return X(b,Tg.EventType.OPEN,()=>{N||Re("Connection","WebChannel transport opened.")}),X(b,Tg.EventType.CLOSE,()=>{N||(N=!0,Re("Connection","WebChannel transport closed"),W.eo())}),X(b,Tg.EventType.ERROR,de=>{N||(N=!0,jf("Connection","WebChannel transport errored:",de),W.eo(new Ae(le.UNAVAILABLE,"The operation could not be completed")))}),X(b,Tg.EventType.MESSAGE,de=>{var Fe;if(!N){const He=de.data[0];Dt(!!He);const Mt=He.error||(null===(Fe=He[0])||void 0===Fe?void 0:Fe.error);if(Mt){Re("Connection","WebChannel received error:",Mt);const Ft=Mt.status;let St=function(on){const zi=Tn[on];if(void 0!==zi)return ml(zi)}(Ft),Ut=Mt.message;void 0===St&&(St=le.INTERNAL,Ut="Unknown error status: "+Ft+" with message "+Mt.message),N=!0,W.eo(new Ae(St,Ut)),b.close()}else Re("Connection","WebChannel received:",He),W.no(He)}}),X(l,$E.STAT_EVENT,de=>{de.stat===el.PROXY?Re("Connection","Detected buffering proxy"):de.stat===el.NOPROXY&&Re("Connection","Detected no buffering proxy")}),setTimeout(()=>{W.Zr()},0),W}}function Ev(){return typeof window<"u"?window:null}function um(){return typeof document<"u"?document:null}function mh(n){return new zy(n,!0)}class Dv{constructor(e,t,r=1e3,o=1.5,u=6e4){this.js=e,this.timerId=t,this.lo=r,this.fo=o,this._o=u,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),o=Math.max(0,t-r);o>0&&Re("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.mo=this.js.enqueueAfterDelay(this.timerId,o,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class bv{constructor(e,t,r,o,u,l,g,I){this.js=e,this.Ao=r,this.Ro=o,this.bo=u,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=g,this.listener=I,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new Dv(e,t)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return(0,Y.Z)(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.vo&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,()=>this.Oo()))}Mo(e){this.Fo(),this.stream.send(e)}Oo(){var e=this;return(0,Y.Z)(function*(){if(e.Co())return e.close(0)})()}Fo(){this.vo&&(this.vo.cancel(),this.vo=null)}$o(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}close(e,t){var r=this;return(0,Y.Z)(function*(){r.Fo(),r.$o(),r.So.cancel(),r.Po++,4!==e?r.So.reset():t&&t.code===le.RESOURCE_EXHAUSTED?(rr(t.toString()),rr("Using maximum backoff delay to prevent overloading the backend."),r.So.po()):t&&t.code===le.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Bo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Jr(t)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.Po===t&&this.Uo(r,o)},r=>{e(()=>{const o=new Ae(le.UNKNOWN,"Fetching auth token failed: "+r.message);return this.qo(o)})})}Uo(e,t){const r=this.Lo(this.Po);this.stream=this.Ko(e,t),this.stream.zr(()=>{r(()=>(this.state=2,this.Vo=this.js.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(o=>{r(()=>this.qo(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}xo(){var e=this;this.state=5,this.So.Io((0,Y.Z)(function*(){e.state=0,e.start()}))}qo(e){return Re("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.js.enqueueAndForget(()=>this.Po===e?t():(Re("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class FD extends bv{constructor(e,t,r,o,u,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,l),this.wt=u}Ko(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=function sw(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(I=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===I?1:"REMOVE"===I?2:"CURRENT"===I?3:"RESET"===I?4:Je(),o=e.targetChange.targetIds||[],u=function(I,b){return I.dt?(Dt(void 0===b||"string"==typeof b),sr.fromBase64String(b||"")):(Dt(void 0===b||b instanceof Uint8Array),sr.fromUint8Array(b||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,g=l&&function(I){const b=void 0===I.code?le.UNKNOWN:ml(I.code);return new Ae(b,I.message||"")}(l);t=new sp(r,o,u,g||null)}else if("documentChange"in e){const r=e.documentChange,o=Ks(n,r.document.name),u=Er(r.document.updateTime),l=new Jr({mapValue:{fields:r.document.fields}}),g=Zt.newFoundDocument(o,u,l);t=new $g(r.targetIds||[],r.removedTargetIds||[],g.key,g)}else if("documentDelete"in e){const r=e.documentDelete,o=Ks(n,r.document),u=r.readTime?Er(r.readTime):bt.min(),l=Zt.newNoDocument(o,u);t=new $g([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,o=Ks(n,r.document);t=new $g([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return Je();{const r=e.filter,u=new Xd(r.count||0);t=new ip(r.targetId,u)}}var I;return t}(this.wt,e),r=function(o){if(!("targetChange"in o))return bt.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?bt.min():u.readTime?Er(u.readTime):bt.min()}(e);return this.listener.Go(t,r)}Qo(e){const t={};t.database=op(this.wt),t.addTarget=function(o,u){let l;const g=u.target;return l=Ng(g)?{documents:Yy(o,g)}:{query:Qy(o,g)},l.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?l.resumeToken=Gy(o,u.resumeToken):u.snapshotVersion.compareTo(bt.min())>0&&(l.readTime=nh(o,u.snapshotVersion.toTimestamp())),l}(this.wt,e);const r=function Zg(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Je()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Mo(t)}jo(e){const t={};t.database=op(this.wt),t.removeTarget=e,this.Mo(t)}}class Tv extends bv{constructor(e,t,r,o,u,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,l),this.wt=u,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Ko(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(Dt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=function ow(n,e){return n&&n.length>0?(Dt(void 0!==e),n.map(t=>function(r,o){let u=Er(r.updateTime?r.updateTime:o);return u.isEqual(bt.min())&&(u=Er(o)),new Vg(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Er(e.commitTime);return this.listener.Jo(r,t)}return Dt(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=op(this.wt),this.Mo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>ih(this.wt,r))};this.Mo(t)}}class UD extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=r,this.wt=o,this.Zo=!1}tu(){if(this.Zo)throw new Ae(le.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.bo.ro(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ae(le.UNKNOWN,o.toString())})}ao(e,t,r,o){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,l])=>this.bo.ao(e,t,r,u,l,o)).catch(u=>{throw"FirebaseError"===u.name?(u.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Ae(le.UNKNOWN,u.toString())})}terminate(){this.Zo=!0}}class Zw{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.cu(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(rr(t),this.su=!1):Re("OnlineStateTracker",t)}cu(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class Yw{constructor(e,t,r,o,u){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=u,this.du.Br(g=>{r.enqueueAndForget((0,Y.Z)(function*(){var I;Qu(l)&&(Re("RemoteStore","Restarting streams for network reachability change."),yield(I=(0,Y.Z)(function*(b){const A=Xe(b);A.lu.add(4),yield yh(A),A._u.set("Unknown"),A.lu.delete(4),yield _p(A)}),function(b){return I.apply(this,arguments)})(l))}))}),this._u=new Zw(r,o)}}function _p(n){return Cv.apply(this,arguments)}function Cv(){return Cv=(0,Y.Z)(function*(n){if(Qu(n))for(const e of n.fu)yield e(!0)}),Cv.apply(this,arguments)}function yh(n){return wp.apply(this,arguments)}function wp(){return wp=(0,Y.Z)(function*(n){for(const e of n.fu)yield e(!1)}),wp.apply(this,arguments)}function cm(n,e){const t=Xe(n);t.hu.has(e.targetId)||(t.hu.set(e.targetId,e),xv(t)?Av(t):Ih(t).Co()&&Sv(t,e))}function vh(n,e){const t=Xe(n),r=Ih(t);t.hu.delete(e),r.Co()&&Qw(t,e),0===t.hu.size&&(r.Co()?r.ko():Qu(t)&&t._u.set("Unknown"))}function Sv(n,e){n.wu.Nt(e.targetId),Ih(n).Qo(e)}function Qw(n,e){n.wu.Nt(e),Ih(n).jo(e)}function Av(n){n.wu=new uD({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),te:e=>n.hu.get(e)||null}),Ih(n).start(),n._u.iu()}function xv(n){return Qu(n)&&!Ih(n).Do()&&n.hu.size>0}function Qu(n){return 0===Xe(n).lu.size}function Jw(n){n.wu=void 0}function VD(n){return Mv.apply(this,arguments)}function Mv(){return Mv=(0,Y.Z)(function*(n){n.hu.forEach((e,t)=>{Sv(n,e)})}),Mv.apply(this,arguments)}function Xw(n,e){return lm.apply(this,arguments)}function lm(){return lm=(0,Y.Z)(function*(n,e){Jw(n),xv(n)?(n._u.uu(e),Av(n)):n._u.set("Unknown")}),lm.apply(this,arguments)}function BD(n,e,t){return Rv.apply(this,arguments)}function Rv(){return Rv=(0,Y.Z)(function*(n,e,t){if(n._u.set("Online"),e instanceof sp&&2===e.state&&e.cause)try{yield(r=(0,Y.Z)(function*(o,u){const l=u.cause;for(const g of u.targetIds)o.hu.has(g)&&(yield o.remoteSyncer.rejectListen(g,l),o.hu.delete(g),o.wu.removeTarget(g))}),function(o,u){return r.apply(this,arguments)})(n,e)}catch(r){Re("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Ip(n,r)}else if(e instanceof $g?n.wu.Ut(e):e instanceof ip?n.wu.zt(e):n.wu.Gt(e),!t.isEqual(bt.min()))try{const r=yield Uw(n.localStore);t.compareTo(r)>=0&&(yield function(o,u){const l=o.wu.Yt(u);return l.targetChanges.forEach((g,I)=>{if(g.resumeToken.approximateByteSize()>0){const b=o.hu.get(I);b&&o.hu.set(I,b.withResumeToken(g.resumeToken,u))}}),l.targetMismatches.forEach(g=>{const I=o.hu.get(g);if(!I)return;o.hu.set(g,I.withResumeToken(sr.EMPTY_BYTE_STRING,I.snapshotVersion)),Qw(o,g);const b=new Gu(I.target,g,1,I.sequenceNumber);Sv(o,b)}),o.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){Re("RemoteStore","Failed to raise snapshot:",r),yield Ip(n,r)}var r}),Rv.apply(this,arguments)}function Ip(n,e,t){return Nv.apply(this,arguments)}function Nv(){return Nv=(0,Y.Z)(function*(n,e,t){if(!Fu(e))throw e;n.lu.add(1),yield yh(n),n._u.set("Offline"),t||(t=()=>Uw(n.localStore)),n.asyncQueue.enqueueRetryable((0,Y.Z)(function*(){Re("RemoteStore","Retrying IndexedDB access"),yield t(),n.lu.delete(1),yield _p(n)}))}),Nv.apply(this,arguments)}function eI(n,e){return e().catch(t=>Ip(n,t,e))}function _h(n){return Ep.apply(this,arguments)}function Ep(){return Ep=(0,Y.Z)(function*(n){const e=Xe(n),t=Ua(e);let r=e.au.length>0?e.au[e.au.length-1].batchId:-1;for(;Ov(e);)try{const o=yield Vw(e.localStore,r);if(null===o){0===e.au.length&&t.ko();break}r=o.batchId,tI(e,o)}catch(o){yield Ip(e,o)}dm(e)&&nI(e)}),Ep.apply(this,arguments)}function Ov(n){return Qu(n)&&n.au.length<10}function tI(n,e){n.au.push(e);const t=Ua(n);t.Co()&&t.zo&&t.Ho(e.mutations)}function dm(n){return Qu(n)&&!Ua(n).Do()&&n.au.length>0}function nI(n){Ua(n).start()}function jD(n){return Dp.apply(this,arguments)}function Dp(){return Dp=(0,Y.Z)(function*(n){Ua(n).Xo()}),Dp.apply(this,arguments)}function $D(n){return Pv.apply(this,arguments)}function Pv(){return Pv=(0,Y.Z)(function*(n){const e=Ua(n);for(const t of n.au)e.Ho(t.mutations)}),Pv.apply(this,arguments)}function wh(n,e,t){return hm.apply(this,arguments)}function hm(){return hm=(0,Y.Z)(function*(n,e,t){const r=n.au.shift(),o=nv.from(r,e,t);yield eI(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield _h(n)}),hm.apply(this,arguments)}function HD(n,e){return rI.apply(this,arguments)}function rI(){return rI=(0,Y.Z)(function*(n,e){var t;e&&Ua(n).zo&&(yield(t=(0,Y.Z)(function*(r,o){if(gl(u=o.code)&&u!==le.ABORTED){const l=r.au.shift();Ua(r).No(),yield eI(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,o)),yield _h(r)}var u}),function(r,o){return t.apply(this,arguments)})(n,e)),dm(n)&&nI(n)}),rI.apply(this,arguments)}function kv(n,e){return bp.apply(this,arguments)}function bp(){return bp=(0,Y.Z)(function*(n,e){const t=Xe(n);t.asyncQueue.verifyOperationInProgress(),Re("RemoteStore","RemoteStore received new credentials");const r=Qu(t);t.lu.add(3),yield yh(t),r&&t._u.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.lu.delete(3),yield _p(t)}),bp.apply(this,arguments)}function Lv(n,e){return Tp.apply(this,arguments)}function Tp(){return Tp=(0,Y.Z)(function*(n,e){const t=Xe(n);e?(t.lu.delete(2),yield _p(t)):e||(t.lu.add(2),yield yh(t),t._u.set("Unknown"))}),Tp.apply(this,arguments)}function Ih(n){return n.mu||(n.mu=function(e,t,r){const o=Xe(e);return o.tu(),new FD(t,o.bo,o.authCredentials,o.appCheckCredentials,o.wt,r)}(n.datastore,n.asyncQueue,{zr:VD.bind(null,n),Jr:Xw.bind(null,n),Go:BD.bind(null,n)}),n.fu.push(function(){var e=(0,Y.Z)(function*(t){t?(n.mu.No(),xv(n)?Av(n):n._u.set("Unknown")):(yield n.mu.stop(),Jw(n))});return function(t){return e.apply(this,arguments)}}())),n.mu}function Ua(n){return n.gu||(n.gu=function(e,t,r){const o=Xe(e);return o.tu(),new Tv(t,o.bo,o.authCredentials,o.appCheckCredentials,o.wt,r)}(n.datastore,n.asyncQueue,{zr:jD.bind(null,n),Jr:HD.bind(null,n),Yo:$D.bind(null,n),Jo:wh.bind(null,n)}),n.fu.push(function(){var e=(0,Y.Z)(function*(t){t?(n.gu.No(),yield _h(n)):(yield n.gu.stop(),n.au.length>0&&(Re("RemoteStore",`Stopping write stream with ${n.au.length} pending writes`),n.au=[]))});return function(t){return e.apply(this,arguments)}}())),n.gu}class Cp{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new Lr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,o,u){const l=Date.now()+r,g=new Cp(e,t,l,o,u);return g.start(r),g}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ae(le.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ml(n,e){if(rr("AsyncQueue",`${e}: ${n}`),Fu(n))return new Ae(le.UNAVAILABLE,`${e}: ${n}`);throw n}class Rl{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ge.comparator(t.key,r.key):(t,r)=>Ge.comparator(t.key,r.key),this.keyedMap=eh(),this.sortedSet=new mn(this.comparator)}static emptySet(e){return new Rl(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Rl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Rl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class Fv{constructor(){this.yu=new mn(Ge.comparator)}track(e){const t=e.doc.key,r=this.yu.get(t);r?0!==e.type&&3===r.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==r.type?this.yu=this.yu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.yu=this.yu.remove(t):1===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):Je():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Nl{constructor(e,t,r,o,u,l,g,I){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=l,this.syncStateChanged=g,this.excludesMetadataChanges=I}static fromInitialDocuments(e,t,r,o){const u=[];return t.forEach(l=>{u.push({type:0,doc:l})}),new Nl(e,t,Rl.emptySet(t),u,r,o,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&np(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class zD{constructor(){this.Iu=void 0,this.listeners=[]}}class GD{constructor(){this.queries=new Pa(e=>G0(e),np),this.onlineState="Unknown",this.Tu=new Set}}function Uv(n,e){return Vv.apply(this,arguments)}function Vv(){return Vv=(0,Y.Z)(function*(n,e){const t=Xe(n),r=e.query;let o=!1,u=t.queries.get(r);if(u||(o=!0,u=new zD),o)try{u.Iu=yield t.onListen(r)}catch(l){const g=Ml(l,`Initialization of query '${Ly(e.query)}' failed`);return void e.onError(g)}t.queries.set(r,u),u.listeners.push(e),e.Eu(t.onlineState),u.Iu&&e.Au(u.Iu)&&Bv(t)}),Vv.apply(this,arguments)}function fm(n,e){return iI.apply(this,arguments)}function iI(){return iI=(0,Y.Z)(function*(n,e){const t=Xe(n),r=e.query;let o=!1;const u=t.queries.get(r);if(u){const l=u.listeners.indexOf(e);l>=0&&(u.listeners.splice(l,1),o=0===u.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),iI.apply(this,arguments)}function sI(n,e){const t=Xe(n);let r=!1;for(const o of e){const l=t.queries.get(o.query);if(l){for(const g of l.listeners)g.Au(o)&&(r=!0);l.Iu=o}}r&&Bv(t)}function WD(n,e,t){const r=Xe(n),o=r.queries.get(e);if(o)for(const u of o.listeners)u.onError(t);r.queries.delete(e)}function Bv(n){n.Tu.forEach(e=>{e.next()})}class oI{constructor(e,t,r){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}Au(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new Nl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.vu(e)&&(this.Ru.next(e),t=!0):this.Vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}Vu(e,t){return!e.fromCache||!(this.options.Du&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=Nl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class qD{constructor(e,t){this.payload=e,this.byteLength=t}Cu(){return"metadata"in this.payload}}class aI{constructor(e){this.wt=e}Wi(e){return Ks(this.wt,e)}zi(e){return e.metadata.exists?qg(this.wt,e.document,!1):Zt.newNoDocument(this.Wi(e.metadata.name),this.Hi(e.metadata.readTime))}Hi(e){return Er(e)}}class KD{constructor(e,t,r){this.xu=e,this.localStore=t,this.wt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=uI(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=Kt.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ku(e){const t=new Map,r=new aI(this.wt);for(const o of e)if(o.metadata.queries){const u=r.Wi(o.metadata.name);for(const l of o.metadata.queries){const g=(t.get(l)||Nt()).add(u);t.set(l,g)}}return t}complete(){var e=this;return(0,Y.Z)(function*(){const t=yield function GT(n,e,t,r){return jw.apply(this,arguments)}(e.localStore,new aI(e.wt),e.documents,e.xu.id),r=e.ku(e.documents);for(const o of e.queries)yield $w(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",{progress:e.progress,Ou:e.collectionGroups,Mu:t}})()}}function uI(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class cI{constructor(e){this.key=e}}class lI{constructor(e){this.key=e}}class dI{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=Nt(),this.mutatedKeys=Nt(),this.Lu=q0(e),this.Uu=new Rl(this.Lu)}get qu(){return this.Fu}Ku(e,t){const r=t?t.Gu:new Fv,o=t?t.Uu:this.Uu;let u=t?t.mutatedKeys:this.mutatedKeys,l=o,g=!1;const I="F"===this.query.limitType&&o.size===this.query.limit?o.last():null,b="L"===this.query.limitType&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((A,N)=>{const W=o.get(A),X=Fy(this.query,N)?N:null,de=!!W&&this.mutatedKeys.has(W.key),Fe=!!X&&(X.hasLocalMutations||this.mutatedKeys.has(X.key)&&X.hasCommittedMutations);let He=!1;W&&X?W.data.isEqual(X.data)?de!==Fe&&(r.track({type:3,doc:X}),He=!0):this.Qu(W,X)||(r.track({type:2,doc:X}),He=!0,(I&&this.Lu(X,I)>0||b&&this.Lu(X,b)<0)&&(g=!0)):!W&&X?(r.track({type:0,doc:X}),He=!0):W&&!X&&(r.track({type:1,doc:W}),He=!0,(I||b)&&(g=!0)),He&&(X?(l=l.add(X),u=Fe?u.add(A):u.delete(A)):(l=l.delete(A),u=u.delete(A)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const A="F"===this.query.limitType?l.last():l.first();l=l.delete(A.key),u=u.delete(A.key),r.track({type:1,doc:A})}return{Uu:l,Gu:r,Oi:g,mutatedKeys:u}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const u=e.Gu.pu();u.sort((b,A)=>function(N,W){const X=de=>{switch(de){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Je()}};return X(N)-X(W)}(b.type,A.type)||this.Lu(b.doc,A.doc)),this.ju(r);const l=t?this.Wu():[],g=0===this.Bu.size&&this.current?1:0,I=g!==this.$u;return this.$u=g,0!==u.length||I?{snapshot:new Nl(this.query,e.Uu,o,u,e.mutatedKeys,0===g,I,!1),zu:l}:{zu:l}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new Fv,mutatedKeys:this.mutatedKeys,Oi:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(t=>this.Fu=this.Fu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Fu=this.Fu.delete(t)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=Nt(),this.Uu.forEach(r=>{this.Hu(r.key)&&(this.Bu=this.Bu.add(r.key))});const t=[];return e.forEach(r=>{this.Bu.has(r)||t.push(new lI(r))}),this.Bu.forEach(r=>{e.has(r)||t.push(new cI(r))}),t}Ju(e){this.Fu=e.ji,this.Bu=Nt();const t=this.Ku(e.documents);return this.applyChanges(t,!0)}Yu(){return Nl.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class ZD{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class YD{constructor(e){this.key=e,this.Xu=!1}}class QD{constructor(e,t,r,o,u,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=l,this.Zu={},this.tc=new Pa(g=>G0(g),np),this.ec=new Map,this.nc=new Set,this.sc=new mn(Ge.comparator),this.ic=new Map,this.rc=new Mw,this.oc={},this.uc=new Map,this.cc=Ku.Rn(),this.onlineState="Unknown",this.ac=void 0}get isPrimaryClient(){return!0===this.ac}}function JD(n,e){return jv.apply(this,arguments)}function jv(){return jv=(0,Y.Z)(function*(n,e){const t=vm(n);let r,o;const u=t.tc.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),o=u.view.Yu();else{const l=yield xl(t.localStore,Is(e));t.isPrimaryClient&&cm(t.remoteStore,l);const g=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,o=yield Ol(t,e,r,"current"===g)}return o}),jv.apply(this,arguments)}function Ol(n,e,t,r){return pm.apply(this,arguments)}function pm(){return pm=(0,Y.Z)(function*(n,e,t,r){n.hc=(A,N,W)=>{return(X=(0,Y.Z)(function*(de,Fe,He,Ot){let Mt=Fe.view.Ku(He);Mt.Oi&&(Mt=yield sm(de.localStore,Fe.query,!1).then(({documents:Ut})=>Fe.view.Ku(Ut,Mt)));const Ft=Ot&&Ot.targetChanges.get(Fe.targetId),St=Fe.view.applyChanges(Mt,de.isPrimaryClient,Ft);return Wv(de,Fe.targetId,St.zu),St.snapshot}),function(de,Fe,He,Ot){return X.apply(this,arguments)})(n,A,N,W);var X};const o=yield sm(n.localStore,e,!0),u=new dI(e,o.ji),l=u.Ku(o.documents),g=vl.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),I=u.applyChanges(l,n.isPrimaryClient,g);Wv(n,t,I.zu);const b=new ZD(e,t,u);return n.tc.set(e,b),n.ec.has(t)?n.ec.get(t).push(e):n.ec.set(t,[e]),I.snapshot}),pm.apply(this,arguments)}function hI(n,e){return gm.apply(this,arguments)}function gm(){return gm=(0,Y.Z)(function*(n,e){const t=Xe(n),r=t.tc.get(e),o=t.ec.get(r.targetId);if(o.length>1)return t.ec.set(r.targetId,o.filter(u=>!np(u,e))),void t.tc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield ph(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),vh(t.remoteStore,r.targetId),Ju(t,r.targetId)}).catch(xa))):(Ju(t,r.targetId),yield ph(t.localStore,r.targetId,!0))}),gm.apply(this,arguments)}function mm(){return mm=(0,Y.Z)(function*(n,e,t){const r=_m(n);try{const o=yield function(u,l){const g=Xe(u),I=Nn.now(),b=l.reduce((W,X)=>W.add(X.key),Nt());let A,N;return g.persistence.runTransaction("Locally write mutations","readwrite",W=>{let X=bi(),de=Nt();return g.Ui.getEntries(W,b).next(Fe=>{X=Fe,X.forEach((He,Ot)=>{Ot.isValidDocument()||(de=de.add(He))})}).next(()=>g.localDocuments.getOverlayedDocuments(W,X)).next(Fe=>{A=Fe;const He=[];for(const Ot of l){const Mt=ci(Ot,A.get(Ot.key).overlayedDocument);null!=Mt&&He.push(new fr(Ot.key,Mt,U0(Mt.value.mapValue),jn.exists(!0)))}return g.mutationQueue.addMutationBatch(W,I,He,l)}).next(Fe=>{N=Fe;const He=Fe.applyToLocalDocumentSet(A,de);return g.documentOverlayCache.saveOverlays(W,Fe.batchId,He)})}).then(()=>({batchId:N.batchId,changes:$y(A)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(u,l,g){let I=u.oc[u.currentUser.toKey()];I||(I=new mn(Rt)),I=I.insert(l,g),u.oc[u.currentUser.toKey()]=I}(r,o.batchId,t),yield bs(r,o.changes),yield _h(r.remoteStore)}catch(o){const u=Ml(o,"Failed to persist write");t.reject(u)}}),mm.apply(this,arguments)}function pI(n,e){return $v.apply(this,arguments)}function $v(){return $v=(0,Y.Z)(function*(n,e){const t=Xe(n);try{const r=yield function ND(n,e){const t=Xe(n),r=e.snapshotVersion;let o=t.$i;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const l=t.Ui.newChangeBuffer({trackRemovals:!0});o=t.$i;const g=[];e.targetChanges.forEach((A,N)=>{const W=o.get(N);if(!W)return;g.push(t.Vs.removeMatchingKeys(u,A.removedDocuments,N).next(()=>t.Vs.addMatchingKeys(u,A.addedDocuments,N)));let X=W.withSequenceNumber(u.currentSequenceNumber);var de,Fe,He;e.targetMismatches.has(N)?X=X.withResumeToken(sr.EMPTY_BYTE_STRING,bt.min()).withLastLimboFreeSnapshotVersion(bt.min()):A.resumeToken.approximateByteSize()>0&&(X=X.withResumeToken(A.resumeToken,r)),o=o.insert(N,X),Fe=X,He=A,(0===(de=W).resumeToken.approximateByteSize()||Fe.snapshotVersion.toMicroseconds()-de.snapshotVersion.toMicroseconds()>=3e8||He.addedDocuments.size+He.modifiedDocuments.size+He.removedDocuments.size>0)&&g.push(t.Vs.updateTargetData(u,X))});let I=bi(),b=Nt();if(e.documentUpdates.forEach(A=>{e.resolvedLimboDocuments.has(A)&&g.push(t.persistence.referenceDelegate.updateLimboDocument(u,A))}),g.push(_v(u,l,e.documentUpdates).next(A=>{I=A.Gi,b=A.Qi})),!r.isEqual(bt.min())){const A=t.Vs.getLastRemoteSnapshotVersion(u).next(N=>t.Vs.setTargetsMetadata(u,u.currentSequenceNumber,r));g.push(A)}return ae.waitFor(g).next(()=>l.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,I,b)).next(()=>I)}).then(u=>(t.$i=o,u))}(t.localStore,e);e.targetChanges.forEach((o,u)=>{const l=t.ic.get(u);l&&(Dt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?l.Xu=!0:o.modifiedDocuments.size>0?Dt(l.Xu):o.removedDocuments.size>0&&(Dt(l.Xu),l.Xu=!1))}),yield bs(t,r,e)}catch(r){yield xa(r)}}),$v.apply(this,arguments)}function XD(n,e,t){const r=Xe(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.tc.forEach((u,l)=>{const g=l.view.Eu(e);g.snapshot&&o.push(g.snapshot)}),function(u,l){const g=Xe(u);g.onlineState=l;let I=!1;g.queries.forEach((b,A)=>{for(const N of A.listeners)N.Eu(l)&&(I=!0)}),I&&Bv(g)}(r.eventManager,e),o.length&&r.Zu.Go(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function eb(n,e,t){return Hv.apply(this,arguments)}function Hv(){return Hv=(0,Y.Z)(function*(n,e,t){const r=Xe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.ic.get(e),u=o&&o.key;if(u){let l=new mn(Ge.comparator);l=l.insert(u,Zt.newNoDocument(u,bt.min()));const g=Nt().add(u),I=new yl(bt.min(),new Map,new sn(Rt),l,g);yield pI(r,I),r.sc=r.sc.remove(u),r.ic.delete(e),qv(r)}else yield ph(r.localStore,e,!1).then(()=>Ju(r,e,t)).catch(xa)}),Hv.apply(this,arguments)}function tb(n,e){return zv.apply(this,arguments)}function zv(){return zv=(0,Y.Z)(function*(n,e){const t=Xe(n),r=e.batch.batchId;try{const o=yield function RD(n,e){const t=Xe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),u=t.Ui.newChangeBuffer({trackRemovals:!0});return function(l,g,I,b){const A=I.batch,N=A.keys();let W=ae.resolve();return N.forEach(X=>{W=W.next(()=>b.getEntry(g,X)).next(de=>{const Fe=I.docVersions.get(X);Dt(null!==Fe),de.version.compareTo(Fe)<0&&(A.applyToRemoteDocument(de,I),de.isValidDocument()&&(de.setReadTime(I.commitVersion),b.addEntry(de)))})}),W.next(()=>l.mutationQueue.removeMutationBatch(g,A))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let g=Nt();for(let I=0;I<l.mutationResults.length;++I)l.mutationResults[I].transformResults.length>0&&(g=g.add(l.batch.mutations[I].key));return g}(e))).next(()=>t.localDocuments.getDocuments(r,o))})}(t.localStore,e);Gv(t,r,null),Ds(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield bs(t,o)}catch(o){yield xa(o)}}),zv.apply(this,arguments)}function nb(n,e,t){return Pl.apply(this,arguments)}function Pl(){return Pl=(0,Y.Z)(function*(n,e,t){const r=Xe(n);try{const o=yield function(u,l){const g=Xe(u);return g.persistence.runTransaction("Reject batch","readwrite-primary",I=>{let b;return g.mutationQueue.lookupMutationBatch(I,l).next(A=>(Dt(null!==A),b=A.keys(),g.mutationQueue.removeMutationBatch(I,A))).next(()=>g.mutationQueue.performConsistencyCheck(I)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(I,b,l)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(I,b)).next(()=>g.localDocuments.getDocuments(I,b))})}(r.localStore,e);Gv(r,e,t),Ds(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield bs(r,o)}catch(o){yield xa(o)}}),Pl.apply(this,arguments)}function Sp(){return Sp=(0,Y.Z)(function*(n,e){const t=Xe(n);Qu(t.remoteStore)||Re("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const l=Xe(u);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",g=>l.mutationQueue.getHighestUnacknowledgedBatchId(g))}(t.localStore);if(-1===r)return void e.resolve();const o=t.uc.get(r)||[];o.push(e),t.uc.set(r,o)}catch(r){const o=Ml(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),Sp.apply(this,arguments)}function Ds(n,e){(n.uc.get(e)||[]).forEach(t=>{t.resolve()}),n.uc.delete(e)}function Gv(n,e,t){const r=Xe(n);let o=r.oc[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.oc[r.currentUser.toKey()]=o}}function Ju(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ec.get(e))n.tc.delete(r),t&&n.Zu.lc(r,t);n.ec.delete(e),n.isPrimaryClient&&n.rc.us(e).forEach(r=>{n.rc.containsKey(r)||Eh(n,r)})}function Eh(n,e){n.nc.delete(e.path.canonicalString());const t=n.sc.get(e);null!==t&&(vh(n.remoteStore,t),n.sc=n.sc.remove(e),n.ic.delete(t),qv(n))}function Wv(n,e,t){for(const r of t)r instanceof cI?(n.rc.addReference(r.key,e),ib(n,r)):r instanceof lI?(Re("SyncEngine","Document no longer in limbo: "+r.key),n.rc.removeReference(r.key,e),n.rc.containsKey(r.key)||Eh(n,r.key)):Je()}function ib(n,e){const t=e.key,r=t.path.canonicalString();n.sc.get(t)||n.nc.has(r)||(Re("SyncEngine","New document in limbo: "+t),n.nc.add(r),qv(n))}function qv(n){for(;n.nc.size>0&&n.sc.size<n.maxConcurrentLimboResolutions;){const e=n.nc.values().next().value;n.nc.delete(e);const t=new Ge(Kt.fromString(e)),r=n.cc.next();n.ic.set(r,new YD(t)),n.sc=n.sc.insert(t,r),cm(n.remoteStore,new Gu(Is(Kd(t.path)),r,2,rs.ot))}}function bs(n,e,t){return Dh.apply(this,arguments)}function Dh(){return Dh=(0,Y.Z)(function*(n,e,t){const r=Xe(n),o=[],u=[],l=[];var g;r.tc.isEmpty()||(r.tc.forEach((g,I)=>{l.push(r.hc(I,e,t).then(b=>{if(b){r.isPrimaryClient&&r.sharedClientState.updateQueryState(I.targetId,b.fromCache?"not-current":"current"),o.push(b);const A=rm.Vi(I.targetId,b);u.push(A)}}))}),yield Promise.all(l),r.Zu.Go(o),yield(g=(0,Y.Z)(function*(I,b){const A=Xe(I);try{yield A.persistence.runTransaction("notifyLocalViewChanges","readwrite",N=>ae.forEach(b,W=>ae.forEach(W.Pi,X=>A.persistence.referenceDelegate.addReference(N,W.targetId,X)).next(()=>ae.forEach(W.vi,X=>A.persistence.referenceDelegate.removeReference(N,W.targetId,X)))))}catch(N){if(!Fu(N))throw N;Re("LocalStore","Failed to update sequence numbers: "+N)}for(const N of b){const W=N.targetId;if(!N.fromCache){const X=A.$i.get(W),Fe=X.withLastLimboFreeSnapshotVersion(X.snapshotVersion);A.$i=A.$i.insert(W,Fe)}}}),function(I,b){return g.apply(this,arguments)})(r.localStore,u))}),Dh.apply(this,arguments)}function sb(n,e){return Kv.apply(this,arguments)}function Kv(){return Kv=(0,Y.Z)(function*(n,e){const t=Xe(n);if(!t.currentUser.isEqual(e)){Re("SyncEngine","User change. New user:",e.toKey());const r=yield fh(t.localStore,e);t.currentUser=e,(o=t).uc.forEach(l=>{l.forEach(g=>{g.reject(new Ae(le.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.uc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield bs(t,r.Ki)}var o}),Kv.apply(this,arguments)}function gI(n,e){const t=Xe(n),r=t.ic.get(e);if(r&&r.Xu)return Nt().add(r.key);{let o=Nt();const u=t.ec.get(e);if(!u)return o;for(const l of u){const g=t.tc.get(l);o=o.unionWith(g.view.qu)}return o}}function mI(n,e){return Ap.apply(this,arguments)}function Ap(){return Ap=(0,Y.Z)(function*(n,e){const t=Xe(n),r=yield sm(t.localStore,e.query,!0),o=e.view.Ju(r);return t.isPrimaryClient&&Wv(t,e.targetId,o.zu),o}),Ap.apply(this,arguments)}function yI(n,e){return xp.apply(this,arguments)}function xp(){return xp=(0,Y.Z)(function*(n,e){const t=Xe(n);return OD(t.localStore,e).then(r=>bs(t,r))}),xp.apply(this,arguments)}function Zv(n,e,t,r){return ym.apply(this,arguments)}function ym(){return ym=(0,Y.Z)(function*(n,e,t,r){const o=Xe(n),u=yield function(l,g){const I=Xe(l),b=Xe(I.mutationQueue);return I.persistence.runTransaction("Lookup mutation documents","readonly",A=>b.yn(A,g).next(N=>N?I.localDocuments.getDocuments(A,N):ae.resolve(null)))}(o.localStore,e);var g;null!==u?("pending"===t?yield _h(o.remoteStore):"acknowledged"===t||"rejected"===t?(Gv(o,e,r||null),Ds(o,e),g=e,Xe(Xe(o.localStore).mutationQueue).In(g)):Je(),yield bs(o,u)):Re("SyncEngine","Cannot apply mutation batch with id: "+e)}),ym.apply(this,arguments)}function Mp(){return Mp=(0,Y.Z)(function*(n,e){const t=Xe(n);if(vm(t),_m(t),!0===e&&!0!==t.ac){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield vI(t,r.toArray());t.ac=!0,yield Lv(t.remoteStore,!0);for(const u of o)cm(t.remoteStore,u)}else if(!1===e&&!1!==t.ac){const r=[];let o=Promise.resolve();t.ec.forEach((u,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):o=o.then(()=>(Ju(t,l),ph(t.localStore,l,!0))),vh(t.remoteStore,l)}),yield o,yield vI(t,r),function(u){const l=Xe(u);l.ic.forEach((g,I)=>{vh(l.remoteStore,I)}),l.rc.cs(),l.ic=new Map,l.sc=new mn(Ge.comparator)}(t),t.ac=!1,yield Lv(t.remoteStore,!1)}}),Mp.apply(this,arguments)}function vI(n,e,t){return Qv.apply(this,arguments)}function Qv(){return Qv=(0,Y.Z)(function*(n,e,t){const r=Xe(n),o=[],u=[];for(const l of e){let g;const I=r.ec.get(l);if(I&&0!==I.length){g=yield xl(r.localStore,Is(I[0]));for(const b of I){const A=r.tc.get(b),N=yield mI(r,A);N.snapshot&&u.push(N.snapshot)}}else{const b=yield Bw(r.localStore,l);g=yield xl(r.localStore,b),yield Ol(r,_I(b),l,!1)}o.push(g)}return r.Zu.Go(u),o}),Qv.apply(this,arguments)}function _I(n){return qd(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function ob(n){const e=Xe(n);return Xe(Xe(e.localStore).persistence).Ri()}function wI(n,e,t,r){return Rp.apply(this,arguments)}function Rp(){return Rp=(0,Y.Z)(function*(n,e,t,r){const o=Xe(n);if(o.ac)return void Re("SyncEngine","Ignoring unexpected query state notification.");const u=o.ec.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const l=yield OD(o.localStore,W0(u[0])),g=yl.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield bs(o,l,g);break}case"rejected":yield ph(o.localStore,e,!0),Ju(o,e,r);break;default:Je()}}),Rp.apply(this,arguments)}function II(n,e,t){return Jv.apply(this,arguments)}function Jv(){return Jv=(0,Y.Z)(function*(n,e,t){const r=vm(n);if(r.ac){for(const o of e){if(r.ec.has(o)){Re("SyncEngine","Adding an already active target "+o);continue}const u=yield Bw(r.localStore,o),l=yield xl(r.localStore,u);yield Ol(r,_I(u),l.targetId,!1),cm(r.remoteStore,l)}for(const o of t)r.ec.has(o)&&(yield ph(r.localStore,o,!1).then(()=>{vh(r.remoteStore,o),Ju(r,o)}).catch(xa))}}),Jv.apply(this,arguments)}function vm(n){const e=Xe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=pI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=gI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=eb.bind(null,e),e.Zu.Go=sI.bind(null,e.eventManager),e.Zu.lc=WD.bind(null,e.eventManager),e}function _m(n){const e=Xe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=tb.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=nb.bind(null,e),e}class Xv{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Y.Z)(function*(){t.wt=mh(e.databaseInfo.databaseId),t.sharedClientState=t.dc(e),t.persistence=t._c(e),yield t.persistence.start(),t.localStore=t.wc(e),t.gcScheduler=t.mc(e,t.localStore),t.indexBackfillerScheduler=t.gc(e,t.localStore)})()}mc(e,t){return null}gc(e,t){return null}wc(e){return Fw(this.persistence,new vv,e.initialUser,this.wt)}_c(e){return new mv(tm.Ms,this.wt)}dc(e){return new Ww}terminate(){var e=this;return(0,Y.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class e_ extends Xv{constructor(e,t,r){super(),this.yc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Y.Z)(function*(){yield t().call(r,e),yield r.yc.initialize(r,e),yield _m(r.yc.syncEngine),yield _h(r.yc.remoteStore),yield r.persistence.ci(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}wc(e){return Fw(this.persistence,new vv,e.initialUser,this.wt)}mc(e,t){return new CD(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}gc(e,t){const r=new Ay(t,this.persistence);return new A0(e.asyncQueue,r)}_c(e){const t=hh(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?$i.withCacheSize(this.cacheSizeBytes):$i.DEFAULT;return new yv(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,Ev(),um(),this.wt,this.sharedClientState,!!this.forceOwnership)}dc(e){return new Ww}}class ub extends e_{constructor(e,t){super(e,t,!1),this.yc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Y.Z)(function*(){yield t().call(r,e);const o=r.yc.syncEngine;r.sharedClientState instanceof Gw&&(r.sharedClientState.syncEngine={kr:Zv.bind(null,o),Or:wI.bind(null,o),Mr:II.bind(null,o),Ri:ob.bind(null,o),Nr:yI.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.ci(function(){var u=(0,Y.Z)(function*(l){yield function Yv(n,e){return Mp.apply(this,arguments)}(r.yc.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return u.apply(this,arguments)}}())})()}dc(e){const t=Ev();if(!Gw.V(t))throw new Ae(le.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=hh(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Gw(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class wm{initialize(e,t){var r=this;return(0,Y.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>XD(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=sb.bind(null,r.syncEngine),yield Lv(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new GD}createDatastore(e){const t=mh(e.databaseInfo.databaseId),r=new LD(e.databaseInfo);return new UD(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,u=g=>XD(this.syncEngine,g,0),l=Kw.V()?new Kw:new qw,new Yw(t,r,o,u,l);var t,r,o,u,l}createSyncEngine(e,t){return function(r,o,u,l,g,I,b){const A=new QD(r,o,u,l,g,I);return b&&(A.ac=!0),A}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Y.Z)(function*(t){const r=Xe(t);Re("RemoteStore","RemoteStore shutting down."),r.lu.add(5),yield yh(r),r.du.shutdown(),r._u.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function EI(n,e=10240){let t=0;return{read:()=>(0,Y.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Y.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Fr{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ic(this.observer.next,e)}error(e){this.observer.error?this.Ic(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Tc(){this.muted=!0}Ic(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class bh{constructor(e,t){this.Ec=e,this.wt=t,this.metadata=new Lr,this.buffer=new Uint8Array,this.Ac=new TextDecoder("utf-8"),this.Rc().then(r=>{r&&r.Cu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ec.cancel()}getMetadata(){var e=this;return(0,Y.Z)(function*(){return e.metadata.promise})()}fc(){var e=this;return(0,Y.Z)(function*(){return yield e.getMetadata(),e.Rc()})()}Rc(){var e=this;return(0,Y.Z)(function*(){const t=yield e.bc();if(null===t)return null;const r=e.Ac.decode(t),o=Number(r);isNaN(o)&&e.Pc(`length string (${r}) is not valid number`);const u=yield e.vc(o);return new qD(JSON.parse(u),t.length+o)})()}Vc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}bc(){var e=this;return(0,Y.Z)(function*(){for(;e.Vc()<0&&!(yield e.Sc()););if(0===e.buffer.length)return null;const t=e.Vc();t<0&&e.Pc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}vc(e){var t=this;return(0,Y.Z)(function*(){for(;t.buffer.length<e;)(yield t.Sc())&&t.Pc("Reached the end of bundle when more is expected.");const r=t.Ac.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Pc(e){throw this.Ec.cancel(),new Error(`Invalid bundle format: ${e}`)}Sc(){var e=this;return(0,Y.Z)(function*(){const t=yield e.Ec.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class cb{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Y.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ae(le.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,Y.Z)(function*(u,l){const g=Xe(u),I=op(g.wt)+"/documents",b={documents:l.map(X=>rh(g.wt,X))},A=yield g.ao("BatchGetDocuments",I,b,l.length),N=new Map;A.forEach(X=>{const de=function iw(n,e){return"found"in e?function(t,r){Dt(!!r.found);const o=Ks(t,r.found.name),u=Er(r.found.updateTime),l=new Jr({mapValue:{fields:r.found.fields}});return Zt.newFoundDocument(o,u,l)}(n,e):"missing"in e?function(t,r){Dt(!!r.missing),Dt(!!r.readTime);const o=Ks(t,r.missing),u=Er(r.readTime);return Zt.newNoDocument(o,u)}(n,e):Je()}(g.wt,X);N.set(de.key.toString(),de)});const W=[];return l.forEach(X=>{const de=N.get(X.toString());Dt(!!de),W.push(de)}),W}),function(u,l){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ws(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Y.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const u=Ge.fromPath(o);e.mutations.push(new Hu(u,e.precondition(u)))}),yield(r=(0,Y.Z)(function*(o,u){const l=Xe(o),g=op(l.wt)+"/documents",I={writes:u.map(b=>ih(l.wt,b))};yield l.ro("Commit",g,I)}),function(o,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Je();t=bt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ae(le.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?jn.updateTime(t):jn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(bt.min()))throw new Ae(le.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return jn.updateTime(t)}return jn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class lb{constructor(e,t,r,o,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=o,this.deferred=u,this.Dc=r.maxAttempts,this.So=new Dv(this.asyncQueue,"transaction_retry")}run(){this.Dc-=1,this.Cc()}Cc(){var e=this;this.So.Io((0,Y.Z)(function*(){const t=new cb(e.datastore),r=e.xc(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(u=>{e.Nc(u)}))}).catch(o=>{e.Nc(o)})}))}xc(e){try{const t=this.updateFunction(e);return!qf(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Nc(e){this.Dc>0&&this.kc(e)?(this.Dc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Cc(),Promise.resolve()))):this.deferred.reject(e)}kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!gl(t)}return!1}}class WT{constructor(e,t,r,o){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=Yr.UNAUTHENTICATED,this.clientId=Dy.I(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,Y.Z)(function*(g){Re("FirestoreClient","Received user=",g.uid),yield u.authCredentialListener(g),u.user=g});return function(g){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(Re("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,Y.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ae(le.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Lr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Y.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=Ml(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function db(n,e){return Im.apply(this,arguments)}function Im(){return Im=(0,Y.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Re("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,Y.Z)(function*(u){r.isEqual(u)||(yield fh(e.localStore,u),r=u)});return function(u){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),Im.apply(this,arguments)}function Em(n,e){return kl.apply(this,arguments)}function kl(){return kl=(0,Y.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield t_(n);Re("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>kv(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,u)=>kv(e.remoteStore,u)),n.onlineComponents=e}),kl.apply(this,arguments)}function t_(n){return Np.apply(this,arguments)}function Np(){return Np=(0,Y.Z)(function*(n){return n.offlineComponents||(Re("FirestoreClient","Using default OfflineComponentProvider"),yield db(n,new Xv)),n.offlineComponents}),Np.apply(this,arguments)}function Dm(n){return bm.apply(this,arguments)}function bm(){return bm=(0,Y.Z)(function*(n){return n.onlineComponents||(Re("FirestoreClient","Using default OnlineComponentProvider"),yield Em(n,new wm)),n.onlineComponents}),bm.apply(this,arguments)}function DI(n){return t_(n).then(e=>e.persistence)}function n_(n){return t_(n).then(e=>e.localStore)}function bI(n){return Dm(n).then(e=>e.remoteStore)}function Op(n){return Dm(n).then(e=>e.syncEngine)}function Ll(n){return Tm.apply(this,arguments)}function Tm(){return Tm=(0,Y.Z)(function*(n){const e=yield Dm(n),t=e.eventManager;return t.onListen=JD.bind(null,e.syncEngine),t.onUnlisten=hI.bind(null,e.syncEngine),t}),Tm.apply(this,arguments)}function i_(n,e,t={}){const r=new Lr;return n.asyncQueue.enqueueAndForget((0,Y.Z)(function*(){return function(o,u,l,g,I){const b=new Fr({next:N=>{u.enqueueAndForget(()=>fm(o,A));const W=N.docs.has(l);!W&&N.fromCache?I.reject(new Ae(le.UNAVAILABLE,"Failed to get document because the client is offline.")):W&&N.fromCache&&g&&"server"===g.source?I.reject(new Ae(le.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):I.resolve(N)},error:N=>I.reject(N)}),A=new oI(Kd(l.path),b,{includeMetadataChanges:!0,Du:!0});return Uv(o,A)}(yield Ll(n),n.asyncQueue,e,t,r)})),r.promise}function s_(n,e,t={}){const r=new Lr;return n.asyncQueue.enqueueAndForget((0,Y.Z)(function*(){return function(o,u,l,g,I){const b=new Fr({next:N=>{u.enqueueAndForget(()=>fm(o,A)),N.fromCache&&"server"===g.source?I.reject(new Ae(le.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):I.resolve(N)},error:N=>I.reject(N)}),A=new oI(l,b,{includeMetadataChanges:!0,Du:!0});return Uv(o,A)}(yield Ll(n),n.asyncQueue,e,t,r)})),r.promise}const pb=new Map;function a_(n,e,t){if(!t)throw new Ae(le.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function gb(n,e,t,r){if(!0===e&&!0===r)throw new Ae(le.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function CI(n){if(!Ge.isDocumentKey(n))throw new Ae(le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function SI(n){if(Ge.isDocumentKey(n))throw new Ae(le.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Sm(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":Je()}function qt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ae(le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Sm(n);throw new Ae(le.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function u_(n,e){if(e<=0)throw new Ae(le.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class AI{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ae(le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ae(le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,gb("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ch{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new AI({}),this._settingsFrozen=!1,e instanceof Gs?this._databaseId=e:(this._app=e,this._databaseId=function(o){if(!Object.prototype.hasOwnProperty.apply(o.options,["projectId"]))throw new Ae(le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Gs(o.options.projectId)}(e))}get app(){if(!this._app)throw new Ae(le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ae(le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new AI(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new GE;switch(t.type){case"gapi":const r=t.client;return Dt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new E0(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Ae(le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=pb.get(e);t&&(Re("ComponentProvider","Removing Datastore"),pb.delete(e),t.terminate())}(this),Promise.resolve()}}class Cn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Xs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Cn(this.firestore,e,this._key)}}class li{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new li(this.firestore,e,this._query)}}class Xs extends li{constructor(e,t,r){super(e,t,Kd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Cn(this.firestore,null,new Ge(e))}withConverter(e){return new Xs(this.firestore,e,this._path)}}function MI(n,e,...t){if(n=(0,gt.m9)(n),a_("collection","path",e),n instanceof Ch){const r=Kt.fromString(e,...t);return SI(r),new Xs(n,null,r)}{if(!(n instanceof Cn||n instanceof Xs))throw new Ae(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Kt.fromString(e,...t));return SI(r),new Xs(n.firestore,null,r)}}function Pp(n,e,...t){if(n=(0,gt.m9)(n),1===arguments.length&&(e=Dy.I()),a_("doc","path",e),n instanceof Ch){const r=Kt.fromString(e,...t);return CI(r),new Cn(n,null,new Ge(r))}{if(!(n instanceof Cn||n instanceof Xs))throw new Ae(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Kt.fromString(e,...t));return CI(r),new Cn(n.firestore,n instanceof Xs?n.converter:null,new Ge(r))}}function c_(n,e){return n=(0,gt.m9)(n),e=(0,gt.m9)(e),(n instanceof Cn||n instanceof Xs)&&(e instanceof Cn||e instanceof Xs)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function l_(n,e){return n=(0,gt.m9)(n),e=(0,gt.m9)(e),n instanceof li&&e instanceof li&&n.firestore===e.firestore&&np(n._query,e._query)&&n.converter===e.converter}class mb{constructor(){this.Oc=Promise.resolve(),this.Mc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new Dv(this,"async_queue_retry"),this.Kc=()=>{const t=um();t&&Re("AsyncQueue","Visibility state changed to "+t.visibilityState),this.So.Eo()};const e=um();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Kc)}get isShuttingDown(){return this.Fc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Gc(),this.Qc(e)}enterRestrictedMode(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;const t=um();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Kc)}}enqueue(e){if(this.Gc(),this.Fc)return new Promise(()=>{});const t=new Lr;return this.Qc(()=>this.Fc&&this.Uc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Mc.push(e),this.jc()))}jc(){var e=this;return(0,Y.Z)(function*(){if(0!==e.Mc.length){try{yield e.Mc[0](),e.Mc.shift(),e.So.reset()}catch(t){if(!Fu(t))throw t;Re("AsyncQueue","Operation failed with retryable error: "+t)}e.Mc.length>0&&e.So.Io(()=>e.jc())}})()}Qc(e){const t=this.Oc.then(()=>(this.Lc=!0,e().catch(r=>{throw this.Bc=r,this.Lc=!1,rr("INTERNAL UNHANDLED ERROR: ",function(u){let l=u.message||"";return u.stack&&(l=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),l}(r)),r}).then(r=>(this.Lc=!1,r))));return this.Oc=t,t}enqueueAfterDelay(e,t,r){this.Gc(),this.qc.indexOf(e)>-1&&(t=0);const o=Cp.createAndSchedule(this,e,t,r,u=>this.Wc(u));return this.$c.push(o),o}Gc(){this.Bc&&Je()}verifyOperationInProgress(){}zc(){var e=this;return(0,Y.Z)(function*(){let t;do{t=e.Oc,yield t}while(t!==e.Oc)})()}Hc(e){for(const t of this.$c)if(t.timerId===e)return!0;return!1}Jc(e){return this.zc().then(()=>{this.$c.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.$c)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.zc()})}Yc(e){this.qc.push(e)}Wc(e){const t=this.$c.indexOf(e);this.$c.splice(t,1)}}function d_(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class KT{constructor(){this._progressObserver={},this._taskCompletionResolver=new Lr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class $n extends Ch{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new mb,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||yb(this),this._firestoreClient.terminate()}}function Tr(n){return n._firestoreClient||yb(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function yb(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new M0(n._databaseId,u,n._persistenceKey,(g=t).host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,g.useFetchStreams));var u,g;n._firestoreClient=new WT(n._authCredentials,n._appCheckCredentials,n._queue,r)}function vb(n,e,t){const r=new Lr;return n.asyncQueue.enqueue((0,Y.Z)(function*(){try{yield db(n,t),yield Em(n,e),r.resolve()}catch(o){const u=o;if(!("FirebaseError"===(l=u).name?l.code===le.FAILED_PRECONDITION||l.code===le.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw u;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+u),r.reject(u)}var l})).then(()=>r.promise)}function Mm(n){if(n._initialized||n._terminated)throw new Ae(le.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Ho{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ae(le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ir(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Va{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Va(sr.fromBase64String(e))}catch(t){throw new Ae(le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Va(sr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Sh{constructor(e){this._methodName=e}}class Rm{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ae(le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ae(le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Rt(this._lat,e._lat)||Rt(this._long,e._long)}}const wb=/^__.*__$/;class Nm{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new fr(e,this.data,this.fieldMask,t,this.fieldTransforms):new Oa(e,this.data,t,this.fieldTransforms)}}class kI{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new fr(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Ib(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Je()}}class h_{constructor(e,t,r,o,u,l){this.settings=e,this.databaseId=t,this.wt=r,this.ignoreUndefinedProperties=o,void 0===u&&this.Xc(),this.fieldTransforms=u||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Zc(){return this.settings.Zc}ta(e){return new h_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ea(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.ta({path:r,na:!1});return o.sa(e),o}ia(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.ta({path:r,na:!1});return o.Xc(),o}ra(e){return this.ta({path:void 0,na:!0})}oa(e){return Ah(e,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Xc(){if(this.path)for(let e=0;e<this.path.length;e++)this.sa(this.path.get(e))}sa(e){if(0===e.length)throw this.oa("Document fields must not be empty");if(Ib(this.Zc)&&wb.test(e))throw this.oa('Document fields cannot begin and end with "__"')}}class eC{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.wt=r||mh(e)}aa(e,t,r,o=!1){return new h_({Zc:e,methodName:t,ca:r,path:ir.emptyPath(),na:!1,ua:o},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}function Fl(n){const e=n._freezeSettings(),t=mh(n._databaseId);return new eC(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Om(n,e,t,r,o,u={}){const l=n.aa(u.merge||u.mergeFields?2:0,e,t,o);g_("Data must be an object, but it was:",l,r);const g=Db(r,l);let I,b;if(u.merge)I=new ui(l.fieldMask),b=l.fieldTransforms;else if(u.mergeFields){const A=[];for(const N of u.mergeFields){const W=Lp(e,N,t);if(!l.contains(W))throw new Ae(le.INVALID_ARGUMENT,`Field '${W}' is specified in your field mask but missing from your input data.`);m_(A,W)||A.push(W)}I=new ui(A),b=l.fieldTransforms.filter(N=>I.covers(N.field))}else I=null,b=l.fieldTransforms;return new Nm(new Jr(g),I,b)}class kp extends Sh{_toFieldTransform(e){if(2!==e.Zc)throw e.oa(1===e.Zc?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof kp}}function Eb(n,e,t){return new h_({Zc:3,ca:e.settings.ca,methodName:n._methodName,na:t},e.databaseId,e.wt,e.ignoreUndefinedProperties)}class f_ extends Sh{_toFieldTransform(e){return new Qd(e.path,new Yd)}isEqual(e){return e instanceof f_}}class LI extends Sh{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=Eb(this,e,!0),r=this.ha.map(u=>Ul(u,t)),o=new ll(r);return new Qd(e.path,o)}isEqual(e){return this===e}}class FI extends Sh{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=Eb(this,e,!0),r=this.ha.map(u=>Ul(u,t)),o=new dl(r);return new Qd(e.path,o)}isEqual(e){return this===e}}class tC extends Sh{constructor(e,t){super(e),this.la=t}_toFieldTransform(e){const t=new hl(e.wt,K0(e.wt,this.la));return new Qd(e.path,t)}isEqual(e){return this===e}}function ss(n,e,t,r){const o=n.aa(1,e,t);g_("Data must be an object, but it was:",o,r);const u=[],l=Jr.empty();ol(r,(I,b)=>{const A=km(e,I,t);b=(0,gt.m9)(b);const N=o.ia(A);if(b instanceof kp)u.push(A);else{const W=Ul(b,N);null!=W&&(u.push(A),l.set(A,W))}});const g=new ui(u);return new kI(l,g,o.fieldTransforms)}function p_(n,e,t,r,o,u){const l=n.aa(1,e,t),g=[Lp(e,r,t)],I=[o];if(u.length%2!=0)throw new Ae(le.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let W=0;W<u.length;W+=2)g.push(Lp(e,u[W])),I.push(u[W+1]);const b=[],A=Jr.empty();for(let W=g.length-1;W>=0;--W)if(!m_(b,g[W])){const X=g[W];let de=I[W];de=(0,gt.m9)(de);const Fe=l.ia(X);if(de instanceof kp)b.push(X);else{const He=Ul(de,Fe);null!=He&&(b.push(X),A.set(X,He))}}const N=new ui(b);return new kI(A,N,l.fieldTransforms)}function Pm(n,e,t,r=!1){return Ul(t,n.aa(r?4:3,e))}function Ul(n,e){if(os(n=(0,gt.m9)(n)))return g_("Unsupported field value:",e,n),Db(n,e);if(n instanceof Sh)return function(t,r){if(!Ib(r.Zc))throw r.oa(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.oa(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.na&&4!==e.Zc)throw e.oa("Nested arrays are not supported");return function(t,r){const o=[];let u=0;for(const l of t){let g=Ul(l,r.ra(u));null==g&&(g={nullValue:"NULL_VALUE"}),o.push(g),u++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,gt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return K0(r.wt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=Nn.fromDate(t);return{timestampValue:nh(r.wt,o)}}if(t instanceof Nn){const o=new Nn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:nh(r.wt,o)}}if(t instanceof Rm)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Va)return{bytesValue:Gy(r.wt,t._byteString)};if(t instanceof Cn){const o=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(o))throw r.oa(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:qy(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.oa(`Unsupported field value: ${Sm(t)}`)}(n,e)}function Db(n,e){const t={};return QE(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ol(n,(r,o)=>{const u=Ul(o,e.ea(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function os(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Nn||n instanceof Rm||n instanceof Va||n instanceof Cn||n instanceof Sh)}function g_(n,e,t){if(!os(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=Sm(t);throw e.oa("an object"===r?n+" a custom object":n+" "+r)}var r}function Lp(n,e,t){if((e=(0,gt.m9)(e))instanceof Ho)return e._internalPath;if("string"==typeof e)return km(n,e);throw Ah("Field path arguments must be of type string or ",n,!1,void 0,t)}const bb=new RegExp("[~\\*/\\[\\]]");function km(n,e,t){if(e.search(bb)>=0)throw Ah(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ho(...e.split("."))._internalPath}catch{throw Ah(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Ah(n,e,t,r,o){const u=r&&!r.isEmpty(),l=void 0!==o;let g=`Function ${e}() called with invalid data`;t&&(g+=" (via `toFirestore()`)"),g+=". ";let I="";return(u||l)&&(I+=" (found",u&&(I+=` in field ${r}`),l&&(I+=` in document ${o}`),I+=")"),new Ae(le.INVALID_ARGUMENT,g+n+I)}function m_(n,e){return n.some(t=>t.isEqual(e))}class xh{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Cn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Tb(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Fp("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Tb extends xh{data(){return super.data()}}function Fp(n,e){return"string"==typeof e?km(n,e):e instanceof Ho?e._internalPath:e._delegate._internalPath}class Xu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ba extends xh{constructor(e,t,r,o,u,l){super(e,t,r,o,l),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Mh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Fp("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Mh extends Ba{data(e={}){return super.data(e)}}class ec{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Xu(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Mh(this._firestore,this._userDataWriter,r.key,r,new Xu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ae(le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new Mh(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Xu(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>o||3!==l.type).map(l=>{const g=new Mh(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Xu(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let I=-1,b=-1;return 0!==l.type&&(I=u.indexOf(l.doc.key),u=u.delete(l.doc.key)),1!==l.type&&(u=u.add(l.doc),b=u.indexOf(l.doc.key)),{type:y_(l.type),doc:g,oldIndex:I,newIndex:b}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function y_(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Je()}}function zo(n,e){return n instanceof Ba&&e instanceof Ba?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof ec&&e instanceof ec&&n._firestore===e._firestore&&l_(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function ja(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ae(le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Rh{}function Go(n,...e){for(const t of e)n=t._apply(n);return n}class UI extends Rh{constructor(e,t,r){super(),this.fa=e,this.da=t,this._a=r,this.type="where"}_apply(e){const t=Fl(e.firestore),r=function(o,u,l,g,I,b,A){let N;if(I.isKeyField()){if("array-contains"===b||"array-contains-any"===b)throw new Ae(le.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if("in"===b||"not-in"===b){w_(A,b);const X=[];for(const de of A)X.push(__(g,o,de));N={arrayValue:{values:X}}}else N=__(g,o,A)}else"in"!==b&&"not-in"!==b&&"array-contains-any"!==b||w_(A,b),N=Pm(l,"where",A,"in"===b||"not-in"===b);const W=Xr.create(I,b,N);return function(X,de){if(de.ht()){const He=Py(X);if(null!==He&&!He.isEqual(de.field))throw new Ae(le.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${He.toString()}' and '${de.field.toString()}'`);const Ot=Ug(X);null!==Ot&&I_(0,de.field,Ot)}const Fe=function(He,Ot){for(const Mt of He.filters)if(Ot.indexOf(Mt.op)>=0)return Mt.op;return null}(X,function(He){switch(He){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(de.op));if(null!==Fe)throw new Ae(le.INVALID_ARGUMENT,Fe===de.op?`Invalid query. You cannot use more than one '${de.op.toString()}' filter.`:`Invalid query. You cannot use '${de.op.toString()}' filters with '${Fe.toString()}' filters.`)}(o,W),W}(e._query,0,t,e.firestore._databaseId,this.fa,this.da,this._a);return new li(e.firestore,e.converter,function(o,u){const l=o.filters.concat([u]);return new ws(o.path,o.collectionGroup,o.explicitOrderBy.slice(),l,o.limit,o.limitType,o.startAt,o.endAt)}(e._query,r))}}class nC extends Rh{constructor(e,t){super(),this.fa=e,this.wa=t,this.type="orderBy"}_apply(e){const t=function(r,o,u){if(null!==r.startAt)throw new Ae(le.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ae(le.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new cl(o,u);return function(g,I){if(null===Ug(g)){const b=Py(g);null!==b&&I_(0,b,I.field)}}(r,l),l}(e._query,this.fa,this.wa);return new li(e.firestore,e.converter,function(r,o){const u=r.explicitOrderBy.concat([o]);return new ws(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class VI extends Rh{constructor(e,t,r){super(),this.type=e,this.ma=t,this.ga=r}_apply(e){return new li(e.firestore,e.converter,eD(e._query,this.ma,this.ga))}}class v_ extends Rh{constructor(e,t,r){super(),this.type=e,this.ya=t,this.pa=r}_apply(e){const t=Lm(e,this.type,this.ya,this.pa);return new li(e.firestore,e.converter,(o=t,new ws((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class jI extends Rh{constructor(e,t,r){super(),this.type=e,this.ya=t,this.pa=r}_apply(e){const t=Lm(e,this.type,this.ya,this.pa);return new li(e.firestore,e.converter,(o=t,new ws((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function Lm(n,e,t,r){if(t[0]=(0,gt.m9)(t[0]),t[0]instanceof xh)return function(o,u,l,g,I){if(!g)throw new Ae(le.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const b=[];for(const A of jo(o))if(A.field.isKeyField())b.push(Ma(u,g.key));else{const N=g.data.field(A.field);if(Wf(N))throw new Ae(le.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+A.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===N){const W=A.field.canonicalString();throw new Ae(le.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${W}' (used as the orderBy) does not exist.`)}b.push(N)}return new Ra(b,I)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=Fl(n.firestore);return function(u,l,g,I,b,A){const N=u.explicitOrderBy;if(b.length>N.length)throw new Ae(le.INVALID_ARGUMENT,`Too many arguments provided to ${I}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const W=[];for(let X=0;X<b.length;X++){const de=b[X];if(N[X].field.isKeyField()){if("string"!=typeof de)throw new Ae(le.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${I}(), but got a ${typeof de}`);if(!ky(u)&&-1!==de.indexOf("/"))throw new Ae(le.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${I}() must be a plain document ID, but '${de}' contains a slash.`);const Fe=u.path.child(Kt.fromString(de));if(!Ge.isDocumentKey(Fe))throw new Ae(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${I}() must result in a valid document path, but '${Fe}' is not because it contains an odd number of segments.`);const He=new Ge(Fe);W.push(Ma(l,He))}else{const Fe=Pm(g,I,de);W.push(Fe)}}return new Ra(W,A)}(n._query,n.firestore._databaseId,o,e,t,r)}}function __(n,e,t){if("string"==typeof(t=(0,gt.m9)(t))){if(""===t)throw new Ae(le.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ky(e)&&-1!==t.indexOf("/"))throw new Ae(le.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Kt.fromString(t));if(!Ge.isDocumentKey(r))throw new Ae(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ma(n,new Ge(r))}if(t instanceof Cn)return Ma(n,t._key);throw new Ae(le.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Sm(t)}.`)}function w_(n,e){if(!Array.isArray(n)||0===n.length)throw new Ae(le.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Ae(le.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function I_(n,e,t){if(!t.isEqual(e))throw new Ae(le.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const HI={maxAttempts:5};class Fm{convertValue(e,t="none"){switch(ju(e)){case 0:return null;case 1:return e.booleanValue;case 2:return bn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Vu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Je()}}convertObject(e,t){const r={};return ol(e.fields,(o,u)=>{r[o]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new Rm(bn(e.latitude),bn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Mg(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(al(e));default:return null}}convertTimestamp(e){const t=Uo(e);return new Nn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Kt.fromString(e);Dt(hD(r));const o=new Gs(r.get(1),r.get(3)),u=new Ge(r.popFirst(5));return o.isEqual(t)||rr(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function Vl(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Um extends Fm{constructor(e){super(),this.firestore=e}convertBytes(e){return new Va(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Cn(this.firestore,null,t)}}class E_{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Fl(e)}set(e,t,r){this._verifyNotCommitted();const o=tc(e,this._firestore),u=Vl(o.converter,t,r),l=Om(this._dataReader,"WriteBatch.set",o._key,u,null!==o.converter,r);return this._mutations.push(l.toMutation(o._key,jn.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const u=tc(e,this._firestore);let l;return l="string"==typeof(t=(0,gt.m9)(t))||t instanceof Ho?p_(this._dataReader,"WriteBatch.update",u._key,t,r,o):ss(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(l.toMutation(u._key,jn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=tc(e,this._firestore);return this._mutations=this._mutations.concat(new Ws(t._key,jn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ae(le.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function tc(n,e){if((n=(0,gt.m9)(n)).firestore!==e)throw new Ae(le.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Bl extends Fm{constructor(e){super(),this.firestore=e}convertBytes(e){return new Va(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Cn(this.firestore,null,t)}}function GI(n,e,t){n=qt(n,Cn);const r=qt(n.firestore,$n),o=Vl(n.converter,e,t);return Nh(r,[Om(Fl(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,jn.none())])}function Ob(n,e,t,...r){n=qt(n,Cn);const o=qt(n.firestore,$n),u=Fl(o);let l;return l="string"==typeof(e=(0,gt.m9)(e))||e instanceof Ho?p_(u,"updateDoc",n._key,e,t,r):ss(u,"updateDoc",n._key,e),Nh(o,[l.toMutation(n._key,jn.exists(!0))])}function Pb(n,...e){var t,r,o;n=(0,gt.m9)(n);let u={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||d_(e[l])||(u=e[l],l++);const g={includeMetadataChanges:u.includeMetadataChanges};if(d_(e[l])){const N=e[l];e[l]=null===(t=N.next)||void 0===t?void 0:t.bind(N),e[l+1]=null===(r=N.error)||void 0===r?void 0:r.bind(N),e[l+2]=null===(o=N.complete)||void 0===o?void 0:o.bind(N)}let I,b,A;if(n instanceof Cn)b=qt(n.firestore,$n),A=Kd(n._key.path),I={next:N=>{e[l]&&e[l](Oh(b,n,N))},error:e[l+1],complete:e[l+2]};else{const N=qt(n,li);b=qt(N.firestore,$n),A=N._query;const W=new Bl(b);I={next:X=>{e[l]&&e[l](new ec(b,W,N,X))},error:e[l+1],complete:e[l+2]},ja(n._query)}return function(N,W,X,de){const Fe=new Fr(de),He=new oI(W,Fe,X);return N.asyncQueue.enqueueAndForget((0,Y.Z)(function*(){return Uv(yield Ll(N),He)})),()=>{Fe.Tc(),N.asyncQueue.enqueueAndForget((0,Y.Z)(function*(){return fm(yield Ll(N),He)}))}}(Tr(b),A,g,I)}function Nh(n,e){return function(t,r){const o=new Lr;return t.asyncQueue.enqueueAndForget((0,Y.Z)(function*(){return function fI(n,e,t){return mm.apply(this,arguments)}(yield Op(t),r,o)})),o.promise}(Tr(n),e)}function Oh(n,e,t){const r=t.docs.get(e._key),o=new Bl(n);return new Ba(n,o,e._key,r,new Xu(t.hasPendingWrites,t.fromCache),e.converter)}class kb extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Fl(e)}get(e){const t=tc(e,this._firestore),r=new Um(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return Je();const u=o[0];if(u.isFoundDocument())return new xh(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new xh(this._firestore,r,t._key,null,t.converter);throw Je()})}set(e,t,r){const o=tc(e,this._firestore),u=Vl(o.converter,t,r),l=Om(this._dataReader,"Transaction.set",o._key,u,null!==o.converter,r);return this._transaction.set(o._key,l),this}update(e,t,r,...o){const u=tc(e,this._firestore);let l;return l="string"==typeof(t=(0,gt.m9)(t))||t instanceof Ho?p_(this._dataReader,"Transaction.update",u._key,t,r,o):ss(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,l),this}delete(e){const t=tc(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=tc(e,this._firestore),r=new Bl(this._firestore);return super.get(e).then(o=>new Ba(this._firestore,r,t._key,o._document,new Xu(!1,!1),t.converter))}}!function(n,e=!0){tl=pt.SDK_VERSION,(0,pt._registerComponent)(new lt.wA("firestore",(t,{options:r})=>{const o=t.getProvider("app").getImmediate(),u=new $n(o,new qE(t.getProvider("auth-internal")),new D0(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),u._setSettings(r),u},"PUBLIC")),(0,pt.registerVersion)(zE,"3.4.13",n),(0,pt.registerVersion)(zE,"3.4.13","esm2017")}();function ZI(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ae("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function Fb(){if(typeof Uint8Array>"u")throw new Ae("unimplemented","Uint8Arrays are not available in this environment.")}function Ub(){if(!function Gd(){return typeof atob<"u"}())throw new Ae("unimplemented","Blobs are unavailable in Firestore in this environment.")}class Ph{constructor(e){this._delegate=e}static fromBase64String(e){return Ub(),new Ph(Va.fromBase64String(e))}static fromUint8Array(e){return Fb(),new Ph(Va.fromUint8Array(e))}toBase64(){return Ub(),this._delegate.toBase64()}toUint8Array(){return Fb(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function T_(n){return function Vb(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class Bb{enableIndexedDbPersistence(e,t){return function ZT(n,e){Mm(n=qt(n,$n));const t=Tr(n),r=n._freezeSettings(),o=new wm;return vb(t,o,new e_(o,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function YT(n){Mm(n=qt(n,$n));const e=Tr(n),t=n._freezeSettings(),r=new wm;return vb(e,r,new ub(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function Am(n){if(n._initialized&&!n._terminated)throw new Ae(le.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Lr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Y.Z)(function*(){try{yield(t=(0,Y.Z)(function*(r){if(!zs.V())return Promise.resolve();const o=r+"main";yield zs.delete(o)}),function(r){return t.apply(this,arguments)})(hh(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class YI{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Gs||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&jf("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function xI(n,e,t,r={}){var o;const u=(n=qt(n,Ch))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&jf("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let l,g;if("string"==typeof r.mockUserToken)l=r.mockUserToken,g=Yr.MOCK_USER;else{l=(0,gt.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const I=r.mockUserToken.sub||r.mockUserToken.user_id;if(!I)throw new Ae(le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Yr(I)}n._authCredentials=new WE(new Iy(l,g))}}(this._delegate,e,t,r)}enableNetwork(){return function OI(n){return function Cm(n){return n.asyncQueue.enqueue((0,Y.Z)(function*(){const e=yield DI(n),t=yield bI(n);return e.setNetworkEnabled(!0),function(r){const o=Xe(r);return o.lu.delete(0),_p(o)}(t)}))}(Tr(n=qt(n,$n)))}(this._delegate)}disableNetwork(){return function xm(n){return function r_(n){return n.asyncQueue.enqueue((0,Y.Z)(function*(){const e=yield DI(n),t=yield bI(n);return e.setNetworkEnabled(!1),(r=(0,Y.Z)(function*(o){const u=Xe(o);u.lu.add(0),yield yh(u),u._u.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(Tr(n=qt(n,$n)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,gb("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function QT(n){return function(e){const t=new Lr;return e.asyncQueue.enqueueAndForget((0,Y.Z)(function*(){return function rb(n,e){return Sp.apply(this,arguments)}(yield Op(e),t)})),t.promise}(Tr(n=qt(n,$n)))}(this._delegate)}onSnapshotsInSync(e){return function cC(n,e){return function Th(n,e){const t=new Fr(e);return n.asyncQueue.enqueueAndForget((0,Y.Z)(function*(){return r=yield Ll(n),o=t,Xe(r).Tu.add(o),void o.next();var r,o})),()=>{t.Tc(),n.asyncQueue.enqueueAndForget((0,Y.Z)(function*(){return r=yield Ll(n),o=t,void Xe(r).Tu.delete(o);var r,o}))}}(Tr(n=qt(n,$n)),d_(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ae("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new kh(this,MI(this._delegate,e))}catch(t){throw ei(t,"collection()","Firestore.collection()")}}doc(e){try{return new as(this,Pp(this._delegate,e))}catch(t){throw ei(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ti(this,function RI(n,e){if(n=qt(n,Ch),a_("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ae(le.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new li(n,null,(t=e,new ws(Kt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw ei(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function Lb(n,e,t){n=qt(n,$n);const r=Object.assign(Object.assign({},HI),t);return function(o){if(o.maxAttempts<1)throw new Ae(le.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function fb(n,e,t){const r=new Lr;return n.asyncQueue.enqueueAndForget((0,Y.Z)(function*(){const o=yield(u=n,Dm(u).then(l=>l.datastore));var u;new lb(n.asyncQueue,o,t,e,r).run()})),r.promise}(Tr(n),o=>e(new kb(n,o)),r)}(this._delegate,t=>e(new C_(this,t)))}batch(){return Tr(this._delegate),new JI(new E_(this._delegate,e=>Nh(this._delegate,e)))}loadBundle(e){return function PI(n,e){const t=Tr(n=qt(n,$n)),r=new KT;return function TI(n,e,t,r){const o=function(u,l){let g;return g="string"==typeof u?(new TextEncoder).encode(u):u,I=function(I,b){if(I instanceof Uint8Array)return EI(I,b);if(I instanceof ArrayBuffer)return EI(new Uint8Array(I),b);if(I instanceof ReadableStream)return I.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(g),new bh(I,l);var I}(t,mh(e));n.asyncQueue.enqueueAndForget((0,Y.Z)(function*(){!function ab(n,e,t){const r=Xe(n);var o;(o=(0,Y.Z)(function*(u,l,g){try{const I=yield l.getMetadata();if(yield function(W,X){const de=Xe(W),Fe=Er(X.createTime);return de.persistence.runTransaction("hasNewerBundle","readonly",He=>de.Ds.getBundleMetadata(He,X.id)).then(He=>!!He&&He.createTime.compareTo(Fe)>=0)}(u.localStore,I))return yield l.close(),g._completeWith({taskState:"Success",documentsLoaded:(W=I).totalDocuments,bytesLoaded:W.totalBytes,totalDocuments:W.totalDocuments,totalBytes:W.totalBytes}),Promise.resolve(new Set);g._updateProgress(uI(I));const b=new KD(I,u.localStore,l.wt);let A=yield l.fc();for(;A;){const W=yield b.Nu(A);W&&g._updateProgress(W),A=yield l.fc()}const N=yield b.complete();return yield bs(u,N.Mu,void 0),yield function(W,X){const de=Xe(W);return de.persistence.runTransaction("Save bundle","readwrite",Fe=>de.Ds.saveBundleMetadata(Fe,X))}(u.localStore,I),g._completeWith(N.progress),Promise.resolve(N.Ou)}catch(I){return jf("SyncEngine",`Loading bundle failed with ${I}`),g._failWith(I),Promise.resolve(new Set)}var W}),function(u,l,g){return o.apply(this,arguments)})(r,e,t).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield Op(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function JT(n,e){return function o_(n,e){return n.asyncQueue.enqueue((0,Y.Z)(function*(){return function(t,r){const o=Xe(t);return o.persistence.runTransaction("Get named query","readonly",u=>o.Ds.getNamedQuery(u,r))}(yield n_(n),e)}))}(Tr(n=qt(n,$n)),e).then(t=>t?new li(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Ti(this,t):null)}}class Up extends Fm{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ph(new Va(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return as.forKey(t,this.firestore,null)}}class C_{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Up(e)}get(e){const t=zl(e);return this._delegate.get(t).then(r=>new Hl(this._firestore,new Ba(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=zl(e);return r?(ZI("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=zl(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=zl(e);return this._delegate.delete(t),this}}class JI{constructor(e){this._delegate=e}set(e,t,r){const o=zl(e);return r?(ZI("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=zl(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=zl(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class $l{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Mh(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Vp(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=$l.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let u=o.get(t);return u||(u=new $l(e,new Up(e),t),o.set(t,u)),u}}$l.INSTANCES=new WeakMap;class as{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Up(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ae("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new as(t,new Cn(t._delegate,r,new Ge(e)))}static forKey(e,t,r){return new as(t,new Cn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new kh(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new kh(this.firestore,MI(this._delegate,e))}catch(t){throw ei(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,gt.m9)(e))instanceof Cn&&c_(this._delegate,e)}set(e,t){t=ZI("DocumentReference.set",t);try{return t?GI(this._delegate,e,t):GI(this._delegate,e)}catch(r){throw ei(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?Ob(this._delegate,e):Ob(this._delegate,e,t,...r)}catch(o){throw ei(o,"updateDoc()","DocumentReference.update()")}}delete(){return function aC(n){return Nh(qt(n.firestore,$n),[new Ws(n._key,jn.none())])}(this._delegate)}onSnapshot(...e){const t=jb(e),r=S_(e,o=>new Hl(this.firestore,new Ba(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return Pb(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function sC(n){n=qt(n,Cn);const e=qt(n.firestore,$n),t=Tr(e),r=new Bl(e);return function qT(n,e){const t=new Lr;return n.asyncQueue.enqueueAndForget((0,Y.Z)(function*(){return(r=(0,Y.Z)(function*(o,u,l){try{const g=yield function(I,b){const A=Xe(I);return A.persistence.runTransaction("read document","readonly",N=>A.localDocuments.getDocument(N,b))}(o,u);g.isFoundDocument()?l.resolve(g):g.isNoDocument()?l.resolve(null):l.reject(new Ae(le.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(g){const I=Ml(g,`Failed to get document '${u} from cache`);l.reject(I)}}),function(o,u,l){return r.apply(this,arguments)})(yield n_(n),e,t);var r})),t.promise}(t,n._key).then(o=>new Ba(e,r,n._key,o,new Xu(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function oC(n){n=qt(n,Cn);const e=qt(n.firestore,$n);return i_(Tr(e),n._key,{source:"server"}).then(t=>Oh(e,n,t))}(this._delegate):function Mb(n){n=qt(n,Cn);const e=qt(n.firestore,$n);return i_(Tr(e),n._key).then(t=>Oh(e,n,t))}(this._delegate),t.then(r=>new Hl(this.firestore,new Ba(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new as(this.firestore,this._delegate.withConverter(e?$l.getInstance(this.firestore,e):null))}}function ei(n,e,t){return n.message=n.message.replace(e,t),n}function jb(n){for(const e of n)if("object"==typeof e&&!T_(e))return e;return{}}function S_(n,e){var t,r;let o;return o=T_(n[0])?n[0]:T_(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{o.next&&o.next(e(u))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class Hl{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new as(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return zo(this._delegate,e._delegate)}}class Vp extends Hl{data(e){const t=this._delegate.data(e);return function I0(n,e){n||Je()}(void 0!==t),t}}class Ti{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Up(e)}where(e,t,r){try{return new Ti(this.firestore,Go(this._delegate,function Cb(n,e,t){const r=e,o=Fp("where",n);return new UI(o,r,t)}(e,t,r)))}catch(o){throw ei(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ti(this.firestore,Go(this._delegate,function Sb(n,e="asc"){const t=e,r=Fp("orderBy",n);return new nC(r,t)}(e,t)))}catch(r){throw ei(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ti(this.firestore,Go(this._delegate,function Ab(n){return u_("limit",n),new VI("limit",n,"F")}(e)))}catch(t){throw ei(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ti(this.firestore,Go(this._delegate,function xb(n){return u_("limitToLast",n),new VI("limitToLast",n,"L")}(e)))}catch(t){throw ei(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ti(this.firestore,Go(this._delegate,function rC(...n){return new v_("startAt",n,!0)}(...e)))}catch(t){throw ei(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ti(this.firestore,Go(this._delegate,function BI(...n){return new v_("startAfter",n,!1)}(...e)))}catch(t){throw ei(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ti(this.firestore,Go(this._delegate,function $I(...n){return new jI("endBefore",n,!1)}(...e)))}catch(t){throw ei(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ti(this.firestore,Go(this._delegate,function iC(...n){return new jI("endAt",n,!0)}(...e)))}catch(t){throw ei(t,"endAt()","Query.endAt()")}}isEqual(e){return l_(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function Rb(n){n=qt(n,li);const e=qt(n.firestore,$n),t=Tr(e),r=new Bl(e);return function hb(n,e){const t=new Lr;return n.asyncQueue.enqueueAndForget((0,Y.Z)(function*(){return(r=(0,Y.Z)(function*(o,u,l){try{const g=yield sm(o,u,!0),I=new dI(u,g.ji),b=I.Ku(g.documents),A=I.applyChanges(b,!1);l.resolve(A.snapshot)}catch(g){const I=Ml(g,`Failed to execute query '${u} against cache`);l.reject(I)}}),function(o,u,l){return r.apply(this,arguments)})(yield n_(n),e,t);var r})),t.promise}(t,n._query).then(o=>new ec(e,r,n,o))}(this._delegate):"server"===e?.source?function Nb(n){n=qt(n,li);const e=qt(n.firestore,$n),t=Tr(e),r=new Bl(e);return s_(t,n._query,{source:"server"}).then(o=>new ec(e,r,n,o))}(this._delegate):function zI(n){n=qt(n,li);const e=qt(n.firestore,$n),t=Tr(e),r=new Bl(e);return ja(n._query),s_(t,n._query).then(o=>new ec(e,r,n,o))}(this._delegate),t.then(r=>new XI(this.firestore,new ec(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=jb(e),r=S_(e,o=>new XI(this.firestore,new ec(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return Pb(this._delegate,t,r)}withConverter(e){return new Ti(this.firestore,this._delegate.withConverter(e?$l.getInstance(this.firestore,e):null))}}class hC{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Vp(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class XI{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ti(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Vp(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new hC(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Vp(this._firestore,r))})}isEqual(e){return zo(this._delegate,e._delegate)}}class kh extends Ti{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new as(this.firestore,e):null}doc(e){try{return new as(this.firestore,void 0===e?Pp(this._delegate):Pp(this._delegate,e))}catch(t){throw ei(t,"doc()","CollectionReference.doc()")}}add(e){return function uC(n,e){const t=qt(n.firestore,$n),r=Pp(n),o=Vl(n.converter,e);return Nh(t,[Om(Fl(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,jn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new as(this.firestore,t))}isEqual(e){return c_(this._delegate,e._delegate)}withConverter(e){return new kh(this.firestore,this._delegate.withConverter(e?$l.getInstance(this.firestore,e):null))}}function zl(n){return qt(n,Cn)}class A_{constructor(...e){this._delegate=new Ho(...e)}static documentId(){return new A_(ir.keyField().canonicalString())}isEqual(e){return(e=(0,gt.m9)(e))instanceof Ho&&this._delegate._internalPath.isEqual(e._internalPath)}}class Lh{constructor(e){this._delegate=e}static serverTimestamp(){const e=function jl(){return new f_("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Lh(e)}static delete(){const e=function WI(){return new kp("deleteField")}();return e._methodName="FieldValue.delete",new Lh(e)}static arrayUnion(...e){const t=function qI(...n){return new LI("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Lh(t)}static arrayRemove(...e){const t=function D_(...n){return new FI("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Lh(t)}static increment(e){const t=function b_(n){return new tC("increment",n)}(e);return t._methodName="FieldValue.increment",new Lh(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const fC={Firestore:YI,GeoPoint:Rm,Timestamp:Nn,Blob:Ph,Transaction:C_,WriteBatch:JI,DocumentReference:as,DocumentSnapshot:Hl,Query:Ti,QueryDocumentSnapshot:Vp,QuerySnapshot:XI,CollectionReference:kh,FieldPath:A_,FieldValue:Lh,setLogLevel:function QI(n){!function w0(n){nl.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function gC(n){(function pC(n,e){n.INTERNAL.registerComponent(new lt.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},fC)))})(n,(e,t)=>new YI(e,t,new Bb)),n.registerVersion("@firebase/firestore-compat","0.1.22")}(ht.Z);var nc=P(7579),mC=P(6451),x_=P(5363),eE=P(8421);function ti(n,e){return(0,Vn.e)((t,r)=>{let o=null,u=0,l=!1;const g=()=>l&&!o&&r.complete();t.subscribe((0,Xn.x)(r,I=>{o?.unsubscribe();let b=0;const A=u++;(0,eE.Xf)(n(I,A)).subscribe(o=(0,Xn.x)(r,N=>r.next(e?e(I,N,A,b++):N),()=>{o=null,g()}))},()=>{l=!0,g()}))})}var yC=P(6063);class vC extends nc.x{constructor(e=1/0,t=1/0,r=yC.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:u,_windowTime:l}=this;t||(r.push(e),!o&&r.push(u.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,u=o.slice();for(let l=0;l<u.length&&!e.closed;l+=r?1:2)e.next(u[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,u=(o?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!o){const l=t.now();let g=0;for(let I=1;I<r.length&&r[I]<=l;I+=2)g=I;g&&r.splice(0,g+1)}}}var i=P(3099);function s(n,e,t){let r,o=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:o=!1,scheduler:t}=n):r=n??1/0,(0,i.B)({connector:()=>new vC(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}const c=(0,P(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var d=P(515);function f(n){return n<=0?()=>d.E:(0,Vn.e)((e,t)=>{let r=0;e.subscribe((0,Xn.x)(t,o=>{++r<=n&&(t.next(o),n<=r&&t.complete())}))})}function y(n){return(0,Vn.e)((e,t)=>{let r=!1;e.subscribe((0,Xn.x)(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function w(n=D){return(0,Vn.e)((e,t)=>{let r=!1;e.subscribe((0,Xn.x)(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function D(){return new c}function C(n,e){const t=arguments.length>=2;return r=>r.pipe(n?we((o,u)=>n(o,u,r)):L.y,f(1),t?y(e):w(()=>new c))}var M=P(576);function k(n,e){return(0,M.m)(e)?ti(()=>n,e):ti(()=>n)}var G=P(9468);P(5867);const _C=new Map,wA={activated:!1,tokenObservers:[]},IA={initialized:!1,enabled:!1};function di(n){return _C.get(n)||wA}function $a(n,e){_C.set(n,e)}function tE(){return IA}const $b="https://content-firebaseappcheck.googleapis.com/v1",bA="exchangeDebugToken",wC={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class CA{constructor(e,t,r,o,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=o,o>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Y.Z)(function*(){t.stop();try{t.pending=new gt.BH,yield function SA(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new gt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const us=new gt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Gb(){return Gb=(0,Y.Z)(function*({url:n,body:e},t){var r,o;const u={"Content-Type":"application/json"},l=t.getImmediate({optional:!0});if(l){const X=yield l.getHeartbeatsHeader();X&&(u["X-Firebase-Client"]=X)}const g={method:"POST",body:JSON.stringify(e),headers:u};let I,b;try{I=yield fetch(n,g)}catch(X){throw us.create("fetch-network-error",{originalErrorMessage:null===(r=X)||void 0===r?void 0:r.message})}if(200!==I.status)throw us.create("fetch-status-error",{httpStatus:I.status});try{b=yield I.json()}catch(X){throw us.create("fetch-parse-error",{originalErrorMessage:null===(o=X)||void 0===o?void 0:o.message})}const A=b.ttl.match(/^([\d.]+)(s)$/);if(!A||!A[2]||isNaN(Number(A[1])))throw us.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${b.ttl}`});const N=1e3*Number(A[1]),W=Date.now();return{token:b.token,expireTimeMillis:W+N,issuedAtTimeMillis:W}}),Gb.apply(this,arguments)}const NA="firebase-app-check-database",OA=1,M_="firebase-app-check-store";let iE=null;function Wb(){return Wb=(0,Y.Z)(function*(n,e){const r=(yield function DC(){return iE||(iE=new Promise((n,e)=>{var t;try{const r=indexedDB.open(NA,OA);r.onsuccess=o=>{n(o.target.result)},r.onerror=o=>{var u;e(us.create("storage-open",{originalErrorMessage:null===(u=o.target.error)||void 0===u?void 0:u.message}))},r.onupgradeneeded=o=>{0===o.oldVersion&&o.target.result.createObjectStore(M_,{keyPath:"compositeKey"})}}catch(r){e(us.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),iE)}()).transaction(M_,"readwrite"),u=r.objectStore(M_).put({compositeKey:n,value:e});return new Promise((l,g)=>{u.onsuccess=I=>{l()},r.onerror=I=>{var b;g(us.create("storage-set",{originalErrorMessage:null===(b=I.target.error)||void 0===b?void 0:b.message}))}})}),Wb.apply(this,arguments)}const R_=new hn.Yd("@firebase/app-check");function SC(n,e){return(0,gt.hl)()?function kA(n,e){return function bC(n,e){return Wb.apply(this,arguments)}(function CC(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{R_.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function Yb(){return Yb=(0,Y.Z)(function*(){const n=tE();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),Yb.apply(this,arguments)}const jA={error:"UNKNOWN_ERROR"};function $A(n){return gt.US.encodeString(JSON.stringify(n),!1)}function sE(n){return Qb.apply(this,arguments)}function Qb(){return Qb=(0,Y.Z)(function*(n,e=!1){const t=n.app;!function IC(n){if(!di(n).activated)throw us.create("use-before-activation",{appName:n.name})}(t);const r=di(t);let u,o=r.token;if(!o){const I=yield r.cachedTokenPromise;I&&oE(I)&&(o=I)}if(!e&&o&&oE(o))return{token:o.token};let g,l=!1;if(function AC(){return tE().enabled}()){r.exchangeTokenPromise||(r.exchangeTokenPromise=function zb(n,e){return Gb.apply(this,arguments)}(function RA(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`${$b}/projects/${t}/apps/${r}:${bA}?key=${o}`,body:{debug_token:e}}}(t,yield function xC(){return Yb.apply(this,arguments)}()),n.heartbeatServiceProvider).then(b=>(r.exchangeTokenPromise=void 0,b)),l=!0);const I=yield r.exchangeTokenPromise;return yield SC(t,I),$a(t,Object.assign(Object.assign({},r),{token:I})),{token:I.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(I=>(r.exchangeTokenPromise=void 0,I)),l=!0),o=yield r.exchangeTokenPromise}catch(I){"appCheck/throttled"===I.code?R_.warn(I.message):R_.error(I),u=I}return o?(g={token:o.token},$a(t,Object.assign(Object.assign({},r),{token:o})),yield SC(t,o)):g=function zA(n){return{token:$A(jA),error:n}}(u),l&&function RC(n,e){const t=di(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,g),g}),Qb.apply(this,arguments)}function Xb(n,e){const t=di(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),$a(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function MC(n){const{app:e}=n,t=di(e);let r=t.tokenRefresher;r||(r=function HA(n){const{app:e}=n;return new CA((0,Y.Z)(function*(){let r;if(r=di(e).token?yield sE(n,!0):yield sE(n),r.error)throw r.error}),()=>!0,()=>{const t=di(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},wC.RETRIAL_MIN_WAIT,wC.RETRIAL_MAX_WAIT)}(n),$a(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function oE(n){return n.expireTimeMillis-Date.now()>0}class GA{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=di(this.app);for(const t of e)Xb(this.app,t.next);return Promise.resolve()}}const VC="app-check-internal";!function sx(){(0,pt._registerComponent)(new lt.wA("app-check",n=>function WA(n,e){return new GA(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(VC).initialize()})),(0,pt._registerComponent)(new lt.wA(VC,n=>function qA(n){return{getToken:e=>sE(n,e),addTokenListener:e=>function Jb(n,e,t,r){const{app:o}=n,u=di(o),l={next:t,error:r,type:e};if($a(o,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,l]})),u.token&&oE(u.token)){const g=u.token;Promise.resolve().then(()=>{t({token:g.token}),MC(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>MC(n))}(n,"INTERNAL",e),removeTokenListener:e=>Xb(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,pt.registerVersion)("@firebase/app-check","0.5.12")}();class rT{constructor(){return(0,Un.vb)("app-check")}}typeof window<"u"&&window;var lx=P(127);const jC=new v.OlP("angularfire2.auth.use-emulator"),$C=new v.OlP("angularfire2.auth.settings"),HC=new v.OlP("angularfire2.auth.tenant-id"),zC=new v.OlP("angularfire2.auth.langugage-code"),GC=new v.OlP("angularfire2.auth.use-device-language"),WC=new v.OlP("angularfire.auth.persistence"),qC=(n,e,t,r,o,u,l,g)=>(0,_r.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const I=e.runOutsideAngular(()=>n.auth());if(t&&I.useEmulator(...t),r&&(I.tenantId=r),I.languageCode=o,u&&I.useDeviceLanguage(),l)for(const[b,A]of Object.entries(l))I.settings[b]=A;return g&&I.setPersistence(g),I},[t,r,o,u,l,g]);let KC=(()=>{class n{constructor(t,r,o,u,l,g,I,b,A,N,W,X){const de=new nc.x,Fe=tt(void 0).pipe((0,x_.Q)(l.outsideAngular),ti(()=>u.runOutsideAngular(()=>Promise.resolve().then(P.bind(P,1451)))),(0,E.U)(()=>(0,_r.on)(t,u,r)),(0,E.U)(He=>qC(He,u,g,b,A,N,I,W)),s({bufferSize:1,refCount:!1}));if(Ga(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=tt(null);else{Fe.pipe(C()).subscribe();const Ot=Fe.pipe(ti(St=>St.getRedirectResult().then(Ut=>Ut,()=>null)),Un.iC,s({bufferSize:1,refCount:!1})),Mt=Fe.pipe(ti(St=>new oi.y(Ut=>({unsubscribe:u.runOutsideAngular(()=>St.onAuthStateChanged(on=>Ut.next(on),on=>Ut.error(on),()=>Ut.complete()))})))),Ft=Fe.pipe(ti(St=>new oi.y(Ut=>({unsubscribe:u.runOutsideAngular(()=>St.onIdTokenChanged(on=>Ut.next(on),on=>Ut.error(on),()=>Ut.complete()))}))));this.authState=Ot.pipe(k(Mt),(0,G.R)(l.outsideAngular),(0,x_.Q)(l.insideAngular)),this.user=Ot.pipe(k(Ft),(0,G.R)(l.outsideAngular),(0,x_.Q)(l.insideAngular)),this.idToken=this.user.pipe(ti(St=>St?(0,rn.D)(St.getIdToken()):tt(null))),this.idTokenResult=this.user.pipe(ti(St=>St?(0,rn.D)(St.getIdTokenResult()):tt(null))),this.credential=(0,mC.T)(Ot,de,this.authState.pipe(we(St=>!St))).pipe((0,E.U)(St=>St?.user?St:null),(0,G.R)(l.outsideAngular),(0,x_.Q)(l.insideAngular))}return(0,_r.pX)(this,Fe,u,{spy:{apply:(He,Ot,Mt)=>{(He.startsWith("signIn")||He.startsWith("createUser"))&&Mt.then(Ft=>de.next(Ft))}}})}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(_r.Dh),v.LFG(_r.xv,8),v.LFG(v.Lbi),v.LFG(v.R0b),v.LFG(Un.HU),v.LFG(jC,8),v.LFG($C,8),v.LFG(HC,8),v.LFG(zC,8),v.LFG(GC,8),v.LFG(WC,8),v.LFG(rT,8))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function ZC(n,e){return function hx(n,e=wi.z){return new oi.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function sT(n,e){return ZC(n,e).pipe((0,E.U)(t=>({payload:t,type:"query"})))}function uE(n,e){return sT(n,e).pipe(vs(void 0),xo(),(0,E.U)(([t,r])=>{const o=r.payload.docChanges(),u=o.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,g)=>{const I=o.find(A=>A.doc.ref.isEqual(l.ref)),b=t?.payload.docs.find(A=>A.ref.isEqual(l.ref));I&&JSON.stringify(I.doc.metadata)===JSON.stringify(l.metadata)||!I&&b&&JSON.stringify(b.metadata)===JSON.stringify(l.metadata)||u.push({type:"modified",payload:{oldIndex:g,newIndex:g,type:"modified",doc:l}})}),u}))}function YC(n,e,t){return uE(n,t).pipe(x((r,o)=>function px(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function gx(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return oT(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return oT(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return oT(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(u=>u.payload),e),[]),function Z(n,e=L.y){return n=n??ie,(0,Vn.e)((t,r)=>{let o,u=!0;t.subscribe((0,Xn.x)(r,l=>{const g=e(l);(u||!n(o,g))&&(u=!1,o=g,r.next(l))}))})}(),(0,E.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function oT(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function QC(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class JC{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=uE(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,E.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(vs(void 0),xo(),we(([r,o])=>o.length>0||!r),(0,E.U)(([r,o])=>o),Un.iC)}auditTrail(e){return this.stateChanges(e).pipe(x((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=QC(e);return YC(this.query,t,this.afs.schedulers.outsideAngular).pipe(Un.iC)}valueChanges(e={}){return sT(this.query,this.afs.schedulers.outsideAngular).pipe((0,E.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Un.iC)}get(e){return(0,rn.D)(this.query.get(e)).pipe(Un.iC)}add(e){return this.ref.add(e)}doc(e){return new XC(this.ref.doc(e),this.afs)}}class XC{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:u}=nS(r,t);return new JC(o,u,this.afs)}snapshotChanges(){return function fx(n,e){return ZC(n,e).pipe(vs(void 0),xo(),(0,E.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Un.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,E.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,rn.D)(this.ref.get(e)).pipe(Un.iC)}}class mx{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?uE(this.query,this.afs.schedulers.outsideAngular).pipe((0,E.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),we(t=>t.length>0),Un.iC):uE(this.query,this.afs.schedulers.outsideAngular).pipe(Un.iC)}auditTrail(e){return this.stateChanges(e).pipe(x((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=QC(e);return YC(this.query,t,this.afs.schedulers.outsideAngular).pipe(Un.iC)}valueChanges(e={}){return sT(this.query,this.afs.schedulers.outsideAngular).pipe((0,E.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),Un.iC)}get(e){return(0,rn.D)(this.query.get(e)).pipe(Un.iC)}}const eS=new v.OlP("angularfire2.enableFirestorePersistence"),tS=new v.OlP("angularfire2.firestore.persistenceSettings"),yx=new v.OlP("angularfire2.firestore.settings"),vx=new v.OlP("angularfire2.firestore.use-emulator");function nS(n,e=(t=>t)){return{query:e(n),ref:n}}let rS=(()=>{class n{constructor(t,r,o,u,l,g,I,b,A,N,W,X,de,Fe,He,Ot,Mt){this.schedulers=I;const Ft=(0,_r.on)(t,g,r),St=A;N&&qC(Ft,g,W,de,Fe,He,X,Ot),[this.firestore,this.persistenceEnabled$]=(0,_r.cc)(`${Ft.name}.firestore`,"AngularFirestore",Ft.name,()=>{const Ut=g.runOutsideAngular(()=>Ft.firestore());if(u&&Ut.settings(u),St&&Ut.useEmulator(...St),o&&!Ga(l)){const on=()=>{try{return(0,rn.D)(Ut.enablePersistence(b||void 0).then(()=>!0,()=>!1))}catch(zi){return typeof console<"u"&&console.warn(zi),tt(!1)}};return[Ut,g.runOutsideAngular(on)]}return[Ut,tt(!1)]},[u,St,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:l}=nS(o,r),g=this.schedulers.ngZone.run(()=>u);return new JC(g,l,this)}collectionGroup(t,r){const o=r||(l=>l),u=this.firestore.collectionGroup(t);return new mx(o(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new XC(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(_r.Dh),v.LFG(_r.xv,8),v.LFG(eS,8),v.LFG(yx,8),v.LFG(v.Lbi),v.LFG(v.R0b),v.LFG(Un.HU),v.LFG(tS,8),v.LFG(vx,8),v.LFG(KC,8),v.LFG(jC,8),v.LFG($C,8),v.LFG(HC,8),v.LFG(zC,8),v.LFG(GC,8),v.LFG(WC,8),v.LFG(rT,8))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),_x=(()=>{class n{constructor(){lx.Z.registerVersion("angularfire",Un.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:eS,useValue:!0},{provide:tS,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=v.oAB({type:n}),n.\u0275inj=v.cJS({providers:[rS]}),n})();class Ha extends nc.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const{isArray:wx}=Array,{getPrototypeOf:Ix,prototype:Ex,keys:Dx}=Object;const{isArray:Cx}=Array;var Mx=P(9672);function iS(...n){const e=(0,ya.yG)(n),t=(0,ya.jO)(n),{args:r,keys:o}=function bx(n){if(1===n.length){const e=n[0];if(wx(e))return{args:e,keys:null};if(function Tx(n){return n&&"object"==typeof n&&Ix(n)===Ex}(e)){const t=Dx(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}(n);if(0===r.length)return(0,rn.D)([],e);const u=new oi.y(function Rx(n,e,t=L.y){return r=>{sS(e,()=>{const{length:o}=n,u=new Array(o);let l=o,g=o;for(let I=0;I<o;I++)sS(e,()=>{const b=(0,rn.D)(n[I],e);let A=!1;b.subscribe((0,Xn.x)(r,N=>{u[I]=N,A||(A=!0,g--),g||r.next(t(u.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,o?l=>function xx(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}(o,l):L.y));return t?u.pipe(function Ax(n){return(0,E.U)(e=>function Sx(n,e){return Cx(e)?n(...e):n(e)}(n,e))}(t)):u}function sS(n,e,t){n?(0,Mx.f)(t,n,e):e()}function oS(n){return new oi.y(e=>{(0,eE.Xf)(n()).subscribe(e)})}var Nx=P(9635);function N_(n,e){const t=(0,M.m)(n)?n:()=>n,r=o=>o.error(t());return new oi.y(e?o=>e.schedule(r,0,o):r)}var aS=P(727);function aT(){return(0,Vn.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Xn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,u=t;t=null,o&&(!u||o===u)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class uS extends oi.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Vn.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new aS.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Xn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=aS.w0.EMPTY)}return e}refCount(){return aT()(this)}}var cs=P(5577);function Bp(n,e){return(0,M.m)(e)?(0,cs.z)(n,e,1):(0,cs.z)(n,1)}var Hi=P(8505);function Fh(n){return(0,Vn.e)((e,t)=>{let u,r=null,o=!1;r=e.subscribe((0,Xn.x)(t,void 0,void 0,l=>{u=(0,eE.Xf)(n(l,Fh(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,u.subscribe(t))})}function uT(n){return n<=0?()=>d.E:(0,Vn.e)((e,t)=>{let r=[];e.subscribe((0,Xn.x)(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function cS(n,e){const t=arguments.length>=2;return r=>r.pipe(n?we((o,u)=>n(o,u,r)):L.y,uT(1),t?y(e):w(()=>new c))}function cT(n){return(0,Vn.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Lt="primary",O_=Symbol("RouteTitle");class kx{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function jm(n){return new kx(n)}function Lx(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let u=0;u<r.length;u++){const l=r[u],g=n[u];if(l.startsWith(":"))o[l.substring(1)]=g;else if(l!==g.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function rc(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let u=0;u<t.length;u++)if(o=t[u],!lS(n[o],e[o]))return!1;return!0}function lS(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,u)=>r[u]===o)}return n===e}function dS(n){return Array.prototype.concat.apply([],n)}function hS(n){return n.length>0?n[n.length-1]:null}function Ci(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Uh(n){return(0,v.CqO)(n)?n:(0,v.QGY)(n)?(0,rn.D)(Promise.resolve(n)):tt(n)}const cE=!1,Ux={exact:function gS(n,e,t){if(!jp(n.segments,e.segments)||!lE(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!gS(n.children[r],e.children[r],t))return!1;return!0},subset:mS},fS={exact:function Vx(n,e){return rc(n,e)},subset:function Bx(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>lS(n[t],e[t]))},ignored:()=>!0};function pS(n,e,t){return Ux[t.paths](n.root,e.root,t.matrixParams)&&fS[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function mS(n,e,t){return yS(n,e,e.segments,t)}function yS(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!jp(o,t)||e.hasChildren()||!lE(o,t,r))}if(n.segments.length===t.length){if(!jp(n.segments,t)||!lE(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!mS(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(jp(n.segments,o)&&lE(n.segments,o,r)&&n.children[Lt])&&yS(n.children[Lt],e,u,r)}}function lE(n,e,t){return e.every((r,o)=>fS[t](n[o].parameters,r.parameters))}class Vh{constructor(e=new Gt([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=jm(this.queryParams)),this._queryParamMap}toString(){return Hx.serialize(this)}}class Gt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Ci(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return dE(this)}}class P_{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=jm(this.parameters)),this._parameterMap}toString(){return wS(this)}}function jp(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let k_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=v.Yz7({token:n,factory:function(){return new lT},providedIn:"root"}),n})();class lT{parse(e){const t=new Jx(e);return new Vh(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${L_(e.root,!0)}`,r=function Wx(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${hE(t)}=${hE(o)}`).join("&"):`${hE(t)}=${hE(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),o="string"==typeof e.fragment?`#${function zx(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${r}${o}`}}const Hx=new lT;function dE(n){return n.segments.map(e=>wS(e)).join("/")}function L_(n,e){if(!n.hasChildren())return dE(n);if(e){const t=n.children[Lt]?L_(n.children[Lt],!1):"",r=[];return Ci(n.children,(o,u)=>{u!==Lt&&r.push(`${u}:${L_(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function $x(n,e){let t=[];return Ci(n.children,(r,o)=>{o===Lt&&(t=t.concat(e(r,o)))}),Ci(n.children,(r,o)=>{o!==Lt&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===Lt?[L_(n.children[Lt],!1)]:[`${o}:${L_(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Lt]?`${dE(n)}/${t[0]}`:`${dE(n)}/(${t.join("//")})`}}function vS(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function hE(n){return vS(n).replace(/%3B/gi,";")}function dT(n){return vS(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function fE(n){return decodeURIComponent(n)}function _S(n){return fE(n.replace(/\+/g,"%20"))}function wS(n){return`${dT(n.path)}${function Gx(n){return Object.keys(n).map(e=>`;${dT(e)}=${dT(n[e])}`).join("")}(n.parameters)}`}const qx=/^[^\/()?;=#]+/;function pE(n){const e=n.match(qx);return e?e[0]:""}const Kx=/^[^=?&#]+/,Yx=/^[^&#]+/;class Jx{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Gt([],{}):new Gt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Lt]=new Gt(e,t)),r}parseSegment(){const e=pE(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new v.vHH(4009,cE);return this.capture(e),new P_(fE(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=pE(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=pE(this.remaining);o&&(r=o,this.capture(r))}e[fE(t)]=fE(r)}parseQueryParam(e){const t=function Zx(n){const e=n.match(Kx);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function Qx(n){const e=n.match(Yx);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const o=_S(t),u=_S(r);if(e.hasOwnProperty(o)){let l=e[o];Array.isArray(l)||(l=[l],e[o]=l),l.push(u)}else e[o]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=pE(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new v.vHH(4010,cE);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Lt);const l=this.parseChildren();t[u]=1===Object.keys(l).length?l[Lt]:new Gt([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new v.vHH(4011,cE)}}function hT(n){return n.segments.length>0?new Gt([],{[Lt]:n}):n}function gE(n){const e={};for(const r of Object.keys(n.children)){const u=gE(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function Xx(n){if(1===n.numberOfChildren&&n.children[Lt]){const e=n.children[Lt];return new Gt(n.segments.concat(e.segments),e.children)}return n}(new Gt(n.segments,e))}function $p(n){return n instanceof Vh}const fT=!1;function eM(n,e,t,r,o){if(0===t.length)return $m(e.root,e.root,e.root,r,o);const u=function TS(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new bS(!0,0,n);let e=0,t=!1;const r=n.reduce((o,u,l)=>{if("object"==typeof u&&null!=u){if(u.outlets){const g={};return Ci(u.outlets,(I,b)=>{g[b]="string"==typeof I?I.split("/"):I}),[...o,{outlets:g}]}if(u.segmentPath)return[...o,u.segmentPath]}return"string"!=typeof u?[...o,u]:0===l?(u.split("/").forEach((g,I)=>{0==I&&"."===g||(0==I&&""===g?t=!0:".."===g?e++:""!=g&&o.push(g))}),o):[...o,u]},[]);return new bS(t,e,r)}(t);return u.toRoot()?$m(e.root,e.root,new Gt([],{}),r,o):function l(I){const b=function nM(n,e,t,r){if(n.isAbsolute)return new Hm(e.root,!0,0);if(-1===r)return new Hm(t,t===e.root,0);return function CS(n,e,t){let r=n,o=e,u=t;for(;u>o;){if(u-=o,r=r.parent,!r)throw new v.vHH(4005,fT&&"Invalid number of '../'");o=r.segments.length}return new Hm(r,!1,o-u)}(t,r+(F_(n.commands[0])?0:1),n.numberOfDoubleDots)}(u,e,n.snapshot?._urlSegment,I),A=b.processChildren?zm(b.segmentGroup,b.index,u.commands):pT(b.segmentGroup,b.index,u.commands);return $m(e.root,b.segmentGroup,A,r,o)}(n.snapshot?._lastPathIndex)}function F_(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function U_(n){return"object"==typeof n&&null!=n&&n.outlets}function $m(n,e,t,r,o){let l,u={};r&&Ci(r,(I,b)=>{u[b]=Array.isArray(I)?I.map(A=>`${A}`):`${I}`}),l=n===e?t:DS(n,e,t);const g=hT(gE(l));return new Vh(g,u,o)}function DS(n,e,t){const r={};return Ci(n.children,(o,u)=>{r[u]=o===e?t:DS(o,e,t)}),new Gt(n.segments,r)}class bS{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&F_(r[0]))throw new v.vHH(4003,fT&&"Root segment cannot have matrix parameters");const o=r.find(U_);if(o&&o!==hS(r))throw new v.vHH(4004,fT&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Hm{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function pT(n,e,t){if(n||(n=new Gt([],{})),0===n.segments.length&&n.hasChildren())return zm(n,e,t);const r=function iM(n,e,t){let r=0,o=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return u;const l=n.segments[o],g=t[r];if(U_(g))break;const I=`${g}`,b=r<t.length-1?t[r+1]:null;if(o>0&&void 0===I)break;if(I&&b&&"object"==typeof b&&void 0===b.outlets){if(!AS(I,b,l))return u;r+=2}else{if(!AS(I,{},l))return u;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Gt(n.segments.slice(0,r.pathIndex),{});return u.children[Lt]=new Gt(n.segments.slice(r.pathIndex),n.children),zm(u,0,o)}return r.match&&0===o.length?new Gt(n.segments,{}):r.match&&!n.hasChildren()?gT(n,e,t):r.match?zm(n,0,o):gT(n,e,t)}function zm(n,e,t){if(0===t.length)return new Gt(n.segments,{});{const r=function rM(n){return U_(n[0])?n[0].outlets:{[Lt]:n}}(t),o={};if(!r[Lt]&&n.children[Lt]&&1===n.numberOfChildren&&0===n.children[Lt].segments.length){const u=zm(n.children[Lt],e,t);return new Gt(n.segments,u.children)}return Ci(r,(u,l)=>{"string"==typeof u&&(u=[u]),null!==u&&(o[l]=pT(n.children[l],e,u))}),Ci(n.children,(u,l)=>{void 0===r[l]&&(o[l]=u)}),new Gt(n.segments,o)}}function gT(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const u=t[o];if(U_(u)){const I=sM(u.outlets);return new Gt(r,I)}if(0===o&&F_(t[0])){r.push(new P_(n.segments[e].path,SS(t[0]))),o++;continue}const l=U_(u)?u.outlets[Lt]:`${u}`,g=o<t.length-1?t[o+1]:null;l&&g&&F_(g)?(r.push(new P_(l,SS(g))),o+=2):(r.push(new P_(l,{})),o++)}return new Gt(r,{})}function sM(n){const e={};return Ci(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=gT(new Gt([],{}),0,t))}),e}function SS(n){const e={};return Ci(n,(t,r)=>e[r]=`${t}`),e}function AS(n,e,t){return n==t.path&&rc(e,t.parameters)}const V_="imperative";class ic{constructor(e,t){this.id=e,this.url=t}}class mT extends ic{constructor(e,t,r="imperative",o=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Hp extends ic{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class mE extends ic{constructor(e,t,r,o){super(e,t),this.reason=r,this.code=o,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class yE extends ic{constructor(e,t,r,o){super(e,t),this.reason=r,this.code=o,this.type=16}}class yT extends ic{constructor(e,t,r,o){super(e,t),this.error=r,this.target=o,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class oM extends ic{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class aM extends ic{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class uM extends ic{constructor(e,t,r,o,u){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class cM extends ic{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class lM extends ic{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class dM{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class hM{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class fM{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class pM{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class gM{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class mM{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xS{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let _M=(()=>{class n{createUrlTree(t,r,o,u,l,g){return eM(t||r.root,o,u,l,g)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})(),IM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=v.Yz7({token:n,factory:function(e){return _M.\u0275fac(e)},providedIn:"root"}),n})();class MS{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=vT(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=vT(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=_T(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return _T(e,this._root).map(t=>t.value)}}function vT(n,e){if(n===e.value)return e;for(const t of e.children){const r=vT(n,t);if(r)return r}return null}function _T(n,e){if(n===e.value)return[e];for(const t of e.children){const r=_T(n,t);if(r.length)return r.unshift(e),r}return[]}class Gl{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Gm(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class RS extends MS{constructor(e,t){super(e),this.snapshot=t,wT(this,e)}toString(){return this.snapshot.toString()}}function NS(n,e){const t=function EM(n,e){const l=new vE([],{},{},"",{},Lt,e,null,n.root,-1,{});return new PS("",new Gl(l,[]))}(n,e),r=new Ha([new P_("",{})]),o=new Ha({}),u=new Ha({}),l=new Ha({}),g=new Ha(""),I=new Wm(r,o,l,g,u,Lt,e,t.root);return I.snapshot=t.root,new RS(new Gl(I,[]),t)}class Wm{constructor(e,t,r,o,u,l,g,I){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=l,this.component=g,this.title=this.data?.pipe((0,E.U)(b=>b[O_]))??tt(void 0),this._futureSnapshot=I}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,E.U)(e=>jm(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,E.U)(e=>jm(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function OS(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],u=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(u.component)break;r--}}return function DM(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class vE{get title(){return this.data?.[O_]}constructor(e,t,r,o,u,l,g,I,b,A,N){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=l,this.component=g,this.routeConfig=I,this._urlSegment=b,this._lastPathIndex=A,this._resolve=N}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=jm(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=jm(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class PS extends MS{constructor(e,t){super(t),this.url=e,wT(this,t)}toString(){return kS(this._root)}}function wT(n,e){e.value._routerState=n,e.children.forEach(t=>wT(n,t))}function kS(n){const e=n.children.length>0?` { ${n.children.map(kS).join(", ")} } `:"";return`${n.value}${e}`}function IT(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,rc(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),rc(e.params,t.params)||n.params.next(t.params),function Fx(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!rc(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),rc(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function ET(n,e){const t=rc(n.params,e.params)&&function jx(n,e){return jp(n,e)&&n.every((t,r)=>rc(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||ET(n.parent,e.parent))}function B_(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function TM(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return B_(n,r,o);return B_(n,r)})}(n,e,t);return new Gl(r,o)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const l=u.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(g=>B_(n,g)),l}}const r=function CM(n){return new Wm(new Ha(n.url),new Ha(n.params),new Ha(n.queryParams),new Ha(n.fragment),new Ha(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(u=>B_(n,u));return new Gl(r,o)}}const DT="ngNavigationCancelingError";function LS(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=$p(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,o=FS(!1,0,e);return o.url=t,o.navigationBehaviorOptions=r,o}function FS(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[DT]=!0,r.cancellationCode=e,t&&(r.url=t),r}function US(n){return VS(n)&&$p(n.url)}function VS(n){return n&&n[DT]}class SM{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new j_,this.attachRef=null}}let j_=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const o=this.getOrCreateContext(t);o.outlet=r,this.contexts.set(t,o)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new SM,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const _E=!1;let BS=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Lt,this.activateEvents=new v.vpe,this.deactivateEvents=new v.vpe,this.attachEvents=new v.vpe,this.detachEvents=new v.vpe,this.parentContexts=(0,v.f3M)(j_),this.location=(0,v.f3M)(v.s_b),this.changeDetector=(0,v.f3M)(v.sBO),this.environmentInjector=(0,v.f3M)(v.lqb)}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:o}=t.name;if(r)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new v.vHH(4012,_E);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new v.vHH(4012,_E);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new v.vHH(4012,_E);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new v.vHH(4013,_E);this._activatedRoute=t;const o=this.location,l=t.snapshot.component,g=this.parentContexts.getOrCreateContext(this.name).children,I=new AM(t,g,o.injector);if(r&&function xM(n){return!!n.resolveComponentFactory}(r)){const b=r.resolveComponentFactory(l);this.activated=o.createComponent(b,o.length,I)}else this.activated=o.createComponent(l,{index:o.length,injector:I,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=v.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[v.TTD]}),n})();class AM{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Wm?this.route:e===j_?this.childContexts:this.parent.get(e,t)}}let bT=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=v.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[v.jDz],decls:1,vars:0,template:function(t,r){1&t&&v._UZ(0,"router-outlet")},dependencies:[BS],encapsulation:2}),n})();function jS(n,e){return n.providers&&!n._injector&&(n._injector=(0,v.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function CT(n){const e=n.children&&n.children.map(CT),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Lt&&(t.component=bT),t}function Wo(n){return n.outlet||Lt}function $S(n,e){const t=n.filter(r=>Wo(r)===e);return t.push(...n.filter(r=>Wo(r)!==e)),t}function $_(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class PM{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),IT(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=Gm(t);e.children.forEach(u=>{const l=u.value.outlet;this.deactivateRoutes(u,o[l],r),delete o[l]}),Ci(o,(u,l)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(o===u)if(o.component){const l=r.getContext(o.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=Gm(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],o);if(r&&r.outlet){const l=r.outlet.detach(),g=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:g})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=Gm(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],o);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=Gm(t);e.children.forEach(u=>{this.activateRoutes(u,o[u.value.outlet],r),this.forwardEvent(new mM(u.value.snapshot))}),e.children.length&&this.forwardEvent(new pM(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(IT(o),o===u)if(o.component){const l=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const l=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const g=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),l.children.onOutletReAttached(g.contexts),l.attachRef=g.componentRef,l.route=g.route.value,l.outlet&&l.outlet.attach(g.componentRef,g.route.value),IT(g.route.value),this.activateChildRoutes(e,null,l.children)}else{const g=$_(o.snapshot),I=g?.get(v._Vd)??null;l.attachRef=null,l.route=o,l.resolver=I,l.injector=g,l.outlet&&l.outlet.activateWith(o,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class HS{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class wE{constructor(e,t){this.component=e,this.route=t}}function kM(n,e,t){const r=n._root;return H_(r,e?e._root:null,t,[r.value])}function qm(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,v.Z0I)(n)?e.get(n):n:r}function H_(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=Gm(e);return n.children.forEach(l=>{(function FM(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,l=e?e.value:null,g=t?t.getContext(n.value.outlet):null;if(l&&u.routeConfig===l.routeConfig){const I=function UM(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!jp(n.url,e.url);case"pathParamsOrQueryParamsChange":return!jp(n.url,e.url)||!rc(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ET(n,e)||!rc(n.queryParams,e.queryParams);default:return!ET(n,e)}}(l,u,u.routeConfig.runGuardsAndResolvers);I?o.canActivateChecks.push(new HS(r)):(u.data=l.data,u._resolvedData=l._resolvedData),H_(n,e,u.component?g?g.children:null:t,r,o),I&&g&&g.outlet&&g.outlet.isActivated&&o.canDeactivateChecks.push(new wE(g.outlet.component,l))}else l&&z_(e,g,o),o.canActivateChecks.push(new HS(r)),H_(n,null,u.component?g?g.children:null:t,r,o)})(l,u[l.value.outlet],t,r.concat([l.value]),o),delete u[l.value.outlet]}),Ci(u,(l,g)=>z_(l,t.getContext(g),o)),o}function z_(n,e,t){const r=Gm(n),o=n.value;Ci(r,(u,l)=>{z_(u,o.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new wE(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}function G_(n){return"function"==typeof n}function ST(n){return n instanceof c||"EmptyError"===n?.name}const IE=Symbol("INITIAL_VALUE");function Km(){return ti(n=>iS(n.map(e=>e.pipe(f(1),vs(IE)))).pipe((0,E.U)(e=>{for(const t of e)if(!0!==t){if(t===IE)return IE;if(!1===t||t instanceof Vh)return t}return!0}),we(e=>e!==IE),f(1)))}function zS(n){return(0,Nx.z)((0,Hi.b)(e=>{if($p(e))throw LS(0,e)}),(0,E.U)(e=>!0===e))}const AT={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function GS(n,e,t,r,o){const u=xT(n,e,t);return u.matched?function tR(n,e,t,r){const o=e.canMatch;return o&&0!==o.length?tt(o.map(l=>{const g=qm(l,n);return Uh(function zM(n){return n&&G_(n.canMatch)}(g)?g.canMatch(e,t):n.runInContext(()=>g(e,t)))})).pipe(Km(),zS()):tt(!0)}(r=jS(e,r),e,t).pipe((0,E.U)(l=>!0===l?u:{...AT})):tt(u)}function xT(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...AT}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const o=(e.matcher||Lx)(t,n,e);if(!o)return{...AT};const u={};Ci(o.posParams,(g,I)=>{u[I]=g.path});const l=o.consumed.length>0?{...u,...o.consumed[o.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:o.consumed,remainingSegments:t.slice(o.consumed.length),parameters:l,positionalParamSegments:o.posParams??{}}}function EE(n,e,t,r){if(t.length>0&&function iR(n,e,t){return t.some(r=>DE(n,e,r)&&Wo(r)!==Lt)}(n,t,r)){const u=new Gt(e,function rR(n,e,t,r){const o={};o[Lt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&Wo(u)!==Lt){const l=new Gt([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,o[Wo(u)]=l}return o}(n,e,r,new Gt(t,n.children)));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:[]}}if(0===t.length&&function sR(n,e,t){return t.some(r=>DE(n,e,r))}(n,t,r)){const u=new Gt(n.segments,function nR(n,e,t,r,o){const u={};for(const l of r)if(DE(n,t,l)&&!o[Wo(l)]){const g=new Gt([],{});g._sourceSegment=n,g._segmentIndexShift=e.length,u[Wo(l)]=g}return{...o,...u}}(n,e,t,r,n.children));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}const o=new Gt(n.segments,n.children);return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:t}}function DE(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function WS(n,e,t,r){return!!(Wo(n)===r||r!==Lt&&DE(e,t,n))&&("**"===n.path||xT(e,n,t).matched)}function qS(n,e,t){return 0===e.length&&!n.children[t]}const bE=!1;class TE{constructor(e){this.segmentGroup=e||null}}class KS{constructor(e){this.urlTree=e}}function W_(n){return N_(new TE(n))}function ZS(n){return N_(new KS(n))}function oR(n){return N_(new v.vHH(4e3,bE&&`Only absolute redirects can have named outlets. redirectTo: '${n}'`))}class cR{constructor(e,t,r,o,u){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=u,this.allowRedirects=!0}apply(){const e=EE(this.urlTree.root,[],[],this.config).segmentGroup,t=new Gt(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Lt).pipe((0,E.U)(u=>this.createUrlTree(gE(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Fh(u=>{if(u instanceof KS)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof TE?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Lt).pipe((0,E.U)(o=>this.createUrlTree(gE(o),e.queryParams,e.fragment))).pipe(Fh(o=>{throw o instanceof TE?this.noMatchError(o):o}))}noMatchError(e){return new v.vHH(4002,bE&&`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const o=hT(e);return new Vh(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,E.U)(u=>new Gt([],u))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const u of Object.keys(r.children))"primary"===u?o.unshift(u):o.push(u);return(0,rn.D)(o).pipe(Bp(u=>{const l=r.children[u],g=$S(t,u);return this.expandSegmentGroup(e,g,l,u).pipe((0,E.U)(I=>({segment:I,outlet:u})))}),x((u,l)=>(u[l.outlet]=l.segment,u),{}),cS())}expandSegment(e,t,r,o,u,l){return(0,rn.D)(r).pipe(Bp(g=>this.expandSegmentAgainstRoute(e,t,r,g,o,u,l).pipe(Fh(b=>{if(b instanceof TE)return tt(null);throw b}))),C(g=>!!g),Fh((g,I)=>{if(ST(g))return qS(t,o,u)?tt(new Gt([],{})):W_(t);throw g}))}expandSegmentAgainstRoute(e,t,r,o,u,l,g){return WS(o,t,u,l)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,u,l):g&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,l):W_(t):W_(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,l){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?ZS(u):this.lineralizeSegments(r,u).pipe((0,cs.z)(l=>{const g=new Gt(l,{});return this.expandSegment(e,g,t,l,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,l){const{matched:g,consumedSegments:I,remainingSegments:b,positionalParamSegments:A}=xT(t,o,u);if(!g)return W_(t);const N=this.applyRedirectCommands(I,o.redirectTo,A);return o.redirectTo.startsWith("/")?ZS(N):this.lineralizeSegments(o,N).pipe((0,cs.z)(W=>this.expandSegment(e,t,r,W.concat(b),l,!1)))}matchSegmentAgainstRoute(e,t,r,o,u){return"**"===r.path?(e=jS(r,e),r.loadChildren?(r._loadedRoutes?tt({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,E.U)(g=>(r._loadedRoutes=g.routes,r._loadedInjector=g.injector,new Gt(o,{})))):tt(new Gt(o,{}))):GS(t,r,o,e).pipe(ti(({matched:l,consumedSegments:g,remainingSegments:I})=>l?this.getChildConfig(e=r._injector??e,r,o).pipe((0,cs.z)(A=>{const N=A.injector??e,W=A.routes,{segmentGroup:X,slicedSegments:de}=EE(t,g,I,W),Fe=new Gt(X.segments,X.children);if(0===de.length&&Fe.hasChildren())return this.expandChildren(N,W,Fe).pipe((0,E.U)(Ft=>new Gt(g,Ft)));if(0===W.length&&0===de.length)return tt(new Gt(g,{}));const He=Wo(r)===u;return this.expandSegment(N,Fe,W,de,He?Lt:u,!0).pipe((0,E.U)(Mt=>new Gt(g.concat(Mt.segments),Mt.children)))})):W_(t)))}getChildConfig(e,t,r){return t.children?tt({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?tt({routes:t._loadedRoutes,injector:t._loadedInjector}):function eR(n,e,t,r){const o=e.canLoad;return void 0===o||0===o.length?tt(!0):tt(o.map(l=>{const g=qm(l,n);return Uh(function BM(n){return n&&G_(n.canLoad)}(g)?g.canLoad(e,t):n.runInContext(()=>g(e,t)))})).pipe(Km(),zS())}(e,t,r).pipe((0,cs.z)(o=>o?this.configLoader.loadChildren(e,t).pipe((0,Hi.b)(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function aR(n){return N_(FS(bE&&`Cannot load children because the guard of the route "path: '${n.path}'" returned false`,3))}(t))):tt({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return tt(r);if(o.numberOfChildren>1||!o.children[Lt])return oR(e.redirectTo);o=o.children[Lt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,o){const u=this.createSegmentGroup(e,t.root,r,o);return new Vh(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Ci(e,(o,u)=>{if("string"==typeof o&&o.startsWith(":")){const g=o.substring(1);r[u]=t[g]}else r[u]=o}),r}createSegmentGroup(e,t,r,o){const u=this.createSegments(e,t.segments,r,o);let l={};return Ci(t.children,(g,I)=>{l[I]=this.createSegmentGroup(e,g,r,o)}),new Gt(u,l)}createSegments(e,t,r,o){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,o):this.findOrReturn(u,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new v.vHH(4001,bE&&`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}class dR{}class pR{constructor(e,t,r,o,u,l,g){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=o,this.url=u,this.paramsInheritanceStrategy=l,this.urlSerializer=g}recognize(){const e=EE(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Lt).pipe((0,E.U)(t=>{if(null===t)return null;const r=new vE([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Lt,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new Gl(r,t),u=new PS(this.url,o);return this.inheritParamsAndData(u._root),u}))}inheritParamsAndData(e){const t=e.value,r=OS(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,o)}processChildren(e,t,r){return(0,rn.D)(Object.keys(r.children)).pipe(Bp(o=>{const u=r.children[o],l=$S(t,o);return this.processSegmentGroup(e,l,u,o)}),x((o,u)=>o&&u?(o.push(...u),o):null),function Ox(n,e=!1){return(0,Vn.e)((t,r)=>{let o=0;t.subscribe((0,Xn.x)(r,u=>{const l=n(u,o++);(l||e)&&r.next(u),!l&&r.complete()}))})}(o=>null!==o),y(null),cS(),(0,E.U)(o=>{if(null===o)return null;const u=QS(o);return function gR(n){n.sort((e,t)=>e.value.outlet===Lt?-1:t.value.outlet===Lt?1:e.value.outlet.localeCompare(t.value.outlet))}(u),u}))}processSegment(e,t,r,o,u){return(0,rn.D)(t).pipe(Bp(l=>this.processSegmentAgainstRoute(l._injector??e,l,r,o,u)),C(l=>!!l),Fh(l=>{if(ST(l))return qS(r,o,u)?tt([]):tt(null);throw l}))}processSegmentAgainstRoute(e,t,r,o,u){if(t.redirectTo||!WS(t,r,o,u))return tt(null);let l;if("**"===t.path){const g=o.length>0?hS(o).parameters:{},I=XS(r)+o.length;l=tt({snapshot:new vE(o,g,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,eA(t),Wo(t),t.component??t._loadedComponent??null,t,JS(r),I,tA(t)),consumedSegments:[],remainingSegments:[]})}else l=GS(r,t,o,e).pipe((0,E.U)(({matched:g,consumedSegments:I,remainingSegments:b,parameters:A})=>{if(!g)return null;const N=XS(r)+I.length;return{snapshot:new vE(I,A,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,eA(t),Wo(t),t.component??t._loadedComponent??null,t,JS(r),N,tA(t)),consumedSegments:I,remainingSegments:b}}));return l.pipe(ti(g=>{if(null===g)return tt(null);const{snapshot:I,consumedSegments:b,remainingSegments:A}=g;e=t._injector??e;const N=t._loadedInjector??e,W=function mR(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:X,slicedSegments:de}=EE(r,b,A,W.filter(He=>void 0===He.redirectTo));if(0===de.length&&X.hasChildren())return this.processChildren(N,W,X).pipe((0,E.U)(He=>null===He?null:[new Gl(I,He)]));if(0===W.length&&0===de.length)return tt([new Gl(I,[])]);const Fe=Wo(t)===u;return this.processSegment(N,W,X,de,Fe?Lt:u).pipe((0,E.U)(He=>null===He?null:[new Gl(I,He)]))}))}}function yR(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function QS(n){const e=[],t=new Set;for(const r of n){if(!yR(r)){e.push(r);continue}const o=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=QS(r.children);e.push(new Gl(r.value,o))}return e.filter(r=>!t.has(r))}function JS(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function XS(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function eA(n){return n.data||{}}function tA(n){return n.resolve||{}}function nA(n){return"string"==typeof n.title||null===n.title}function MT(n){return ti(e=>{const t=n(e);return t?(0,rn.D)(t).pipe((0,E.U)(()=>e)):tt(e)})}const Zm=new v.OlP("ROUTES");let RT=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,v.f3M)(v.Sil)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return tt(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Uh(t.loadComponent()).pipe((0,E.U)(iA),(0,Hi.b)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),cT(()=>{this.componentLoaders.delete(t)})),o=new uS(r,()=>new nc.x).pipe(aT());return this.componentLoaders.set(t,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return tt({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,E.U)(g=>{this.onLoadEndListener&&this.onLoadEndListener(r);let I,b,A=!1;Array.isArray(g)?b=g:(I=g.create(t).injector,b=dS(I.get(Zm,[],v.XFs.Self|v.XFs.Optional)));return{routes:b.map(CT),injector:I}}),cT(()=>{this.childrenLoaders.delete(r)})),l=new uS(u,()=>new nc.x).pipe(aT());return this.childrenLoaders.set(r,l),l}loadModuleFactoryOrRoutes(t){return Uh(t()).pipe((0,E.U)(iA),(0,cs.z)(r=>r instanceof v.YKP||Array.isArray(r)?tt(r):(0,rn.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function iA(n){return function TR(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let SE=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new nc.x,this.configLoader=(0,v.f3M)(RT),this.environmentInjector=(0,v.f3M)(v.lqb),this.urlSerializer=(0,v.f3M)(k_),this.rootContexts=(0,v.f3M)(j_),this.navigationId=0,this.afterPreactivation=()=>tt(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=o=>this.events.next(new hM(o)),this.configLoader.onLoadStartListener=o=>this.events.next(new dM(o))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t){return this.transitions=new Ha({id:0,targetPageId:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:V_,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(we(r=>0!==r.id),(0,E.U)(r=>({...r,extractedUrl:t.urlHandlingStrategy.extract(r.rawUrl)})),ti(r=>{let o=!1,u=!1;return tt(r).pipe((0,Hi.b)(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),ti(l=>{const g=t.browserUrlTree.toString(),I=!t.navigated||l.extractedUrl.toString()!==g||g!==t.currentUrlTree.toString();if(!I&&"reload"!==(l.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const A="";return this.events.next(new yE(l.id,t.serializeUrl(r.rawUrl),A,0)),t.rawUrlTree=l.rawUrl,l.resolve(null),d.E}if(t.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return sA(l.source)&&(t.browserUrlTree=l.extractedUrl),tt(l).pipe(ti(A=>{const N=this.transitions?.getValue();return this.events.next(new mT(A.id,this.urlSerializer.serialize(A.extractedUrl),A.source,A.restoredState)),N!==this.transitions?.getValue()?d.E:Promise.resolve(A)}),function lR(n,e,t,r){return ti(o=>function uR(n,e,t,r,o){return new cR(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,E.U)(u=>({...o,urlAfterRedirects:u}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,t.config),(0,Hi.b)(A=>{this.currentNavigation={...this.currentNavigation,finalUrl:A.urlAfterRedirects},r.urlAfterRedirects=A.urlAfterRedirects}),function _R(n,e,t,r,o){return(0,cs.z)(u=>function fR(n,e,t,r,o,u,l="emptyOnly"){return new pR(n,e,t,r,o,l,u).recognize().pipe(ti(g=>null===g?function hR(n){return new oi.y(e=>e.error(n))}(new dR):tt(g)))}(n,e,t,u.urlAfterRedirects,r.serialize(u.urlAfterRedirects),r,o).pipe((0,E.U)(l=>({...u,targetSnapshot:l}))))}(this.environmentInjector,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),(0,Hi.b)(A=>{if(r.targetSnapshot=A.targetSnapshot,"eager"===t.urlUpdateStrategy){if(!A.extras.skipLocationChange){const W=t.urlHandlingStrategy.merge(A.urlAfterRedirects,A.rawUrl);t.setBrowserUrl(W,A)}t.browserUrlTree=A.urlAfterRedirects}const N=new oM(A.id,this.urlSerializer.serialize(A.extractedUrl),this.urlSerializer.serialize(A.urlAfterRedirects),A.targetSnapshot);this.events.next(N)}));if(I&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:A,extractedUrl:N,source:W,restoredState:X,extras:de}=l,Fe=new mT(A,this.urlSerializer.serialize(N),W,X);this.events.next(Fe);const He=NS(N,this.rootComponentType).snapshot;return tt(r={...l,targetSnapshot:He,urlAfterRedirects:N,extras:{...de,skipLocationChange:!1,replaceUrl:!1}})}{const A="";return this.events.next(new yE(l.id,t.serializeUrl(r.extractedUrl),A,1)),t.rawUrlTree=l.rawUrl,l.resolve(null),d.E}}),(0,Hi.b)(l=>{const g=new aM(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(g)}),(0,E.U)(l=>r={...l,guards:kM(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),function WM(n,e){return(0,cs.z)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:u,canDeactivateChecks:l}}=t;return 0===l.length&&0===u.length?tt({...t,guardsResult:!0}):function qM(n,e,t,r){return(0,rn.D)(n).pipe((0,cs.z)(o=>function XM(n,e,t,r,o){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?tt(u.map(g=>{const I=$_(e)??o,b=qm(g,I);return Uh(function HM(n){return n&&G_(n.canDeactivate)}(b)?b.canDeactivate(n,e,t,r):I.runInContext(()=>b(n,e,t,r))).pipe(C())})).pipe(Km()):tt(!0)}(o.component,o.route,t,e,r)),C(o=>!0!==o,!0))}(l,r,o,n).pipe((0,cs.z)(g=>g&&function VM(n){return"boolean"==typeof n}(g)?function KM(n,e,t,r){return(0,rn.D)(e).pipe(Bp(o=>wu(function YM(n,e){return null!==n&&e&&e(new fM(n)),tt(!0)}(o.route.parent,r),function ZM(n,e){return null!==n&&e&&e(new gM(n)),tt(!0)}(o.route,r),function JM(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(l=>function LM(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>oS(()=>tt(l.guards.map(I=>{const b=$_(l.node)??t,A=qm(I,b);return Uh(function $M(n){return n&&G_(n.canActivateChild)}(A)?A.canActivateChild(r,n):b.runInContext(()=>A(r,n))).pipe(C())})).pipe(Km())));return tt(u).pipe(Km())}(n,o.path,t),function QM(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return tt(!0);const o=r.map(u=>oS(()=>{const l=$_(e)??t,g=qm(u,l);return Uh(function jM(n){return n&&G_(n.canActivate)}(g)?g.canActivate(e,n):l.runInContext(()=>g(e,n))).pipe(C())}));return tt(o).pipe(Km())}(n,o.route,t))),C(o=>!0!==o,!0))}(r,u,n,e):tt(g)),(0,E.U)(g=>({...t,guardsResult:g})))})}(this.environmentInjector,l=>this.events.next(l)),(0,Hi.b)(l=>{if(r.guardsResult=l.guardsResult,$p(l.guardsResult))throw LS(0,l.guardsResult);const g=new uM(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(g)}),we(l=>!!l.guardsResult||(t.restoreHistory(l),this.cancelNavigationTransition(l,"",3),!1)),MT(l=>{if(l.guards.canActivateChecks.length)return tt(l).pipe((0,Hi.b)(g=>{const I=new cM(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(I)}),ti(g=>{let I=!1;return tt(g).pipe(function wR(n,e){return(0,cs.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return tt(t);let u=0;return(0,rn.D)(o).pipe(Bp(l=>function IR(n,e,t,r){const o=n.routeConfig,u=n._resolve;return void 0!==o?.title&&!nA(o)&&(u[O_]=o.title),function ER(n,e,t,r){const o=function DR(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===o.length)return tt({});const u={};return(0,rn.D)(o).pipe((0,cs.z)(l=>function bR(n,e,t,r){const o=$_(e)??r,u=qm(n,o);return Uh(u.resolve?u.resolve(e,t):o.runInContext(()=>u(e,t)))}(n[l],e,t,r).pipe(C(),(0,Hi.b)(g=>{u[l]=g}))),uT(1),function Px(n){return(0,E.U)(()=>n)}(u),Fh(l=>ST(l)?d.E:N_(l)))}(u,n,e,r).pipe((0,E.U)(l=>(n._resolvedData=l,n.data=OS(n,t).resolve,o&&nA(o)&&(n.data[O_]=o.title),null)))}(l.route,r,n,e)),(0,Hi.b)(()=>u++),uT(1),(0,cs.z)(l=>u===o.length?tt(t):d.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),(0,Hi.b)({next:()=>I=!0,complete:()=>{I||(t.restoreHistory(g),this.cancelNavigationTransition(g,"",2))}}))}),(0,Hi.b)(g=>{const I=new lM(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(I)}))}),MT(l=>{const g=I=>{const b=[];I.routeConfig?.loadComponent&&!I.routeConfig._loadedComponent&&b.push(this.configLoader.loadComponent(I.routeConfig).pipe((0,Hi.b)(A=>{I.component=A}),(0,E.U)(()=>{})));for(const A of I.children)b.push(...g(A));return b};return iS(g(l.targetSnapshot.root)).pipe(y(),f(1))}),MT(()=>this.afterPreactivation()),(0,E.U)(l=>{const g=function bM(n,e,t){const r=B_(n,e._root,t?t._root:void 0);return new RS(r,e)}(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return r={...l,targetRouterState:g}}),(0,Hi.b)(l=>{t.currentUrlTree=l.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(l.urlAfterRedirects,l.rawUrl),t.routerState=l.targetRouterState,"deferred"===t.urlUpdateStrategy&&(l.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,l),t.browserUrlTree=l.urlAfterRedirects)}),((n,e,t)=>(0,E.U)(r=>(new PM(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l)),f(1),(0,Hi.b)({next:l=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new Hp(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{o=!0}}),cT(()=>{o||u||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),Fh(l=>{if(u=!0,VS(l)){US(l)||(t.navigated=!0,t.restoreHistory(r,!0));const g=new mE(r.id,this.urlSerializer.serialize(r.extractedUrl),l.message,l.cancellationCode);if(this.events.next(g),US(l)){const I=t.urlHandlingStrategy.merge(l.url,t.rawUrlTree),b={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||sA(r.source)};t.scheduleNavigation(I,V_,null,b,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{t.restoreHistory(r,!0);const g=new yT(r.id,this.urlSerializer.serialize(r.extractedUrl),l,r.targetSnapshot??void 0);this.events.next(g);try{r.resolve(t.errorHandler(l))}catch(I){r.reject(I)}}return d.E}))}))}cancelNavigationTransition(t,r,o){const u=new mE(t.id,this.urlSerializer.serialize(t.extractedUrl),r,o);this.events.next(u),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function sA(n){return n!==V_}let oA=(()=>{class n{buildTitle(t){let r,o=t.root;for(;void 0!==o;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(u=>u.outlet===Lt);return r}getResolvedTitleForRoute(t){return t.data[O_]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=v.Yz7({token:n,factory:function(){return(0,v.f3M)(CR)},providedIn:"root"}),n})(),CR=(()=>{class n extends oA{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(Xh))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),SR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=v.Yz7({token:n,factory:function(){return(0,v.f3M)(xR)},providedIn:"root"}),n})();class AR{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let xR=(()=>{class n extends AR{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=v.n5z(n)))(r||n)}}(),n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const AE=new v.OlP("",{providedIn:"root",factory:()=>({})});let RR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=v.Yz7({token:n,factory:function(){return(0,v.f3M)(NR)},providedIn:"root"}),n})(),NR=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function OR(n){throw n}function PR(n,e,t){return e.parse("/")}const kR={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},LR={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let eo=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,v.f3M)(v.c2e),this.isNgZoneEnabled=!1,this.options=(0,v.f3M)(AE,{optional:!0})||{},this.errorHandler=this.options.errorHandler||OR,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||PR,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,v.f3M)(RR),this.routeReuseStrategy=(0,v.f3M)(SR),this.urlCreationStrategy=(0,v.f3M)(IM),this.titleStrategy=(0,v.f3M)(oA),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=dS((0,v.f3M)(Zm,{optional:!0})??[]),this.navigationTransitions=(0,v.f3M)(SE),this.urlSerializer=(0,v.f3M)(k_),this.location=(0,v.f3M)(Ne),this.isNgZoneEnabled=(0,v.f3M)(v.R0b)instanceof v.R0b&&v.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Vh,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=NS(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId??0},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),V_,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,o){const u={replaceUrl:!0},l=o?.navigationId?o:null;if(o){const I={...o};delete I.navigationId,delete I.\u0275routerPageId,0!==Object.keys(I).length&&(u.state=I)}const g=this.parseUrl(t);this.scheduleNavigation(g,r,l,u)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(t){this.config=t.map(CT),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:u,fragment:l,queryParamsHandling:g,preserveFragment:I}=r,b=I?this.currentUrlTree.fragment:l;let A=null;switch(g){case"merge":A={...this.currentUrlTree.queryParams,...u};break;case"preserve":A=this.currentUrlTree.queryParams;break;default:A=u||null}return null!==A&&(A=this.removeEmptyProps(A)),this.urlCreationStrategy.createUrlTree(o,this.routerState,this.currentUrlTree,t,A,b??null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=$p(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(u,V_,null,r)}navigate(t,r={skipLocationChange:!1}){return function FR(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new v.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?{...kR}:!1===r?{...LR}:r,$p(t))return pS(this.currentUrlTree,t,o);const u=this.parseUrl(t);return pS(this.currentUrlTree,u,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const u=t[o];return null!=u&&(r[o]=u),r},{})}scheduleNavigation(t,r,o,u,l){if(this.disposed)return Promise.resolve(!1);let g,I,b,A;return l?(g=l.resolve,I=l.reject,b=l.promise):b=new Promise((N,W)=>{g=N,I=W}),A="computed"===this.canceledNavigationResolution?o&&o.\u0275routerPageId?o.\u0275routerPageId:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:A,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:u,resolve:g,reject:I,promise:b,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),b.catch(N=>Promise.reject(N))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl){const l={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(o,"",l)}else{const u={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.go(o,"",u)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const u=this.currentPageId-(this.browserPageId??this.currentPageId);0!==u?this.location.historyGo(u):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===u&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class aA{}let BR=(()=>{class n{constructor(t,r,o,u,l){this.router=t,this.injector=o,this.preloadingStrategy=u,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(we(t=>t instanceof Hp),Bp(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const u of r){u.providers&&!u._injector&&(u._injector=(0,v.MMx)(u.providers,t,`Route: ${u.path}`));const l=u._injector??t,g=u._loadedInjector??l;(u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent)&&o.push(this.preloadConfig(l,u)),(u.children||u._loadedRoutes)&&o.push(this.processRoutes(g,u.children??u._loadedRoutes))}return(0,rn.D)(o).pipe((0,Wr.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let o;o=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):tt(null);const u=o.pipe((0,cs.z)(l=>null===l?tt(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,rn.D)([u,l]).pipe((0,Wr.J)())}return u})}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(eo),v.LFG(v.Sil),v.LFG(v.lqb),v.LFG(aA),v.LFG(RT))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const PT=new v.OlP("");let uA=(()=>{class n{constructor(t,r,o,u,l={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=o,this.zone=u,this.options=l,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},l.scrollPositionRestoration=l.scrollPositionRestoration||"disabled",l.anchorScrolling=l.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof mT?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Hp&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof xS&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new xS(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){v.$Z()},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})();var to=(()=>((to=to||{})[to.COMPLETE=0]="COMPLETE",to[to.FAILED=1]="FAILED",to[to.REDIRECTING=2]="REDIRECTING",to))();const Ym=!1;function Bh(n,e){return{\u0275kind:n,\u0275providers:e}}const kT=new v.OlP("",{providedIn:"root",factory:()=>!1});function lA(){const n=(0,v.f3M)(v.zs3);return e=>{const t=n.get(v.z2F);if(e!==t.components[0])return;const r=n.get(eo),o=n.get(dA);1===n.get(LT)&&r.initialNavigation(),n.get(hA,null,v.XFs.Optional)?.setUpPreloading(),n.get(PT,null,v.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),o.closed||(o.next(),o.complete(),o.unsubscribe())}}const dA=new v.OlP(Ym?"bootstrap done indicator":"",{factory:()=>new nc.x}),LT=new v.OlP(Ym?"initial navigation":"",{providedIn:"root",factory:()=>1});function GR(){let n=[];return n=Ym?[{provide:v.Xts,multi:!0,useFactory:()=>{const e=(0,v.f3M)(eo);return()=>e.events.subscribe(t=>{console.group?.(`Router Event: ${t.constructor.name}`),console.log(function yM(n){if(!("type"in n))return`Unknown Router Event: ${n.constructor.name}`;switch(n.type){case 14:return`ActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state}, shouldActivate: ${n.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 2:return`NavigationCancel(id: ${n.id}, url: '${n.url}')`;case 16:return`NavigationSkipped(id: ${n.id}, url: '${n.url}')`;case 1:return`NavigationEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${n.id}, url: '${n.url}', error: ${n.error})`;case 0:return`NavigationStart(id: ${n.id}, url: '${n.url}')`;case 6:return`ResolveEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 5:return`ResolveStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 10:return`RouteConfigLoadEnd(path: ${n.route.path})`;case 9:return`RouteConfigLoadStart(path: ${n.route.path})`;case 4:return`RoutesRecognized(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 15:return`Scroll(anchor: '${n.anchor}', position: '${n.position?`${n.position[0]}, ${n.position[1]}`:null}')`}}(t)),console.log(t),console.groupEnd?.()})}}]:[],Bh(1,n)}const hA=new v.OlP(Ym?"router preloader":"");function WR(n){return Bh(0,[{provide:hA,useExisting:BR},{provide:aA,useExisting:n}])}const q_=!1,fA=new v.OlP(q_?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),qR=[Ne,{provide:k_,useClass:lT},eo,j_,{provide:Wm,useFactory:function cA(n){return n.routerState.root},deps:[eo]},RT,q_?{provide:kT,useValue:!0}:[]];function KR(){return new v.PXZ("Router",eo)}let pA=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[qR,q_&&r?.enableTracing?GR().\u0275providers:[],{provide:Zm,multi:!0,useValue:t},{provide:fA,useFactory:JR,deps:[[eo,new v.FiY,new v.tp0]]},{provide:AE,useValue:r||{}},r?.useHash?{provide:nt,useClass:De}:{provide:nt,useClass:Ce},{provide:PT,useFactory:()=>{const n=(0,v.f3M)(po),e=(0,v.f3M)(v.R0b),t=(0,v.f3M)(AE),r=(0,v.f3M)(SE),o=(0,v.f3M)(k_);return t.scrollOffset&&n.setOffset(t.scrollOffset),new uA(o,r,n,e,t)}},r?.preloadingStrategy?WR(r.preloadingStrategy).\u0275providers:[],{provide:v.PXZ,multi:!0,useFactory:KR},r?.initialNavigation?XR(r):[],[{provide:gA,useFactory:lA},{provide:v.tb,multi:!0,useExisting:gA}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Zm,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(fA,8))},n.\u0275mod=v.oAB({type:n}),n.\u0275inj=v.cJS({imports:[bT]}),n})();function JR(n){if(q_&&n)throw new v.vHH(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function XR(n){return["disabled"===n.initialNavigation?Bh(3,[{provide:v.ip1,multi:!0,useFactory:()=>{const e=(0,v.f3M)(eo);return()=>{e.setUpLocationChangeListener()}}},{provide:LT,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Bh(2,[{provide:LT,useValue:0},{provide:v.ip1,multi:!0,deps:[v.zs3],useFactory:e=>{const t=e.get(he,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const o=e.get(eo),u=e.get(dA);(function jR(n,e){n.events.pipe(we(t=>t instanceof Hp||t instanceof mE||t instanceof yT||t instanceof yE),(0,E.U)(t=>t instanceof Hp||t instanceof yE?to.COMPLETE:t instanceof mE&&(0===t.code||1===t.code)?to.REDIRECTING:to.FAILED),we(t=>t!==to.REDIRECTING),f(1)).subscribe(()=>{e()})})(o,()=>{r(!0)}),e.get(SE).afterPreactivation=()=>(r(!0),u.closed?tt(void 0):u),o.initialNavigation()}))}}]).\u0275providers:[]]}const gA=new v.OlP(q_?"Router Initializer":""),tN=[];let nN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=v.oAB({type:n}),n.\u0275inj=v.cJS({imports:[pA.forRoot(tN),pA]}),n})(),rN=(()=>{class n{constructor(t){this.firestore=t,this.firestoreCollection=t.collection("todos")}addTodo(t){this.firestoreCollection.add({title:t,isDone:!1})}updateTodoStatus(t,r){this.firestoreCollection.doc(t).update({isDone:r})}deleteTodo(t){this.firestoreCollection.doc(t).delete()}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(rS))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function iN(n,e){if(1&n){const t=v.EpF();v.TgZ(0,"li",12)(1,"span")(2,"i",13),v.NdJ("click",function(){const u=v.CHM(t).$implicit,l=v.oxw();return v.KtG(l.onStatusChange(u.id,!u.isDone))}),v.qZA(),v._uU(3),v.TgZ(4,"span",14),v.NdJ("click",function(){const u=v.CHM(t).$implicit,l=v.oxw();return v.KtG(l.onDelete(u.id))}),v._UZ(5,"i",15),v.qZA()()()}if(2&n){const t=e.$implicit;v.xp6(2),v.Q6J("ngClass",t.isDone?"fa-solid fa-circle-check":"fa-regular fa-circle"),v.xp6(1),v.hij(" ",t.title," ")}}let sN=(()=>{class n{constructor(t){this.todoService=t,this.todos=[]}ngOnInit(){this.todoService.firestoreCollection.valueChanges({idField:"id"}).subscribe(t=>{this.todos=t.sort((r,o)=>r.isDone-o.isDone)})}onClick(t){t.value&&(this.todoService.addTodo(t.value),t.value="")}onStatusChange(t,r){this.todoService.updateTodoStatus(t,r)}onDelete(t){this.todoService.deleteTodo(t)}}return n.\u0275fac=function(t){return new(t||n)(v.Y36(rN))},n.\u0275cmp=v.Xpm({type:n,selectors:[["app-todo"]],decls:13,vars:1,consts:[[1,"card","shadow-lg","mt-5"],[1,"card-header","text-center","py-4","border-0"],[1,"display-6","fw-bold"],[1,"card-body","p-4"],[1,"list-group"],[1,"list-group-item","mb-2","border","py-0","rounded-3"],[1,"input-group"],["type","text","placeholder","Title goes here",1,"form-control","border-0","py-3","shadow-none"],["titleInput",""],[1,"btn","text-success","border-0",3,"click"],[1,"fa-solid","fa-circle-plus","fa-xl"],["class","list-group-item mb-2 border py-3 rounded-3",4,"ngFor","ngForOf"],[1,"list-group-item","mb-2","border","py-3","rounded-3"],[1,"text-success",3,"ngClass","click"],[1,"float-end","text-secondary",3,"click"],[1,"fa-solid","fa-trash-can"]],template:function(t,r){if(1&t){const o=v.EpF();v.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),v._uU(3,"To Do List"),v.qZA()(),v.TgZ(4,"div",3)(5,"ul",4)(6,"li",5)(7,"div",6),v._UZ(8,"input",7,8),v.TgZ(10,"button",9),v.NdJ("click",function(){v.CHM(o);const l=v.MAs(9);return v.KtG(r.onClick(l))}),v._UZ(11,"i",10),v.qZA()()(),v.YNc(12,iN,6,2,"li",11),v.qZA()()()}2&t&&(v.xp6(12),v.Q6J("ngForOf",r.todos))},dependencies:[Tt,pi]}),n})(),oN=(()=>{class n{constructor(){this.title="floyer-todo"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=v.Xpm({type:n,selectors:[["app-root"]],decls:4,vars:0,consts:[[1,"container"],[1,"row","justify-content-center"],[1,"col-md-5"]],template:function(t,r){1&t&&(v.TgZ(0,"div",0)(1,"div",1)(2,"div",2),v._UZ(3,"app-todo"),v.qZA()()())},dependencies:[sN]}),n})();const mA_firebaseConfig={apiKey:"AIzaSyCCylE3IXqITti8KYTwsjDgGpG05HxhFgI",authDomain:"floyer-todo.firebaseapp.com",projectId:"floyer-todo",storageBucket:"floyer-todo.appspot.com",messagingSenderId:"336899130430",appId:"1:336899130430:web:25dee600f41b032dc47d6f"};let aN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=v.oAB({type:n,bootstrap:[oN]}),n.\u0275inj=v.cJS({imports:[pa,_r.hO.initializeApp(mA_firebaseConfig),_x,nN]}),n})();hd().bootstrapModule(aN).catch(n=>console.error(n))},5867:(ot,be,P)=>{P.d(be,{C6:()=>v.getApps,Mq:()=>v.getApp});var v=P(9681);(0,v.registerVersion)("firebase","9.9.1","app")},127:(ot,be,P)=>{P.d(be,{Z:()=>v.Z});var v=P(3942);v.Z.registerVersion("firebase","9.9.1","app-compat")},1451:(ot,be,P)=>{P.r(be);var v=P(5861),Q=P(3942),O=P(2090),oe=P(9681),te=P(7582),re=P(1877),ge=P(4859);const he={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},K_EMAIL_SIGNIN="EMAIL_SIGNIN",K_PASSWORD_RESET="PASSWORD_RESET",K_RECOVER_EMAIL="RECOVER_EMAIL",K_REVERT_SECOND_FACTOR_ADDITION="REVERT_SECOND_FACTOR_ADDITION",K_VERIFY_AND_CHANGE_EMAIL="VERIFY_AND_CHANGE_EMAIL",K_VERIFY_EMAIL="VERIFY_EMAIL";const $e=function Be(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},nt=function Ee(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},pe=new O.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),De=new re.Yd("@firebase/auth");function Ne(m,...h){De.logLevel<=re.in.ERROR&&De.error(`Auth (${oe.SDK_VERSION}): ${m}`,...h)}function Ie(m,...h){throw Me(m,...h)}function _e(m,...h){return Me(m,...h)}function Se(m,h,p){const _=Object.assign(Object.assign({},nt()),{[h]:p});return new O.LL("auth","Firebase",_).create(h,{appName:m.name})}function Ue(m,h,p){if(!(h instanceof p))throw p.name!==h.constructor.name&&Ie(m,"argument-error"),Se(m,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Me(m,...h){if("string"!=typeof m){const p=h[0],_=[...h.slice(1)];return _[0]&&(_[0].appName=m.name),m._errorFactory.create(p,..._)}return pe.create(m,...h)}function V(m,h,...p){if(!m)throw Me(h,...p)}function ve(m){const h="INTERNAL ASSERTION FAILED: "+m;throw Ne(h),new Error(h)}function Ve(m,h){m||ve(h)}const We=new Map;function it(m){Ve(m instanceof Function,"Expected a class definition");let h=We.get(m);return h?(Ve(h instanceof m,"Instance stored in cache mismatched with class"),h):(h=new m,We.set(m,h),h)}function Zn(){var m;return typeof self<"u"&&(null===(m=self.location)||void 0===m?void 0:m.href)||""}function Pn(){return"http:"===Si()||"https:"===Si()}function Si(){var m;return typeof self<"u"&&(null===(m=self.location)||void 0===m?void 0:m.protocol)||null}class ue{constructor(h,p){this.shortDelay=h,this.longDelay=p,Ve(p>h,"Short delay should be less than long delay!"),this.isMobile=(0,O.uI)()||(0,O.b$)()}get(){return function ne(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Pn()||(0,O.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ee(m,h){Ve(m.emulator,"Emulator should always be set here");const{url:p}=m.emulator;return h?`${p}${h.startsWith("/")?h.slice(1):h}`:p}class ke{static initialize(h,p,_){this.fetchImpl=h,p&&(this.headersImpl=p),_&&(this.responseImpl=_)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void ve("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void ve("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void ve("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Oe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},ct=new ue(3e4,6e4);function ze(m,h){return m.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:m.tenantId}):h}function Pt(m,h,p,_){return ft.apply(this,arguments)}function ft(){return(ft=(0,v.Z)(function*(m,h,p,_,S={}){return kt(m,S,(0,v.Z)(function*(){let R={},z={};_&&("GET"===h?z=_:R={body:JSON.stringify(_)});const se=(0,O.xO)(Object.assign({key:m.config.apiKey},z)).slice(1),Pe=yield m._getAdditionalHeaders();return Pe["Content-Type"]="application/json",m.languageCode&&(Pe["X-Firebase-Locale"]=m.languageCode),ke.fetch()(Yn(m,m.config.apiHost,p,se),Object.assign({method:h,headers:Pe,referrerPolicy:"no-referrer"},R))}))})).apply(this,arguments)}function kt(m,h,p){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,v.Z)(function*(m,h,p){m._canInitEmulator=!1;const _=Object.assign(Object.assign({},Oe),h);try{const S=new fn(m),R=yield Promise.race([p(),S.promise]);S.clearNetworkTimeout();const z=yield R.json();if("needConfirmation"in z)throw Sn(m,"account-exists-with-different-credential",z);if(R.ok&&!("errorMessage"in z))return z;{const se=R.ok?z.errorMessage:z.error.message,[Pe,et]=se.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Pe)throw Sn(m,"credential-already-in-use",z);if("EMAIL_EXISTS"===Pe)throw Sn(m,"email-already-in-use",z);if("USER_DISABLED"===Pe)throw Sn(m,"user-disabled",z);const wt=_[Pe]||Pe.toLowerCase().replace(/[_\s]+/g,"-");if(et)throw Se(m,wt,et);Ie(m,wt)}}catch(S){if(S instanceof O.ZR)throw S;Ie(m,"network-request-failed")}})).apply(this,arguments)}function $t(m,h,p,_){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,v.Z)(function*(m,h,p,_,S={}){const R=yield Pt(m,h,p,_,S);return"mfaPendingCredential"in R&&Ie(m,"multi-factor-auth-required",{_serverResponse:R}),R})).apply(this,arguments)}function Yn(m,h,p,_){const S=`${h}${p}?${_}`;return m.config.emulator?ee(m.config,S):`${m.config.apiScheme}://${S}`}class fn{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((p,_)=>{this.timer=setTimeout(()=>_(_e(this.auth,"network-request-failed")),ct.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Sn(m,h,p){const _={appName:m.name};p.email&&(_.email=p.email),p.phoneNumber&&(_.phoneNumber=p.phoneNumber);const S=_e(m,h,_);return S.customData._tokenResponse=p,S}function pn(){return(pn=(0,v.Z)(function*(m,h){return Pt(m,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function hi(){return(hi=(0,v.Z)(function*(m,h){return Pt(m,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function wn(){return(wn=(0,v.Z)(function*(m,h){return Pt(m,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function Cr(m){if(m)try{const h=new Date(Number(m));if(!isNaN(h.getTime()))return h.toUTCString()}catch{}}function un(){return(un=(0,v.Z)(function*(m,h=!1){const p=(0,O.m9)(m),_=yield p.getIdToken(h),S=vt(_);V(S&&S.exp&&S.auth_time&&S.iat,p.auth,"internal-error");const R="object"==typeof S.firebase?S.firebase:void 0,z=R?.sign_in_provider;return{claims:S,token:_,authTime:Cr(dt(S.auth_time)),issuedAtTime:Cr(dt(S.iat)),expirationTime:Cr(dt(S.exp)),signInProvider:z||null,signInSecondFactor:R?.sign_in_second_factor||null}})).apply(this,arguments)}function dt(m){return 1e3*Number(m)}function vt(m){var h;const[p,_,S]=m.split(".");if(void 0===p||void 0===_||void 0===S)return Ne("JWT malformed, contained fewer than 3 sections"),null;try{const R=(0,O.tV)(_);return R?JSON.parse(R):(Ne("Failed to decode base64 JWT payload"),null)}catch(R){return Ne("Caught error parsing JWT payload as JSON",null===(h=R)||void 0===h?void 0:h.toString()),null}}function An(m,h){return In.apply(this,arguments)}function In(){return(In=(0,v.Z)(function*(m,h,p=!1){if(p)return h;try{return yield h}catch(_){throw _ instanceof O.ZR&&function Wi({code:m}){return"auth/user-disabled"===m||"auth/user-token-expired"===m}(_)&&m.auth.currentUser===m&&(yield m.auth.signOut()),_}})).apply(this,arguments)}class ar{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var p;if(h){const _=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),_}{this.errorBackoff=3e4;const S=(null!==(p=this.user.stsTokenManager.expirationTime)&&void 0!==p?p:0)-Date.now()-3e5;return Math.max(0,S)}}schedule(h=!1){var p=this;if(!this.isRunning)return;const _=this.getInterval(h);this.timerId=setTimeout((0,v.Z)(function*(){yield p.iteration()}),_)}iteration(){var h=this;return(0,v.Z)(function*(){var p;try{yield h.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===(null===(p=_)||void 0===p?void 0:p.code)&&h.schedule(!0))}h.schedule()})()}}class no{constructor(h,p){this.createdAt=h,this.lastLoginAt=p,this._initializeTime()}_initializeTime(){this.lastSignInTime=Cr(this.lastLoginAt),this.creationTime=Cr(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Qt(m){return Vr.apply(this,arguments)}function Vr(){return Vr=(0,v.Z)(function*(m){var h;const p=m.auth,_=yield m.getIdToken(),S=yield An(m,function Gi(m,h){return wn.apply(this,arguments)}(p,{idToken:_}));V(S?.users.length,p,"internal-error");const R=S.users[0];m._notifyReloadListener(R);const z=null!==(h=R.providerUserInfo)&&void 0!==h&&h.length?function F(m){return m.map(h=>{var{providerId:p}=h,_=(0,te._T)(h,["providerId"]);return{providerId:p,uid:_.rawId||"",displayName:_.displayName||null,email:_.email||null,phoneNumber:_.phoneNumber||null,photoURL:_.photoUrl||null}})}(R.providerUserInfo):[],se=function U(m,h){return[...m.filter(_=>!h.some(S=>S.providerId===_.providerId)),...h]}(m.providerData,z),wt=!!m.isAnonymous&&!(m.email&&R.passwordHash||se?.length),ut={uid:R.localId,displayName:R.displayName||null,photoURL:R.photoUrl||null,email:R.email||null,emailVerified:R.emailVerified||!1,phoneNumber:R.phoneNumber||null,tenantId:R.tenantId||null,providerData:se,metadata:new no(R.createdAt,R.lastLoginAt),isAnonymous:wt};Object.assign(m,ut)}),Vr.apply(this,arguments)}function q(){return(q=(0,v.Z)(function*(m){const h=(0,O.m9)(m);yield Qt(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function H(){return(H=(0,v.Z)(function*(m,h){const p=yield kt(m,{},(0,v.Z)(function*(){const _=(0,O.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:S,apiKey:R}=m.config,z=Yn(m,S,"/v1/token",`key=${R}`),se=yield m._getAdditionalHeaders();return se["Content-Type"]="application/x-www-form-urlencoded",ke.fetch()(z,{method:"POST",headers:se,body:_})}));return{accessToken:p.access_token,expiresIn:p.expires_in,refreshToken:p.refresh_token}})).apply(this,arguments)}class Te{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){V(h.idToken,"internal-error"),V(typeof h.idToken<"u","internal-error"),V(typeof h.refreshToken<"u","internal-error");const p="expiresIn"in h&&typeof h.expiresIn<"u"?Number(h.expiresIn):function fi(m){const h=vt(m);return V(h,"internal-error"),V(typeof h.exp<"u","internal-error"),V(typeof h.iat<"u","internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,p)}getToken(h,p=!1){var _=this;return(0,v.Z)(function*(){return V(!_.accessToken||_.refreshToken,h,"user-token-expired"),p||!_.accessToken||_.isExpired?_.refreshToken?(yield _.refresh(h,_.refreshToken),_.accessToken):null:_.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,p){var _=this;return(0,v.Z)(function*(){const{accessToken:S,refreshToken:R,expiresIn:z}=yield function $(m,h){return H.apply(this,arguments)}(h,p);_.updateTokensAndExpiration(S,R,Number(z))})()}updateTokensAndExpiration(h,p,_){this.refreshToken=p||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*_}static fromJSON(h,p){const{refreshToken:_,accessToken:S,expirationTime:R}=p,z=new Te;return _&&(V("string"==typeof _,"internal-error",{appName:h}),z.refreshToken=_),S&&(V("string"==typeof S,"internal-error",{appName:h}),z.accessToken=S),R&&(V("number"==typeof R,"internal-error",{appName:h}),z.expirationTime=R),z}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new Te,this.toJSON())}_performRefresh(){return ve("not implemented")}}function je(m,h){V("string"==typeof m||typeof m>"u","internal-error",{appName:h})}class at{constructor(h){var{uid:p,auth:_,stsTokenManager:S}=h,R=(0,te._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ar(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=p,this.auth=_,this.stsTokenManager=S,this.accessToken=S.accessToken,this.displayName=R.displayName||null,this.email=R.email||null,this.emailVerified=R.emailVerified||!1,this.phoneNumber=R.phoneNumber||null,this.photoURL=R.photoURL||null,this.isAnonymous=R.isAnonymous||!1,this.tenantId=R.tenantId||null,this.providerData=R.providerData?[...R.providerData]:[],this.metadata=new no(R.createdAt||void 0,R.lastLoginAt||void 0)}getIdToken(h){var p=this;return(0,v.Z)(function*(){const _=yield An(p,p.stsTokenManager.getToken(p.auth,h));return V(_,p.auth,"internal-error"),p.accessToken!==_&&(p.accessToken=_,yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)),_})()}getIdTokenResult(h){return function Xt(m){return un.apply(this,arguments)}(this,h)}reload(){return function Vt(m){return q.apply(this,arguments)}(this)}_assign(h){this!==h&&(V(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(p=>Object.assign({},p)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){return new at(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(h){V(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,p=!1){var _=this;return(0,v.Z)(function*(){let S=!1;h.idToken&&h.idToken!==_.stsTokenManager.accessToken&&(_.stsTokenManager.updateFromServerResponse(h),S=!0),p&&(yield Qt(_)),yield _.auth._persistUserIfCurrent(_),S&&_.auth._notifyListenersIfCurrent(_)})()}delete(){var h=this;return(0,v.Z)(function*(){const p=yield h.getIdToken();return yield An(h,function Ur(m,h){return pn.apply(this,arguments)}(h.auth,{idToken:p})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,p){var _,S,R,z,se,Pe,et,wt;const ut=null!==(_=p.displayName)&&void 0!==_?_:void 0,tr=null!==(S=p.email)&&void 0!==S?S:void 0,Ei=null!==(R=p.phoneNumber)&&void 0!==R?R:void 0,Ca=null!==(z=p.photoURL)&&void 0!==z?z:void 0,Hs=null!==(se=p.tenantId)&&void 0!==se?se:void 0,Kc=null!==(Pe=p._redirectEventId)&&void 0!==Pe?Pe:void 0,dg=null!==(et=p.createdAt)&&void 0!==et?et:void 0,Od=null!==(wt=p.lastLoginAt)&&void 0!==wt?wt:void 0,{uid:ko,emailVerified:Nu,isAnonymous:kr,providerData:Lo,stsTokenManager:xf}=p;V(ko&&xf,h,"internal-error");const Fo=Te.fromJSON(this.name,xf);V("string"==typeof ko,h,"internal-error"),je(ut,h.name),je(tr,h.name),V("boolean"==typeof Nu,h,"internal-error"),V("boolean"==typeof kr,h,"internal-error"),je(Ei,h.name),je(Ca,h.name),je(Hs,h.name),je(Kc,h.name),je(dg,h.name),je(Od,h.name);const Bi=new at({uid:ko,auth:h,email:tr,emailVerified:Nu,displayName:ut,isAnonymous:kr,photoURL:Ca,phoneNumber:Ei,tenantId:Hs,stsTokenManager:Fo,createdAt:dg,lastLoginAt:Od});return Lo&&Array.isArray(Lo)&&(Bi.providerData=Lo.map(Mf=>Object.assign({},Mf))),Kc&&(Bi._redirectEventId=Kc),Bi}static _fromIdTokenResponse(h,p,_=!1){return(0,v.Z)(function*(){const S=new Te;S.updateFromServerResponse(p);const R=new at({uid:p.localId,auth:h,stsTokenManager:S,isAnonymous:_});return yield Qt(R),R})()}}const Jt=(()=>{class m{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,v.Z)(function*(){return!0})()}_set(p,_){var S=this;return(0,v.Z)(function*(){S.storage[p]=_})()}_get(p){var _=this;return(0,v.Z)(function*(){const S=_.storage[p];return void 0===S?null:S})()}_remove(p){var _=this;return(0,v.Z)(function*(){delete _.storage[p]})()}_addListener(p,_){}_removeListener(p,_){}}return m.type="NONE",m})();function nn(m,h,p){return`firebase:${m}:${h}:${p}`}class Et{constructor(h,p,_){this.persistence=h,this.auth=p,this.userKey=_;const{config:S,name:R}=this.auth;this.fullUserKey=nn(this.userKey,S.apiKey,R),this.fullPersistenceKey=nn("persistence",S.apiKey,R),this.boundEventHandler=p._onStorageEvent.bind(p),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,v.Z)(function*(){const p=yield h.persistence._get(h.fullUserKey);return p?at._fromJSON(h.auth,p):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var p=this;return(0,v.Z)(function*(){if(p.persistence===h)return;const _=yield p.getCurrentUser();return yield p.removeCurrentUser(),p.persistence=h,_?p.setCurrentUser(_):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,p,_="authUser"){return(0,v.Z)(function*(){if(!p.length)return new Et(it(Jt),h,_);const S=(yield Promise.all(p.map(function(){var et=(0,v.Z)(function*(wt){if(yield wt._isAvailable())return wt});return function(wt){return et.apply(this,arguments)}}()))).filter(et=>et);let R=S[0]||it(Jt);const z=nn(_,h.config.apiKey,h.name);let se=null;for(const et of p)try{const wt=yield et._get(z);if(wt){const ut=at._fromJSON(h,wt);et!==R&&(se=ut),R=et;break}}catch{}const Pe=S.filter(et=>et._shouldAllowMigration);return R._shouldAllowMigration&&Pe.length?(R=Pe[0],se&&(yield R._set(z,se.toJSON())),yield Promise.all(p.map(function(){var et=(0,v.Z)(function*(wt){if(wt!==R)try{yield wt._remove(z)}catch{}});return function(wt){return et.apply(this,arguments)}}())),new Et(R,h,_)):new Et(R,h,_)})()}}function xn(m){const h=m.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(za(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(Qn(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(ro(h))return"Blackberry";if(ur(h))return"Webos";if(Bt(h))return"Safari";if((h.includes("chrome/")||ls(h))&&!h.includes("edge/"))return"Chrome";if(Ai(h))return"Android";{const _=m.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===_?.length)return _[1]}return"Other"}function Qn(m=(0,O.z$)()){return/firefox\//i.test(m)}function Bt(m=(0,O.z$)()){const h=m.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function ls(m=(0,O.z$)()){return/crios\//i.test(m)}function za(m=(0,O.z$)()){return/iemobile/i.test(m)}function Ai(m=(0,O.z$)()){return/android/i.test(m)}function ro(m=(0,O.z$)()){return/blackberry/i.test(m)}function ur(m=(0,O.z$)()){return/webos/i.test(m)}function xi(m=(0,O.z$)()){return/iphone|ipad|ipod/i.test(m)||/macintosh/i.test(m)&&/mobile/i.test(m)}function $h(m=(0,O.z$)()){return xi(m)||Ai(m)||ur(m)||ro(m)||/windows phone/i.test(m)||za(m)}function so(m,h=[]){let p;switch(m){case"Browser":p=xn((0,O.z$)());break;case"Worker":p=`${xn((0,O.z$)())}-${m}`;break;default:p=m}const _=h.length?h.join(","):"FirebaseCore-web";return`${p}/JsCore/${oe.SDK_VERSION}/${_}`}class Wl{constructor(h){this.auth=h,this.queue=[]}pushCallback(h,p){const _=R=>new Promise((z,se)=>{try{z(h(R))}catch(Pe){se(Pe)}});_.onAbort=p,this.queue.push(_);const S=this.queue.length-1;return()=>{this.queue[S]=()=>Promise.resolve()}}runMiddleware(h){var p=this;return(0,v.Z)(function*(){var _;if(p.auth.currentUser===h)return;const S=[];try{for(const R of p.queue)yield R(h),R.onAbort&&S.push(R.onAbort)}catch(R){S.reverse();for(const z of S)try{z()}catch{}throw p.auth._errorFactory.create("login-blocked",{originalMessage:null===(_=R)||void 0===_?void 0:_.message})}})()}}class ql{constructor(h,p,_){this.app=h,this.heartbeatServiceProvider=p,this.config=_,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new oc(this),this.idTokenSubscription=new oc(this),this.beforeStateQueue=new Wl(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=pe,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=_.sdkClientVersion}_initializeWithPersistence(h,p){var _=this;return p&&(this._popupRedirectResolver=it(p)),this._initializationPromise=this.queue((0,v.Z)(function*(){var S,R;if(!_._deleted&&(_.persistenceManager=yield Et.create(_,h),!_._deleted)){if(null!==(S=_._popupRedirectResolver)&&void 0!==S&&S._shouldInitProactively)try{yield _._popupRedirectResolver._initialize(_)}catch{}yield _.initializeCurrentUser(p),_.lastNotifiedUid=(null===(R=_.currentUser)||void 0===R?void 0:R.uid)||null,!_._deleted&&(_._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,v.Z)(function*(){if(h._deleted)return;const p=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||p){if(h.currentUser&&p&&h.currentUser.uid===p.uid)return h._currentUser._assign(p),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(p,!0)}})()}initializeCurrentUser(h){var p=this;return(0,v.Z)(function*(){var _;const S=yield p.assertedPersistence.getCurrentUser();let R=S,z=!1;if(h&&p.config.authDomain){yield p.getOrInitRedirectPersistenceManager();const se=null===(_=p.redirectUser)||void 0===_?void 0:_._redirectEventId,Pe=R?._redirectEventId,et=yield p.tryRedirectSignIn(h);(!se||se===Pe)&&et?.user&&(R=et.user,z=!0)}if(!R)return p.directlySetCurrentUser(null);if(!R._redirectEventId){if(z)try{yield p.beforeStateQueue.runMiddleware(R)}catch(se){R=S,p._popupRedirectResolver._overrideRedirectResult(p,()=>Promise.reject(se))}return R?p.reloadAndSetCurrentUserOrClear(R):p.directlySetCurrentUser(null)}return V(p._popupRedirectResolver,p,"argument-error"),yield p.getOrInitRedirectPersistenceManager(),p.redirectUser&&p.redirectUser._redirectEventId===R._redirectEventId?p.directlySetCurrentUser(R):p.reloadAndSetCurrentUserOrClear(R)})()}tryRedirectSignIn(h){var p=this;return(0,v.Z)(function*(){let _=null;try{_=yield p._popupRedirectResolver._completeRedirectFn(p,h,!0)}catch{yield p._setRedirectUser(null)}return _})()}reloadAndSetCurrentUserOrClear(h){var p=this;return(0,v.Z)(function*(){var _;try{yield Qt(h)}catch(S){if("auth/network-request-failed"!==(null===(_=S)||void 0===_?void 0:_.code))return p.directlySetCurrentUser(null)}return p.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function ce(){if(typeof navigator>"u")return null;const m=navigator;return m.languages&&m.languages[0]||m.language||null}()}_delete(){var h=this;return(0,v.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var p=this;return(0,v.Z)(function*(){const _=h?(0,O.m9)(h):null;return _&&V(_.auth.config.apiKey===p.config.apiKey,p,"invalid-user-token"),p._updateCurrentUser(_&&_._clone(p))})()}_updateCurrentUser(h,p=!1){var _=this;return(0,v.Z)(function*(){if(!_._deleted)return h&&V(_.tenantId===h.tenantId,_,"tenant-id-mismatch"),p||(yield _.beforeStateQueue.runMiddleware(h)),_.queue((0,v.Z)(function*(){yield _.directlySetCurrentUser(h),_.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,v.Z)(function*(){return yield h.beforeStateQueue.runMiddleware(null),(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null,!0)})()}setPersistence(h){var p=this;return this.queue((0,v.Z)(function*(){yield p.assertedPersistence.setPersistence(it(h))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new O.LL("auth","Firebase",h())}onAuthStateChanged(h,p,_){return this.registerStateListener(this.authStateSubscription,h,p,_)}beforeAuthStateChanged(h,p){return this.beforeStateQueue.pushCallback(h,p)}onIdTokenChanged(h,p,_){return this.registerStateListener(this.idTokenSubscription,h,p,_)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,p){var _=this;return(0,v.Z)(function*(){const S=yield _.getOrInitRedirectPersistenceManager(p);return null===h?S.removeCurrentUser():S.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var p=this;return(0,v.Z)(function*(){if(!p.redirectPersistenceManager){const _=h&&it(h)||p._popupRedirectResolver;V(_,p,"argument-error"),p.redirectPersistenceManager=yield Et.create(p,[it(_._redirectPersistence)],"redirectUser"),p.redirectUser=yield p.redirectPersistenceManager.getCurrentUser()}return p.redirectPersistenceManager})()}_redirectUserForId(h){var p=this;return(0,v.Z)(function*(){var _,S;return p._isInitialized&&(yield p.queue((0,v.Z)(function*(){}))),(null===(_=p._currentUser)||void 0===_?void 0:_._redirectEventId)===h?p._currentUser:(null===(S=p.redirectUser)||void 0===S?void 0:S._redirectEventId)===h?p.redirectUser:null})()}_persistUserIfCurrent(h){var p=this;return(0,v.Z)(function*(){if(h===p.currentUser)return p.queue((0,v.Z)(function*(){return p.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,p;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const _=null!==(p=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==p?p:null;this.lastNotifiedUid!==_&&(this.lastNotifiedUid=_,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,p,_,S){if(this._deleted)return()=>{};const R="function"==typeof p?p:p.next.bind(p),z=this._isInitialized?Promise.resolve():this._initializationPromise;return V(z,this,"internal-error"),z.then(()=>R(this.currentUser)),"function"==typeof p?h.addObserver(p,_,S):h.addObserver(p)}directlySetCurrentUser(h){var p=this;return(0,v.Z)(function*(){p.currentUser&&p.currentUser!==h&&(p._currentUser._stopProactiveRefresh(),h&&p.isProactiveRefreshEnabled&&h._startProactiveRefresh()),p.currentUser=h,h?yield p.assertedPersistence.setCurrentUser(h):yield p.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return V(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=so(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,v.Z)(function*(){var p;const _={"X-Client-Version":h.clientVersion};h.app.options.appId&&(_["X-Firebase-gmpid"]=h.app.options.appId);const S=yield null===(p=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getHeartbeatsHeader();return S&&(_["X-Firebase-Client"]=S),_})()}}function En(m){return(0,O.m9)(m)}class oc{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,O.ne)(p=>this.observer=p)}get next(){return V(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function kn(m){const h=m.indexOf(":");return h<0?"":m.substr(0,h+1)}function qi(m){if(!m)return null;const h=Number(m);return isNaN(h)?null:h}class Ts{constructor(h,p){this.providerId=h,this.signInMethod=p}toJSON(){return ve("not implemented")}_getIdTokenResponse(h){return ve("not implemented")}_linkToIdToken(h,p){return ve("not implemented")}_getReauthenticationResolver(h){return ve("not implemented")}}function gr(m,h){return oo.apply(this,arguments)}function oo(){return(oo=(0,v.Z)(function*(m,h){return Pt(m,"POST","/v1/accounts:resetPassword",ze(m,h))})).apply(this,arguments)}function ri(m,h){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,v.Z)(function*(m,h){return Pt(m,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function cn(){return(cn=(0,v.Z)(function*(m,h){return Pt(m,"POST","/v1/accounts:update",ze(m,h))})).apply(this,arguments)}function Ki(){return(Ki=(0,v.Z)(function*(m,h){return $t(m,"POST","/v1/accounts:signInWithPassword",ze(m,h))})).apply(this,arguments)}function Ln(m,h){return pi.apply(this,arguments)}function pi(){return(pi=(0,v.Z)(function*(m,h){return Pt(m,"POST","/v1/accounts:sendOobCode",ze(m,h))})).apply(this,arguments)}function ao(){return(ao=(0,v.Z)(function*(m,h){return Ln(m,h)})).apply(this,arguments)}function Ct(){return(Ct=(0,v.Z)(function*(m,h){return Ln(m,h)})).apply(this,arguments)}function ds(){return(ds=(0,v.Z)(function*(m,h){return Ln(m,h)})).apply(this,arguments)}function gi(){return(gi=(0,v.Z)(function*(m,h){return Ln(m,h)})).apply(this,arguments)}function co(){return(co=(0,v.Z)(function*(m,h){return $t(m,"POST","/v1/accounts:signInWithEmailLink",ze(m,h))})).apply(this,arguments)}function mi(){return(mi=(0,v.Z)(function*(m,h){return $t(m,"POST","/v1/accounts:signInWithEmailLink",ze(m,h))})).apply(this,arguments)}class hs extends Ts{constructor(h,p,_,S=null){super("password",_),this._email=h,this._password=p,this._tenantId=S}static _fromEmailAndPassword(h,p){return new hs(h,p,"password")}static _fromEmailAndCode(h,p,_=null){return new hs(h,p,"emailLink",_)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h;if(p?.email&&p?.password){if("password"===p.signInMethod)return this._fromEmailAndPassword(p.email,p.password);if("emailLink"===p.signInMethod)return this._fromEmailAndCode(p.email,p.password,p.tenantId)}return null}_getIdTokenResponse(h){var p=this;return(0,v.Z)(function*(){switch(p.signInMethod){case"password":return function Sr(m,h){return Ki.apply(this,arguments)}(h,{returnSecureToken:!0,email:p._email,password:p._password});case"emailLink":return function mr(m,h){return co.apply(this,arguments)}(h,{email:p._email,oobCode:p._password});default:Ie(h,"internal-error")}})()}_linkToIdToken(h,p){var _=this;return(0,v.Z)(function*(){switch(_.signInMethod){case"password":return ri(h,{idToken:p,returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function Cs(m,h){return mi.apply(this,arguments)}(h,{idToken:p,email:_._email,oobCode:_._password});default:Ie(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function Zi(m,h){return en.apply(this,arguments)}function en(){return(en=(0,v.Z)(function*(m,h){return $t(m,"POST","/v1/accounts:signInWithIdp",ze(m,h))})).apply(this,arguments)}class ii extends Ts{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const p=new ii(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(p.idToken=h.idToken),h.accessToken&&(p.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(p.nonce=h.nonce),h.pendingToken&&(p.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(p.accessToken=h.oauthToken,p.secret=h.oauthTokenSecret):Ie("argument-error"),p}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:_,signInMethod:S}=p,R=(0,te._T)(p,["providerId","signInMethod"]);if(!_||!S)return null;const z=new ii(_,S);return z.idToken=R.idToken||void 0,z.accessToken=R.accessToken||void 0,z.secret=R.secret,z.nonce=R.nonce,z.pendingToken=R.pendingToken||null,z}_getIdTokenResponse(h){return Zi(h,this.buildRequest())}_linkToIdToken(h,p){const _=this.buildRequest();return _.idToken=p,Zi(h,_)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,Zi(h,p)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const p={};this.idToken&&(p.id_token=this.idToken),this.accessToken&&(p.access_token=this.accessToken),this.secret&&(p.oauth_token_secret=this.secret),p.providerId=this.providerId,this.nonce&&!this.pendingToken&&(p.nonce=this.nonce),h.postBody=(0,O.xO)(p)}return h}}function lo(){return(lo=(0,v.Z)(function*(m,h){return Pt(m,"POST","/v1/accounts:sendVerificationCode",ze(m,h))})).apply(this,arguments)}function Ar(){return(Ar=(0,v.Z)(function*(m,h){return $t(m,"POST","/v1/accounts:signInWithPhoneNumber",ze(m,h))})).apply(this,arguments)}function Zl(){return(Zl=(0,v.Z)(function*(m,h){const p=yield $t(m,"POST","/v1/accounts:signInWithPhoneNumber",ze(m,h));if(p.temporaryProof)throw Sn(m,"account-exists-with-different-credential",p);return p})).apply(this,arguments)}const Br={USER_NOT_FOUND:"user-not-found"};function qo(){return(qo=(0,v.Z)(function*(m,h){return $t(m,"POST","/v1/accounts:signInWithPhoneNumber",ze(m,Object.assign(Object.assign({},h),{operation:"REAUTH"})),Br)})).apply(this,arguments)}class vi extends Ts{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,p){return new vi({verificationId:h,verificationCode:p})}static _fromTokenResponse(h,p){return new vi({phoneNumber:h,temporaryProof:p})}_getIdTokenResponse(h){return function Ss(m,h){return Ar.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,p){return function yr(m,h){return Zl.apply(this,arguments)}(h,Object.assign({idToken:p},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function yi(m,h){return qo.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:p,verificationId:_,verificationCode:S}=this.params;return h&&p?{temporaryProof:h,phoneNumber:p}:{sessionInfo:_,code:S}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:p,verificationCode:_,phoneNumber:S,temporaryProof:R}=h;return _||p||S||R?new vi({verificationId:p,verificationCode:_,phoneNumber:S,temporaryProof:R}):null}}class Ko{constructor(h){var p,_,S,R,z,se;const Pe=(0,O.zd)((0,O.pd)(h)),et=null!==(p=Pe.apiKey)&&void 0!==p?p:null,wt=null!==(_=Pe.oobCode)&&void 0!==_?_:null,ut=function cc(m){switch(m){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(S=Pe.mode)&&void 0!==S?S:null);V(et&&wt&&ut,"argument-error"),this.apiKey=et,this.operation=ut,this.code=wt,this.continueUrl=null!==(R=Pe.continueUrl)&&void 0!==R?R:null,this.languageCode=null!==(z=Pe.languageCode)&&void 0!==z?z:null,this.tenantId=null!==(se=Pe.tenantId)&&void 0!==se?se:null}static parseLink(h){const p=function jr(m){const h=(0,O.zd)((0,O.pd)(m)).link,p=h?(0,O.zd)((0,O.pd)(h)).deep_link_id:null,_=(0,O.zd)((0,O.pd)(m)).deep_link_id;return(_?(0,O.zd)((0,O.pd)(_)).link:null)||_||p||h||m}(h);try{return new Ko(p)}catch{return null}}}let lc=(()=>{class m{constructor(){this.providerId=m.PROVIDER_ID}static credential(p,_){return hs._fromEmailAndPassword(p,_)}static credentialWithLink(p,_){const S=Ko.parseLink(_);return V(S,"argument-error"),hs._fromEmailAndCode(p,S.code,S.tenantId)}}return m.PROVIDER_ID="password",m.EMAIL_PASSWORD_SIGN_IN_METHOD="password",m.EMAIL_LINK_SIGN_IN_METHOD="emailLink",m})();class Yi{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class ho extends Yi{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class Zo extends ho{static credentialFromJSON(h){const p="string"==typeof h?JSON.parse(h):h;return V("providerId"in p&&"signInMethod"in p,"argument-error"),ii._fromParams(p)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return V(h.idToken||h.accessToken,"argument-error"),ii._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return Zo.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return Zo.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:p,oauthAccessToken:_,oauthTokenSecret:S,pendingToken:R,nonce:z,providerId:se}=h;if(!_&&!S&&!p&&!R||!se)return null;try{return new Zo(se)._credential({idToken:p,accessToken:_,nonce:z,pendingToken:R})}catch{return null}}}let dc=(()=>{class m extends ho{constructor(){super("facebook.com")}static credential(p){return ii._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.FACEBOOK_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return m.credentialFromTaggedObject(p)}static credentialFromError(p){return m.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return m.credential(p.oauthAccessToken)}catch{return null}}}return m.FACEBOOK_SIGN_IN_METHOD="facebook.com",m.PROVIDER_ID="facebook.com",m})(),zh=(()=>{class m extends ho{constructor(){super("google.com"),this.addScope("profile")}static credential(p,_){return ii._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.GOOGLE_SIGN_IN_METHOD,idToken:p,accessToken:_})}static credentialFromResult(p){return m.credentialFromTaggedObject(p)}static credentialFromError(p){return m.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:_,oauthAccessToken:S}=p;if(!_&&!S)return null;try{return m.credential(_,S)}catch{return null}}}return m.GOOGLE_SIGN_IN_METHOD="google.com",m.PROVIDER_ID="google.com",m})(),Gh=(()=>{class m extends ho{constructor(){super("github.com")}static credential(p){return ii._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.GITHUB_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return m.credentialFromTaggedObject(p)}static credentialFromError(p){return m.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return m.credential(p.oauthAccessToken)}catch{return null}}}return m.GITHUB_SIGN_IN_METHOD="github.com",m.PROVIDER_ID="github.com",m})();class fo extends Ts{constructor(h,p){super(h,h),this.pendingToken=p}_getIdTokenResponse(h){return Zi(h,this.buildRequest())}_linkToIdToken(h,p){const _=this.buildRequest();return _.idToken=p,Zi(h,_)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,Zi(h,p)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:_,signInMethod:S,pendingToken:R}=p;return _&&S&&R&&_===S?new fo(_,R):null}static _create(h,p){return new fo(h,p)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ri extends Yi{constructor(h){V(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return Ri.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return Ri.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const p=fo.fromJSON(h);return V(p,"argument-error"),p}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:p,providerId:_}=h;if(!p||!_)return null;try{return fo._create(_,p)}catch{return null}}}let Wp=(()=>{class m extends ho{constructor(){super("twitter.com")}static credential(p,_){return ii._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.TWITTER_SIGN_IN_METHOD,oauthToken:p,oauthTokenSecret:_})}static credentialFromResult(p){return m.credentialFromTaggedObject(p)}static credentialFromError(p){return m.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthAccessToken:_,oauthTokenSecret:S}=p;if(!_||!S)return null;try{return m.credential(_,S)}catch{return null}}}return m.TWITTER_SIGN_IN_METHOD="twitter.com",m.PROVIDER_ID="twitter.com",m})();function hc(m,h){return fc.apply(this,arguments)}function fc(){return(fc=(0,v.Z)(function*(m,h){return $t(m,"POST","/v1/accounts:signUp",ze(m,h))})).apply(this,arguments)}class xr{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,p,_,S=!1){return(0,v.Z)(function*(){const R=yield at._fromIdTokenResponse(h,_,S),z=pc(_);return new xr({user:R,providerId:z,_tokenResponse:_,operationType:p})})()}static _forOperation(h,p,_){return(0,v.Z)(function*(){yield h._updateTokensIfNecessary(_,!0);const S=pc(_);return new xr({user:h,providerId:S,_tokenResponse:_,operationType:p})})()}}function pc(m){return m.providerId?m.providerId:"phoneNumber"in m?"phone":null}function Wh(){return(Wh=(0,v.Z)(function*(m){var h;const p=En(m);if(yield p._initializationPromise,null!==(h=p.currentUser)&&void 0!==h&&h.isAnonymous)return new xr({user:p.currentUser,providerId:null,operationType:"signIn"});const _=yield hc(p,{returnSecureToken:!0}),S=yield xr._fromIdTokenResponse(p,"signIn",_,!0);return yield p._updateCurrentUser(S.user),S})).apply(this,arguments)}class Ga extends O.ZR{constructor(h,p,_,S){var R;super(p.code,p.message),this.operationType=_,this.user=S,Object.setPrototypeOf(this,Ga.prototype),this.customData={appName:h.name,tenantId:null!==(R=h.tenantId)&&void 0!==R?R:void 0,_serverResponse:p.customData._serverResponse,operationType:_}}static _fromErrorAndOperation(h,p,_,S){return new Ga(h,p,_,S)}}function xs(m,h,p,_){return("reauthenticate"===h?p._getReauthenticationResolver(m):p._getIdTokenResponse(m)).catch(R=>{throw"auth/multi-factor-auth-required"===R.code?Ga._fromErrorAndOperation(m,R,h,_):R})}function Ms(m){return new Set(m.map(({providerId:h})=>h).filter(h=>!!h))}function po(){return po=(0,v.Z)(function*(m,h){const p=(0,O.m9)(m);yield Rs(!0,p,h);const{providerUserInfo:_}=yield function st(m,h){return hi.apply(this,arguments)}(p.auth,{idToken:yield p.getIdToken(),deleteProvider:[h]}),S=Ms(_||[]);return p.providerData=p.providerData.filter(R=>S.has(R.providerId)),S.has("phone")||(p.phoneNumber=null),yield p.auth._persistUserIfCurrent(p),p}),po.apply(this,arguments)}function qa(m,h){return go.apply(this,arguments)}function go(){return(go=(0,v.Z)(function*(m,h,p=!1){const _=yield An(m,h._linkToIdToken(m.auth,yield m.getIdToken()),p);return xr._forOperation(m,"link",_)})).apply(this,arguments)}function Rs(m,h,p){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,v.Z)(function*(m,h,p){yield Qt(h);const S=!1===m?"provider-already-linked":"no-such-provider";V(Ms(h.providerData).has(p)===m,h.auth,S)})).apply(this,arguments)}function Ql(m,h){return mo.apply(this,arguments)}function mo(){return(mo=(0,v.Z)(function*(m,h,p=!1){var _;const{auth:S}=m,R="reauthenticate";try{const z=yield An(m,xs(S,R,h,m),p);V(z.idToken,S,"internal-error");const se=vt(z.idToken);V(se,S,"internal-error");const{sub:Pe}=se;return V(m.uid===Pe,S,"user-mismatch"),xr._forOperation(m,R,z)}catch(z){throw"auth/user-not-found"===(null===(_=z)||void 0===_?void 0:_.code)&&Ie(S,"user-mismatch"),z}})).apply(this,arguments)}function yo(m,h){return $r.apply(this,arguments)}function $r(){return($r=(0,v.Z)(function*(m,h,p=!1){const _="signIn",S=yield xs(m,_,h),R=yield xr._fromIdTokenResponse(m,_,S);return p||(yield m._updateCurrentUser(R.user)),R})).apply(this,arguments)}function Dn(m,h){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,v.Z)(function*(m,h){return yo(En(m),h)})).apply(this,arguments)}function Mn(m,h){return vo.apply(this,arguments)}function vo(){return(vo=(0,v.Z)(function*(m,h){const p=(0,O.m9)(m);return yield Rs(!1,p,h.providerId),qa(p,h)})).apply(this,arguments)}function Ns(m,h){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,v.Z)(function*(m,h){return Ql((0,O.m9)(m),h)})).apply(this,arguments)}function _o(){return(_o=(0,v.Z)(function*(m,h){return $t(m,"POST","/v1/accounts:signInWithCustomToken",ze(m,h))})).apply(this,arguments)}function zn(){return zn=(0,v.Z)(function*(m,h){const p=En(m),_=yield function gc(m,h){return _o.apply(this,arguments)}(p,{token:h,returnSecureToken:!0}),S=yield xr._fromIdTokenResponse(p,"signIn",_);return yield p._updateCurrentUser(S.user),S}),zn.apply(this,arguments)}class Qo{constructor(h,p){this.factorId=h,this.uid=p.mfaEnrollmentId,this.enrollmentTime=new Date(p.enrolledAt).toUTCString(),this.displayName=p.displayName}static _fromServerResponse(h,p){return"phoneInfo"in p?wo._fromServerResponse(h,p):Ie(h,"internal-error")}}class wo extends Qo{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,p){return new wo(p)}}function Za(m,h,p){var _;V((null===(_=p.url)||void 0===_?void 0:_.length)>0,m,"invalid-continue-uri"),V(typeof p.dynamicLinkDomain>"u"||p.dynamicLinkDomain.length>0,m,"invalid-dynamic-link-domain"),h.continueUrl=p.url,h.dynamicLinkDomain=p.dynamicLinkDomain,h.canHandleCodeInApp=p.handleCodeInApp,p.iOS&&(V(p.iOS.bundleId.length>0,m,"missing-ios-bundle-id"),h.iOSBundleId=p.iOS.bundleId),p.android&&(V(p.android.packageName.length>0,m,"missing-android-pkg-name"),h.androidInstallApp=p.android.installApp,h.androidMinimumVersionCode=p.android.minimumVersion,h.androidPackageName=p.android.packageName)}function Jo(){return Jo=(0,v.Z)(function*(m,h,p){const _=(0,O.m9)(m),S={requestType:"PASSWORD_RESET",email:h};p&&Za(_,S,p),yield function uo(m,h){return Ct.apply(this,arguments)}(_,S)}),Jo.apply(this,arguments)}function It(){return(It=(0,v.Z)(function*(m,h,p){yield gr((0,O.m9)(m),{oobCode:h,newPassword:p})})).apply(this,arguments)}function Jl(){return Jl=(0,v.Z)(function*(m,h){yield function Tt(m,h){return cn.apply(this,arguments)}((0,O.m9)(m),{oobCode:h})}),Jl.apply(this,arguments)}function Qa(m,h){return mc.apply(this,arguments)}function mc(){return(mc=(0,v.Z)(function*(m,h){const p=(0,O.m9)(m),_=yield gr(p,{oobCode:h}),S=_.requestType;switch(V(S,p,"internal-error"),S){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":V(_.newEmail,p,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":V(_.mfaInfo,p,"internal-error");default:V(_.email,p,"internal-error")}let R=null;return _.mfaInfo&&(R=Qo._fromServerResponse(En(p),_.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.newEmail:_.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.email:_.newEmail)||null,multiFactorInfo:R},operation:S}})).apply(this,arguments)}function Ja(){return(Ja=(0,v.Z)(function*(m,h){const{data:p}=yield Qa((0,O.m9)(m),h);return p.email})).apply(this,arguments)}function vc(){return(vc=(0,v.Z)(function*(m,h,p){const _=En(m),S=yield hc(_,{returnSecureToken:!0,email:h,password:p}),R=yield xr._fromIdTokenResponse(_,"signIn",S);return yield _._updateCurrentUser(R.user),R})).apply(this,arguments)}function _c(){return _c=(0,v.Z)(function*(m,h,p){const _=(0,O.m9)(m),S={requestType:"EMAIL_SIGNIN",email:h};V(p.handleCodeInApp,_,"argument-error"),p&&Za(_,S,p),yield function ac(m,h){return ds.apply(this,arguments)}(_,S)}),_c.apply(this,arguments)}function ea(){return(ea=(0,v.Z)(function*(m,h,p){const _=(0,O.m9)(m),S=lc.credentialWithLink(h,p||Zn());return V(S._tenantId===(_.tenantId||null),_,"tenant-id-mismatch"),Dn(_,S)})).apply(this,arguments)}function Hr(){return(Hr=(0,v.Z)(function*(m,h){return Pt(m,"POST","/v1/accounts:createAuthUri",ze(m,h))})).apply(this,arguments)}function tu(){return tu=(0,v.Z)(function*(m,h){const _={identifier:h,continueUri:Pn()?Zn():"http://localhost"},{signinMethods:S}=yield function Xa(m,h){return Hr.apply(this,arguments)}((0,O.m9)(m),_);return S||[]}),tu.apply(this,arguments)}function wc(){return wc=(0,v.Z)(function*(m,h){const p=(0,O.m9)(m),S={requestType:"VERIFY_EMAIL",idToken:yield m.getIdToken()};h&&Za(p.auth,S,h);const{email:R}=yield function yn(m,h){return ao.apply(this,arguments)}(p.auth,S);R!==m.email&&(yield m.reload())}),wc.apply(this,arguments)}function Gn(){return Gn=(0,v.Z)(function*(m,h,p){const _=(0,O.m9)(m),R={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield m.getIdToken(),newEmail:h};p&&Za(_.auth,R,p);const{email:z}=yield function uc(m,h){return gi.apply(this,arguments)}(_.auth,R);z!==m.email&&(yield m.reload())}),Gn.apply(this,arguments)}function fs(){return(fs=(0,v.Z)(function*(m,h){return Pt(m,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Ni(){return Ni=(0,v.Z)(function*(m,{displayName:h,photoURL:p}){if(void 0===h&&void 0===p)return;const _=(0,O.m9)(m),R={idToken:yield _.getIdToken(),displayName:h,photoUrl:p,returnSecureToken:!0},z=yield An(_,function zr(m,h){return fs.apply(this,arguments)}(_.auth,R));_.displayName=z.displayName||null,_.photoURL=z.photoUrl||null;const se=_.providerData.find(({providerId:Pe})=>"password"===Pe);se&&(se.displayName=_.displayName,se.photoURL=_.photoURL),yield _._updateTokensIfNecessary(z)}),Ni.apply(this,arguments)}function nd(m,h,p){return Ic.apply(this,arguments)}function Ic(){return(Ic=(0,v.Z)(function*(m,h,p){const{auth:_}=m,R={idToken:yield m.getIdToken(),returnSecureToken:!0};h&&(R.email=h),p&&(R.password=p);const z=yield An(m,ri(_,R));yield m._updateTokensIfNecessary(z,!0)})).apply(this,arguments)}class Ji{constructor(h,p,_={}){this.isNewUser=h,this.providerId=p,this.profile=_}}class rd extends Ji{constructor(h,p,_,S){super(h,p,_),this.username=S}}class Dc extends Ji{constructor(h,p){super(h,"facebook.com",p)}}class id extends rd{constructor(h,p){super(h,"github.com",p,"string"==typeof p?.login?p?.login:null)}}class Kh extends Ji{constructor(h,p){super(h,"google.com",p)}}class ru extends rd{constructor(h,p,_){super(h,"twitter.com",p,_)}}function Zh(m){const{user:h,_tokenResponse:p}=m;return h.isAnonymous&&!p?{providerId:null,isNewUser:!1,profile:null}:function Ec(m){var h,p;if(!m)return null;const{providerId:_}=m,S=m.rawUserInfo?JSON.parse(m.rawUserInfo):{},R=m.isNewUser||"identitytoolkit#SignupNewUserResponse"===m.kind;if(!_&&m?.idToken){const z=null===(p=null===(h=vt(m.idToken))||void 0===h?void 0:h.firebase)||void 0===p?void 0:p.sign_in_provider;if(z)return new Ji(R,"anonymous"!==z&&"custom"!==z?z:null)}if(!_)return null;switch(_){case"facebook.com":return new Dc(R,S);case"github.com":return new id(R,S);case"google.com":return new Kh(R,S);case"twitter.com":return new ru(R,S,m.screenName||null);case"custom":case"anonymous":return new Ji(R,null);default:return new Ji(R,_,S)}}(p)}class Eo{constructor(h,p){this.type=h,this.credential=p}static _fromIdtoken(h){return new Eo("enroll",h)}static _fromMfaPendingCredential(h){return new Eo("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var p,_;if(h?.multiFactorSession){if(null!==(p=h.multiFactorSession)&&void 0!==p&&p.pendingCredential)return Eo._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null!==(_=h.multiFactorSession)&&void 0!==_&&_.idToken)return Eo._fromIdtoken(h.multiFactorSession.idToken)}return null}}class bc{constructor(h,p,_){this.session=h,this.hints=p,this.signInResolver=_}static _fromError(h,p){const _=En(h),S=p.customData._serverResponse,R=(S.mfaInfo||[]).map(se=>Qo._fromServerResponse(_,se));V(S.mfaPendingCredential,_,"internal-error");const z=Eo._fromMfaPendingCredential(S.mfaPendingCredential);return new bc(z,R,function(){var se=(0,v.Z)(function*(Pe){const et=yield Pe._process(_,z);delete S.mfaInfo,delete S.mfaPendingCredential;const wt=Object.assign(Object.assign({},S),{idToken:et.idToken,refreshToken:et.refreshToken});switch(p.operationType){case"signIn":const ut=yield xr._fromIdTokenResponse(_,p.operationType,wt);return yield _._updateCurrentUser(ut.user),ut;case"reauthenticate":return V(p.user,_,"internal-error"),xr._forOperation(p.user,p.operationType,wt);default:Ie(_,"internal-error")}});return function(Pe){return se.apply(this,arguments)}}())}resolveSignIn(h){var p=this;return(0,v.Z)(function*(){return p.signInResolver(h)})()}}class na{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(p=>{p.mfaInfo&&(this.enrolledFactors=p.mfaInfo.map(_=>Qo._fromServerResponse(h.auth,_)))})}static _fromUser(h){return new na(h)}getSession(){var h=this;return(0,v.Z)(function*(){return Eo._fromIdtoken(yield h.user.getIdToken())})()}enroll(h,p){var _=this;return(0,v.Z)(function*(){const S=h,R=yield _.getSession(),z=yield An(_.user,S._process(_.user.auth,R,p));return yield _.user._updateTokensIfNecessary(z),_.user.reload()})()}unenroll(h){var p=this;return(0,v.Z)(function*(){var _;const S="string"==typeof h?h:h.uid,R=yield p.user.getIdToken(),z=yield An(p.user,function Zp(m,h){return Pt(m,"POST","/v2/accounts/mfaEnrollment:withdraw",ze(m,h))}(p.user.auth,{idToken:R,mfaEnrollmentId:S}));p.enrolledFactors=p.enrolledFactors.filter(({uid:se})=>se!==S),yield p.user._updateTokensIfNecessary(z);try{yield p.user.reload()}catch(se){if("auth/user-token-expired"!==(null===(_=se)||void 0===_?void 0:_.code))throw se}})()}}const ks=new WeakMap,ps="__sak";class ra{constructor(h,p){this.storageRetriever=h,this.type=p}_isAvailable(){try{return this.storage?(this.storage.setItem(ps,"1"),this.storage.removeItem(ps),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(h,p){return this.storage.setItem(h,JSON.stringify(p)),Promise.resolve()}_get(h){const p=this.storage.getItem(h);return Promise.resolve(p?JSON.parse(p):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const iu=(()=>{class m extends ra{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(p,_)=>this.onStorageEvent(p,_),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function ia(){const m=(0,O.z$)();return Bt(m)||xi(m)}()&&function sc(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=$h(),this._shouldAllowMigration=!0}forAllChangedKeys(p){for(const _ of Object.keys(this.listeners)){const S=this.storage.getItem(_),R=this.localCache[_];S!==R&&p(_,R,S)}}onStorageEvent(p,_=!1){if(!p.key)return void this.forAllChangedKeys((se,Pe,et)=>{this.notifyListeners(se,et)});const S=p.key;if(_?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const se=this.storage.getItem(S);if(p.newValue!==se)null!==p.newValue?this.storage.setItem(S,p.newValue):this.storage.removeItem(S);else if(this.localCache[S]===p.newValue&&!_)return}const R=()=>{const se=this.storage.getItem(S);!_&&this.localCache[S]===se||this.notifyListeners(S,se)},z=this.storage.getItem(S);!function jh(){return(0,O.w1)()&&10===document.documentMode}()||z===p.newValue||p.newValue===p.oldValue?R():setTimeout(R,10)}notifyListeners(p,_){this.localCache[p]=_;const S=this.listeners[p];if(S)for(const R of Array.from(S))R(_&&JSON.parse(_))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((p,_,S)=>{this.onStorageEvent(new StorageEvent("storage",{key:p,oldValue:_,newValue:S}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(p,_){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[p]||(this.listeners[p]=new Set,this.localCache[p]=this.storage.getItem(p)),this.listeners[p].add(_)}_removeListener(p,_){this.listeners[p]&&(this.listeners[p].delete(_),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(p,_){var S=()=>super._set,R=this;return(0,v.Z)(function*(){yield S().call(R,p,_),R.localCache[p]=JSON.stringify(_)})()}_get(p){var _=()=>super._get,S=this;return(0,v.Z)(function*(){const R=yield _().call(S,p);return S.localCache[p]=JSON.stringify(R),R})()}_remove(p){var _=()=>super._remove,S=this;return(0,v.Z)(function*(){yield _().call(S,p),delete S.localCache[p]})()}}return m.type="LOCAL",m})(),Ls=(()=>{class m extends ra{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(p,_){}_removeListener(p,_){}}return m.type="SESSION",m})();let Qh=(()=>{class m{constructor(p){this.eventTarget=p,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(p){const _=this.receivers.find(R=>R.isListeningto(p));if(_)return _;const S=new m(p);return this.receivers.push(S),S}isListeningto(p){return this.eventTarget===p}handleEvent(p){var _=this;return(0,v.Z)(function*(){const S=p,{eventId:R,eventType:z,data:se}=S.data,Pe=_.handlersMap[z];if(!Pe?.size)return;S.ports[0].postMessage({status:"ack",eventId:R,eventType:z});const et=Array.from(Pe).map(function(){var ut=(0,v.Z)(function*(tr){return tr(S.origin,se)});return function(tr){return ut.apply(this,arguments)}}()),wt=yield function ud(m){return Promise.all(m.map(function(){var h=(0,v.Z)(function*(p){try{return{fulfilled:!0,value:yield p}}catch(_){return{fulfilled:!1,reason:_}}});return function(p){return h.apply(this,arguments)}}()))}(et);S.ports[0].postMessage({status:"done",eventId:R,eventType:z,response:wt})})()}_subscribe(p,_){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[p]||(this.handlersMap[p]=new Set),this.handlersMap[p].add(_)}_unsubscribe(p,_){this.handlersMap[p]&&_&&this.handlersMap[p].delete(_),(!_||0===this.handlersMap[p].size)&&delete this.handlersMap[p],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return m.receivers=[],m})();function Fs(m="",h=10){let p="";for(let _=0;_<h;_++)p+=Math.floor(10*Math.random());return m+p}class sa{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,p,_=50){var S=this;return(0,v.Z)(function*(){const R=typeof MessageChannel<"u"?new MessageChannel:null;if(!R)throw new Error("connection_unavailable");let z,se;return new Promise((Pe,et)=>{const wt=Fs("",20);R.port1.start();const ut=setTimeout(()=>{et(new Error("unsupported_event"))},_);se={messageChannel:R,onMessage(tr){const Ei=tr;if(Ei.data.eventId===wt)switch(Ei.data.status){case"ack":clearTimeout(ut),z=setTimeout(()=>{et(new Error("timeout"))},3e3);break;case"done":clearTimeout(z),Pe(Ei.data.response);break;default:clearTimeout(ut),clearTimeout(z),et(new Error("invalid_response"))}}},S.handlers.add(se),R.port1.addEventListener("message",se.onMessage),S.target.postMessage({eventType:h,eventId:wt,data:p},[R.port2])}).finally(()=>{se&&S.removeMessageHandler(se)})})()}}function vn(){return window}function Xi(){return typeof vn().WorkerGlobalScope<"u"&&"function"==typeof vn().importScripts}function bo(){return(bo=(0,v.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const su="firebaseLocalStorageDb",ou=1,ms="firebaseLocalStorage",To="fbase_key";class Co{constructor(h){this.request=h}toPromise(){return new Promise((h,p)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{p(this.request.error)})})}}function ua(m,h){return m.transaction([ms],h?"readwrite":"readonly").objectStore(ms)}function au(){const m=indexedDB.open(su,ou);return new Promise((h,p)=>{m.addEventListener("error",()=>{p(m.error)}),m.addEventListener("upgradeneeded",()=>{const _=m.result;try{_.createObjectStore(ms,{keyPath:To})}catch(S){p(S)}}),m.addEventListener("success",(0,v.Z)(function*(){const _=m.result;_.objectStoreNames.contains(ms)?h(_):(_.close(),yield function ca(){const m=indexedDB.deleteDatabase(su);return new Co(m).toPromise()}(),h(yield au()))}))})}function vr(m,h,p){return la.apply(this,arguments)}function la(){return(la=(0,v.Z)(function*(m,h,p){const _=ua(m,!0).put({[To]:h,value:p});return new Co(_).toPromise()})).apply(this,arguments)}function ys(){return(ys=(0,v.Z)(function*(m,h){const p=ua(m,!1).get(h),_=yield new Co(p).toPromise();return void 0===_?null:_.value})).apply(this,arguments)}function da(m,h){const p=ua(m,!0).delete(h);return new Co(p).toPromise()}const Us=(()=>{class m{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var p=this;return(0,v.Z)(function*(){return p.db||(p.db=yield au()),p.db})()}_withRetries(p){var _=this;return(0,v.Z)(function*(){let S=0;for(;;)try{const R=yield _._openDb();return yield p(R)}catch(R){if(S++>3)throw R;_.db&&(_.db.close(),_.db=void 0)}})()}initializeServiceWorkerMessaging(){var p=this;return(0,v.Z)(function*(){return Xi()?p.initializeReceiver():p.initializeSender()})()}initializeReceiver(){var p=this;return(0,v.Z)(function*(){p.receiver=Qh._getInstance(function aa(){return Xi()?self:null}()),p.receiver._subscribe("keyChanged",function(){var _=(0,v.Z)(function*(S,R){return{keyProcessed:(yield p._poll()).includes(R.key)}});return function(S,R){return _.apply(this,arguments)}}()),p.receiver._subscribe("ping",function(){var _=(0,v.Z)(function*(S,R){return["keyChanged"]});return function(S,R){return _.apply(this,arguments)}}())})()}initializeSender(){var p=this;return(0,v.Z)(function*(){var _,S;if(p.activeServiceWorker=yield function es(){return bo.apply(this,arguments)}(),!p.activeServiceWorker)return;p.sender=new sa(p.activeServiceWorker);const R=yield p.sender._send("ping",{},800);R&&null!==(_=R[0])&&void 0!==_&&_.fulfilled&&null!==(S=R[0])&&void 0!==S&&S.value.includes("keyChanged")&&(p.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(p){var _=this;return(0,v.Z)(function*(){if(_.sender&&_.activeServiceWorker&&function Cc(){var m;return(null===(m=navigator?.serviceWorker)||void 0===m?void 0:m.controller)||null}()===_.activeServiceWorker)try{yield _.sender._send("keyChanged",{key:p},_.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,v.Z)(function*(){try{if(!indexedDB)return!1;const p=yield au();return yield vr(p,ps,"1"),yield da(p,ps),!0}catch{}return!1})()}_withPendingWrite(p){var _=this;return(0,v.Z)(function*(){_.pendingWrites++;try{yield p()}finally{_.pendingWrites--}})()}_set(p,_){var S=this;return(0,v.Z)(function*(){return S._withPendingWrite((0,v.Z)(function*(){return yield S._withRetries(R=>vr(R,p,_)),S.localCache[p]=_,S.notifyServiceWorker(p)}))})()}_get(p){var _=this;return(0,v.Z)(function*(){const S=yield _._withRetries(R=>function So(m,h){return ys.apply(this,arguments)}(R,p));return _.localCache[p]=S,S})()}_remove(p){var _=this;return(0,v.Z)(function*(){return _._withPendingWrite((0,v.Z)(function*(){return yield _._withRetries(S=>da(S,p)),delete _.localCache[p],_.notifyServiceWorker(p)}))})()}_poll(){var p=this;return(0,v.Z)(function*(){const _=yield p._withRetries(z=>{const se=ua(z,!1).getAll();return new Co(se).toPromise()});if(!_)return[];if(0!==p.pendingWrites)return[];const S=[],R=new Set;for(const{fbase_key:z,value:se}of _)R.add(z),JSON.stringify(p.localCache[z])!==JSON.stringify(se)&&(p.notifyListeners(z,se),S.push(z));for(const z of Object.keys(p.localCache))p.localCache[z]&&!R.has(z)&&(p.notifyListeners(z,null),S.push(z));return S})()}notifyListeners(p,_){this.localCache[p]=_;const S=this.listeners[p];if(S)for(const R of Array.from(S))R(_)}startPolling(){var p=this;this.stopPolling(),this.pollTimer=setInterval((0,v.Z)(function*(){return p._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(p,_){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[p]||(this.listeners[p]=new Set,this._get(p)),this.listeners[p].add(_)}_removeListener(p,_){this.listeners[p]&&(this.listeners[p].delete(_),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return m.type="LOCAL",m})();function cu(){return(cu=(0,v.Z)(function*(m){return(yield Pt(m,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Pi(m){return new Promise((h,p)=>{const _=document.createElement("script");_.setAttribute("src",m),_.onload=h,_.onerror=S=>{const R=_e("internal-error");R.customData=S,p(R)},_.type="text/javascript",_.charset="UTF-8",function Vs(){var m,h;return null!==(h=null===(m=document.getElementsByTagName("head"))||void 0===m?void 0:m[0])&&void 0!==h?h:document}().appendChild(_)})}function ld(m){return`__${m}${Math.floor(1e6*Math.random())}`}const _i=1e12;class Yp{constructor(h){this.auth=h,this.counter=_i,this._widgets=new Map}render(h,p){const _=this.counter;return this._widgets.set(_,new dd(h,this.auth.name,p||{})),this.counter++,_}reset(h){var p;const _=h||_i;null===(p=this._widgets.get(_))||void 0===p||p.delete(),this._widgets.delete(_)}getResponse(h){var p;return(null===(p=this._widgets.get(h||_i))||void 0===p?void 0:p.getResponse())||""}execute(h){var p=this;return(0,v.Z)(function*(){var _;return null===(_=p._widgets.get(h||_i))||void 0===_||_.execute(),""})()}}class dd{constructor(h,p,_){this.params=_,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const S="string"==typeof h?document.getElementById(h):h;V(S,"argument-error",{appName:p}),this.container=S,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function du(m){const h=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _=0;_<m;_++)h.push(p.charAt(Math.floor(Math.random()*p.length)));return h.join("")}(50);const{callback:h,"expired-callback":p}=this.params;if(h)try{h(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,p)try{p()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const hd=ld("rcb"),Ac=new ue(3e4,6e4);class ns{constructor(){var h;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(h=vn().grecaptcha)||void 0===h||!h.render)}load(h,p=""){return V(function pa(m){return m.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(m)}(p),h,"argument-error"),this.shouldResolveImmediately(p)?Promise.resolve(vn().grecaptcha):new Promise((_,S)=>{const R=vn().setTimeout(()=>{S(_e(h,"network-request-failed"))},Ac.get());vn()[hd]=()=>{vn().clearTimeout(R),delete vn()[hd];const se=vn().grecaptcha;if(!se)return void S(_e(h,"internal-error"));const Pe=se.render;se.render=(et,wt)=>{const ut=Pe(et,wt);return this.counter++,ut},this.hostLanguage=p,_(se)},Pi(`https://www.google.com/recaptcha/api.js??${(0,O.xO)({onload:hd,render:"explicit",hl:p})}`).catch(()=>{clearTimeout(R),S(_e(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){var p;return!(null===(p=vn().grecaptcha)||void 0===p||!p.render)&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class fu{load(h){return(0,v.Z)(function*(){return new Yp(h)})()}clearedOneInstance(){}}const fd="recaptcha",Jh={theme:"light",type:"image"};class ga{constructor(h,p=Object.assign({},Jh),_){this.parameters=p,this.type=fd,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=En(_),this.isInvisible="invisible"===this.parameters.size,V(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const S="string"==typeof h?document.getElementById(h):h;V(S,this.auth,"argument-error"),this.container=S,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new fu:new ns,this.validateStartingState()}verify(){var h=this;return(0,v.Z)(function*(){h.assertNotDestroyed();const p=yield h.render(),_=h.getAssertedRecaptcha();return _.getResponse(p)||new Promise(R=>{const z=se=>{se&&(h.tokenChangeListeners.delete(z),R(se))};h.tokenChangeListeners.add(z),h.isInvisible&&_.execute(p)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){V(!this.parameters.sitekey,this.auth,"argument-error"),V(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),V(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return p=>{if(this.tokenChangeListeners.forEach(_=>_(p)),"function"==typeof h)h(p);else if("string"==typeof h){const _=vn()[h];"function"==typeof _&&_(p)}}}assertNotDestroyed(){V(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,v.Z)(function*(){if(yield h.init(),!h.widgetId){let p=h.container;if(!h.isInvisible){const _=document.createElement("div");p.appendChild(_),p=_}h.widgetId=h.getAssertedRecaptcha().render(p,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,v.Z)(function*(){V(Pn()&&!Xi(),h.auth,"internal-error"),yield function Xh(){let m=null;return new Promise(h=>{"complete"!==document.readyState?(m=()=>h(),window.addEventListener("load",m)):h()}).catch(h=>{throw m&&window.removeEventListener("load",m),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const p=yield function Oi(m){return cu.apply(this,arguments)}(h.auth);V(p,h.auth,"internal-error"),h.parameters.sitekey=p})()}getAssertedRecaptcha(){return V(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class xc{constructor(h,p){this.verificationId=h,this.onConfirmation=p}confirm(h){const p=vi._fromVerification(this.verificationId,h);return this.onConfirmation(p)}}function Mc(){return(Mc=(0,v.Z)(function*(m,h,p){const _=En(m),S=yield pd(_,h,(0,O.m9)(p));return new xc(S,R=>Dn(_,R))})).apply(this,arguments)}function pu(){return(pu=(0,v.Z)(function*(m,h,p){const _=(0,O.m9)(m);yield Rs(!1,_,"phone");const S=yield pd(_.auth,h,(0,O.m9)(p));return new xc(S,R=>Mn(_,R))})).apply(this,arguments)}function tf(){return(tf=(0,v.Z)(function*(m,h,p){const _=(0,O.m9)(m),S=yield pd(_.auth,h,(0,O.m9)(p));return new xc(S,R=>Ns(_,R))})).apply(this,arguments)}function pd(m,h,p){return nf.apply(this,arguments)}function nf(){return nf=(0,v.Z)(function*(m,h,p){var _;const S=yield p.verify();try{let R;if(V("string"==typeof S,m,"argument-error"),V(p.type===fd,m,"argument-error"),R="string"==typeof h?{phoneNumber:h}:h,"session"in R){const z=R.session;if("phoneNumber"in R)return V("enroll"===z.type,m,"internal-error"),(yield function Yh(m,h){return Pt(m,"POST","/v2/accounts/mfaEnrollment:start",ze(m,h))}(m,{idToken:z.credential,phoneEnrollmentInfo:{phoneNumber:R.phoneNumber,recaptchaToken:S}})).phoneSessionInfo.sessionInfo;{V("signin"===z.type,m,"internal-error");const se=(null===(_=R.multiFactorHint)||void 0===_?void 0:_.uid)||R.multiFactorUid;return V(se,m,"missing-multi-factor-info"),(yield function fa(m,h){return Pt(m,"POST","/v2/accounts/mfaSignIn:start",ze(m,h))}(m,{mfaPendingCredential:z.credential,mfaEnrollmentId:se,phoneSignInInfo:{recaptchaToken:S}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:z}=yield function Kl(m,h){return lo.apply(this,arguments)}(m,{phoneNumber:R.phoneNumber,recaptchaToken:S});return z}}finally{p._reset()}}),nf.apply(this,arguments)}function rf(){return(rf=(0,v.Z)(function*(m,h){yield qa((0,O.m9)(m),h)})).apply(this,arguments)}let Rc=(()=>{class m{constructor(p){this.providerId=m.PROVIDER_ID,this.auth=En(p)}verifyPhoneNumber(p,_){return pd(this.auth,p,(0,O.m9)(_))}static credential(p,_){return vi._fromVerification(p,_)}static credentialFromResult(p){return m.credentialFromTaggedObject(p)}static credentialFromError(p){return m.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{phoneNumber:_,temporaryProof:S}=p;return _&&S?vi._fromTokenResponse(_,S):null}}return m.PROVIDER_ID="phone",m.PHONE_SIGN_IN_METHOD="phone",m})();function dn(m,h){return h?it(h):(V(m._popupRedirectResolver,m,"argument-error"),m._popupRedirectResolver)}class mu extends Ts{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return Zi(h,this._buildIdpRequest())}_linkToIdToken(h,p){return Zi(h,this._buildIdpRequest(p))}_getReauthenticationResolver(h){return Zi(h,this._buildIdpRequest())}_buildIdpRequest(h){const p={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(p.idToken=h),p}}function yu(m){return yo(m.auth,new mu(m),m.bypassAuthState)}function Nc(m){const{auth:h,user:p}=m;return V(p,h,"internal-error"),Ql(p,new mu(m),m.bypassAuthState)}function Gr(m){return ki.apply(this,arguments)}function ki(){return(ki=(0,v.Z)(function*(m){const{auth:h,user:p}=m;return V(p,h,"internal-error"),qa(p,new mu(m),m.bypassAuthState)})).apply(this,arguments)}class vu{constructor(h,p,_,S,R=!1){this.auth=h,this.resolver=_,this.user=S,this.bypassAuthState=R,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(p)?p:[p]}execute(){var h=this;return new Promise(function(){var p=(0,v.Z)(function*(_,S){h.pendingPromise={resolve:_,reject:S};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(R){h.reject(R)}});return function(_,S){return p.apply(this,arguments)}}())}onAuthEvent(h){var p=this;return(0,v.Z)(function*(){const{urlResponse:_,sessionId:S,postBody:R,tenantId:z,error:se,type:Pe}=h;if(se)return void p.reject(se);const et={auth:p.auth,requestUri:_,sessionId:S,tenantId:z||void 0,postBody:R||void 0,user:p.user,bypassAuthState:p.bypassAuthState};try{p.resolve(yield p.getIdpTask(Pe)(et))}catch(wt){p.reject(wt)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return yu;case"linkViaPopup":case"linkViaRedirect":return Gr;case"reauthViaPopup":case"reauthViaRedirect":return Nc;default:Ie(this.auth,"internal-error")}}resolve(h){Ve(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){Ve(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ma=new ue(2e3,1e4);function _u(){return(_u=(0,v.Z)(function*(m,h,p){const _=En(m);Ue(m,h,Yi);const S=dn(_,p);return new _r(_,"signInViaPopup",h,S).executeNotNull()})).apply(this,arguments)}function sf(){return(sf=(0,v.Z)(function*(m,h,p){const _=(0,O.m9)(m);Ue(_.auth,h,Yi);const S=dn(_.auth,p);return new _r(_.auth,"reauthViaPopup",h,S,_).executeNotNull()})).apply(this,arguments)}function Rr(){return(Rr=(0,v.Z)(function*(m,h,p){const _=(0,O.m9)(m);Ue(_.auth,h,Yi);const S=dn(_.auth,p);return new _r(_.auth,"linkViaPopup",h,S,_).executeNotNull()})).apply(this,arguments)}let _r=(()=>{class m extends vu{constructor(p,_,S,R,z){super(p,_,R,z),this.provider=S,this.authWindow=null,this.pollId=null,m.currentPopupAction&&m.currentPopupAction.cancel(),m.currentPopupAction=this}executeNotNull(){var p=this;return(0,v.Z)(function*(){const _=yield p.execute();return V(_,p.auth,"internal-error"),_})()}onExecution(){var p=this;return(0,v.Z)(function*(){Ve(1===p.filter.length,"Popup operations only handle one event");const _=Fs();p.authWindow=yield p.resolver._openPopup(p.auth,p.provider,p.filter[0],_),p.authWindow.associatedEvent=_,p.resolver._originValidation(p.auth).catch(S=>{p.reject(S)}),p.resolver._isIframeWebStorageSupported(p.auth,S=>{S||p.reject(_e(p.auth,"web-storage-unsupported"))}),p.pollUserCancellation()})()}get eventId(){var p;return(null===(p=this.authWindow)||void 0===p?void 0:p.associatedEvent)||null}cancel(){this.reject(_e(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,m.currentPopupAction=null}pollUserCancellation(){const p=()=>{var _,S;this.pollId=null!==(S=null===(_=this.authWindow)||void 0===_?void 0:_.window)&&void 0!==S&&S.closed?window.setTimeout(()=>{this.pollId=null,this.reject(_e(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(p,ma.get())};p()}}return m.currentPopupAction=null,m})();const wi="pendingRedirect",oi=new Map;class rn extends vu{constructor(h,p,_=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],p,void 0,_),this.eventId=null}execute(){var h=()=>super.execute,p=this;return(0,v.Z)(function*(){let _=oi.get(p.auth._key());if(!_){try{const R=(yield function ya(m,h){return tt.apply(this,arguments)}(p.resolver,p.auth))?yield h().call(p):null;_=()=>Promise.resolve(R)}catch(S){_=()=>Promise.reject(S)}oi.set(p.auth._key(),_)}return p.bypassAuthState||oi.set(p.auth._key(),()=>Promise.resolve(null)),_()})()}onAuthEvent(h){var p=()=>super.onAuthEvent,_=this;return(0,v.Z)(function*(){if("signInViaRedirect"===h.type)return p().call(_,h);if("unknown"!==h.type){if(h.eventId){const S=yield _.auth._redirectUserForId(h.eventId);if(S)return _.user=S,p().call(_,h);_.resolve(null)}}else _.resolve(null)})()}onExecution(){return(0,v.Z)(function*(){})()}cleanUp(){}}function tt(){return(tt=(0,v.Z)(function*(m,h){const p=vs(h),_=Vn(m);if(!(yield _._isAvailable()))return!1;const S="true"===(yield _._get(p));return yield _._remove(p),S})).apply(this,arguments)}function Un(m,h){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,v.Z)(function*(m,h){return Vn(m)._set(vs(h),"true")})).apply(this,arguments)}function wu(m,h){oi.set(m._key(),h)}function Vn(m){return it(m._redirectPersistence)}function vs(m){return nn(wi,m.config.apiKey,m.name)}function Xn(m,h,p){return function xo(m,h,p){return E.apply(this,arguments)}(m,h,p)}function E(){return(E=(0,v.Z)(function*(m,h,p){const _=En(m);Ue(m,h,Yi);const S=dn(_,p);return yield Un(S,_),S._openRedirect(_,h,"signInViaRedirect")})).apply(this,arguments)}function T(m,h,p){return function x(m,h,p){return L.apply(this,arguments)}(m,h,p)}function L(){return(L=(0,v.Z)(function*(m,h,p){const _=(0,O.m9)(m);Ue(_.auth,h,Yi);const S=dn(_.auth,p);yield Un(S,_.auth);const R=yield lt(_);return S._openRedirect(_.auth,h,"reauthViaRedirect",R)})).apply(this,arguments)}function Z(m,h,p){return function ie(m,h,p){return we.apply(this,arguments)}(m,h,p)}function we(){return(we=(0,v.Z)(function*(m,h,p){const _=(0,O.m9)(m);Ue(_.auth,h,Yi);const S=dn(_.auth,p);yield Rs(!1,_,h.providerId),yield Un(S,_.auth);const R=yield lt(_);return S._openRedirect(_.auth,h,"linkViaRedirect",R)})).apply(this,arguments)}function ht(){return(ht=(0,v.Z)(function*(m,h){return yield En(m)._initializationPromise,Y(m,h,!1)})).apply(this,arguments)}function Y(m,h){return pt.apply(this,arguments)}function pt(){return(pt=(0,v.Z)(function*(m,h,p=!1){const _=En(m),S=dn(_,h),z=yield new rn(_,S,p).execute();return z&&!p&&(delete z.user._redirectEventId,yield _._persistUserIfCurrent(z.user),yield _._setRedirectUser(null,h)),z})).apply(this,arguments)}function lt(m){return hn.apply(this,arguments)}function hn(){return(hn=(0,v.Z)(function*(m){const h=Fs(`${m.uid}:::`);return m._redirectEventId=h,yield m.auth._setRedirectUser(m),yield m.auth._persistUserIfCurrent(m),h})).apply(this,arguments)}class va{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let p=!1;return this.consumers.forEach(_=>{this.isEventForConsumer(h,_)&&(p=!0,this.sendToConsumer(h,_),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function Oc(m){switch(m.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ze(m);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,p||(this.queuedRedirectEvent=h,p=!0)),p}sendToConsumer(h,p){var _;if(h.error&&!Ze(h)){const S=(null===(_=h.error.code)||void 0===_?void 0:_.split("auth/")[1])||"internal-error";p.onError(_e(this.auth,S))}else p.onAuthEvent(h)}isEventForConsumer(h,p){const _=null===p.eventId||!!h.eventId&&h.eventId===p.eventId;return p.filter.includes(h.type)&&_}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(qr(h))}saveEventToCache(h){this.cachedEventUids.add(qr(h)),this.lastProcessedEventTime=Date.now()}}function qr(m){return[m.type,m.eventId,m.sessionId,m.tenantId].filter(h=>h).join("-")}function Ze({type:m,error:h}){return"unknown"===m&&"auth/no-auth-event"===h?.code}function _t(m){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,v.Z)(function*(m,h={}){return Pt(m,"GET","/v1/projects",h)})).apply(this,arguments)}const Li=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Fi=/^https?/;function gd(){return(gd=(0,v.Z)(function*(m){if(m.config.emulator)return;const{authorizedDomains:h}=yield _t(m);for(const p of h)try{if(Xp(p))return}catch{}Ie(m,"unauthorized-domain")})).apply(this,arguments)}function Xp(m){const h=Zn(),{protocol:p,hostname:_}=new URL(h);if(m.startsWith("chrome-extension://")){const z=new URL(m);return""===z.hostname&&""===_?"chrome-extension:"===p&&m.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===p&&z.hostname===_}if(!Fi.test(p))return!1;if(Li.test(m))return _===m;const S=m.replace(/\./g,"\\.");return new RegExp("^(.+\\."+S+"|"+S+")$","i").test(_)}const Y_=new ue(3e4,6e4);function eg(){const m=vn().___jsl;if(m?.H)for(const h of Object.keys(m.H))if(m.H[h].r=m.H[h].r||[],m.H[h].L=m.H[h].L||[],m.H[h].r=[...m.H[h].L],m.CP)for(let p=0;p<m.CP.length;p++)m.CP[p]=null}let Bs=null;const _a=new ue(5e3,15e3),af="__/auth/iframe",Q_="emulator/auth/iframe",ty={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ny=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function J_(m){const h=m.config;V(h.authDomain,m,"auth-domain-config-required");const p=h.emulator?ee(h,Q_):`https://${m.config.authDomain}/${af}`,_={apiKey:h.apiKey,appName:m.name,v:oe.SDK_VERSION},S=ny.get(m.config.apiHost);S&&(_.eid=S);const R=m._getFrameworks();return R.length&&(_.fw=R.join(",")),`${p}?${(0,O.xO)(_).slice(1)}`}function kc(){return kc=(0,v.Z)(function*(m){const h=yield function Nr(m){return Bs=Bs||function wr(m){return new Promise((h,p)=>{var _,S,R;function z(){eg(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{eg(),p(_e(m,"network-request-failed"))},timeout:Y_.get()})}if(null!==(S=null===(_=vn().gapi)||void 0===_?void 0:_.iframes)&&void 0!==S&&S.Iframe)h(gapi.iframes.getContext());else{if(null===(R=vn().gapi)||void 0===R||!R.load){const se=ld("iframefcb");return vn()[se]=()=>{gapi.load?z():p(_e(m,"network-request-failed"))},Pi(`https://apis.google.com/js/api.js?onload=${se}`).catch(Pe=>p(Pe))}z()}}).catch(h=>{throw Bs=null,h})}(m),Bs}(m),p=vn().gapi;return V(p,m,"internal-error"),h.open({where:document.body,url:J_(m),messageHandlersFilter:p.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ty,dontclear:!0},_=>new Promise(function(){var S=(0,v.Z)(function*(R,z){yield _.restyle({setHideOnLeave:!1});const se=_e(m,"network-request-failed"),Pe=vn().setTimeout(()=>{z(se)},_a.get());function et(){vn().clearTimeout(Pe),R(_)}_.ping(et).then(et,()=>{z(se)})});return function(R,z){return S.apply(this,arguments)}}()))}),kc.apply(this,arguments)}const Lc={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},md=500,Or=600,yd="_blank",Pr="http://localhost";class Ui{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const ng="__/auth/handler",cf="emulator/auth/handler";function Iu(m,h,p,_,S,R){V(m.config.authDomain,m,"auth-domain-config-required"),V(m.config.apiKey,m,"invalid-api-key");const z={apiKey:m.config.apiKey,appName:m.name,authType:p,redirectUrl:_,v:oe.SDK_VERSION,eventId:S};if(h instanceof Yi){h.setDefaultLanguage(m.languageCode),z.providerId=h.providerId||"",(0,O.xb)(h.getCustomParameters())||(z.customParameters=JSON.stringify(h.getCustomParameters()));for(const[Pe,et]of Object.entries(R||{}))z[Pe]=et}if(h instanceof ho){const Pe=h.getScopes().filter(et=>""!==et);Pe.length>0&&(z.scopes=Pe.join(","))}m.tenantId&&(z.tid=m.tenantId);const se=z;for(const Pe of Object.keys(se))void 0===se[Pe]&&delete se[Pe];return`${function lf({config:m}){return m.emulator?ee(m,cf):`https://${m.authDomain}/${ng}`}(m)}?${(0,O.xO)(se).slice(1)}`}const df="webStorageSupport",Mo=class iy{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ls,this._completeRedirectFn=Y,this._overrideRedirectResult=wu}_openPopup(h,p,_,S){var R=this;return(0,v.Z)(function*(){var z;Ve(null===(z=R.eventManagers[h._key()])||void 0===z?void 0:z.manager,"_initialize() not called before _openPopup()");const se=Iu(h,p,_,Zn(),S);return function tg(m,h,p,_=md,S=Or){const R=Math.max((window.screen.availHeight-S)/2,0).toString(),z=Math.max((window.screen.availWidth-_)/2,0).toString();let se="";const Pe=Object.assign(Object.assign({},Lc),{width:_.toString(),height:S.toString(),top:R,left:z}),et=(0,O.z$)().toLowerCase();p&&(se=ls(et)?yd:p),Qn(et)&&(h=h||Pr,Pe.scrollbars="yes");const wt=Object.entries(Pe).reduce((tr,[Ei,Ca])=>`${tr}${Ei}=${Ca},`,"");if(function io(m=(0,O.z$)()){var h;return xi(m)&&!(null===(h=window.navigator)||void 0===h||!h.standalone)}(et)&&"_self"!==se)return function uf(m,h){const p=document.createElement("a");p.href=m,p.target=h;const _=document.createEvent("MouseEvent");_.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),p.dispatchEvent(_)}(h||"",se),new Ui(null);const ut=window.open(h||"",se,wt);V(ut,m,"popup-blocked");try{ut.focus()}catch{}return new Ui(ut)}(h,se,Fs())})()}_openRedirect(h,p,_,S){var R=this;return(0,v.Z)(function*(){return yield R._originValidation(h),function oa(m){vn().location.href=m}(Iu(h,p,_,Zn(),S)),new Promise(()=>{})})()}_initialize(h){const p=h._key();if(this.eventManagers[p]){const{manager:S,promise:R}=this.eventManagers[p];return S?Promise.resolve(S):(Ve(R,"If manager is not set, promise should be"),R)}const _=this.initAndGetManager(h);return this.eventManagers[p]={promise:_},_.catch(()=>{delete this.eventManagers[p]}),_}initAndGetManager(h){var p=this;return(0,v.Z)(function*(){const _=yield function ry(m){return kc.apply(this,arguments)}(h),S=new va(h);return _.register("authEvent",R=>(V(R?.authEvent,h,"invalid-auth-event"),{status:S.onEvent(R.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),p.eventManagers[h._key()]={manager:S},p.iframes[h._key()]=_,S})()}_isIframeWebStorageSupported(h,p){this.iframes[h._key()].send(df,{type:df},S=>{var R;const z=null===(R=S?.[0])||void 0===R?void 0:R[df];void 0!==z&&p(!!z),Ie(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function Pc(m){return gd.apply(this,arguments)}(h)),this.originValidationPromises[p]}get _shouldInitProactively(){return $h()||Bt()||xi()}};class rg{constructor(h){this.factorId=h}_process(h,p,_){switch(p.type){case"enroll":return this._finalizeEnroll(h,p.credential,_);case"signin":return this._finalizeSignIn(h,p.credential);default:return ve("unexpected MultiFactorSessionType")}}}class Fc extends rg{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new Fc(h)}_finalizeEnroll(h,p,_){return function Kp(m,h){return Pt(m,"POST","/v2/accounts/mfaEnrollment:finalize",ze(m,h))}(h,{idToken:p,displayName:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,p){return function cd(m,h){return Pt(m,"POST","/v2/accounts/mfaSignIn:finalize",ze(m,h))}(h,{mfaPendingCredential:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Zr=(()=>{class m{constructor(){}static assertion(p){return Fc._fromCredential(p)}}return m.FACTOR_ID="phone",m})();var vd="@firebase/auth";class Eu{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var p=this;return(0,v.Z)(function*(){return p.assertAuthConfigured(),yield p.auth._initializationPromise,p.auth.currentUser?{accessToken:yield p.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const p=this.auth.onIdTokenChanged(_=>{var S;h((null===(S=_)||void 0===S?void 0:S.stsTokenManager.accessToken)||null)});this.internalListeners.set(h,p),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const p=this.internalListeners.get(h);p&&(this.internalListeners.delete(h),p(),this.updateProactiveRefresh())}assertAuthConfigured(){V(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Ro(){return window}!function wa(m){(0,oe._registerComponent)(new ge.wA("auth",(h,{options:p})=>{const _=h.getProvider("app").getImmediate(),S=h.getProvider("heartbeat"),{apiKey:R,authDomain:z}=_.options;return((se,Pe)=>{V(R&&!R.includes(":"),"invalid-api-key",{appName:se.name}),V(!z?.includes(":"),"argument-error",{appName:se.name});const et={apiKey:R,authDomain:z,clientPlatform:m,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:so(m)},wt=new ql(se,Pe,et);return function an(m,h){const p=h?.persistence||[],_=(Array.isArray(p)?p:[p]).map(it);h?.errorMap&&m._updateErrorMap(h.errorMap),m._initializeWithPersistence(_,h?.popupRedirectResolver)}(wt,p),wt})(_,S)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,p,_)=>{h.getProvider("auth-internal").initialize()})),(0,oe._registerComponent)(new ge.wA("auth-internal",h=>{const p=En(h.getProvider("auth").getImmediate());return new Eu(p)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,oe.registerVersion)(vd,"0.20.5",function dr(m){switch(m){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(m)),(0,oe.registerVersion)(vd,"0.20.5","esm2017")}("Browser");const sy=2e3;function Id(){return Id=(0,v.Z)(function*(m,h,p){var _;const{BuildInfo:S}=Ro();Ve(h.sessionId,"AuthEvent did not contain a session ID");const R=yield function gf(m){return mf.apply(this,arguments)}(h.sessionId),z={};return xi()?z.ibi=S.packageName:Ai()?z.apn=S.packageName:Ie(m,"operation-not-supported-in-this-environment"),S.displayName&&(z.appDisplayName=S.displayName),z.sessionId=R,Iu(m,p,h.type,void 0,null!==(_=h.eventId)&&void 0!==_?_:void 0,z)}),Id.apply(this,arguments)}function ff(){return(ff=(0,v.Z)(function*(m){const{BuildInfo:h}=Ro(),p={};xi()?p.iosBundleId=h.packageName:Ai()?p.androidPackageName=h.packageName:Ie(m,"operation-not-supported-in-this-environment"),yield _t(m,p)})).apply(this,arguments)}function pf(){return(pf=(0,v.Z)(function*(m,h,p){const{cordova:_}=Ro();let S=()=>{};try{yield new Promise((R,z)=>{let se=null;function Pe(){var ut;R();const tr=null===(ut=_.plugins.browsertab)||void 0===ut?void 0:ut.close;"function"==typeof tr&&tr(),"function"==typeof p?.close&&p.close()}function et(){se||(se=window.setTimeout(()=>{z(_e(m,"redirect-cancelled-by-user"))},sy))}function wt(){"visible"===document?.visibilityState&&et()}h.addPassiveListener(Pe),document.addEventListener("resume",et,!1),Ai()&&document.addEventListener("visibilitychange",wt,!1),S=()=>{h.removePassiveListener(Pe),document.removeEventListener("resume",et,!1),document.removeEventListener("visibilitychange",wt,!1),se&&window.clearTimeout(se)}})}finally{S()}})).apply(this,arguments)}function mf(){return(mf=(0,v.Z)(function*(m){const h=function No(m){if(Ve(/[0-9a-zA-Z]+/.test(m),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(m);const h=new ArrayBuffer(m.length),p=new Uint8Array(h);for(let _=0;_<m.length;_++)p[_]=m.charCodeAt(_);return p}(m),p=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(p)).map(S=>S.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}const Ed=20;class yf extends va{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(p=>p(h)),super.onEvent(h)}initialized(){var h=this;return(0,v.Z)(function*(){yield h.initPromise})()}}function jc(m){return js.apply(this,arguments)}function js(){return(js=(0,v.Z)(function*(m){const h=yield bd()._get(Du(m));return h&&(yield bd()._remove(Du(m))),h})).apply(this,arguments)}function sg(){const m=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<Ed;p++){const _=Math.floor(Math.random()*h.length);m.push(h.charAt(_))}return m.join("")}function bd(){return it(iu)}function Du(m){return nn("authEvent",m.config.apiKey,m.name)}function Td(m){if(!m?.includes("?"))return{};const[h,...p]=m.split("?");return(0,O.zd)(p.join("?"))}const If=class wf{constructor(){this._redirectPersistence=Ls,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Y,this._overrideRedirectResult=wu}_initialize(h){var p=this;return(0,v.Z)(function*(){const _=h._key();let S=p.eventManagers.get(_);return S||(S=new yf(h),p.eventManagers.set(_,S),p.attachCallbackListeners(h,S)),S})()}_openPopup(h){Ie(h,"operation-not-supported-in-this-environment")}_openRedirect(h,p,_,S){var R=this;return(0,v.Z)(function*(){!function Ia(m){var h,p,_,S,R,z,se,Pe,et,wt;const ut=Ro();V("function"==typeof(null===(h=ut?.universalLinks)||void 0===h?void 0:h.subscribe),m,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),V(typeof(null===(p=ut?.BuildInfo)||void 0===p?void 0:p.packageName)<"u",m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),V("function"==typeof(null===(R=null===(S=null===(_=ut?.cordova)||void 0===_?void 0:_.plugins)||void 0===S?void 0:S.browsertab)||void 0===R?void 0:R.openUrl),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),V("function"==typeof(null===(Pe=null===(se=null===(z=ut?.cordova)||void 0===z?void 0:z.plugins)||void 0===se?void 0:se.browsertab)||void 0===Pe?void 0:Pe.isAvailable),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),V("function"==typeof(null===(wt=null===(et=ut?.cordova)||void 0===et?void 0:et.InAppBrowser)||void 0===wt?void 0:wt.open),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const z=yield R._initialize(h);yield z.initialized(),z.resetRedirect(),function Jp(){oi.clear()}(),yield R._originValidation(h);const se=function Vc(m,h,p=null){return{type:h,eventId:p,urlResponse:null,sessionId:sg(),postBody:null,tenantId:m.tenantId,error:_e(m,"no-auth-event")}}(h,_,S);yield function Bc(m,h){return bd()._set(Du(m),h)}(h,se);const Pe=yield function wd(m,h,p){return Id.apply(this,arguments)}(h,se,p),et=yield function Ir(m){const{cordova:h}=Ro();return new Promise(p=>{h.plugins.browsertab.isAvailable(_=>{let S=null;_?h.plugins.browsertab.openUrl(m):S=h.InAppBrowser.open(m,function zp(m=(0,O.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(m)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(m)}()?"_blank":"_system","location=yes"),p(S)})})}(Pe);return function Uc(m,h,p){return pf.apply(this,arguments)}(h,z,et)})()}_isIframeWebStorageSupported(h,p){throw new Error("Method not implemented.")}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function ig(m){return ff.apply(this,arguments)}(h)),this.originValidationPromises[p]}attachCallbackListeners(h,p){const{universalLinks:_,handleOpenURL:S,BuildInfo:R}=Ro(),z=setTimeout((0,v.Z)(function*(){yield jc(h),p.onEvent(Wn())}),500),se=function(){var wt=(0,v.Z)(function*(ut){clearTimeout(z);const tr=yield jc(h);let Ei=null;tr&&ut?.url&&(Ei=function Dd(m,h){var p,_;const S=function og(m){const h=Td(m),p=h.link?decodeURIComponent(h.link):void 0,_=Td(p).link,S=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return Td(S).link||S||_||p||m}(h);if(S.includes("/__/auth/callback")){const R=Td(S),z=R.firebaseError?function vf(m){try{return JSON.parse(m)}catch{return null}}(decodeURIComponent(R.firebaseError)):null,se=null===(_=null===(p=z?.code)||void 0===p?void 0:p.split("auth/"))||void 0===_?void 0:_[1],Pe=se?_e(se):null;return Pe?{type:m.type,eventId:m.eventId,tenantId:m.tenantId,error:Pe,urlResponse:null,sessionId:null,postBody:null}:{type:m.type,eventId:m.eventId,tenantId:m.tenantId,sessionId:m.sessionId,urlResponse:S,postBody:null}}return null}(tr,ut.url)),p.onEvent(Ei||Wn())});return function(tr){return wt.apply(this,arguments)}}();typeof _<"u"&&"function"==typeof _.subscribe&&_.subscribe(null,se);const Pe=S,et=`${R.packageName.toLowerCase()}://`;Ro().handleOpenURL=function(){var wt=(0,v.Z)(function*(ut){if(ut.toLowerCase().startsWith(et)&&se({url:ut}),"function"==typeof Pe)try{Pe(ut)}catch(tr){console.error(tr)}});return function(ut){return wt.apply(this,arguments)}}()}};function Wn(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:_e("no-auth-event")}}const oy=1e3;function zc(){var m;return(null===(m=self?.location)||void 0===m?void 0:m.protocol)||null}function Df(m=(0,O.z$)()){return!("file:"!==zc()&&"ionic:"!==zc()&&"capacitor:"!==zc()||!m.toLowerCase().match(/iphone|ipad|ipod|android/))}function bf(){try{const m=self.localStorage,h=Fs();if(m)return m.setItem(h,"1"),m.removeItem(h),!function ay(m=(0,O.z$)()){return function Cd(){return(0,O.w1)()&&11===document?.documentMode}()||function Sd(m=(0,O.z$)()){return/Edge\/\d+/.test(m)}(m)}()||(0,O.hl)()}catch{return Da()&&(0,O.hl)()}return!1}function Da(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Tf(){return(function Ef(){return"http:"===zc()||"https:"===zc()}()||(0,O.ru)()||Df())&&!function Ea(){return(0,O.b$)()||(0,O.UG)()}()&&bf()&&!Da()}function bu(){return Df()&&typeof document<"u"}function Tu(){return(Tu=(0,v.Z)(function*(){return!!bu()&&new Promise(m=>{const h=setTimeout(()=>{m(!1)},oy);document.addEventListener("deviceready",()=>{clearTimeout(h),m(!0)})})})).apply(this,arguments)}const ai={LOCAL:"local",NONE:"none",SESSION:"session"},Vi=V,Cu="persistence";function Su(m){return Oo.apply(this,arguments)}function Oo(){return(Oo=(0,v.Z)(function*(m){yield m._initializationPromise;const h=Au(),p=nn(Cu,m.config.apiKey,m.name);h&&h.setItem(p,m._getPersistence())})).apply(this,arguments)}function Au(){var m;try{return(null===(m=function xd(){return typeof window<"u"?window:null}())||void 0===m?void 0:m.sessionStorage)||null}catch{return null}}const xu=V;class $s{constructor(){this.browserResolver=it(Mo),this.cordovaResolver=it(If),this.underlyingResolver=null,this._redirectPersistence=Ls,this._completeRedirectFn=Y,this._overrideRedirectResult=wu}_initialize(h){var p=this;return(0,v.Z)(function*(){return yield p.selectUnderlyingResolver(),p.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,p,_,S){var R=this;return(0,v.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openPopup(h,p,_,S)})()}_openRedirect(h,p,_,S){var R=this;return(0,v.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openRedirect(h,p,_,S)})()}_isIframeWebStorageSupported(h,p){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,p)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return bu()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return xu(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,v.Z)(function*(){if(h.underlyingResolver)return;const p=yield function Ad(){return Tu.apply(this,arguments)}();h.underlyingResolver=p?h.cordovaResolver:h.browserResolver})()}}function ag(m){return m.unwrap()}function ug(m){return Md(m)}function Md(m){const{_tokenResponse:h}=m instanceof O.ZR?m.customData:m;if(!h)return null;if(!(m instanceof O.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return Rc.credentialFromResult(m);const p=h.providerId;if(!p||p===he.PASSWORD)return null;let _;switch(p){case he.GOOGLE:_=zh;break;case he.FACEBOOK:_=dc;break;case he.GITHUB:_=Gh;break;case he.TWITTER:_=Wp;break;default:const{oauthIdToken:S,oauthAccessToken:R,oauthTokenSecret:z,pendingToken:se,nonce:Pe}=h;return R||z||S||se?se?p.startsWith("saml.")?fo._create(p,se):ii._fromParams({providerId:p,signInMethod:p,pendingToken:se,idToken:S,accessToken:R}):new Zo(p).credential({idToken:S,accessToken:R,rawNonce:Pe}):null}return m instanceof O.ZR?_.credentialFromError(m):_.credentialFromResult(m)}function Bn(m,h){return h.catch(p=>{throw p instanceof O.ZR&&function Gc(m,h){var p,_;const S=null===(p=h.customData)||void 0===p?void 0:p._tokenResponse;if("auth/multi-factor-auth-required"===(null===(_=h)||void 0===_?void 0:_.code))h.resolver=new cg(m,function lr(m,h){var p;const _=(0,O.m9)(m),S=h;return V(h.customData.operationType,_,"argument-error"),V(null===(p=S.customData._serverResponse)||void 0===p?void 0:p.mfaPendingCredential,_,"argument-error"),bc._fromError(_,S)}(m,h));else if(S){const R=Md(h),z=h;R&&(z.credential=R,z.tenantId=S.tenantId||void 0,z.email=S.email||void 0,z.phoneNumber=S.phoneNumber||void 0)}}(m,p),p}).then(p=>{const S=p.user;return{operationType:p.operationType,credential:ug(p),additionalUserInfo:Zh(p),user:Ii.getOrCreate(S)}})}function Mu(m,h){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,v.Z)(function*(m,h){const p=yield h;return{verificationId:p.verificationId,confirm:_=>Bn(m,p.confirm(_))}})).apply(this,arguments)}class cg{constructor(h,p){this.resolver=p,this.auth=function ba(m){return m.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return Bn(ag(this.auth),this.resolver.resolveSignIn(h))}}class Ii{constructor(h){this._delegate=h,this.multiFactor=function Tc(m){const h=(0,O.m9)(m);return ks.has(h)||ks.set(h,na._fromUser(h)),ks.get(h)}(h)}static getOrCreate(h){return Ii.USER_MAP.has(h)||Ii.USER_MAP.set(h,new Ii(h)),Ii.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var p=this;return(0,v.Z)(function*(){return Bn(p.auth,Mn(p._delegate,h))})()}linkWithPhoneNumber(h,p){var _=this;return(0,v.Z)(function*(){return Mu(_.auth,function Qp(m,h,p){return pu.apply(this,arguments)}(_._delegate,h,p))})()}linkWithPopup(h){var p=this;return(0,v.Z)(function*(){return Bn(p.auth,function ey(m,h,p){return Rr.apply(this,arguments)}(p._delegate,h,$s))})()}linkWithRedirect(h){var p=this;return(0,v.Z)(function*(){return yield Su(En(p.auth)),Z(p._delegate,h,$s)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var p=this;return(0,v.Z)(function*(){return Bn(p.auth,Ns(p._delegate,h))})()}reauthenticateWithPhoneNumber(h,p){return Mu(this.auth,function ef(m,h,p){return tf.apply(this,arguments)}(this._delegate,h,p))}reauthenticateWithPopup(h){return Bn(this.auth,function Z_(m,h,p){return sf.apply(this,arguments)}(this._delegate,h,$s))}reauthenticateWithRedirect(h){var p=this;return(0,v.Z)(function*(){return yield Su(En(p.auth)),T(p._delegate,h,$s)})()}sendEmailVerification(h){return function ed(m,h){return wc.apply(this,arguments)}(this._delegate,h)}unlink(h){var p=this;return(0,v.Z)(function*(){return yield function Wa(m,h){return po.apply(this,arguments)}(p._delegate,h),p})()}updateEmail(h){return function td(m,h){return nd((0,O.m9)(m),h,null)}(this._delegate,h)}updatePassword(h){return function ta(m,h){return nd((0,O.m9)(m),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function gu(m,h){return rf.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function Ps(m,h){return Ni.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,p){return function nu(m,h,p){return Gn.apply(this,arguments)}(this._delegate,h,p)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ii.USER_MAP=new WeakMap;const Ta=V;let Af=(()=>{class m{constructor(p,_){if(this.app=p,_.isInitialized())return this._delegate=_.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:S}=p.options;Ta(S,"invalid-api-key",{appName:p.name}),Ta(S,"invalid-api-key",{appName:p.name});const R=typeof window<"u"?$s:void 0;this._delegate=_.initialize({options:{persistence:lg(S,p.name),popupRedirectResolver:R}}),this._delegate._updateErrorMap($e),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ii.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(p){this._delegate.languageCode=p}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(p){this._delegate.tenantId=p}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(p,_){!function Yt(m,h,p){const _=En(m);V(_._canInitEmulator,_,"emulator-config-failed"),V(/^https?:\/\//.test(h),_,"invalid-emulator-scheme");const S=!!p?.disableWarnings,R=kn(h),{host:z,port:se}=function Jn(m){const h=kn(m),p=/(\/\/)?([^?#/]+)/.exec(m.substr(h.length));if(!p)return{host:"",port:null};const _=p[2].split("@").pop()||"",S=/^(\[[^\]]+\])(:|$)/.exec(_);if(S){const R=S[1];return{host:R,port:qi(_.substr(R.length+1))}}{const[R,z]=_.split(":");return{host:R,port:qi(z)}}}(h);_.config.emulator={url:`${R}//${z}${null===se?"":`:${se}`}/`},_.settings.appVerificationDisabledForTesting=!0,_.emulatorConfig=Object.freeze({host:z,port:se,protocol:R.replace(":",""),options:Object.freeze({disableWarnings:S})}),S||function pr(){function m(){const h=document.createElement("p"),p=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",p.position="fixed",p.width="100%",p.backgroundColor="#ffffff",p.border=".1em solid #000000",p.color="#b50000",p.bottom="0px",p.left="0px",p.margin="0px",p.zIndex="10000",p.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",m):m())}()}(this._delegate,p,_)}applyActionCode(p){return function Ya(m,h){return Jl.apply(this,arguments)}(this._delegate,p)}checkActionCode(p){return Qa(this._delegate,p)}confirmPasswordReset(p,_){return function Xo(m,h,p){return It.apply(this,arguments)}(this._delegate,p,_)}createUserWithEmailAndPassword(p,_){var S=this;return(0,v.Z)(function*(){return Bn(S._delegate,function qh(m,h,p){return vc.apply(this,arguments)}(S._delegate,p,_))})()}fetchProvidersForEmail(p){return this.fetchSignInMethodsForEmail(p)}fetchSignInMethodsForEmail(p){return function eu(m,h){return tu.apply(this,arguments)}(this._delegate,p)}isSignInWithEmailLink(p){return function Xl(m,h){return"EMAIL_SIGNIN"===Ko.parseLink(h)?.operation}(0,p)}getRedirectResult(){var p=this;return(0,v.Z)(function*(){Ta(Tf(),p._delegate,"operation-not-supported-in-this-environment");const _=yield function qe(m,h){return ht.apply(this,arguments)}(p._delegate,$s);return _?Bn(p._delegate,Promise.resolve(_)):{credential:null,user:null}})()}addFrameworkForLogging(p){!function er(m,h){En(m)._logFramework(h)}(this._delegate,p)}onAuthStateChanged(p,_,S){const{next:R,error:z,complete:se}=Ru(p,_,S);return this._delegate.onAuthStateChanged(R,z,se)}onIdTokenChanged(p,_,S){const{next:R,error:z,complete:se}=Ru(p,_,S);return this._delegate.onIdTokenChanged(R,z,se)}sendSignInLinkToEmail(p,_){return function zt(m,h,p){return _c.apply(this,arguments)}(this._delegate,p,_)}sendPasswordResetEmail(p,_){return function Qi(m,h,p){return Jo.apply(this,arguments)}(this._delegate,p,_||void 0)}setPersistence(p){var _=this;return(0,v.Z)(function*(){let S;switch(function Cf(m,h){Vi(Object.values(ai).includes(h),m,"invalid-persistence-type"),(0,O.b$)()?Vi(h!==ai.SESSION,m,"unsupported-persistence-type"):(0,O.UG)()?Vi(h===ai.NONE,m,"unsupported-persistence-type"):Da()?Vi(h===ai.NONE||h===ai.LOCAL&&(0,O.hl)(),m,"unsupported-persistence-type"):Vi(h===ai.NONE||bf(),m,"unsupported-persistence-type")}(_._delegate,p),p){case ai.SESSION:S=Ls;break;case ai.LOCAL:S=(yield it(Us)._isAvailable())?Us:iu;break;case ai.NONE:S=Jt;break;default:return Ie("argument-error",{appName:_._delegate.name})}return _._delegate.setPersistence(S)})()}signInAndRetrieveDataWithCredential(p){return this.signInWithCredential(p)}signInAnonymously(){return Bn(this._delegate,function Yl(m){return Wh.apply(this,arguments)}(this._delegate))}signInWithCredential(p){return Bn(this._delegate,Dn(this._delegate,p))}signInWithCustomToken(p){return Bn(this._delegate,function Os(m,h){return zn.apply(this,arguments)}(this._delegate,p))}signInWithEmailAndPassword(p,_){return Bn(this._delegate,function me(m,h,p){return Dn((0,O.m9)(m),lc.credential(h,p))}(this._delegate,p,_))}signInWithEmailLink(p,_){return Bn(this._delegate,function cr(m,h,p){return ea.apply(this,arguments)}(this._delegate,p,_))}signInWithPhoneNumber(p,_){return Mu(this._delegate,function Ht(m,h,p){return Mc.apply(this,arguments)}(this._delegate,p,_))}signInWithPopup(p){var _=this;return(0,v.Z)(function*(){return Ta(Tf(),_._delegate,"operation-not-supported-in-this-environment"),Bn(_._delegate,function Ao(m,h,p){return _u.apply(this,arguments)}(_._delegate,p,$s))})()}signInWithRedirect(p){var _=this;return(0,v.Z)(function*(){return Ta(Tf(),_._delegate,"operation-not-supported-in-this-environment"),yield Su(_._delegate),Xn(_._delegate,p,$s)})()}updateCurrentUser(p){return this._delegate.updateCurrentUser(p)}verifyPasswordResetCode(p){return function yc(m,h){return Ja.apply(this,arguments)}(this._delegate,p)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return m.Persistence=ai,m})();function Ru(m,h,p){let _=m;"function"!=typeof m&&({next:_,error:h,complete:p}=m);const S=_;return{next:z=>S(z&&Ii.getOrCreate(z)),error:h,complete:p}}function lg(m,h){const p=function Sf(m,h){const p=Au();if(!p)return[];const _=nn(Cu,m,h);switch(p.getItem(_)){case ai.NONE:return[Jt];case ai.LOCAL:return[Us,Ls];case ai.SESSION:return[Ls];default:return[]}}(m,h);if(typeof self<"u"&&!p.includes(Us)&&p.push(Us),typeof window<"u")for(const _ of[iu,Ls])p.includes(_)||p.push(_);return p.includes(Jt)||p.push(Jt),p}class Wc{constructor(){this.providerId="phone",this._delegate=new Rc(ag(Q.Z.auth()))}static credential(h,p){return Rc.credential(h,p)}verifyPhoneNumber(h,p){return this._delegate.verifyPhoneNumber(h,p)}unwrap(){return this._delegate}}Wc.PHONE_SIGN_IN_METHOD=Rc.PHONE_SIGN_IN_METHOD,Wc.PROVIDER_ID=Rc.PROVIDER_ID;const Po=V;class qc{constructor(h,p,_=Q.Z.app()){var S;Po(null===(S=_.options)||void 0===S?void 0:S.apiKey,"invalid-api-key",{appName:_.name}),this._delegate=new ga(h,p,_.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Nd(m){m.INTERNAL.registerComponent(new ge.wA("auth-compat",h=>{const p=h.getProvider("app-compat").getImmediate(),_=h.getProvider("auth");return new Af(p,_)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:K_EMAIL_SIGNIN,PASSWORD_RESET:K_PASSWORD_RESET,RECOVER_EMAIL:K_RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:K_REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:K_VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:K_VERIFY_EMAIL}},EmailAuthProvider:lc,FacebookAuthProvider:dc,GithubAuthProvider:Gh,GoogleAuthProvider:zh,OAuthProvider:Zo,SAMLAuthProvider:Ri,PhoneAuthProvider:Wc,PhoneMultiFactorGenerator:Zr,RecaptchaVerifier:qc,TwitterAuthProvider:Wp,Auth:Af,AuthCredential:Ts,Error:O.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),m.registerVersion("@firebase/auth-compat","0.2.18")}(Q.Z)},9751:(ot,be,P)=>{P.d(be,{y:()=>fe});var v=P(2961),Q=P(727),O=P(8822),oe=P(9635),te=P(2416),re=P(576),ge=P(2806);let fe=(()=>{class K{constructor(Ee){Ee&&(this._subscribe=Ee)}lift(Ee){const $e=new K;return $e.source=this,$e.operator=Ee,$e}subscribe(Ee,$e,nt){const pe=function B(K){return K&&K instanceof v.Lv||function j(K){return K&&(0,re.m)(K.next)&&(0,re.m)(K.error)&&(0,re.m)(K.complete)}(K)&&(0,Q.Nn)(K)}(Ee)?Ee:new v.Hp(Ee,$e,nt);return(0,ge.x)(()=>{const{operator:Ce,source:De}=this;pe.add(Ce?Ce.call(pe,De):De?this._subscribe(pe):this._trySubscribe(pe))}),pe}_trySubscribe(Ee){try{return this._subscribe(Ee)}catch($e){Ee.error($e)}}forEach(Ee,$e){return new($e=he($e))((nt,pe)=>{const Ce=new v.Hp({next:De=>{try{Ee(De)}catch(Ne){pe(Ne),Ce.unsubscribe()}},error:pe,complete:nt});this.subscribe(Ce)})}_subscribe(Ee){var $e;return null===($e=this.source)||void 0===$e?void 0:$e.subscribe(Ee)}[O.L](){return this}pipe(...Ee){return(0,oe.U)(Ee)(this)}toPromise(Ee){return new(Ee=he(Ee))(($e,nt)=>{let pe;this.subscribe(Ce=>pe=Ce,Ce=>nt(Ce),()=>$e(pe))})}}return K.create=Be=>new K(Be),K})();function he(K){var Be;return null!==(Be=K??te.v.Promise)&&void 0!==Be?Be:Promise}},7579:(ot,be,P)=>{P.d(be,{x:()=>ge});var v=P(9751),Q=P(727);const oe=(0,P(3888).d)(he=>function(){he(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var te=P(8737),re=P(2806);let ge=(()=>{class he extends v.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(B){const K=new fe(this,this);return K.operator=B,K}_throwIfClosed(){if(this.closed)throw new oe}next(B){(0,re.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const K of this.currentObservers)K.next(B)}})}error(B){(0,re.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=B;const{observers:K}=this;for(;K.length;)K.shift().error(B)}})}complete(){(0,re.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:B}=this;for(;B.length;)B.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var B;return(null===(B=this.observers)||void 0===B?void 0:B.length)>0}_trySubscribe(B){return this._throwIfClosed(),super._trySubscribe(B)}_subscribe(B){return this._throwIfClosed(),this._checkFinalizedStatuses(B),this._innerSubscribe(B)}_innerSubscribe(B){const{hasError:K,isStopped:Be,observers:Ee}=this;return K||Be?Q.Lc:(this.currentObservers=null,Ee.push(B),new Q.w0(()=>{this.currentObservers=null,(0,te.P)(Ee,B)}))}_checkFinalizedStatuses(B){const{hasError:K,thrownError:Be,isStopped:Ee}=this;K?B.error(Be):Ee&&B.complete()}asObservable(){const B=new v.y;return B.source=this,B}}return he.create=(j,B)=>new fe(j,B),he})();class fe extends ge{constructor(j,B){super(),this.destination=j,this.source=B}next(j){var B,K;null===(K=null===(B=this.destination)||void 0===B?void 0:B.next)||void 0===K||K.call(B,j)}error(j){var B,K;null===(K=null===(B=this.destination)||void 0===B?void 0:B.error)||void 0===K||K.call(B,j)}complete(){var j,B;null===(B=null===(j=this.destination)||void 0===j?void 0:j.complete)||void 0===B||B.call(j)}_subscribe(j){var B,K;return null!==(K=null===(B=this.source)||void 0===B?void 0:B.subscribe(j))&&void 0!==K?K:Q.Lc}}},2961:(ot,be,P)=>{P.d(be,{Hp:()=>nt,Lv:()=>K});var v=P(576),Q=P(727),O=P(2416),oe=P(7849);function te(){}const re=he("C",void 0,void 0);function he(Ie,_e,Se){return{kind:Ie,value:_e,error:Se}}var j=P(3410),B=P(2806);class K extends Q.w0{constructor(_e){super(),this.isStopped=!1,_e?(this.destination=_e,(0,Q.Nn)(_e)&&_e.add(this)):this.destination=Ne}static create(_e,Se,Ue){return new nt(_e,Se,Ue)}next(_e){this.isStopped?De(function fe(Ie){return he("N",Ie,void 0)}(_e),this):this._next(_e)}error(_e){this.isStopped?De(function ge(Ie){return he("E",void 0,Ie)}(_e),this):(this.isStopped=!0,this._error(_e))}complete(){this.isStopped?De(re,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(_e){this.destination.next(_e)}_error(_e){try{this.destination.error(_e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Be=Function.prototype.bind;function Ee(Ie,_e){return Be.call(Ie,_e)}class $e{constructor(_e){this.partialObserver=_e}next(_e){const{partialObserver:Se}=this;if(Se.next)try{Se.next(_e)}catch(Ue){pe(Ue)}}error(_e){const{partialObserver:Se}=this;if(Se.error)try{Se.error(_e)}catch(Ue){pe(Ue)}else pe(_e)}complete(){const{partialObserver:_e}=this;if(_e.complete)try{_e.complete()}catch(Se){pe(Se)}}}class nt extends K{constructor(_e,Se,Ue){let Me;if(super(),(0,v.m)(_e)||!_e)Me={next:_e??void 0,error:Se??void 0,complete:Ue??void 0};else{let V;this&&O.v.useDeprecatedNextContext?(V=Object.create(_e),V.unsubscribe=()=>this.unsubscribe(),Me={next:_e.next&&Ee(_e.next,V),error:_e.error&&Ee(_e.error,V),complete:_e.complete&&Ee(_e.complete,V)}):Me=_e}this.destination=new $e(Me)}}function pe(Ie){O.v.useDeprecatedSynchronousErrorHandling?(0,B.O)(Ie):(0,oe.h)(Ie)}function De(Ie,_e){const{onStoppedNotification:Se}=O.v;Se&&j.z.setTimeout(()=>Se(Ie,_e))}const Ne={closed:!0,next:te,error:function Ce(Ie){throw Ie},complete:te}},727:(ot,be,P)=>{P.d(be,{Lc:()=>re,w0:()=>te,Nn:()=>ge});var v=P(576);const O=(0,P(3888).d)(he=>function(B){he(this),this.message=B?`${B.length} errors occurred during unsubscription:\n${B.map((K,Be)=>`${Be+1}) ${K.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=B});var oe=P(8737);class te{constructor(j){this.initialTeardown=j,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let j;if(!this.closed){this.closed=!0;const{_parentage:B}=this;if(B)if(this._parentage=null,Array.isArray(B))for(const Ee of B)Ee.remove(this);else B.remove(this);const{initialTeardown:K}=this;if((0,v.m)(K))try{K()}catch(Ee){j=Ee instanceof O?Ee.errors:[Ee]}const{_finalizers:Be}=this;if(Be){this._finalizers=null;for(const Ee of Be)try{fe(Ee)}catch($e){j=j??[],$e instanceof O?j=[...j,...$e.errors]:j.push($e)}}if(j)throw new O(j)}}add(j){var B;if(j&&j!==this)if(this.closed)fe(j);else{if(j instanceof te){if(j.closed||j._hasParent(this))return;j._addParent(this)}(this._finalizers=null!==(B=this._finalizers)&&void 0!==B?B:[]).push(j)}}_hasParent(j){const{_parentage:B}=this;return B===j||Array.isArray(B)&&B.includes(j)}_addParent(j){const{_parentage:B}=this;this._parentage=Array.isArray(B)?(B.push(j),B):B?[B,j]:j}_removeParent(j){const{_parentage:B}=this;B===j?this._parentage=null:Array.isArray(B)&&(0,oe.P)(B,j)}remove(j){const{_finalizers:B}=this;B&&(0,oe.P)(B,j),j instanceof te&&j._removeParent(this)}}te.EMPTY=(()=>{const he=new te;return he.closed=!0,he})();const re=te.EMPTY;function ge(he){return he instanceof te||he&&"closed"in he&&(0,v.m)(he.remove)&&(0,v.m)(he.add)&&(0,v.m)(he.unsubscribe)}function fe(he){(0,v.m)(he)?he():he.unsubscribe()}},2416:(ot,be,P)=>{P.d(be,{v:()=>v});const v={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(ot,be,P)=>{P.d(be,{E:()=>Q});const Q=new(P(9751).y)(te=>te.complete())},8996:(ot,be,P)=>{P.d(be,{D:()=>_e});var v=P(8421),Q=P(5363),O=P(9468),re=P(9751),fe=P(2202),he=P(576),j=P(9672);function K(Se,Ue){if(!Se)throw new Error("Iterable cannot be null");return new re.y(Me=>{(0,j.f)(Me,Ue,()=>{const V=Se[Symbol.asyncIterator]();(0,j.f)(Me,Ue,()=>{V.next().then(ve=>{ve.done?Me.complete():Me.next(ve.value)})},0,!0)})})}var Be=P(3670),Ee=P(8239),$e=P(1144),nt=P(6495),pe=P(2206),Ce=P(4532),De=P(3260);function _e(Se,Ue){return Ue?function Ie(Se,Ue){if(null!=Se){if((0,Be.c)(Se))return function oe(Se,Ue){return(0,v.Xf)(Se).pipe((0,O.R)(Ue),(0,Q.Q)(Ue))}(Se,Ue);if((0,$e.z)(Se))return function ge(Se,Ue){return new re.y(Me=>{let V=0;return Ue.schedule(function(){V===Se.length?Me.complete():(Me.next(Se[V++]),Me.closed||this.schedule())})})}(Se,Ue);if((0,Ee.t)(Se))return function te(Se,Ue){return(0,v.Xf)(Se).pipe((0,O.R)(Ue),(0,Q.Q)(Ue))}(Se,Ue);if((0,pe.D)(Se))return K(Se,Ue);if((0,nt.T)(Se))return function B(Se,Ue){return new re.y(Me=>{let V;return(0,j.f)(Me,Ue,()=>{V=Se[fe.h](),(0,j.f)(Me,Ue,()=>{let ve,Ve;try{({value:ve,done:Ve}=V.next())}catch(We){return void Me.error(We)}Ve?Me.complete():Me.next(ve)},0,!0)}),()=>(0,he.m)(V?.return)&&V.return()})}(Se,Ue);if((0,De.L)(Se))return function Ne(Se,Ue){return K((0,De.Q)(Se),Ue)}(Se,Ue)}throw(0,Ce.z)(Se)}(Se,Ue):(0,v.Xf)(Se)}},8421:(ot,be,P)=>{P.d(be,{Xf:()=>Be});var v=P(7582),Q=P(1144),O=P(8239),oe=P(9751),te=P(3670),re=P(2206),ge=P(4532),fe=P(6495),he=P(3260),j=P(576),B=P(7849),K=P(8822);function Be(Ie){if(Ie instanceof oe.y)return Ie;if(null!=Ie){if((0,te.c)(Ie))return function Ee(Ie){return new oe.y(_e=>{const Se=Ie[K.L]();if((0,j.m)(Se.subscribe))return Se.subscribe(_e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ie);if((0,Q.z)(Ie))return function $e(Ie){return new oe.y(_e=>{for(let Se=0;Se<Ie.length&&!_e.closed;Se++)_e.next(Ie[Se]);_e.complete()})}(Ie);if((0,O.t)(Ie))return function nt(Ie){return new oe.y(_e=>{Ie.then(Se=>{_e.closed||(_e.next(Se),_e.complete())},Se=>_e.error(Se)).then(null,B.h)})}(Ie);if((0,re.D)(Ie))return Ce(Ie);if((0,fe.T)(Ie))return function pe(Ie){return new oe.y(_e=>{for(const Se of Ie)if(_e.next(Se),_e.closed)return;_e.complete()})}(Ie);if((0,he.L)(Ie))return function De(Ie){return Ce((0,he.Q)(Ie))}(Ie)}throw(0,ge.z)(Ie)}function Ce(Ie){return new oe.y(_e=>{(function Ne(Ie,_e){var Se,Ue,Me,V;return(0,v.mG)(this,void 0,void 0,function*(){try{for(Se=(0,v.KL)(Ie);!(Ue=yield Se.next()).done;)if(_e.next(Ue.value),_e.closed)return}catch(ve){Me={error:ve}}finally{try{Ue&&!Ue.done&&(V=Se.return)&&(yield V.call(Se))}finally{if(Me)throw Me.error}}_e.complete()})})(Ie,_e).catch(Se=>_e.error(Se))})}},6451:(ot,be,P)=>{P.d(be,{T:()=>re});var v=P(8189),Q=P(8421),O=P(515),oe=P(7669),te=P(8996);function re(...ge){const fe=(0,oe.yG)(ge),he=(0,oe._6)(ge,1/0),j=ge;return j.length?1===j.length?(0,Q.Xf)(j[0]):(0,v.J)(he)((0,te.D)(j,fe)):O.E}},5403:(ot,be,P)=>{P.d(be,{x:()=>Q});var v=P(2961);function Q(oe,te,re,ge,fe){return new O(oe,te,re,ge,fe)}class O extends v.Lv{constructor(te,re,ge,fe,he,j){super(te),this.onFinalize=he,this.shouldUnsubscribe=j,this._next=re?function(B){try{re(B)}catch(K){te.error(K)}}:super._next,this._error=fe?function(B){try{fe(B)}catch(K){te.error(K)}finally{this.unsubscribe()}}:super._error,this._complete=ge?function(){try{ge()}catch(B){te.error(B)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var te;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:re}=this;super.unsubscribe(),!re&&(null===(te=this.onFinalize)||void 0===te||te.call(this))}}}},4004:(ot,be,P)=>{P.d(be,{U:()=>O});var v=P(4482),Q=P(5403);function O(oe,te){return(0,v.e)((re,ge)=>{let fe=0;re.subscribe((0,Q.x)(ge,he=>{ge.next(oe.call(te,he,fe++))}))})}},8189:(ot,be,P)=>{P.d(be,{J:()=>O});var v=P(5577),Q=P(4671);function O(oe=1/0){return(0,v.z)(Q.y,oe)}},5577:(ot,be,P)=>{P.d(be,{z:()=>fe});var v=P(4004),Q=P(8421),O=P(4482),oe=P(9672),te=P(5403),ge=P(576);function fe(he,j,B=1/0){return(0,ge.m)(j)?fe((K,Be)=>(0,v.U)((Ee,$e)=>j(K,Ee,Be,$e))((0,Q.Xf)(he(K,Be))),B):("number"==typeof j&&(B=j),(0,O.e)((K,Be)=>function re(he,j,B,K,Be,Ee,$e,nt){const pe=[];let Ce=0,De=0,Ne=!1;const Ie=()=>{Ne&&!pe.length&&!Ce&&j.complete()},_e=Ue=>Ce<K?Se(Ue):pe.push(Ue),Se=Ue=>{Ee&&j.next(Ue),Ce++;let Me=!1;(0,Q.Xf)(B(Ue,De++)).subscribe((0,te.x)(j,V=>{Be?.(V),Ee?_e(V):j.next(V)},()=>{Me=!0},void 0,()=>{if(Me)try{for(Ce--;pe.length&&Ce<K;){const V=pe.shift();$e?(0,oe.f)(j,$e,()=>Se(V)):Se(V)}Ie()}catch(V){j.error(V)}}))};return he.subscribe((0,te.x)(j,_e,()=>{Ne=!0,Ie()})),()=>{nt?.()}}(K,Be,he,B)))}},5363:(ot,be,P)=>{P.d(be,{Q:()=>oe});var v=P(9672),Q=P(4482),O=P(5403);function oe(te,re=0){return(0,Q.e)((ge,fe)=>{ge.subscribe((0,O.x)(fe,he=>(0,v.f)(fe,te,()=>fe.next(he),re),()=>(0,v.f)(fe,te,()=>fe.complete(),re),he=>(0,v.f)(fe,te,()=>fe.error(he),re)))})}},3099:(ot,be,P)=>{P.d(be,{B:()=>te});var v=P(8421),Q=P(7579),O=P(2961),oe=P(4482);function te(ge={}){const{connector:fe=(()=>new Q.x),resetOnError:he=!0,resetOnComplete:j=!0,resetOnRefCountZero:B=!0}=ge;return K=>{let Be,Ee,$e,nt=0,pe=!1,Ce=!1;const De=()=>{Ee?.unsubscribe(),Ee=void 0},Ne=()=>{De(),Be=$e=void 0,pe=Ce=!1},Ie=()=>{const _e=Be;Ne(),_e?.unsubscribe()};return(0,oe.e)((_e,Se)=>{nt++,!Ce&&!pe&&De();const Ue=$e=$e??fe();Se.add(()=>{nt--,0===nt&&!Ce&&!pe&&(Ee=re(Ie,B))}),Ue.subscribe(Se),!Be&&nt>0&&(Be=new O.Hp({next:Me=>Ue.next(Me),error:Me=>{Ce=!0,De(),Ee=re(Ne,he,Me),Ue.error(Me)},complete:()=>{pe=!0,De(),Ee=re(Ne,j),Ue.complete()}}),(0,v.Xf)(_e).subscribe(Be))})(K)}}function re(ge,fe,...he){if(!0===fe)return void ge();if(!1===fe)return;const j=new O.Hp({next:()=>{j.unsubscribe(),ge()}});return(0,v.Xf)(fe(...he)).subscribe(j)}},9468:(ot,be,P)=>{P.d(be,{R:()=>Q});var v=P(4482);function Q(O,oe=0){return(0,v.e)((te,re)=>{re.add(O.schedule(()=>te.subscribe(re),oe))})}},8505:(ot,be,P)=>{P.d(be,{b:()=>te});var v=P(576),Q=P(4482),O=P(5403),oe=P(4671);function te(re,ge,fe){const he=(0,v.m)(re)||ge||fe?{next:re,error:ge,complete:fe}:re;return he?(0,Q.e)((j,B)=>{var K;null===(K=he.subscribe)||void 0===K||K.call(he);let Be=!0;j.subscribe((0,O.x)(B,Ee=>{var $e;null===($e=he.next)||void 0===$e||$e.call(he,Ee),B.next(Ee)},()=>{var Ee;Be=!1,null===(Ee=he.complete)||void 0===Ee||Ee.call(he),B.complete()},Ee=>{var $e;Be=!1,null===($e=he.error)||void 0===$e||$e.call(he,Ee),B.error(Ee)},()=>{var Ee,$e;Be&&(null===(Ee=he.unsubscribe)||void 0===Ee||Ee.call(he)),null===($e=he.finalize)||void 0===$e||$e.call(he)}))}):oe.y}},4408:(ot,be,P)=>{P.d(be,{o:()=>te});var v=P(727);class Q extends v.w0{constructor(ge,fe){super()}schedule(ge,fe=0){return this}}const O={setInterval(re,ge,...fe){const{delegate:he}=O;return he?.setInterval?he.setInterval(re,ge,...fe):setInterval(re,ge,...fe)},clearInterval(re){const{delegate:ge}=O;return(ge?.clearInterval||clearInterval)(re)},delegate:void 0};var oe=P(8737);class te extends Q{constructor(ge,fe){super(ge,fe),this.scheduler=ge,this.work=fe,this.pending=!1}schedule(ge,fe=0){var he;if(this.closed)return this;this.state=ge;const j=this.id,B=this.scheduler;return null!=j&&(this.id=this.recycleAsyncId(B,j,fe)),this.pending=!0,this.delay=fe,this.id=null!==(he=this.id)&&void 0!==he?he:this.requestAsyncId(B,this.id,fe),this}requestAsyncId(ge,fe,he=0){return O.setInterval(ge.flush.bind(ge,this),he)}recycleAsyncId(ge,fe,he=0){if(null!=he&&this.delay===he&&!1===this.pending)return fe;null!=fe&&O.clearInterval(fe)}execute(ge,fe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const he=this._execute(ge,fe);if(he)return he;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ge,fe){let j,he=!1;try{this.work(ge)}catch(B){he=!0,j=B||new Error("Scheduled action threw falsy error")}if(he)return this.unsubscribe(),j}unsubscribe(){if(!this.closed){const{id:ge,scheduler:fe}=this,{actions:he}=fe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,oe.P)(he,this),null!=ge&&(this.id=this.recycleAsyncId(fe,ge,null)),this.delay=null,super.unsubscribe()}}}},7565:(ot,be,P)=>{P.d(be,{v:()=>O});var v=P(6063);class Q{constructor(te,re=Q.now){this.schedulerActionCtor=te,this.now=re}schedule(te,re=0,ge){return new this.schedulerActionCtor(this,te).schedule(ge,re)}}Q.now=v.l.now;class O extends Q{constructor(te,re=Q.now){super(te,re),this.actions=[],this._active=!1}flush(te){const{actions:re}=this;if(this._active)return void re.push(te);let ge;this._active=!0;do{if(ge=te.execute(te.state,te.delay))break}while(te=re.shift());if(this._active=!1,ge){for(;te=re.shift();)te.unsubscribe();throw ge}}}},4986:(ot,be,P)=>{P.d(be,{z:()=>O});var v=P(4408);const O=new(P(7565).v)(v.o)},6063:(ot,be,P)=>{P.d(be,{l:()=>v});const v={now:()=>(v.delegate||Date).now(),delegate:void 0}},3410:(ot,be,P)=>{P.d(be,{z:()=>v});const v={setTimeout(Q,O,...oe){const{delegate:te}=v;return te?.setTimeout?te.setTimeout(Q,O,...oe):setTimeout(Q,O,...oe)},clearTimeout(Q){const{delegate:O}=v;return(O?.clearTimeout||clearTimeout)(Q)},delegate:void 0}},2202:(ot,be,P)=>{P.d(be,{h:()=>Q});const Q=function v(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(ot,be,P)=>{P.d(be,{L:()=>v});const v="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(ot,be,P)=>{P.d(be,{_6:()=>re,jO:()=>oe,yG:()=>te});var v=P(576);function O(ge){return ge[ge.length-1]}function oe(ge){return(0,v.m)(O(ge))?ge.pop():void 0}function te(ge){return function Q(ge){return ge&&(0,v.m)(ge.schedule)}(O(ge))?ge.pop():void 0}function re(ge,fe){return"number"==typeof O(ge)?ge.pop():fe}},8737:(ot,be,P)=>{function v(Q,O){if(Q){const oe=Q.indexOf(O);0<=oe&&Q.splice(oe,1)}}P.d(be,{P:()=>v})},3888:(ot,be,P)=>{function v(Q){const oe=Q(te=>{Error.call(te),te.stack=(new Error).stack});return oe.prototype=Object.create(Error.prototype),oe.prototype.constructor=oe,oe}P.d(be,{d:()=>v})},2806:(ot,be,P)=>{P.d(be,{O:()=>oe,x:()=>O});var v=P(2416);let Q=null;function O(te){if(v.v.useDeprecatedSynchronousErrorHandling){const re=!Q;if(re&&(Q={errorThrown:!1,error:null}),te(),re){const{errorThrown:ge,error:fe}=Q;if(Q=null,ge)throw fe}}else te()}function oe(te){v.v.useDeprecatedSynchronousErrorHandling&&Q&&(Q.errorThrown=!0,Q.error=te)}},9672:(ot,be,P)=>{function v(Q,O,oe,te=0,re=!1){const ge=O.schedule(function(){oe(),re?Q.add(this.schedule(null,te)):this.unsubscribe()},te);if(Q.add(ge),!re)return ge}P.d(be,{f:()=>v})},4671:(ot,be,P)=>{function v(Q){return Q}P.d(be,{y:()=>v})},1144:(ot,be,P)=>{P.d(be,{z:()=>v});const v=Q=>Q&&"number"==typeof Q.length&&"function"!=typeof Q},2206:(ot,be,P)=>{P.d(be,{D:()=>Q});var v=P(576);function Q(O){return Symbol.asyncIterator&&(0,v.m)(O?.[Symbol.asyncIterator])}},576:(ot,be,P)=>{function v(Q){return"function"==typeof Q}P.d(be,{m:()=>v})},3670:(ot,be,P)=>{P.d(be,{c:()=>O});var v=P(8822),Q=P(576);function O(oe){return(0,Q.m)(oe[v.L])}},6495:(ot,be,P)=>{P.d(be,{T:()=>O});var v=P(2202),Q=P(576);function O(oe){return(0,Q.m)(oe?.[v.h])}},8239:(ot,be,P)=>{P.d(be,{t:()=>Q});var v=P(576);function Q(O){return(0,v.m)(O?.then)}},3260:(ot,be,P)=>{P.d(be,{L:()=>oe,Q:()=>O});var v=P(7582),Q=P(576);function O(te){return(0,v.FC)(this,arguments,function*(){const ge=te.getReader();try{for(;;){const{value:fe,done:he}=yield(0,v.qq)(ge.read());if(he)return yield(0,v.qq)(void 0);yield yield(0,v.qq)(fe)}}finally{ge.releaseLock()}})}function oe(te){return(0,Q.m)(te?.getReader)}},4482:(ot,be,P)=>{P.d(be,{A:()=>Q,e:()=>O});var v=P(576);function Q(oe){return(0,v.m)(oe?.lift)}function O(oe){return te=>{if(Q(te))return te.lift(function(re){try{return oe(re,this)}catch(ge){this.error(ge)}});throw new TypeError("Unable to lift unknown Observable type")}}},9635:(ot,be,P)=>{P.d(be,{U:()=>O,z:()=>Q});var v=P(4671);function Q(...oe){return O(oe)}function O(oe){return 0===oe.length?v.y:1===oe.length?oe[0]:function(re){return oe.reduce((ge,fe)=>fe(ge),re)}}},7849:(ot,be,P)=>{P.d(be,{h:()=>O});var v=P(2416),Q=P(3410);function O(oe){Q.z.setTimeout(()=>{const{onUnhandledError:te}=v.v;if(!te)throw oe;te(oe)})}},4532:(ot,be,P)=>{function v(Q){return new TypeError(`You provided ${null!==Q&&"object"==typeof Q?"an invalid object":`'${Q}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}P.d(be,{z:()=>v})},4650:(ot,be,P)=>{P.d(be,{$8M:()=>hu,$WT:()=>qi,$Z:()=>zf,AFp:()=>_b,AaK:()=>fe,CHM:()=>_c,CRH:()=>_m,CZH:()=>xm,CqO:()=>Gy,D6c:()=>A_,EJc:()=>kI,EpF:()=>tw,F4k:()=>nh,FYo:()=>Bf,FiY:()=>xo,G48:()=>Bl,GfV:()=>yy,JOm:()=>Ui,KtG:()=>Xl,LFG:()=>U,Lbi:()=>XT,Lck:()=>HD,MAs:()=>rp,MMx:()=>Tp,NdJ:()=>Wy,OlP:()=>Ht,P3R:()=>fy,PXZ:()=>VI,Q6J:()=>yl,QGY:()=>zy,Qsj:()=>y0,R0b:()=>os,RDi:()=>lg,Rgc:()=>Eh,SBq:()=>Jc,Sil:()=>Om,Suo:()=>vm,TTD:()=>Wa,TgZ:()=>ip,X6Q:()=>Mb,XFs:()=>st,Xpm:()=>io,Xts:()=>pg,Y36:()=>mn,YKP:()=>hm,YNc:()=>Nt,Yjl:()=>oc,Yz7:()=>ze,Z0I:()=>Wt,ZZ4:()=>ei,_UZ:()=>Hg,_Vd:()=>Fd,_c5:()=>kh,_uU:()=>uv,aQg:()=>Hl,c2e:()=>Rm,cJS:()=>ft,cg1:()=>dh,dDg:()=>Ba,dqk:()=>Xt,eFA:()=>BI,eJc:()=>Em,eoX:()=>Mh,f3M:()=>$,g9A:()=>Ho,h0i:()=>wh,hGG:()=>zl,hij:()=>ap,iGM:()=>II,ifc:()=>xn,ip1:()=>OI,jDz:()=>Ua,kL8:()=>Aw,lG2:()=>En,lqb:()=>Pu,lri:()=>Fp,n5z:()=>dd,oAB:()=>so,oxw:()=>Wg,q4F:()=>vy,qLn:()=>Ud,qZA:()=>sp,rWj:()=>Xu,sBO:()=>Rb,s_b:()=>Dh,soG:()=>Nm,tb:()=>UI,tp0:()=>T,uIk:()=>jg,vHH:()=>pe,vpe:()=>Ds,wAp:()=>mt,xp6:()=>E0,z2F:()=>Vl,zSh:()=>gy,zs3:()=>il});var v=P(7579),Q=P(727),O=P(9751),oe=P(6451),te=P(3099);function re(i){for(let s in i)if(i[s]===re)return s;throw Error("Could not find renamed property on target object.")}function fe(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(fe).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function he(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const j=re({__forward_ref__:re});function B(i){return i.__forward_ref__=B,i.toString=function(){return fe(this())},i}function K(i){return Be(i)?i():i}function Be(i){return"function"==typeof i&&i.hasOwnProperty(j)&&i.__forward_ref__===B}function Ee(i){return i&&!!i.\u0275providers}const nt="https://g.co/ng/security#xss";class pe extends Error{constructor(s,a){super(Ce(s,a)),this.code=s}}function Ce(i,s){return`NG0${Math.abs(i)}${s?": "+s.trim():""}`}function De(i){return"string"==typeof i?i:null==i?"":String(i)}function Ue(i,s){throw new pe(-201,!1)}function ue(i,s){null==i&&function ee(i,s,a,c){throw new Error(`ASSERTION ERROR: ${i}`+(null==c?"":` [Expected=> ${a} ${c} ${s} <=Actual]`))}(s,i,null,"!=")}function ze(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function ft(i){return{providers:i.providers||[],imports:i.imports||[]}}function kt(i){return $t(i,fn)||$t(i,Ur)}function Wt(i){return null!==kt(i)}function $t(i,s){return i.hasOwnProperty(s)?i[s]:null}function Yn(i){return i&&(i.hasOwnProperty(Sn)||i.hasOwnProperty(pn))?i[Sn]:null}const fn=re({\u0275prov:re}),Sn=re({\u0275inj:re}),Ur=re({ngInjectableDef:re}),pn=re({ngInjectorDef:re});var st=(()=>((st=st||{})[st.Default=0]="Default",st[st.Host=1]="Host",st[st.Self=2]="Self",st[st.SkipSelf=4]="SkipSelf",st[st.Optional=8]="Optional",st))();let hi;function wn(i){const s=hi;return hi=i,s}function Cr(i,s,a){const c=kt(i);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:a&st.Optional?null:void 0!==s?s:void Ue(fe(i))}const Xt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),fi={},An="__NG_DI_FLAG__",In="ngTempTokenPath",Wi="ngTokenPath",ar=/\n/gm,no="\u0275",Qt="__source";let Vr;function Vt(i){const s=Vr;return Vr=i,s}function q(i,s=st.Default){if(void 0===Vr)throw new pe(-203,!1);return null===Vr?Cr(i,void 0,s):Vr.get(i,s&st.Optional?null:void 0,s)}function U(i,s=st.Default){return(function Gi(){return hi}()||q)(K(i),s)}function $(i,s=st.Default){return U(i,H(s))}function H(i){return typeof i>"u"||"number"==typeof i?i:0|(i.optional&&8)|(i.host&&1)|(i.self&&2)|(i.skipSelf&&4)}function Te(i){const s=[];for(let a=0;a<i.length;a++){const c=K(i[a]);if(Array.isArray(c)){if(0===c.length)throw new pe(900,!1);let d,f=st.Default;for(let y=0;y<c.length;y++){const w=c[y],D=at(w);"number"==typeof D?-1===D?d=w.token:f|=D:d=w}s.push(U(d,f))}else s.push(U(c))}return s}function je(i,s){return i[An]=s,i.prototype[An]=s,i}function at(i){return i[An]}function nn(i){return{toString:i}.toString()}var Et=(()=>((Et=Et||{})[Et.OnPush=0]="OnPush",Et[Et.Default=1]="Default",Et))(),xn=(()=>{return(i=xn||(xn={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",xn;var i})();const Qn={},Bt=[],ls=re({\u0275cmp:re}),za=re({\u0275dir:re}),Ai=re({\u0275pipe:re}),ro=re({\u0275mod:re}),ur=re({\u0275fac:re}),xi=re({__NG_ELEMENT_ID__:re});let zp=0;function io(i){return nn(()=>{const s=Ts(i),a={...s,decls:i.decls,vars:i.vars,template:i.template,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,onPush:i.changeDetection===Et.OnPush,directiveDefs:null,pipeDefs:null,dependencies:s.standalone&&i.dependencies||null,getStandaloneInjector:null,data:i.data||{},encapsulation:i.encapsulation||xn.Emulated,id:"c"+zp++,styles:i.styles||Bt,_:null,schemas:i.schemas||null,tView:null};gr(a);const c=i.dependencies;return a.directiveDefs=oo(c,!1),a.pipeDefs=oo(c,!0),a})}function $h(i){return Yt(i)||kn(i)}function sc(i){return null!==i}function so(i){return nn(()=>({type:i.type,bootstrap:i.bootstrap||Bt,declarations:i.declarations||Bt,imports:i.imports||Bt,exports:i.exports||Bt,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function ql(i,s){if(null==i)return Qn;const a={};for(const c in i)if(i.hasOwnProperty(c)){let d=i[c],f=d;Array.isArray(d)&&(f=d[1],d=d[0]),a[d]=c,s&&(s[d]=f)}return a}function En(i){return nn(()=>{const s=Ts(i);return gr(s),s})}function oc(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function Yt(i){return i[ls]||null}function kn(i){return i[za]||null}function Jn(i){return i[Ai]||null}function qi(i){const s=Yt(i)||kn(i)||Jn(i);return null!==s&&s.standalone}function pr(i,s){const a=i[ro]||null;if(!a&&!0===s)throw new Error(`Type ${fe(i)} does not have '\u0275mod' property.`);return a}function Ts(i){const s={};return{type:i.type,providersResolver:null,factory:null,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:s,exportAs:i.exportAs||null,standalone:!0===i.standalone,selectors:i.selectors||Bt,viewQuery:i.viewQuery||null,features:i.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:ql(i.inputs,s),outputs:ql(i.outputs)}}function gr(i){i.features?.forEach(s=>s(i))}function oo(i,s){if(!i)return null;const a=s?Jn:$h;return()=>("function"==typeof i?i():i).map(c=>a(c)).filter(sc)}const ri=0,Qe=1,Tt=2,cn=3,Sr=4,Ki=5,Ln=6,pi=7,yn=8,ao=9,uo=10,Ct=11,ac=12,ds=13,uc=14,gi=15,mr=16,co=17,Cs=18,mi=19,hs=20,Zi=21,en=22,ii=1,Kl=2,lo=7,Ss=8,Ar=9,yr=10;function Br(i){return Array.isArray(i)&&"object"==typeof i[ii]}function yi(i){return Array.isArray(i)&&!0===i[ii]}function qo(i){return 0!=(4&i.flags)}function vi(i){return i.componentOffset>-1}function cc(i){return 1==(1&i.flags)}function jr(i){return!!i.template}function Ko(i){return 0!=(256&i[Tt])}function xs(i,s){return i.hasOwnProperty(ur)?i[ur]:null}class Ms{constructor(s,a,c){this.previousValue=s,this.currentValue=a,this.firstChange=c}isFirstChange(){return this.firstChange}}function Wa(){return po}function po(i){return i.type.prototype.ngOnChanges&&(i.setInput=go),qa}function qa(){const i=Yo(this),s=i?.current;if(s){const a=i.previous;if(a===Qn)i.previous=s;else for(let c in s)a[c]=s[c];i.current=null,this.ngOnChanges(s)}}function go(i,s,a,c){const d=this.declaredInputs[a],f=Yo(i)||function Ql(i,s){return i[Rs]=s}(i,{previous:Qn,current:null}),y=f.current||(f.current={}),w=f.previous,D=w[d];y[d]=new Ms(D&&D.currentValue,s,w===Qn),i[c]=s}Wa.ngInherit=!0;const Rs="__ngSimpleChanges__";function Yo(i){return i[Rs]||null}const $r=function(i,s,a){};function Mn(i){for(;Array.isArray(i);)i=i[ri];return i}function Fn(i,s){return Mn(s[i.index])}function _o(i,s){return i.data[s]}function zn(i,s){const a=s[i];return Br(a)?a:a[ri]}function wo(i){return 64==(64&i[Tt])}function Qi(i,s){return null==s?null:i[s]}function Jo(i){i[Cs]=0}function Xo(i,s){i[Ki]+=s;let a=i,c=i[cn];for(;null!==c&&(1===s&&1===a[Ki]||-1===s&&0===a[Ki]);)c[Ki]+=s,a=c,c=c[cn]}const It={lFrame:Qm(null),bindingsEnabled:!0};function Ja(){return It.bindingsEnabled}function me(){return It.lFrame.lView}function zt(){return It.lFrame.tView}function _c(i){return It.lFrame.contextLView=i,i[yn]}function Xl(i){return It.lFrame.contextLView=null,i}function cr(){let i=ea();for(;null!==i&&64===i.type;)i=i.parent;return i}function ea(){return It.lFrame.currentTNode}function Hr(i,s){const a=It.lFrame;a.currentTNode=i,a.isParent=s}function eu(){return It.lFrame.isParent}function Ps(){return It.lFrame.bindingIndex++}function nd(i,s){const a=It.lFrame;a.bindingIndex=a.bindingRootIndex=i,Ec(s)}function Ec(i){It.lFrame.currentDirectiveIndex=i}function rd(){return It.lFrame.currentQueryIndex}function Dc(i){It.lFrame.currentQueryIndex=i}function id(i){const s=i[Qe];return 2===s.type?s.declTNode:1===s.type?i[Ln]:null}function Kh(i,s,a){if(a&st.SkipSelf){let d=s,f=i;for(;!(d=d.parent,null!==d||a&st.Host||(d=id(f),null===d||(f=f[gi],10&d.type))););if(null===d)return!1;s=d,i=f}const c=It.lFrame=Zh();return c.currentTNode=s,c.lView=i,!0}function ru(i){const s=Zh(),a=i[Qe];It.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function Zh(){const i=It.lFrame,s=null===i?null:i.child;return null===s?Qm(i):s}function Qm(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function Jm(){const i=It.lFrame;return It.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const sd=Jm;function qp(){const i=Jm();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Mr(){return It.lFrame.selectedIndex}function Io(i){It.lFrame.selectedIndex=i}function ln(){const i=It.lFrame;return _o(i.tView,i.selectedIndex)}function na(i,s){for(let a=s.directiveStart,c=s.directiveEnd;a<c;a++){const f=i.data[a].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:w,ngAfterViewInit:D,ngAfterViewChecked:C,ngOnDestroy:M}=f;y&&(i.contentHooks??(i.contentHooks=[])).push(-a,y),w&&((i.contentHooks??(i.contentHooks=[])).push(a,w),(i.contentCheckHooks??(i.contentCheckHooks=[])).push(a,w)),D&&(i.viewHooks??(i.viewHooks=[])).push(-a,D),C&&((i.viewHooks??(i.viewHooks=[])).push(a,C),(i.viewCheckHooks??(i.viewCheckHooks=[])).push(a,C)),null!=M&&(i.destroyHooks??(i.destroyHooks=[])).push(a,M)}}function ks(i,s,a){ra(i,s,3,a)}function Tc(i,s,a,c){(3&i[Tt])===a&&ra(i,s,a,c)}function ps(i,s){let a=i[Tt];(3&a)===s&&(a&=2047,a+=1,i[Tt]=a)}function ra(i,s,a,c){const f=c??-1,y=s.length-1;let w=0;for(let D=void 0!==c?65535&i[Cs]:0;D<y;D++)if("number"==typeof s[D+1]){if(w=s[D],null!=c&&w>=c)break}else s[D]<0&&(i[Cs]+=65536),(w<f||-1==f)&&(ia(i,a,s,D),i[Cs]=(4294901760&i[Cs])+D+2),D++}function ia(i,s,a,c){const d=a[c]<0,f=a[c+1],w=i[d?-a[c]:a[c]];if(d){if(i[Tt]>>11<i[Cs]>>16&&(3&i[Tt])===s){i[Tt]+=2048,$r(4,w,f);try{f.call(w)}finally{$r(5,w,f)}}}else{$r(4,w,f);try{f.call(w)}finally{$r(5,w,f)}}}const Do=-1;class gs{constructor(s,a,c){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=c}}function vn(i,s,a){let c=0;for(;c<a.length;){const d=a[c];if("number"==typeof d){if(0!==d)break;c++;const f=a[c++],y=a[c++],w=a[c++];i.setAttribute(s,y,w,f)}else{const f=d,y=a[++c];Xi(f)?i.setProperty(s,f,y):i.setAttribute(s,f,y),c++}}return c}function oa(i){return 3===i||4===i||6===i}function Xi(i){return 64===i.charCodeAt(0)}function es(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let c=0;c<s.length;c++){const d=s[c];"number"==typeof d?a=d:0===a||bo(i,a,d,null,-1===a||2===a?s[++c]:null)}}return i}function bo(i,s,a,c,d){let f=0,y=i.length;if(-1===s)y=-1;else for(;f<i.length;){const w=i[f++];if("number"==typeof w){if(w===s){y=-1;break}if(w>s){y=f-1;break}}}for(;f<i.length;){const w=i[f];if("number"==typeof w)break;if(w===a){if(null===c)return void(null!==d&&(i[f+1]=d));if(c===i[f+1])return void(i[f+2]=d)}f++,null!==c&&f++,null!==d&&f++}-1!==y&&(i.splice(y,0,s),f=y+1),i.splice(f++,0,a),null!==c&&i.splice(f++,0,c),null!==d&&i.splice(f++,0,d)}function Cc(i){return i!==Do}function aa(i){return 32767&i}function ou(i,s){let a=function su(i){return i>>16}(i),c=s;for(;a>0;)c=c[gi],a--;return c}let ms=!0;function To(i){const s=ms;return ms=i,s}const ua=255,ca=5;let au=0;const vr={};function So(i,s){const a=da(i,s);if(-1!==a)return a;const c=s[Qe];c.firstCreatePass&&(i.injectorIndex=s.length,ys(c.data,i),ys(s,null),ys(c.blueprint,null));const d=uu(i,s),f=i.injectorIndex;if(Cc(d)){const y=aa(d),w=ou(d,s),D=w[Qe].data;for(let C=0;C<8;C++)s[f+C]=w[y+C]|D[y+C]}return s[f+8]=d,f}function ys(i,s){i.push(0,0,0,0,0,0,0,0,s)}function da(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function uu(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,c=null,d=s;for(;null!==d;){if(c=Ac(d),null===c)return Do;if(a++,d=d[gi],-1!==c.injectorIndex)return c.injectorIndex|a<<16}return Do}function ha(i,s,a){!function la(i,s,a){let c;"string"==typeof a?c=a.charCodeAt(0)||0:a.hasOwnProperty(xi)&&(c=a[xi]),null==c&&(c=a[xi]=au++);const d=c&ua;s.data[i+(d>>ca)]|=1<<d}(i,s,a)}function Us(i,s,a){if(a&st.Optional||void 0!==i)return i;Ue()}function fa(i,s,a,c){if(a&st.Optional&&void 0===c&&(c=null),!(a&(st.Self|st.Host))){const d=i[ao],f=wn(void 0);try{return d?d.get(s,c,a&st.Optional):Cr(s,c,a&st.Optional)}finally{wn(f)}}return Us(c,0,a)}function cd(i,s,a,c=st.Default,d){if(null!==i){if(1024&s[Tt]){const y=function hd(i,s,a,c,d){let f=i,y=s;for(;null!==f&&null!==y&&1024&y[Tt]&&!(256&y[Tt]);){const w=Oi(f,y,a,c|st.Self,vr);if(w!==vr)return w;let D=f.parent;if(!D){const C=y[Zi];if(C){const M=C.get(a,vr,c);if(M!==vr)return M}D=Ac(y),y=y[gi]}f=D}return d}(i,s,a,c,vr);if(y!==vr)return y}const f=Oi(i,s,a,c,vr);if(f!==vr)return f}return fa(s,a,c,d)}function Oi(i,s,a,c,d){const f=function ld(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(xi)?i[xi]:void 0;return"number"==typeof s?s>=0?s&ua:Yp:s}(a);if("function"==typeof f){if(!Kh(s,i,c))return c&st.Host?Us(d,0,c):fa(s,a,c,d);try{const y=f(c);if(null!=y||c&st.Optional)return y;Ue()}finally{sd()}}else if("number"==typeof f){let y=null,w=da(i,s),D=Do,C=c&st.Host?s[mr][Ln]:null;for((-1===w||c&st.SkipSelf)&&(D=-1===w?uu(i,s):s[w+8],D!==Do&&ts(c,!1)?(y=s[Qe],w=aa(D),s=ou(D,s)):w=-1);-1!==w;){const M=s[Qe];if(lu(f,w,M.data)){const k=cu(w,s,a,y,c,C);if(k!==vr)return k}D=s[w+8],D!==Do&&ts(c,s[Qe].data[w+8]===C)&&lu(f,w,s)?(y=M,w=aa(D),s=ou(D,s)):w=-1}}return d}function cu(i,s,a,c,d,f){const y=s[Qe],w=y.data[i+8],M=Vs(w,y,a,null==c?vi(w)&&ms:c!=y&&0!=(3&w.type),d&st.Host&&f===w);return null!==M?Pi(s,y,M,w):vr}function Vs(i,s,a,c,d){const f=i.providerIndexes,y=s.data,w=1048575&f,D=i.directiveStart,M=f>>20,G=d?w+M:i.directiveEnd;for(let J=c?w:w+M;J<G;J++){const ye=y[J];if(J<D&&a===ye||J>=D&&ye.type===a)return J}if(d){const J=y[D];if(J&&jr(J)&&J.type===a)return D}return null}function Pi(i,s,a,c){let d=i[a];const f=s.data;if(function si(i){return i instanceof gs}(d)){const y=d;y.resolving&&function Ie(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new pe(-200,`Circular dependency in DI detected for ${i}${a}`)}(function Ne(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():De(i)}(f[a]));const w=To(y.canSeeViewProviders);y.resolving=!0;const D=y.injectImpl?wn(y.injectImpl):null;Kh(i,c,st.Default);try{d=i[a]=y.factory(void 0,f,i,c),s.firstCreatePass&&a>=c.directiveStart&&function Zp(i,s,a){const{ngOnChanges:c,ngOnInit:d,ngDoCheck:f}=s.type.prototype;if(c){const y=po(s);(a.preOrderHooks??(a.preOrderHooks=[])).push(i,y),(a.preOrderCheckHooks??(a.preOrderCheckHooks=[])).push(i,y)}d&&(a.preOrderHooks??(a.preOrderHooks=[])).push(0-i,d),f&&((a.preOrderHooks??(a.preOrderHooks=[])).push(i,f),(a.preOrderCheckHooks??(a.preOrderCheckHooks=[])).push(i,f))}(a,f[a],s)}finally{null!==D&&wn(D),To(w),y.resolving=!1,sd()}}return d}function lu(i,s,a){return!!(a[s+(i>>ca)]&1<<i)}function ts(i,s){return!(i&st.Self||i&st.Host&&s)}class _i{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,c){return cd(this._tNode,this._lView,s,H(c),a)}}function Yp(){return new _i(cr(),me())}function dd(i){return nn(()=>{const s=i.prototype.constructor,a=s[ur]||du(s),c=Object.prototype;let d=Object.getPrototypeOf(i.prototype).constructor;for(;d&&d!==c;){const f=d[ur]||du(d);if(f&&f!==a)return f;d=Object.getPrototypeOf(d)}return f=>new f})}function du(i){return Be(i)?()=>{const s=du(K(i));return s&&s()}:xs(i)}function Ac(i){const s=i[Qe],a=s.type;return 2===a?s.declTNode:1===a?i[Ln]:null}function hu(i){return function Sc(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const c=a.length;let d=0;for(;d<c;){const f=a[d];if(oa(f))break;if(0===f)d+=2;else if("number"==typeof f)for(d++;d<c&&"string"==typeof a[d];)d++;else{if(f===s)return a[d+1];d+=2}}}return null}(cr(),i)}const pa="__parameters__";function ga(i,s,a){return nn(()=>{const c=function Jh(i){return function(...a){if(i){const c=i(...a);for(const d in c)this[d]=c[d]}}}(s);function d(...f){if(this instanceof d)return c.apply(this,f),this;const y=new d(...f);return w.annotation=y,w;function w(D,C,M){const k=D.hasOwnProperty(pa)?D[pa]:Object.defineProperty(D,pa,{value:[]})[pa];for(;k.length<=M;)k.push(null);return(k[M]=k[M]||[]).push(y),D}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=i,d.annotationCls=d,d})}class Ht{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=ze({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function ki(i,s){i.forEach(a=>Array.isArray(a)?ki(a,s):s(a))}function vu(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function ma(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}const xo=je(ga("Optional"),8),T=je(ga("SkipSelf"),4);var Ui=(()=>((Ui=Ui||{})[Ui.Important=1]="Important",Ui[Ui.DashCase=2]="DashCase",Ui))();const Iu=new Map;let lf=0;const Eu="__ngContext__";function dr(i,s){Br(s)?(i[Eu]=s[hs],function iy(i){Iu.set(i[hs],i)}(s)):i[Eu]=s}let Ia;function gf(i,s){return Ia(i,s)}function No(i){const s=i[cn];return yi(s)?s[cn]:s}function Vc(i){return jc(i[ds])}function Bc(i){return jc(i[Sr])}function jc(i){for(;null!==i&&!yi(i);)i=i[Sr];return i}function js(i,s,a,c,d){if(null!=c){let f,y=!1;yi(c)?f=c:Br(c)&&(y=!0,c=c[ri]);const w=Mn(c);0===i&&null!==a?null==d?Cd(s,a,w):Ea(s,a,w,d||null,!0):1===i&&null!==a?Ea(s,a,w,d||null,!0):2===i?function Oo(i,s,a){const c=Da(i,s);c&&function ay(i,s,a,c){i.removeChild(s,a,c)}(i,c,s,a)}(s,w,y):3===i&&s.destroyNode(w),null!=f&&function ag(i,s,a,c,d){const f=a[lo];f!==Mn(a)&&js(s,i,c,f,d);for(let w=yr;w<a.length;w++){const D=a[w];Au(D[Qe],D,i,s,c,f)}}(s,i,f,a,d)}}function Du(i,s,a){return i.createElement(s,a)}function Wn(i,s){const a=i[Ar],c=a.indexOf(s),d=s[cn];512&s[Tt]&&(s[Tt]&=-513,Xo(d,-1)),a.splice(c,1)}function er(i,s){if(i.length<=yr)return;const a=yr+s,c=i[a];if(c){const d=c[co];null!==d&&d!==i&&Wn(d,c),s>0&&(i[a-1][Sr]=c[Sr]);const f=ma(i,yr+s);!function vf(i,s){Au(i,s,s[Ct],2,null,null),s[ri]=null,s[Ln]=null}(c[Qe],c);const y=f[mi];null!==y&&y.detachView(f[Qe]),c[cn]=null,c[Sr]=null,c[Tt]&=-65}return c}function $c(i,s){if(!(128&s[Tt])){const a=s[Ct];a.destroyNode&&Au(i,s,a,3,null,null),function _f(i){let s=i[ds];if(!s)return Hc(i[Qe],i);for(;s;){let a=null;if(Br(s))a=s[ds];else{const c=s[yr];c&&(a=c)}if(!a){for(;s&&!s[Sr]&&s!==i;)Br(s)&&Hc(s[Qe],s),s=s[cn];null===s&&(s=i),Br(s)&&Hc(s[Qe],s),a=s&&s[Sr]}s=a}}(s)}}function Hc(i,s){if(!(128&s[Tt])){s[Tt]&=-65,s[Tt]|=128,function zc(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let c=0;c<a.length;c+=2){const d=s[a[c]];if(!(d instanceof gs)){const f=a[c+1];if(Array.isArray(f))for(let y=0;y<f.length;y+=2){const w=d[f[y]],D=f[y+1];$r(4,w,D);try{D.call(w)}finally{$r(5,w,D)}}else{$r(4,d,f);try{f.call(d)}finally{$r(5,d,f)}}}}}(i,s),function oy(i,s){const a=i.cleanup,c=s[pi];let d=-1;if(null!==a)for(let f=0;f<a.length-1;f+=2)if("string"==typeof a[f]){const y=a[f+3];y>=0?c[d=y]():c[d=-y].unsubscribe(),f+=2}else{const y=c[d=a[f+1]];a[f].call(y)}if(null!==c){for(let f=d+1;f<c.length;f++)(0,c[f])();s[pi]=null}}(i,s),1===s[Qe].type&&s[Ct].destroy();const a=s[co];if(null!==a&&yi(s[cn])){a!==s[cn]&&Wn(a,s);const c=s[mi];null!==c&&c.detachView(i)}!function rg(i){Iu.delete(i[hs])}(s)}}function Ef(i,s,a){return function Df(i,s,a){let c=s;for(;null!==c&&40&c.type;)c=(s=c).parent;if(null===c)return a[ri];{const{componentOffset:d}=c;if(d>-1){const{encapsulation:f}=i.data[c.directiveStart+d];if(f===xn.None||f===xn.Emulated)return null}return Fn(c,a)}}(i,s.parent,a)}function Ea(i,s,a,c,d){i.insertBefore(s,a,c,d)}function Cd(i,s,a){i.appendChild(s,a)}function Sd(i,s,a,c,d){null!==c?Ea(i,s,a,c,d):Cd(i,s,a)}function Da(i,s){return i.parentNode(s)}let xd,Ru,Po,Tu=function Ad(i,s,a){return 40&i.type?Fn(i,a):null};function Vi(i,s,a,c){const d=Ef(i,c,s),f=s[Ct],w=function bu(i,s,a){return Tu(i,s,a)}(c.parent||s[Ln],c,s);if(null!=d)if(Array.isArray(a))for(let D=0;D<a.length;D++)Sd(f,d,a[D],w,!1);else Sd(f,d,a,w,!1);void 0!==xd&&xd(f,c,s,a,d)}function Cu(i,s){if(null!==s){const a=s.type;if(3&a)return Fn(s,i);if(4&a)return Su(-1,i[s.index]);if(8&a){const c=s.child;if(null!==c)return Cu(i,c);{const d=i[s.index];return yi(d)?Su(-1,d):Mn(d)}}if(32&a)return gf(s,i)()||Mn(i[s.index]);{const c=Cf(i,s);return null!==c?Array.isArray(c)?c[0]:Cu(No(i[mr]),c):Cu(i,s.next)}}return null}function Cf(i,s){return null!==s?i[mr][Ln].projection[s.projection]:null}function Su(i,s){const a=yr+i+1;if(a<s.length){const c=s[a],d=c[Qe].firstChild;if(null!==d)return Cu(c,d)}return s[lo]}function Sf(i,s,a,c,d,f,y){for(;null!=a;){const w=c[a.index],D=a.type;if(y&&0===s&&(w&&dr(Mn(w),c),a.flags|=2),32!=(32&a.flags))if(8&D)Sf(i,s,a.child,c,d,f,!1),js(s,i,d,w,f);else if(32&D){const C=gf(a,c);let M;for(;M=C();)js(s,i,d,M,f);js(s,i,d,w,f)}else 16&D?$s(i,s,c,a,d,f):js(s,i,d,w,f);a=y?a.projectionNext:a.next}}function Au(i,s,a,c,d,f){Sf(a,c,i.firstChild,s,d,f,!1)}function $s(i,s,a,c,d,f){const y=a[mr],D=y[Ln].projection[c.projection];if(Array.isArray(D))for(let C=0;C<D.length;C++)js(s,i,d,D[C],f);else Sf(i,s,D,y[cn],d,f,!0)}function Gc(i,s,a){""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a)}function Md(i,s,a){const{mergedAttrs:c,classes:d,styles:f}=a;null!==c&&vn(i,s,c),null!==d&&Gc(i,s,d),null!==f&&function ug(i,s,a){i.setAttribute(s,"style",a)}(i,s,f)}function lg(i){Ru=i}function m(i){return function qc(){if(void 0===Po&&(Po=null,Xt.trustedTypes))try{Po=Xt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return Po}()?.createScriptURL(i)||i}class h{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${nt})`}}function se(i){return i instanceof h?i.changingThisBreaksApplicationSecurity:i}function Pe(i,s){const a=function et(i){return i instanceof h&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see ${nt})`)}return a===s}const ko=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var gn=(()=>((gn=gn||{})[gn.NONE=0]="NONE",gn[gn.HTML=1]="HTML",gn[gn.STYLE=2]="STYLE",gn[gn.SCRIPT=3]="SCRIPT",gn[gn.URL=4]="URL",gn[gn.RESOURCE_URL=5]="RESOURCE_URL",gn))();function hy(i){const s=Yc();return s?s.sanitize(gn.URL,i)||"":Pe(i,"URL")?se(i):function Nu(i){return(i=String(i)).match(ko)?i:"unsafe:"+i}(De(i))}function Zc(i){const s=Yc();if(s)return m(s.sanitize(gn.RESOURCE_URL,i)||"");if(Pe(i,"ResourceURL"))return m(se(i));throw new pe(904,!1)}function fy(i,s,a){return function OE(i,s){return"src"===s&&("embed"===i||"frame"===i||"iframe"===i||"media"===i||"script"===i)||"href"===s&&("base"===i||"link"===i)?Zc:hy}(s,a)(i)}function Yc(){const i=me();return i&&i[ac]}const pg=new Ht("ENVIRONMENT_INITIALIZER"),py=new Ht("INJECTOR",-1),gg=new Ht("INJECTOR_DEF_TYPES");class a0{get(s,a=fi){if(a===fi){const c=new Error(`NullInjectorError: No provider for ${fe(s)}!`);throw c.name="NullInjectorError",c}return a}}function kE(...i){return{\u0275providers:Pf(0,i),\u0275fromNgModule:!0}}function Pf(i,...s){const a=[],c=new Set;let d;return ki(s,f=>{const y=f;kd(y,a,[],c)&&(d||(d=[]),d.push(y))}),void 0!==d&&Pd(d,a),a}function Pd(i,s){for(let a=0;a<i.length;a++){const{providers:d}=i[a];mg(d,f=>{s.push(f)})}}function kd(i,s,a,c){if(!(i=K(i)))return!1;let d=null,f=Yn(i);const y=!f&&Yt(i);if(f||y){if(y&&!y.standalone)return!1;d=i}else{const D=i.ngModule;if(f=Yn(D),!f)return!1;d=D}const w=c.has(d);if(y){if(w)return!1;if(c.add(d),y.dependencies){const D="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const C of D)kd(C,s,a,c)}}else{if(!f)return!1;{if(null!=f.imports&&!w){let C;c.add(d);try{ki(f.imports,M=>{kd(M,s,a,c)&&(C||(C=[]),C.push(M))})}finally{}void 0!==C&&Pd(C,s)}if(!w){const C=xs(d)||(()=>new d);s.push({provide:d,useFactory:C,deps:Bt},{provide:gg,useValue:d,multi:!0},{provide:pg,useValue:()=>U(d),multi:!0})}const D=f.providers;null==D||w||mg(D,M=>{s.push(M)})}}return d!==i&&void 0!==i.providers}function mg(i,s){for(let a of i)Ee(a)&&(a=a.\u0275providers),Array.isArray(a)?mg(a,s):s(a)}const kf=re({provide:String,useValue:re});function Qc(i){return null!==i&&"object"==typeof i&&kf in i}function Ou(i){return"function"==typeof i}const gy=new Ht("Set Injector scope."),yg={},FE={};let vg;function Lf(){return void 0===vg&&(vg=new a0),vg}class Pu{}class Ff extends Pu{get destroyed(){return this._destroyed}constructor(s,a,c,d){super(),this.parent=a,this.source=c,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Ld(s,y=>this.processProvider(y)),this.records.set(py,ku(void 0,this)),d.has("environment")&&this.records.set(Pu,ku(void 0,this));const f=this.records.get(gy);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(gg.multi,Bt,st.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const s of this._ngOnDestroyHooks)s.ngOnDestroy();for(const s of this._onDestroyHooks)s()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(s){this._onDestroyHooks.push(s)}runInContext(s){this.assertNotDestroyed();const a=Vt(this),c=wn(void 0);try{return s()}finally{Vt(a),wn(c)}}get(s,a=fi,c=st.Default){this.assertNotDestroyed(),c=H(c);const d=Vt(this),f=wn(void 0);try{if(!(c&st.SkipSelf)){let w=this.records.get(s);if(void 0===w){const D=function my(i){return"function"==typeof i||"object"==typeof i&&i instanceof Ht}(s)&&kt(s);w=D&&this.injectableDefInScope(D)?ku(_g(s),yg):null,this.records.set(s,w)}if(null!=w)return this.hydrate(s,w)}return(c&st.Self?Lf():this.parent).get(s,a=c&st.Optional&&a===fi?null:a)}catch(y){if("NullInjectorError"===y.name){if((y[In]=y[In]||[]).unshift(fe(s)),d)throw y;return function tn(i,s,a,c){const d=i[In];throw s[Qt]&&d.unshift(s[Qt]),i.message=function Jt(i,s,a,c=null){i=i&&"\n"===i.charAt(0)&&i.charAt(1)==no?i.slice(2):i;let d=fe(s);if(Array.isArray(s))d=s.map(fe).join(" -> ");else if("object"==typeof s){let f=[];for(let y in s)if(s.hasOwnProperty(y)){let w=s[y];f.push(y+":"+("string"==typeof w?JSON.stringify(w):fe(w)))}d=`{${f.join(", ")}}`}return`${a}${c?"("+c+")":""}[${d}]: ${i.replace(ar,"\n  ")}`}("\n"+i.message,d,a,c),i[Wi]=d,i[In]=null,i}(y,s,"R3InjectorError",this.source)}throw y}finally{wn(f),Vt(d)}}resolveInjectorInitializers(){const s=Vt(this),a=wn(void 0);try{const c=this.get(pg.multi,Bt,st.Self);for(const d of c)d()}finally{Vt(s),wn(a)}}toString(){const s=[],a=this.records;for(const c of a.keys())s.push(fe(c));return`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new pe(205,!1)}processProvider(s){let a=Ou(s=K(s))?s:K(s&&s.provide);const c=function l0(i){return Qc(i)?ku(void 0,i.useValue):ku(function d0(i,s,a){let c;if(Ou(i)){const d=K(i);return xs(d)||_g(d)}if(Qc(i))c=()=>K(i.useValue);else if(function nr(i){return!(!i||!i.useFactory)}(i))c=()=>i.useFactory(...Te(i.deps||[]));else if(function c0(i){return!(!i||!i.useExisting)}(i))c=()=>U(K(i.useExisting));else{const d=K(i&&(i.useClass||i.provide));if(!function Uf(i){return!!i.deps}(i))return xs(d)||_g(d);c=()=>new d(...Te(i.deps))}return c}(i),yg)}(s);if(Ou(s)||!0!==s.multi)this.records.get(a);else{let d=this.records.get(a);d||(d=ku(void 0,yg,!0),d.factory=()=>Te(d.multi),this.records.set(a,d)),a=s,d.multi.push(s)}this.records.set(a,c)}hydrate(s,a){return a.value===yg&&(a.value=FE,a.value=a.factory()),"object"==typeof a.value&&a.value&&function h0(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=K(s.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}}function _g(i){const s=kt(i),a=null!==s?s.factory:xs(i);if(null!==a)return a;if(i instanceof Ht)throw new pe(204,!1);if(i instanceof Function)return function Sa(i){const s=i.length;if(s>0)throw function Ao(i,s){const a=[];for(let c=0;c<i;c++)a.push(s);return a}(s,"?"),new pe(204,!1);const a=function Hn(i){return i&&(i[fn]||i[Ur])||null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new pe(204,!1)}function ku(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function Ld(i,s){for(const a of i)Array.isArray(a)?Ld(a,s):a&&Ee(a)?Ld(a.\u0275providers,s):s(a)}class f0{}class wg{}class Vf{resolveComponentFactory(s){throw function Ig(i){const s=Error(`No component factory found for ${fe(i)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=i,s}(s)}}let Fd=(()=>{class i{}return i.NULL=new Vf,i})();function g0(){return Lu(cr(),me())}function Lu(i,s){return new Jc(Fn(i,s))}let Jc=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=g0,i})();function m0(i){return i instanceof Jc?i.nativeElement:i}class Bf{}let y0=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function v0(){const i=me(),a=zn(cr().index,i);return(Br(a)?a:i)[Ct]}(),i})(),Xc=(()=>{class i{}return i.\u0275prov=ze({token:i,providedIn:"root",factory:()=>null}),i})();class yy{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const vy=new yy("15.2.9"),Eg={},Dg="ngOriginalError";function Di(i){return i[Dg]}class Ud{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s);this._console.error("ERROR",s),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&Di(s);for(;a&&Di(a);)a=Di(a);return a||null}}function Aa(i){return i instanceof Function?i():i}function Cg(i,s,a){let c=i.length;for(;;){const d=i.indexOf(s,a);if(-1===d)return d;if(0===d||i.charCodeAt(d-1)<=32){const f=s.length;if(d+f===c||i.charCodeAt(d+f)<=32)return d}a=d+1}}const w0="ng-template";function Re(i,s,a){let c=0,d=!0;for(;c<i.length;){let f=i[c++];if("string"==typeof f&&d){const y=i[c++];if(a&&"class"===f&&-1!==Cg(y.toLowerCase(),s,0))return!0}else{if(1===f){for(;c<i.length&&"string"==typeof(f=i[c++]);)if(f.toLowerCase()===s)return!0;return!1}"number"==typeof f&&(d=!1)}}return!1}function rr(i){return 4===i.type&&i.value!==w0}function jf(i,s,a){return s===(4!==i.type||a?i.value:w0)}function wy(i,s,a){let c=4;const d=i.attrs||[],f=function le(i){for(let s=0;s<i.length;s++)if(oa(i[s]))return s;return i.length}(d);let y=!1;for(let w=0;w<s.length;w++){const D=s[w];if("number"!=typeof D){if(!y)if(4&c){if(c=2|1&c,""!==D&&!jf(i,D,a)||""===D&&1===s.length){if(Je(c))return!1;y=!0}}else{const C=8&c?D:s[++w];if(8&c&&null!==i.attrs){if(!Re(i.attrs,C,a)){if(Je(c))return!1;y=!0}continue}const k=Dt(8&c?"class":D,d,rr(i),a);if(-1===k){if(Je(c))return!1;y=!0;continue}if(""!==C){let G;G=k>f?"":d[k+1].toLowerCase();const J=8&c?G:null;if(J&&-1!==Cg(J,C,0)||2&c&&C!==G){if(Je(c))return!1;y=!0}}}}else{if(!y&&!Je(c)&&!Je(D))return!1;if(y&&Je(D))continue;y=!1,c=D|1&c}}return Je(c)||y}function Je(i){return 0==(1&i)}function Dt(i,s,a,c){if(null===s)return-1;let d=0;if(c||!a){let f=!1;for(;d<s.length;){const y=s[d];if(y===i)return d;if(3===y||6===y)f=!0;else{if(1===y||2===y){let w=s[++d];for(;"string"==typeof w;)w=s[++d];continue}if(4===y)break;if(0===y){d+=4;continue}}d+=f?1:2}return-1}return function Ae(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const c=i[a];if("number"==typeof c)return-1;if(c===s)return a;a++}return-1}(s,i)}function I0(i,s,a=!1){for(let c=0;c<s.length;c++)if(wy(i,s[c],a))return!0;return!1}function Iy(i,s){return i?":not("+s.trim()+")":s}function GE(i){let s=i[0],a=1,c=2,d="",f=!1;for(;a<i.length;){let y=i[a];if("string"==typeof y)if(2&c){const w=i[++a];d+="["+y+(w.length>0?'="'+w+'"':"")+"]"}else 8&c?d+="."+y:4&c&&(d+=" "+y);else""!==d&&!Je(y)&&(s+=Iy(f,d),d=""),c=y,f=f||!Je(c);a++}return""!==d&&(s+=Iy(f,d)),s}const At={};function E0(i){Ey(zt(),me(),Mr()+i,!1)}function Ey(i,s,a,c){if(!c)if(3==(3&s[Tt])){const f=i.preOrderCheckHooks;null!==f&&ks(s,f,a)}else{const f=i.preOrderHooks;null!==f&&Tc(s,f,0,a)}Io(a)}function Bd(i,s=null,a=null,c){const d=Kt(i,s,a,c);return d.resolveInjectorInitializers(),d}function Kt(i,s=null,a=null,c,d=new Set){const f=[a||Bt,kE(i)];return c=c||("object"==typeof i?void 0:fe(i)),new Ff(f,s||Lf(),c||null,d)}let il=(()=>{class i{static create(a,c){if(Array.isArray(a))return Bd({name:""},c,a,"");{const d=a.name??"";return Bd({name:d},a.parent,a.providers,d)}}}return i.THROW_IF_NOT_FOUND=fi,i.NULL=new a0,i.\u0275prov=ze({token:i,providedIn:"any",factory:()=>U(py)}),i.__NG_ELEMENT_ID__=-1,i})();function mn(i,s=st.Default){const a=me();return null===a?U(i,s):cd(cr(),a,K(i),s)}function zf(){throw new Error("invalid")}function sn(i,s){const a=i.contentQueries;if(null!==a)for(let c=0;c<a.length;c+=2){const f=a[c+1];if(-1!==f){const y=i.data[f];Dc(a[c]),y.contentQueries(2,s[f],f)}}}function ui(i,s,a,c,d,f,y,w,D,C,M){const k=s.blueprint.slice();return k[ri]=d,k[Tt]=76|c,(null!==M||i&&1024&i[Tt])&&(k[Tt]|=1024),Jo(k),k[cn]=k[gi]=i,k[yn]=a,k[uo]=y||i&&i[uo],k[Ct]=w||i&&i[Ct],k[ac]=D||i&&i[ac]||null,k[ao]=C||i&&i[ao]||null,k[Ln]=f,k[hs]=function df(){return lf++}(),k[Zi]=M,k[mr]=2==s.type?i[mr]:k,k}function Gd(i,s,a,c,d){let f=i.data[s];if(null===f)f=function sr(i,s,a,c,d){const f=ea(),y=eu(),D=i.data[s]=function Bu(i,s,a,c,d,f){return{type:a,index:c,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?f:f&&f.parent,a,s,c,d);return null===i.firstChild&&(i.firstChild=D),null!==f&&(y?null==f.child&&null!==D.parent&&(f.child=D):null===f.next&&(f.next=D,D.prev=f)),D}(i,s,a,c,d),function td(){return It.lFrame.inI18n}()&&(f.flags|=32);else if(64&f.type){f.type=a,f.value=c,f.attrs=d;const y=function Xa(){const i=It.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();f.injectorIndex=null===y?-1:y.injectorIndex}return Hr(f,!0),f}function Gf(i,s,a,c){if(0===a)return-1;const d=s.length;for(let f=0;f<a;f++)s.push(c),i.blueprint.push(c),i.data.push(null);return d}function Uo(i,s,a){ru(s);try{const c=i.viewQuery;null!==c&&Ny(1,c,a);const d=i.template;null!==d&&Vu(i,s,d,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&sn(i,s),i.staticViewQueries&&Ny(2,i.viewQuery,a);const f=i.components;null!==f&&function zd(i,s){for(let a=0;a<s.length;a++)j0(i,s[a])}(s,f)}catch(c){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),c}finally{s[Tt]&=-5,qp()}}function bn(i,s,a,c){const d=s[Tt];if(128!=(128&d)){ru(s);try{Jo(s),function fs(i){return It.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&Vu(i,s,a,2,c);const y=3==(3&d);if(y){const C=i.preOrderCheckHooks;null!==C&&ks(s,C,null)}else{const C=i.preOrderHooks;null!==C&&Tc(s,C,0,null),ps(s,0)}if(function Ng(i){for(let s=Vc(i);null!==s;s=Bc(s)){if(!s[Kl])continue;const a=s[Ar];for(let c=0;c<a.length;c++){const d=a[c];512&d[Tt]||Xo(d[cn],1),d[Tt]|=512}}}(s),function ep(i){for(let s=Vc(i);null!==s;s=Bc(s))for(let a=yr;a<s.length;a++){const c=s[a],d=c[Qe];wo(c)&&bn(d,c,d.template,c[yn])}}(s),null!==i.contentQueries&&sn(i,s),y){const C=i.contentCheckHooks;null!==C&&ks(s,C)}else{const C=i.contentHooks;null!==C&&Tc(s,C,1),ps(s,1)}!function Qr(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let c=0;c<a.length;c++){const d=a[c];if(d<0)Io(~d);else{const f=d,y=a[++c],w=a[++c];nd(y,f),w(2,s[f])}}}finally{Io(-1)}}(i,s);const w=i.components;null!==w&&function x0(i,s){for(let a=0;a<s.length;a++)Og(i,s[a])}(s,w);const D=i.viewQuery;if(null!==D&&Ny(2,D,c),y){const C=i.viewCheckHooks;null!==C&&ks(s,C)}else{const C=i.viewHooks;null!==C&&Tc(s,C,2),ps(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),s[Tt]&=-41,512&s[Tt]&&(s[Tt]&=-513,Xo(s[cn],-1))}finally{qp()}}}function Vu(i,s,a,c,d){const f=Mr(),y=2&c;try{Io(-1),y&&s.length>en&&Ey(i,s,en,!1),$r(y?2:0,d),a(c,d)}finally{Io(f),$r(y?3:1,d)}}function Wf(i,s,a){if(qo(s)){const d=s.directiveEnd;for(let f=s.directiveStart;f<d;f++){const y=i.data[f];y.contentQueries&&y.contentQueries(1,a[f],f)}}}function Mg(i,s,a){Ja()&&(function P0(i,s,a,c){const d=a.directiveStart,f=a.directiveEnd;vi(a)&&function U0(i,s,a){const c=Fn(s,i),d=M0(a),f=i[uo],y=kg(i,ui(i,d,null,a.onPush?32:16,c,s,f,f.createRenderer(c,a),null,null,null));i[s.index]=y}(s,a,i.data[d+a.componentOffset]),i.firstCreatePass||So(a,s),dr(c,s);const y=a.initialInputs;for(let w=d;w<f;w++){const D=i.data[w],C=Pi(s,i,w,a);dr(C,s),null!==y&&V0(0,w-d,C,D,0,y),jr(D)&&(zn(a.index,s)[yn]=Pi(s,i,w,a))}}(i,s,a,Fn(a,s)),64==(64&a.flags)&&Jf(i,s,a))}function al(i,s,a=Fn){const c=s.localNames;if(null!==c){let d=s.index+1;for(let f=0;f<c.length;f+=2){const y=c[f+1],w=-1===y?a(s,i):i[y];i[d++]=w}}}function M0(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=Gs(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function Gs(i,s,a,c,d,f,y,w,D,C){const M=en+c,k=M+d,G=function qf(i,s){const a=[];for(let c=0;c<s;c++)a.push(c<i?null:At);return a}(M,k),J="function"==typeof C?C():C;return G[Qe]={type:i,blueprint:G,template:a,queries:null,viewQuery:w,declTNode:s,data:G.slice().fill(null,M),bindingStartIndex:M,expandoStartIndex:k,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:D,consts:J,incompleteFirstPass:!1}}function xy(i,s,a,c){const d=$0(s);null===a?d.push(c):(d.push(a),i.firstCreatePass&&H0(i).push(c,d.length-1))}function Zf(i,s,a,c){for(let d in i)if(i.hasOwnProperty(d)){a=null===a?{}:a;const f=i[d];null===c?ju(a,s,d,f):c.hasOwnProperty(d)&&ju(a,s,c[d],f)}return a}function ju(i,s,a,c){i.hasOwnProperty(a)?i[a].push(s,c):i[a]=[s,c]}function Ma(i,s,a,c){if(Ja()){const d=null===c?null:{"":-1},f=function k0(i,s){const a=i.directiveRegistry;let c=null,d=null;if(a)for(let f=0;f<a.length;f++){const y=a[f];if(I0(s,y.selectors,!1))if(c||(c=[]),jr(y))if(null!==y.findHostDirectiveDefs){const w=[];d=d||new Map,y.findHostDirectiveDefs(y,w,d),c.unshift(...w,y),My(i,s,w.length)}else c.unshift(y),My(i,s,0);else d=d||new Map,y.findHostDirectiveDefs?.(y,c,d),c.push(y)}return null===c?null:[c,d]}(i,a);let y,w;null===f?y=w=null:[y,w]=f,null!==y&&Rg(i,s,a,y,d,w),d&&function JE(i,s,a){if(s){const c=i.localNames=[];for(let d=0;d<s.length;d+=2){const f=a[s[d+1]];if(null==f)throw new pe(-301,!1);c.push(s[d],f)}}}(a,c,d)}a.mergedAttrs=es(a.mergedAttrs,a.attrs)}function Rg(i,s,a,c,d,f){for(let C=0;C<c.length;C++)ha(So(a,s),i,c[C].type);!function F0(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}(a,i.data.length,c.length);for(let C=0;C<c.length;C++){const M=c[C];M.providersResolver&&M.providersResolver(M)}let y=!1,w=!1,D=Gf(i,s,c.length,null);for(let C=0;C<c.length;C++){const M=c[C];a.mergedAttrs=es(a.mergedAttrs,M.hostAttrs),Jr(i,a,s,D,M),L0(D,M,d),null!==M.contentQueries&&(a.flags|=4),(null!==M.hostBindings||null!==M.hostAttrs||0!==M.hostVars)&&(a.flags|=64);const k=M.type.prototype;!y&&(k.ngOnChanges||k.ngOnInit||k.ngDoCheck)&&((i.preOrderHooks??(i.preOrderHooks=[])).push(a.index),y=!0),!w&&(k.ngOnChanges||k.ngDoCheck)&&((i.preOrderCheckHooks??(i.preOrderCheckHooks=[])).push(a.index),w=!0),D++}!function Vo(i,s,a){const d=s.directiveEnd,f=i.data,y=s.attrs,w=[];let D=null,C=null;for(let M=s.directiveStart;M<d;M++){const k=f[M],G=a?a.get(k):null,ye=G?G.outputs:null;D=Zf(k.inputs,M,D,G?G.inputs:null),C=Zf(k.outputs,M,C,ye);const Le=null===D||null===y||rr(s)?null:ul(D,M,y);w.push(Le)}null!==D&&(D.hasOwnProperty("class")&&(s.flags|=8),D.hasOwnProperty("style")&&(s.flags|=16)),s.initialInputs=w,s.inputs=D,s.outputs=C}(i,a,f)}function Jf(i,s,a){const c=a.directiveStart,d=a.directiveEnd,f=a.index,y=function Ic(){return It.lFrame.currentDirectiveIndex}();try{Io(f);for(let w=c;w<d;w++){const D=i.data[w],C=s[w];Ec(w),(null!==D.hostBindings||0!==D.hostVars||null!==D.hostAttrs)&&Xf(D,C)}}finally{Io(-1),Ec(y)}}function Xf(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function My(i,s,a){s.componentOffset=a,(i.components??(i.components=[])).push(s.index)}function L0(i,s,a){if(a){if(s.exportAs)for(let c=0;c<s.exportAs.length;c++)a[s.exportAs[c]]=i;jr(s)&&(a[""]=i)}}function Jr(i,s,a,c,d){i.data[c]=d;const f=d.factory||(d.factory=xs(d.type)),y=new gs(f,jr(d),mn);i.blueprint[c]=y,a[c]=y,function Qf(i,s,a,c,d){const f=d.hostBindings;if(f){let y=i.hostBindingOpCodes;null===y&&(y=i.hostBindingOpCodes=[]);const w=~s.index;(function O0(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(y)!=w&&y.push(w),y.push(a,c,f)}}(i,s,c,Gf(i,a,d.hostVars,At),d)}function Zt(i,s,a,c,d,f){const y=Fn(i,s);!function Ry(i,s,a,c,d,f,y){if(null==f)i.removeAttribute(s,d,a);else{const w=null==y?De(f):y(f,c||"",d);i.setAttribute(s,d,w,a)}}(s[Ct],y,f,i.value,a,c,d)}function V0(i,s,a,c,d,f){const y=f[s];if(null!==y){const w=c.setInput;for(let D=0;D<y.length;){const C=y[D++],M=y[D++],k=y[D++];null!==w?c.setInput(a,k,C,M):a[M]=k}}}function ul(i,s,a){let c=null,d=0;for(;d<a.length;){const f=a[d];if(0!==f)if(5!==f){if("number"==typeof f)break;if(i.hasOwnProperty(f)){null===c&&(c=[]);const y=i[f];for(let w=0;w<y.length;w+=2)if(y[w]===s){c.push(f,y[w+1],a[d+1]);break}}d+=2}else d+=2;else d+=4}return c}function B0(i,s,a,c){return[i,!0,!1,s,null,0,c,a,null,null]}function Og(i,s){const a=zn(s,i);if(wo(a)){const c=a[Qe];48&a[Tt]?bn(c,a,c.template,a[yn]):a[Ki]>0&&Pg(a)}}function Pg(i){for(let c=Vc(i);null!==c;c=Bc(c))for(let d=yr;d<c.length;d++){const f=c[d];if(wo(f))if(512&f[Tt]){const y=f[Qe];bn(y,f,y.template,f[yn])}else f[Ki]>0&&Pg(f)}const a=i[Qe].components;if(null!==a)for(let c=0;c<a.length;c++){const d=zn(a[c],i);wo(d)&&d[Ki]>0&&Pg(d)}}function j0(i,s){const a=zn(s,i),c=a[Qe];(function Xr(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(c,a),Uo(c,a,a[yn])}function kg(i,s){return i[ds]?i[uc][Sr]=s:i[ds]=s,i[uc]=s,s}function Lg(i){for(;i;){i[Tt]|=32;const s=No(i);if(Ko(i)&&!s)return i;i=s}return null}function Fg(i,s,a,c=!0){const d=s[uo];d.begin&&d.begin();try{bn(i,s,i.template,a)}catch(y){throw c&&cl(s,y),y}finally{d.end&&d.end()}}function Ny(i,s,a){Dc(0),s(i,a)}function $0(i){return i[pi]||(i[pi]=[])}function H0(i){return i.cleanup||(i.cleanup=[])}function cl(i,s){const a=i[ao],c=a?a.get(Ud,null):null;c&&c.handleError(s)}function Oy(i,s,a,c,d){for(let f=0;f<a.length;){const y=a[f++],w=a[f++],D=s[y],C=i.data[y];null!==C.setInput?C.setInput(D,d,c,w):D[w]=d}}function Bo(i,s,a){const c=function Ns(i,s){return Mn(s[i])}(s,i);!function sg(i,s,a){i.setValue(s,a)}(i[Ct],c,a)}function tp(i,s,a){let c=a?i.styles:null,d=a?i.classes:null,f=0;if(null!==s)for(let y=0;y<s.length;y++){const w=s[y];"number"==typeof w?f=w:1==f?d=he(d,w):2==f&&(c=he(c,w+": "+s[++y]+";"))}a?i.styles=c:i.stylesWithoutHost=c,a?i.classes=d:i.classesWithoutHost=d}function ws(i,s,a,c,d=!1){for(;null!==a;){const f=s[a.index];if(null!==f&&c.push(Mn(f)),yi(f))for(let w=yr;w<f.length;w++){const D=f[w],C=D[Qe].firstChild;null!==C&&ws(D[Qe],D,C,c)}const y=a.type;if(8&y)ws(i,s,a.child,c);else if(32&y){const w=gf(a,s);let D;for(;D=w();)c.push(D)}else if(16&y){const w=Cf(s,a);if(Array.isArray(w))c.push(...w);else{const D=No(s[mr]);ws(D[Qe],D,w,c,!0)}}a=d?a.projectionNext:a.next}return c}class qd{get rootNodes(){const s=this._lView,a=s[Qe];return ws(a,s,a.firstChild,[])}constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[yn]}set context(s){this._lView[yn]=s}get destroyed(){return 128==(128&this._lView[Tt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[cn];if(yi(s)){const a=s[Ss],c=a?a.indexOf(this):-1;c>-1&&(er(s,c),ma(a,c))}this._attachedToViewContainer=!1}$c(this._lView[Qe],this._lView)}onDestroy(s){xy(this._lView[Qe],this._lView,null,s)}markForCheck(){Lg(this._cdRefInjectingView||this._lView)}detach(){this._lView[Tt]&=-65}reattach(){this._lView[Tt]|=64}detectChanges(){Fg(this._lView[Qe],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new pe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Td(i,s){Au(i,s,s[Ct],2,null,null)}(this._lView[Qe],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new pe(902,!1);this._appRef=s}}class Kd extends qd{constructor(s){super(s),this._view=s}detectChanges(){const s=this._view;Fg(s[Qe],s,s[yn],!1)}checkNoChanges(){}get context(){return null}}class z0 extends Fd{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=Yt(s);return new jo(a,this.ngModule)}}function Ug(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}class ky{constructor(s,a){this.injector=s,this.parentInjector=a}get(s,a,c){c=H(c);const d=this.injector.get(s,Eg,c);return d!==Eg||a===Eg?d:this.parentInjector.get(s,a,c)}}class jo extends wg{get inputs(){return Ug(this.componentDef.inputs)}get outputs(){return Ug(this.componentDef.outputs)}constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function WE(i){return i.map(GE).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}create(s,a,c,d){let f=(d=d||this.ngModule)instanceof Pu?d:d?.injector;f&&null!==this.componentDef.getStandaloneInjector&&(f=this.componentDef.getStandaloneInjector(f)||f);const y=f?new ky(s,f):s,w=y.get(Bf,null);if(null===w)throw new pe(407,!1);const D=y.get(Xc,null),C=w.createRenderer(null,this.componentDef),M=this.componentDef.selectors[0][0]||"div",k=c?function Kf(i,s,a){return i.selectRootElement(s,a===xn.ShadowDom)}(C,c,this.componentDef.encapsulation):Du(C,M,function Py(i){const s=i.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(M)),G=this.componentDef.onPush?288:272,J=Gs(0,null,null,1,0,null,null,null,null,null),ye=ui(null,J,null,G,null,null,w,C,D,y,null);let Le,Ye;ru(ye);try{const rt=this.componentDef;let yt,xe=null;rt.findHostDirectiveDefs?(yt=[],xe=new Map,rt.findHostDirectiveDefs(rt,yt,xe),yt.push(rt)):yt=[rt];const xt=function np(i,s){const a=i[Qe],c=en;return i[c]=s,Gd(a,c,2,"#host",null)}(ye,k),On=function G0(i,s,a,c,d,f,y,w){const D=d[Qe];!function Ly(i,s,a,c){for(const d of i)s.mergedAttrs=es(s.mergedAttrs,d.hostAttrs);null!==s.mergedAttrs&&(tp(s,s.mergedAttrs,!0),null!==a&&Md(c,a,s))}(c,i,s,y);const C=f.createRenderer(s,a),M=ui(d,M0(a),null,a.onPush?32:16,d[i.index],i,f,C,w||null,null,null);return D.firstCreatePass&&My(D,i,c.length-1),kg(d,M),d[i.index]=M}(xt,k,rt,yt,ye,w,C);Ye=_o(J,en),k&&function W0(i,s,a,c){if(c)vn(i,a,["ng-version",vy.full]);else{const{attrs:d,classes:f}=function qE(i){const s=[],a=[];let c=1,d=2;for(;c<i.length;){let f=i[c];if("string"==typeof f)2===d?""!==f&&s.push(f,i[++c]):8===d&&a.push(f);else{if(!Je(d))break;d=f}c++}return{attrs:s,classes:a}}(s.selectors[0]);d&&vn(i,a,d),f&&f.length>0&&Gc(i,a,f.join(" "))}}(C,rt,k,c),void 0!==a&&function q0(i,s,a){const c=i.projection=[];for(let d=0;d<s.length;d++){const f=a[d];c.push(null!=f?Array.from(f):null)}}(Ye,this.ngContentSelectors,a),Le=function Fy(i,s,a,c,d,f){const y=cr(),w=d[Qe],D=Fn(y,d);Rg(w,d,y,a,null,c);for(let M=0;M<a.length;M++)dr(Pi(d,w,y.directiveStart+M,y),d);Jf(w,d,y),D&&dr(D,d);const C=Pi(d,w,y.directiveStart+y.componentOffset,y);if(i[yn]=d[yn]=C,null!==f)for(const M of f)M(C,s);return Wf(w,y,i),C}(On,rt,yt,xe,ye,[tD]),Uo(J,ye,null)}finally{qp()}return new Is(this.componentType,Le,Lu(Ye,ye),ye,Ye)}}class Is extends f0{constructor(s,a,c,d,f){super(),this.location=c,this._rootLView=d,this._tNode=f,this.instance=a,this.hostView=this.changeDetectorRef=new Kd(d),this.componentType=s}setInput(s,a){const c=this._tNode.inputs;let d;if(null!==c&&(d=c[s])){const f=this._rootLView;Oy(f[Qe],f,d,s,a),Lg(zn(this._tNode.index,f))}}get injector(){return new _i(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}function tD(){const i=cr();na(me()[Qe],i)}function Vg(i){return!!Jd(i)&&(Array.isArray(i)||!(i instanceof Map)&&Symbol.iterator in i)}function Jd(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function ci(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function jg(i,s,a,c){const d=me();return ci(d,Ps(),s)&&(zt(),Zt(ln(),d,i,s,a,c)),jg}function Nt(i,s,a,c,d,f,y,w){const D=me(),C=zt(),M=i+en,k=C.firstCreatePass?function oD(i,s,a,c,d,f,y,w,D){const C=s.consts,M=Gd(s,i,4,y||null,Qi(C,w));Ma(s,a,M,Qi(C,D)),na(s,M);const k=M.tView=Gs(2,M,c,d,f,s.directiveRegistry,s.pipeRegistry,null,s.schemas,C);return null!==s.queries&&(s.queries.template(s,M),k.queries=s.queries.embeddedTView(M)),M}(M,C,D,s,a,c,d,f,y):C.data[M];Hr(k,!1);const G=D[Ct].createComment("");Vi(C,D,G,k),dr(G,D),kg(D,D[M]=B0(G,D,G,k)),cc(k)&&Mg(C,D,k),null!=y&&al(D,k,w)}function rp(i){return function Os(i,s){return i[s]}(function ed(){return It.lFrame.contextLView}(),en+i)}function yl(i,s,a){const c=me();return ci(c,Ps(),s)&&function hr(i,s,a,c,d,f,y,w){const D=Fn(s,a);let M,C=s.inputs;!w&&null!=C&&(M=C[c])?(Oy(i,a,M,c,d),vi(s)&&function R0(i,s){const a=zn(s,i);16&a[Tt]||(a[Tt]|=32)}(a,s.index)):3&s.type&&(c=function Yf(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(c),d=null!=y?y(d,s.value||"",c):d,f.setProperty(D,c,d))}(zt(),ln(),c,i,s,c[Ct],a,!1),yl}function vl(i,s,a,c,d){const y=d?"class":"style";Oy(i,a,s.inputs[y],y,c)}function ip(i,s,a,c){const d=me(),f=zt(),y=en+i,w=d[Ct],D=f.firstCreatePass?function $g(i,s,a,c,d,f){const y=s.consts,D=Gd(s,i,2,c,Qi(y,d));return Ma(s,a,D,Qi(y,f)),null!==D.attrs&&tp(D,D.attrs,!1),null!==D.mergedAttrs&&tp(D,D.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,D),D}(y,f,d,s,a,c):f.data[y],C=d[y]=Du(w,s,function Kp(){return It.lFrame.currentNamespace}()),M=cc(D);return Hr(D,!0),Md(w,C,D),32!=(32&D.flags)&&Vi(f,d,C,D),0===function Qa(){return It.lFrame.elementDepthCount}()&&dr(C,d),function mc(){It.lFrame.elementDepthCount++}(),M&&(Mg(f,d,D),Wf(f,D,d)),null!==c&&al(d,D),ip}function sp(){let i=cr();eu()?function tu(){It.lFrame.isParent=!1}():(i=i.parent,Hr(i,!1));const s=i;!function yc(){It.lFrame.elementDepthCount--}();const a=zt();return a.firstCreatePass&&(na(a,i),qo(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function ud(i){return 0!=(8&i.flags)}(s)&&vl(a,s,me(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function Qh(i){return 0!=(16&i.flags)}(s)&&vl(a,s,me(),s.stylesWithoutHost,!1),sp}function Hg(i,s,a,c){return ip(i,s,a,c),sp(),Hg}function tw(){return me()}function zy(i){return!!i&&"function"==typeof i.then}function nh(i){return!!i&&"function"==typeof i.subscribe}const Gy=nh;function Wy(i,s,a,c){const d=me(),f=zt(),y=cr();return function Ky(i,s,a,c,d,f,y){const w=cc(c),C=i.firstCreatePass&&H0(i),M=s[yn],k=$0(s);let G=!0;if(3&c.type||y){const Le=Fn(c,s),Ye=y?y(Le):Le,rt=k.length,yt=y?xt=>y(Mn(xt[c.index])):c.index;let xe=null;if(!y&&w&&(xe=function qy(i,s,a,c){const d=i.cleanup;if(null!=d)for(let f=0;f<d.length-1;f+=2){const y=d[f];if(y===a&&d[f+1]===c){const w=s[pi],D=d[f+2];return w.length>D?w[D]:null}"string"==typeof y&&(f+=2)}return null}(i,s,d,c.index)),null!==xe)(xe.__ngLastListenerFn__||xe).__ngNextListenerFn__=f,xe.__ngLastListenerFn__=f,G=!1;else{f=Ks(c,s,M,f,!1);const xt=a.listen(Ye,d,f);k.push(f,xt),C&&C.push(d,yt,rt,rt+1)}}else f=Ks(c,s,M,f,!1);const J=c.outputs;let ye;if(G&&null!==J&&(ye=J[d])){const Le=ye.length;if(Le)for(let Ye=0;Ye<Le;Ye+=2){const On=s[ye[Ye]][ye[Ye+1]].subscribe(f),or=k.length;k.push(f,On),C&&C.push(d,c.index,or,-(or+1))}}}(f,d,d[Ct],y,i,s,c),Wy}function rh(i,s,a,c){try{return $r(6,s,a),!1!==a(c)}catch(d){return cl(i,d),!1}finally{$r(7,s,a)}}function Ks(i,s,a,c,d){return function f(y){if(y===Function)return c;Lg(i.componentOffset>-1?zn(i.index,s):s);let D=rh(s,a,c,y),C=f.__ngNextListenerFn__;for(;C;)D=rh(s,a,C,y)&&D,C=C.__ngNextListenerFn__;return d&&!1===D&&(y.preventDefault(),y.returnValue=!1),D}}function Wg(i=1){return function Xm(i){return(It.lFrame.contextLView=function od(i,s){for(;i>0;)s=s[gi],i--;return s}(i,It.lFrame.contextLView))[yn]}(i)}function uv(i,s=""){const a=me(),c=zt(),d=i+en,f=c.firstCreatePass?Gd(c,d,1,s,null):c.data[d],y=a[d]=function Dd(i,s){return i.createText(s)}(a[Ct],s);Vi(c,a,y,f),Hr(f,!1)}function ap(i,s,a){const c=me(),d=function pl(i,s,a,c){return ci(i,Ps(),a)?s+De(a)+c:At}(c,i,s,a);return d!==At&&Bo(c,Mr(),d),ap}const Zu=void 0;var CD=["en",[["a","p"],["AM","PM"],Zu],[["AM","PM"],Zu,Zu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Zu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Zu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Zu,"{1} 'at' {0}",Zu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function TD(i){const a=Math.floor(Math.abs(i)),c=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===c?1:5}];let lh={};function dh(i){const s=function Tl(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=gv(s);if(a)return a;const c=s.split("-")[0];if(a=gv(c),a)return a;if("en"===c)return CD;throw new pe(701,!1)}function Aw(i){return dh(i)[mt.PluralCase]}function gv(i){return i in lh||(lh[i]=Xt.ng&&Xt.ng.common&&Xt.ng.common.locales&&Xt.ng.common.locales[i]),lh[i]}var mt=(()=>((mt=mt||{})[mt.LocaleId=0]="LocaleId",mt[mt.DayPeriodsFormat=1]="DayPeriodsFormat",mt[mt.DayPeriodsStandalone=2]="DayPeriodsStandalone",mt[mt.DaysFormat=3]="DaysFormat",mt[mt.DaysStandalone=4]="DaysStandalone",mt[mt.MonthsFormat=5]="MonthsFormat",mt[mt.MonthsStandalone=6]="MonthsStandalone",mt[mt.Eras=7]="Eras",mt[mt.FirstDayOfWeek=8]="FirstDayOfWeek",mt[mt.WeekendRange=9]="WeekendRange",mt[mt.DateFormat=10]="DateFormat",mt[mt.TimeFormat=11]="TimeFormat",mt[mt.DateTimeFormat=12]="DateTimeFormat",mt[mt.NumberSymbols=13]="NumberSymbols",mt[mt.NumberFormats=14]="NumberFormats",mt[mt.CurrencyCode=15]="CurrencyCode",mt[mt.CurrencySymbol=16]="CurrencySymbol",mt[mt.CurrencyName=17]="CurrencyName",mt[mt.Currencies=18]="Currencies",mt[mt.Directionality=19]="Directionality",mt[mt.PluralCase=20]="PluralCase",mt[mt.ExtraData=21]="ExtraData",mt))();const Cl="en-US";let br=Cl;class wh{}class hm{}function HD(i,s){return new kv(i,s??null)}class kv extends wh{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new z0(this);const c=pr(s);this._bootstrapComponents=Aa(c.bootstrap),this._r3Injector=Kt(s,a,[{provide:wh,useValue:this},{provide:Fd,useValue:this.componentFactoryResolver}],fe(s),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(s)}get injector(){return this._r3Injector}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class bp extends hm{constructor(s){super(),this.moduleType=s}create(s){return new kv(this.moduleType,s)}}class Lv extends wh{constructor(s,a,c){super(),this.componentFactoryResolver=new z0(this),this.instance=null;const d=new Ff([...s,{provide:wh,useValue:this},{provide:Fd,useValue:this.componentFactoryResolver}],a||Lf(),c,new Set(["environment"]));this.injector=d,d.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(s){this.injector.onDestroy(s)}}function Tp(i,s,a=null){return new Lv(i,s,a).injector}let Ih=(()=>{class i{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a.id)){const c=Pf(0,a.type),d=c.length>0?Tp([c],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a.id,d)}return this.cachedInjectors.get(a.id)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}}return i.\u0275prov=ze({token:i,providedIn:"environment",factory:()=>new i(U(Pu))}),i})();function Ua(i){i.getStandaloneInjector=s=>s.get(Ih).getOrCreateStandaloneInjector(i)}function Sp(i){return s=>{setTimeout(i,void 0,s)}}const Ds=class rb extends v.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,c){let d=s,f=a||(()=>null),y=c;if(s&&"object"==typeof s){const D=s;d=D.next?.bind(D),f=D.error?.bind(D),y=D.complete?.bind(D)}this.__isAsync&&(f=Sp(f),d&&(d=Sp(d)),y&&(y=Sp(y)));const w=super.subscribe({next:d,error:f,complete:y});return s instanceof Q.w0&&s.add(w),w}};function Gv(){return this._results[Symbol.iterator]()}class Ju{get changes(){return this._changes||(this._changes=new Ds)}constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Ju.prototype;a[Symbol.iterator]||(a[Symbol.iterator]=Gv)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const c=this;c.dirty=!1;const d=function Gr(i){return i.flat(Number.POSITIVE_INFINITY)}(s);(this._changesDetected=!function Nc(i,s,a){if(i.length!==s.length)return!1;for(let c=0;c<i.length;c++){let d=i[c],f=s[c];if(a&&(d=a(d),f=a(f)),f!==d)return!1}return!0}(c._results,d,a))&&(c._results=d,c.length=d.length,c.last=d[this.length-1],c.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Eh=(()=>{class i{}return i.__NG_ELEMENT_ID__=qv,i})();const Wv=Eh,ib=class extends Wv{constructor(s,a,c){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=c}createEmbeddedView(s,a){const c=this._declarationTContainer.tView,d=ui(this._declarationLView,c,s,16,null,c.declTNode,null,null,null,null,a||null);d[co]=this._declarationLView[this._declarationTContainer.index];const y=this._declarationLView[mi];return null!==y&&(d[mi]=y.createEmbeddedView(c)),Uo(c,d,s),new qd(d)}};function qv(){return bs(cr(),me())}function bs(i,s){return 4&i.type?new ib(s,i,Lu(i,s)):null}let Dh=(()=>{class i{}return i.__NG_ELEMENT_ID__=sb,i})();function sb(){return yI(cr(),me())}const Kv=Dh,gI=class extends Kv{constructor(s,a,c){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=c}get element(){return Lu(this._hostTNode,this._hostLView)}get injector(){return new _i(this._hostTNode,this._hostLView)}get parentInjector(){const s=uu(this._hostTNode,this._hostLView);if(Cc(s)){const a=ou(s,this._hostLView),c=aa(s);return new _i(a[Qe].data[c+8],a)}return new _i(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=mI(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-yr}createEmbeddedView(s,a,c){let d,f;"number"==typeof c?d=c:null!=c&&(d=c.index,f=c.injector);const y=s.createEmbeddedView(a||{},f);return this.insert(y,d),y}createComponent(s,a,c,d,f){const y=s&&!function yu(i){return"function"==typeof i}(s);let w;if(y)w=a;else{const k=a||{};w=k.index,c=k.injector,d=k.projectableNodes,f=k.environmentInjector||k.ngModuleRef}const D=y?s:new jo(Yt(s)),C=c||this.parentInjector;if(!f&&null==D.ngModule){const G=(y?C:this.parentInjector).get(Pu,null);G&&(f=G)}const M=D.create(C,d,void 0,f);return this.insert(M.hostView,w),M}insert(s,a){const c=s._lView,d=c[Qe];if(function Za(i){return yi(i[cn])}(c)){const M=this.indexOf(s);if(-1!==M)this.detach(M);else{const k=c[cn],G=new gI(k,k[Ln],k[cn]);G.detach(G.indexOf(s))}}const f=this._adjustIndex(a),y=this._lContainer;!function wf(i,s,a,c){const d=yr+c,f=a.length;c>0&&(a[d-1][Sr]=s),c<f-yr?(s[Sr]=a[d],vu(a,yr+c,s)):(a.push(s),s[Sr]=null),s[cn]=a;const y=s[co];null!==y&&a!==y&&function If(i,s){const a=i[Ar];s[mr]!==s[cn][cn][mr]&&(i[Kl]=!0),null===a?i[Ar]=[s]:a.push(s)}(y,s);const w=s[mi];null!==w&&w.insertView(i),s[Tt]|=64}(d,c,y,f);const w=Su(f,y),D=c[Ct],C=Da(D,y[lo]);return null!==C&&function og(i,s,a,c,d,f){c[ri]=d,c[Ln]=s,Au(i,c,a,1,d,f)}(d,y[Ln],D,c,C,w),s.attachToViewContainerRef(),vu(Ap(y),f,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=mI(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),c=er(this._lContainer,a);c&&(ma(Ap(this._lContainer),a),$c(c[Qe],c))}detach(s){const a=this._adjustIndex(s,-1),c=er(this._lContainer,a);return c&&null!=ma(Ap(this._lContainer),a)?new qd(c):null}_adjustIndex(s,a=0){return s??this.length+a}};function mI(i){return i[Ss]}function Ap(i){return i[Ss]||(i[Ss]=[])}function yI(i,s){let a;const c=s[i.index];if(yi(c))a=c;else{let d;if(8&i.type)d=Mn(c);else{const f=s[Ct];d=f.createComment("");const y=Fn(i,s);Ea(f,Da(f,y),d,function Tf(i,s){return i.nextSibling(s)}(f,y),!1)}s[i.index]=a=B0(c,s,d,i),kg(s,a)}return new gI(a,i,s)}class xp{constructor(s){this.queryList=s,this.matches=null}clone(){return new xp(this.queryList)}setDirty(){this.queryList.setDirty()}}class Zv{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const c=null!==s.contentQueries?s.contentQueries[0]:a.length,d=[];for(let f=0;f<c;f++){const y=a.getByIndex(f);d.push(this.queries[y.indexInDeclarationView].clone())}return new Zv(d)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==wm(s,a).matches&&this.queries[a].setDirty()}}class ym{constructor(s,a,c=null){this.predicate=s,this.flags=a,this.read=c}}class Yv{constructor(s=[]){this.queries=s}elementStart(s,a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let c=0;c<this.length;c++){const d=null!==a?a.length:0,f=this.getByIndex(c).embeddedTView(s,d);f&&(f.indexInDeclarationView=c,null!==a?a.push(f):a=[f])}return null!==a?new Yv(a):null}template(s,a){for(let c=0;c<this.queries.length;c++)this.queries[c].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class Mp{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new Mp(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let c=s.parent;for(;null!==c&&8&c.type&&c.index!==a;)c=c.parent;return a===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const c=this.metadata.predicate;if(Array.isArray(c))for(let d=0;d<c.length;d++){const f=c[d];this.matchTNodeWithReadOption(s,a,vI(a,f)),this.matchTNodeWithReadOption(s,a,Vs(a,s,f,!1,!1))}else c===Eh?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,Vs(a,s,c,!1,!1))}matchTNodeWithReadOption(s,a,c){if(null!==c){const d=this.metadata.read;if(null!==d)if(d===Jc||d===Dh||d===Eh&&4&a.type)this.addMatch(a.index,-2);else{const f=Vs(a,s,d,!1,!1);null!==f&&this.addMatch(a.index,f)}else this.addMatch(a.index,c)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function vI(i,s){const a=i.localNames;if(null!==a)for(let c=0;c<a.length;c+=2)if(a[c]===s)return a[c+1];return null}function _I(i,s,a,c){return-1===a?function Qv(i,s){return 11&i.type?Lu(i,s):4&i.type?bs(i,s):null}(s,i):-2===a?function ob(i,s,a){return a===Jc?Lu(s,i):a===Eh?bs(s,i):a===Dh?yI(s,i):void 0}(i,s,c):Pi(i,i[Qe],a,s)}function wI(i,s,a,c){const d=s[mi].queries[c];if(null===d.matches){const f=i.data,y=a.matches,w=[];for(let D=0;D<y.length;D+=2){const C=y[D];w.push(C<0?null:_I(s,f[C],y[D+1],a.metadata.read))}d.matches=w}return d.matches}function Rp(i,s,a,c){const d=i.queries.getByIndex(a),f=d.matches;if(null!==f){const y=wI(i,s,d,a);for(let w=0;w<f.length;w+=2){const D=f[w];if(D>0)c.push(y[w/2]);else{const C=f[w+1],M=s[-D];for(let k=yr;k<M.length;k++){const G=M[k];G[co]===G[cn]&&Rp(G[Qe],G,C,c)}if(null!==M[Ar]){const k=M[Ar];for(let G=0;G<k.length;G++){const J=k[G];Rp(J[Qe],J,C,c)}}}}}return c}function II(i){const s=me(),a=zt(),c=rd();Dc(c+1);const d=wm(a,c);if(i.dirty&&function Qo(i){return 4==(4&i[Tt])}(s)===(2==(2&d.metadata.flags))){if(null===d.matches)i.reset([]);else{const f=d.crossesNgTemplate?Rp(a,s,c,[]):wI(a,s,d,c);i.reset(f,m0),i.notifyOnChanges()}return!0}return!1}function vm(i,s,a,c){const d=zt();if(d.firstCreatePass){const f=cr();(function e_(i,s,a){null===i.queries&&(i.queries=new Yv),i.queries.track(new Mp(s,a))})(d,new ym(s,a,c),f.index),function ub(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(d,i),2==(2&a)&&(d.staticContentQueries=!0)}!function Xv(i,s,a){const c=new Ju(4==(4&a));xy(i,s,c,c.destroy),null===s[mi]&&(s[mi]=new Zv),s[mi].queries.push(new xp(c))}(d,me(),a)}function _m(){return function ab(i,s){return i[mi].queries[s].queryList}(me(),rd())}function wm(i,s){return i.queries.getByIndex(s)}function Em(i){return!!pr(i)}function Am(...i){}const OI=new Ht("Application Initializer");let xm=(()=>{class i{constructor(a){this.appInits=a,this.resolve=Am,this.reject=Am,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,d)=>{this.resolve=c,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const f=this.appInits[d]();if(zy(f))a.push(f);else if(Gy(f)){const y=new Promise((w,D)=>{f.subscribe({complete:w,error:D})});a.push(y)}}Promise.all(a).then(()=>{c()}).catch(d=>{this.reject(d)}),0===a.length&&c(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(U(OI,8))},i.\u0275prov=ze({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const _b=new Ht("AppId",{providedIn:"root",factory:function PI(){return`${Mm()}${Mm()}${Mm()}`}});function Mm(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Ho=new Ht("Platform Initializer"),XT=new Ht("Platform ID",{providedIn:"platform",factory:()=>"unknown"});let Rm=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=ze({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const Nm=new Ht("LocaleId",{providedIn:"root",factory:()=>$(Nm,st.Optional|st.SkipSelf)||function wb(){return typeof $localize<"u"&&$localize.locale||Cl}()}),kI=new Ht("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Fl{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let Om=(()=>{class i{compileModuleSync(a){return new bp(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const c=this.compileModuleSync(a),f=Aa(pr(a).declarations).reduce((y,w)=>{const D=Yt(w);return D&&y.push(new jo(D)),y},[]);return new Fl(c,f)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=ze({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const p_=(()=>Promise.resolve(0))();function Pm(i){typeof Zone>"u"?p_.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class os{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ds(!1),this.onMicrotaskEmpty=new Ds(!1),this.onStable=new Ds(!1),this.onError=new Ds(!1),typeof Zone>"u")throw new pe(908,!1);Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!c&&a,d.shouldCoalesceRunChangeDetection=c,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function Ul(){let i=Xt.requestAnimationFrame,s=Xt.cancelAnimationFrame;if(typeof Zone<"u"&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const c=s[Zone.__symbol__("OriginalDelegate")];c&&(s=c)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function km(i){const s=()=>{!function bb(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Xt,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,Ah(i),i.isCheckStableRunning=!0,Lp(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),Ah(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,c,d,f,y,w)=>{try{return m_(i),a.invokeTask(d,f,y,w)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||i.shouldCoalesceRunChangeDetection)&&s(),xh(i)}},onInvoke:(a,c,d,f,y,w,D)=>{try{return m_(i),a.invoke(d,f,y,w,D)}finally{i.shouldCoalesceRunChangeDetection&&s(),xh(i)}},onHasTask:(a,c,d,f)=>{a.hasTask(d,f),c===d&&("microTask"==f.change?(i._hasPendingMicrotasks=f.microTask,Ah(i),Lp(i)):"macroTask"==f.change&&(i.hasPendingMacrotasks=f.macroTask))},onHandleError:(a,c,d,f)=>(a.handleError(d,f),i.runOutsideAngular(()=>i.onError.emit(f)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!os.isInAngularZone())throw new pe(909,!1)}static assertNotInAngularZone(){if(os.isInAngularZone())throw new pe(909,!1)}run(s,a,c){return this._inner.run(s,a,c)}runTask(s,a,c,d){const f=this._inner,y=f.scheduleEventTask("NgZoneEvent: "+d,s,g_,Am,Am);try{return f.runTask(y,a,c)}finally{f.cancelTask(y)}}runGuarded(s,a,c){return this._inner.runGuarded(s,a,c)}runOutsideAngular(s){return this._outer.run(s)}}const g_={};function Lp(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function Ah(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function m_(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function xh(i){i._nesting--,Lp(i)}class Tb{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ds,this.onMicrotaskEmpty=new Ds,this.onStable=new Ds,this.onError=new Ds}run(s,a,c){return s.apply(a,c)}runGuarded(s,a,c){return s.apply(a,c)}runOutsideAngular(s){return s()}runTask(s,a,c,d){return s.apply(a,c)}}const Fp=new Ht(""),Xu=new Ht("");let y_,Ba=(()=>{class i{constructor(a,c,d){this._ngZone=a,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,y_||(function ec(i){y_=i}(d),d.addToWindow(c)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{os.assertNotInAngularZone(),Pm(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Pm(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(a)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,c,d){let f=-1;c&&c>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==f),a(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:a,timeoutId:f,updateCb:d})}whenStable(a,c,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,c,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,c,d){return[]}}return i.\u0275fac=function(a){return new(a||i)(U(os),U(Mh),U(Xu))},i.\u0275prov=ze({token:i,factory:i.\u0275fac}),i})(),Mh=(()=>{class i{constructor(){this._applications=new Map}registerApplication(a,c){this._applications.set(a,c)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,c=!0){return y_?.findTestabilityInTree(this,a,c)??null}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=ze({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const zo=!1;let ja=null;const Rh=new Ht("AllowMultipleToken"),Go=new Ht("PlatformDestroyListeners"),UI=new Ht("appBootstrapListener");class VI{constructor(s,a){this.name=s,this.token=a}}function BI(i,s,a=[]){const c=`Platform: ${s}`,d=new Ht(c);return(f=[])=>{let y=Lm();if(!y||y.injector.get(Rh,!1)){const w=[...a,...f,{provide:d,useValue:!0}];i?i(w):function Ab(i){if(ja&&!ja.get(Rh,!1))throw new pe(400,!1);ja=i;const s=i.get(__);(function v_(i){const s=i.get(Ho,null);s&&s.forEach(a=>a())})(i)}(function $I(i=[],s){return il.create({name:s,providers:[{provide:gy,useValue:"platform"},{provide:Go,useValue:new Set([()=>ja=null])},...i]})}(w,c))}return function jI(i){const s=Lm();if(!s)throw new pe(401,!1);return s}()}}function Lm(){return ja?.get(__)??null}let __=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,c){const d=function I_(i,s){let a;return a="noop"===i?new Tb:("zone.js"===i?void 0:i)||new os(s),a}(c?.ngZone,function w_(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!i||!i.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!i||!i.ngZoneRunCoalescing)||!1}}(c)),f=[{provide:os,useValue:d}];return d.run(()=>{const y=il.create({providers:f,parent:this.injector,name:a.moduleType.name}),w=a.create(y),D=w.injector.get(Ud,null);if(!D)throw new pe(402,!1);return d.runOutsideAngular(()=>{const C=d.onError.subscribe({next:M=>{D.handleError(M)}});w.onDestroy(()=>{Um(this._modules,w),C.unsubscribe()})}),function HI(i,s,a){try{const c=a();return zy(c)?c.catch(d=>{throw s.runOutsideAngular(()=>i.handleError(d)),d}):c}catch(c){throw s.runOutsideAngular(()=>i.handleError(c)),c}}(D,d,()=>{const C=w.injector.get(xm);return C.runInitializers(),C.donePromise.then(()=>(function Rw(i){ue(i,"Expected localeId to be defined"),"string"==typeof i&&(br=i.toLowerCase().replace(/_/g,"-"))}(w.injector.get(Nm,Cl)||Cl),this._moduleDoBootstrap(w),w))})})}bootstrapModule(a,c=[]){const d=Fm({},c);return function Cb(i,s,a){const c=new bp(a);return Promise.resolve(c)}(0,0,a).then(f=>this.bootstrapModuleFactory(f,d))}_moduleDoBootstrap(a){const c=a.injector.get(Vl);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>c.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new pe(-403,!1);a.instance.ngDoBootstrap(c)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new pe(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const a=this._injector.get(Go,null);a&&(a.forEach(c=>c()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(U(il))},i.\u0275prov=ze({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function Fm(i,s){return Array.isArray(s)?s.reduce(Fm,i):{...i,...s}}let Vl=(()=>{class i{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(a,c,d){this._zone=a,this._injector=c,this._exceptionHandler=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const f=new O.y(w=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{w.next(this._stable),w.complete()})}),y=new O.y(w=>{let D;this._zone.runOutsideAngular(()=>{D=this._zone.onStable.subscribe(()=>{os.assertNotInAngularZone(),Pm(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,w.next(!0))})})});const C=this._zone.onUnstable.subscribe(()=>{os.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{w.next(!1)}))});return()=>{D.unsubscribe(),C.unsubscribe()}});this.isStable=(0,oe.T)(f,y.pipe((0,te.B)()))}bootstrap(a,c){const d=a instanceof wg;if(!this._injector.get(xm).done){!d&&qi(a);throw new pe(405,zo)}let y;y=d?a:this._injector.get(Fd).resolveComponentFactory(a),this.componentTypes.push(y.componentType);const w=function Sb(i){return i.isBoundToModule}(y)?void 0:this._injector.get(wh),C=y.create(il.NULL,[],c||y.selector,w),M=C.location.nativeElement,k=C.injector.get(Fp,null);return k?.registerApplication(M),C.onDestroy(()=>{this.detachView(C.hostView),Um(this.components,C),k?.unregisterApplication(M)}),this._loadComponent(C),C}tick(){if(this._runningTick)throw new pe(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const c=a;this._views.push(c),c.attachToAppRef(this)}detachView(a){const c=a;Um(this._views,c),c.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a);const c=this._injector.get(UI,[]);c.push(...this._bootstrapListeners),c.forEach(d=>d(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>Um(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new pe(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return i.\u0275fac=function(a){return new(a||i)(U(os),U(Pu),U(Ud))},i.\u0275prov=ze({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Um(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}function Mb(){return!1}function Bl(){}let Rb=(()=>{class i{}return i.__NG_ELEMENT_ID__=Nb,i})();function Nb(i){return function GI(i,s,a){if(vi(i)&&!a){const c=zn(i.index,s);return new qd(c,c)}return 47&i.type?new qd(s[mr],s):null}(cr(),me(),16==(16&i))}class Ph{constructor(){}supports(s){return Vg(s)}create(s){return new Vb(s)}}const T_=(i,s)=>s;class Vb{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||T_}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,c=this._removalsHead,d=0,f=null;for(;a||c;){const y=!c||a&&a.currentIndex<QI(c,d,f)?a:c,w=QI(y,d,f),D=y.currentIndex;if(y===c)d--,c=c._nextRemoved;else if(a=a._next,null==y.previousIndex)d++;else{f||(f=[]);const C=w-d,M=D-d;if(C!=M){for(let G=0;G<C;G++){const J=G<f.length?f[G]:f[G]=0,ye=J+G;M<=ye&&ye<C&&(f[G]=J+1)}f[y.previousIndex]=M-C}}w!==D&&s(y,w,D)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!Vg(s))throw new pe(900,!1);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let d,f,y,a=this._itHead,c=!1;if(Array.isArray(s)){this.length=s.length;for(let w=0;w<this.length;w++)f=s[w],y=this._trackByFn(w,f),null!==a&&Object.is(a.trackById,y)?(c&&(a=this._verifyReinsertion(a,f,y,w)),Object.is(a.item,f)||this._addIdentityChange(a,f)):(a=this._mismatch(a,f,y,w),c=!0),a=a._next}else d=0,function Bg(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[Symbol.iterator]();let c;for(;!(c=a.next()).done;)s(c.value)}}(s,w=>{y=this._trackByFn(d,w),null!==a&&Object.is(a.trackById,y)?(c&&(a=this._verifyReinsertion(a,w,y,d)),Object.is(a.item,w)||this._addIdentityChange(a,w)):(a=this._mismatch(a,w,y,d),c=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,c,d){let f;return null===s?f=this._itTail:(f=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,f,d)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(c,d))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,f,d)):s=this._addAfter(new Bb(a,c),f,d),s}_verifyReinsertion(s,a,c,d){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==f?s=this._reinsertAfter(f,s._prev,d):s.currentIndex!=d&&(s.currentIndex=d,this._addToMoves(s,d)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const d=s._prevRemoved,f=s._nextRemoved;return null===d?this._removalsHead=f:d._nextRemoved=f,null===f?this._removalsTail=d:f._prevRemoved=d,this._insertAfter(s,a,c),this._addToMoves(s,c),s}_moveAfter(s,a,c){return this._unlink(s),this._insertAfter(s,a,c),this._addToMoves(s,c),s}_addAfter(s,a,c){return this._insertAfter(s,a,c),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,c){const d=null===a?this._itHead:a._next;return s._next=d,s._prev=a,null===d?this._itTail=s:d._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new Up),this._linkedRecords.put(s),s.currentIndex=c,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,c=s._next;return null===a?this._itHead=c:a._next=c,null===c?this._itTail=a:c._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Up),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class Bb{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class YI{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===a||a<=c.currentIndex)&&Object.is(c.trackById,s))return c;return null}remove(s){const a=s._prevDup,c=s._nextDup;return null===a?this._head=c:a._nextDup=c,null===c?this._tail=a:c._prevDup=a,null===this._head}}class Up{constructor(){this.map=new Map}put(s){const a=s.trackById;let c=this.map.get(a);c||(c=new YI,this.map.set(a,c)),c.add(s)}get(s,a){const d=this.map.get(s);return d?d.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function QI(i,s,a){const c=i.previousIndex;if(null===c)return c;let d=0;return a&&c<a.length&&(d=a[c]),c+s+d}class C_{constructor(){}supports(s){return s instanceof Map||Jd(s)}create(){return new JI}}class JI{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||Jd(s)))throw new pe(900,!1)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(c,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,c),this._appendAfter=a,a=a._next;else{const f=this._getOrCreateRecordForKey(d,c);a=this._insertBeforeOrAppend(a,f)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let c=a;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const c=s._prev;return a._next=s,a._prev=c,s._prev=a,c&&(c._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const d=this._records.get(s);this._maybeAddToChanges(d,a);const f=d._prev,y=d._next;return f&&(f._next=y),y&&(y._prev=f),d._next=null,d._prev=null,d}const c=new $l(s);return this._records.set(s,c),c.currentValue=a,this._addToAdditions(c),c}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(c=>a(s[c],c))}}class $l{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function as(){return new ei([new Ph])}let ei=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(null!=c){const d=c.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||as()),deps:[[i,new T,new xo]]}}find(a){const c=this.factories.find(d=>d.supports(a));if(null!=c)return c;throw new pe(901,!1)}}return i.\u0275prov=ze({token:i,providedIn:"root",factory:as}),i})();function S_(){return new Hl([new C_])}let Hl=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(c){const d=c.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||S_()),deps:[[i,new T,new xo]]}}find(a){const c=this.factories.find(d=>d.supports(a));if(c)return c;throw new pe(901,!1)}}return i.\u0275prov=ze({token:i,providedIn:"root",factory:S_}),i})();const kh=BI(null,"core",[]);let zl=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(U(Vl))},i.\u0275mod=so({type:i}),i.\u0275inj=ft({}),i})();function A_(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}},3942:(ot,be,P)=>{P.d(be,{Z:()=>$e});var v=P(2090),Q=P(4859),O=P(9681),oe=P(1877);class te{constructor(pe,Ce){this._delegate=pe,this.firebase=Ce,(0,O._addComponent)(pe,new Q.wA("app-compat",()=>this,"PUBLIC")),this.container=pe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(pe){this._delegate.automaticDataCollectionEnabled=pe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(pe=>{this._delegate.checkDestroyed(),pe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(pe,Ce=O._DEFAULT_ENTRY_NAME){var De;this._delegate.checkDestroyed();const Ne=this._delegate.container.getProvider(pe);return!Ne.isInitialized()&&"EXPLICIT"===(null===(De=Ne.getComponent())||void 0===De?void 0:De.instantiationMode)&&Ne.initialize(),Ne.getImmediate({identifier:Ce})}_removeServiceInstance(pe,Ce=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(pe).clearInstance(Ce)}_addComponent(pe){(0,O._addComponent)(this._delegate,pe)}_addOrOverwriteComponent(pe){(0,O._addOrOverwriteComponent)(this._delegate,pe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ge=new v.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),j=function he(){const nt=function fe(nt){const pe={},Ce={__esModule:!0,initializeApp:function Ie(Me,V={}){const ve=O.initializeApp(Me,V);if((0,v.r3)(pe,ve.name))return pe[ve.name];const Ve=new nt(ve,Ce);return pe[ve.name]=Ve,Ve},app:Ne,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function Se(Me){const V=Me.name,ve=V.replace("-compat","");if(O._registerComponent(Me)&&"PUBLIC"===Me.type){const Ve=(We=Ne())=>{if("function"!=typeof We[ve])throw ge.create("invalid-app-argument",{appName:V});return We[ve]()};void 0!==Me.serviceProps&&(0,v.ZB)(Ve,Me.serviceProps),Ce[ve]=Ve,nt.prototype[ve]=function(...We){return this._getService.bind(this,V).apply(this,Me.multipleInstances?We:[])}}return"PUBLIC"===Me.type?Ce[ve]:null},removeApp:function De(Me){delete pe[Me]},useAsService:function Ue(Me,V){return"serverAuth"===V?null:V},modularAPIs:O}};function Ne(Me){if(!(0,v.r3)(pe,Me=Me||O._DEFAULT_ENTRY_NAME))throw ge.create("no-app",{appName:Me});return pe[Me]}return Ce.default=Ce,Object.defineProperty(Ce,"apps",{get:function _e(){return Object.keys(pe).map(Me=>pe[Me])}}),Ne.App=nt,Ce}(te);return nt.INTERNAL=Object.assign(Object.assign({},nt.INTERNAL),{createFirebaseNamespace:he,extendNamespace:function pe(Ce){(0,v.ZB)(nt,Ce)},createSubscribe:v.ne,ErrorFactory:v.LL,deepExtend:v.ZB}),nt}(),B=new oe.Yd("@firebase/app-compat");if((0,v.jU)()&&void 0!==self.firebase){B.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const nt=self.firebase.SDK_VERSION;nt&&nt.indexOf("LITE")>=0&&B.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const $e=j;!function Ee(nt){(0,O.registerVersion)("@firebase/app-compat","0.1.30",nt)}()},9681:(ot,be,P)=>{P.r(be),P.d(be,{FirebaseError:()=>oe.ZR,SDK_VERSION:()=>Hn,_DEFAULT_ENTRY_NAME:()=>ne,_addComponent:()=>ke,_addOrOverwriteComponent:()=>Oe,_apps:()=>ue,_clearComponents:()=>ft,_components:()=>ee,_getProvider:()=>ze,_registerComponent:()=>ct,_removeServiceInstance:()=>Pt,deleteApp:()=>Ur,getApp:()=>fn,getApps:()=>Sn,initializeApp:()=>Yn,onLog:()=>hi,registerVersion:()=>st,setLogLevel:()=>Gi});var v=P(5861),Q=P(4859),O=P(1877),oe=P(2090),te=P(8766);class re{constructor($){this.container=$}getPlatformInfoString(){return this.container.getProviders().map(H=>{if(function ge(F){return"VERSION"===F.getComponent()?.type}(H)){const Te=H.getImmediate();return`${Te.library}/${Te.version}`}return null}).filter(H=>H).join(" ")}}const fe="@firebase/app",j=new O.Yd("@firebase/app"),ne="[DEFAULT]",ce={[fe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ue=new Map,ee=new Map;function ke(F,$){try{F.container.addComponent($)}catch(H){j.debug(`Component ${$.name} failed to register with FirebaseApp ${F.name}`,H)}}function Oe(F,$){F.container.addOrOverwriteComponent($)}function ct(F){const $=F.name;if(ee.has($))return j.debug(`There were multiple attempts to register component ${$}.`),!1;ee.set($,F);for(const H of ue.values())ke(H,F);return!0}function ze(F,$){const H=F.container.getProvider("heartbeat").getImmediate({optional:!0});return H&&H.triggerHeartbeat(),F.container.getProvider($)}function Pt(F,$,H=ne){ze(F,$).clearInstance(H)}function ft(){ee.clear()}const Wt=new oe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class $t{constructor($,H,Te){this._isDeleted=!1,this._options=Object.assign({},$),this._config=Object.assign({},H),this._name=H.name,this._automaticDataCollectionEnabled=H.automaticDataCollectionEnabled,this._container=Te,this.container.addComponent(new Q.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled($){this.checkDestroyed(),this._automaticDataCollectionEnabled=$}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted($){this._isDeleted=$}checkDestroyed(){if(this.isDeleted)throw Wt.create("app-deleted",{appName:this._name})}}const Hn="9.9.1";function Yn(F,$={}){"object"!=typeof $&&($={name:$});const H=Object.assign({name:ne,automaticDataCollectionEnabled:!1},$),Te=H.name;if("string"!=typeof Te||!Te)throw Wt.create("bad-app-name",{appName:String(Te)});const je=ue.get(Te);if(je){if((0,oe.vZ)(F,je.options)&&(0,oe.vZ)(H,je.config))return je;throw Wt.create("duplicate-app",{appName:Te})}const at=new Q.H0(Te);for(const Jt of ee.values())at.addComponent(Jt);const tn=new $t(F,H,at);return ue.set(Te,tn),tn}function fn(F=ne){const $=ue.get(F);if(!$)throw Wt.create("no-app",{appName:F});return $}function Sn(){return Array.from(ue.values())}function Ur(F){return pn.apply(this,arguments)}function pn(){return(pn=(0,v.Z)(function*(F){const $=F.name;ue.has($)&&(ue.delete($),yield Promise.all(F.container.getProviders().map(H=>H.delete())),F.isDeleted=!0)})).apply(this,arguments)}function st(F,$,H){var Te;let je=null!==(Te=ce[F])&&void 0!==Te?Te:F;H&&(je+=`-${H}`);const at=je.match(/\s|\//),tn=$.match(/\s|\//);if(at||tn){const Jt=[`Unable to register library "${je}" with version "${$}":`];return at&&Jt.push(`library name "${je}" contains illegal characters (whitespace or "/")`),at&&tn&&Jt.push("and"),tn&&Jt.push(`version name "${$}" contains illegal characters (whitespace or "/")`),void j.warn(Jt.join(" "))}ct(new Q.wA(`${je}-version`,()=>({library:je,version:$}),"VERSION"))}function hi(F,$){if(null!==F&&"function"!=typeof F)throw Wt.create("invalid-log-argument");(0,O.Am)(F,$)}function Gi(F){(0,O.Ub)(F)}const wn="firebase-heartbeat-database",Cr=1,ni="firebase-heartbeat-store";let Xt=null;function un(){return Xt||(Xt=(0,te.X3)(wn,Cr,{upgrade:(F,$)=>{0===$&&F.createObjectStore(ni)}}).catch(F=>{throw Wt.create("storage-open",{originalErrorMessage:F.message})})),Xt}function vt(){return(vt=(0,v.Z)(function*(F){var $;try{return(yield un()).transaction(ni).objectStore(ni).get(In(F))}catch(H){throw Wt.create("storage-get",{originalErrorMessage:null===($=H)||void 0===$?void 0:$.message})}})).apply(this,arguments)}function fi(F,$){return An.apply(this,arguments)}function An(){return(An=(0,v.Z)(function*(F,$){var H;try{const je=(yield un()).transaction(ni,"readwrite");return yield je.objectStore(ni).put($,In(F)),je.done}catch(Te){throw Wt.create("storage-set",{originalErrorMessage:null===(H=Te)||void 0===H?void 0:H.message})}})).apply(this,arguments)}function In(F){return`${F.name}!${F.options.appId}`}class no{constructor($){this.container=$,this._heartbeatsCache=null;const H=this.container.getProvider("app").getImmediate();this._storage=new Vt(H),this._heartbeatsCachePromise=this._storage.read().then(Te=>(this._heartbeatsCache=Te,Te))}triggerHeartbeat(){var $=this;return(0,v.Z)(function*(){const Te=$.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),je=Qt();if(null===$._heartbeatsCache&&($._heartbeatsCache=yield $._heartbeatsCachePromise),$._heartbeatsCache.lastSentHeartbeatDate!==je&&!$._heartbeatsCache.heartbeats.some(at=>at.date===je))return $._heartbeatsCache.heartbeats.push({date:je,agent:Te}),$._heartbeatsCache.heartbeats=$._heartbeatsCache.heartbeats.filter(at=>{const tn=new Date(at.date).valueOf();return Date.now()-tn<=2592e6}),$._storage.overwrite($._heartbeatsCache)})()}getHeartbeatsHeader(){var $=this;return(0,v.Z)(function*(){if(null===$._heartbeatsCache&&(yield $._heartbeatsCachePromise),null===$._heartbeatsCache||0===$._heartbeatsCache.heartbeats.length)return"";const H=Qt(),{heartbeatsToSend:Te,unsentEntries:je}=function Vr(F,$=1024){const H=[];let Te=F.slice();for(const je of F){const at=H.find(tn=>tn.agent===je.agent);if(at){if(at.dates.push(je.date),q(H)>$){at.dates.pop();break}}else if(H.push({agent:je.agent,dates:[je.date]}),q(H)>$){H.pop();break}Te=Te.slice(1)}return{heartbeatsToSend:H,unsentEntries:Te}}($._heartbeatsCache.heartbeats),at=(0,oe.L)(JSON.stringify({version:2,heartbeats:Te}));return $._heartbeatsCache.lastSentHeartbeatDate=H,je.length>0?($._heartbeatsCache.heartbeats=je,yield $._storage.overwrite($._heartbeatsCache)):($._heartbeatsCache.heartbeats=[],$._storage.overwrite($._heartbeatsCache)),at})()}}function Qt(){return(new Date).toISOString().substring(0,10)}class Vt{constructor($){this.app=$,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,v.Z)(function*(){return!!(0,oe.hl)()&&(0,oe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var $=this;return(0,v.Z)(function*(){return(yield $._canUseIndexedDBPromise)&&(yield function dt(F){return vt.apply(this,arguments)}($.app))||{heartbeats:[]}})()}overwrite($){var H=this;return(0,v.Z)(function*(){var Te;if(yield H._canUseIndexedDBPromise){const at=yield H.read();return fi(H.app,{lastSentHeartbeatDate:null!==(Te=$.lastSentHeartbeatDate)&&void 0!==Te?Te:at.lastSentHeartbeatDate,heartbeats:$.heartbeats})}})()}add($){var H=this;return(0,v.Z)(function*(){var Te;if(yield H._canUseIndexedDBPromise){const at=yield H.read();return fi(H.app,{lastSentHeartbeatDate:null!==(Te=$.lastSentHeartbeatDate)&&void 0!==Te?Te:at.lastSentHeartbeatDate,heartbeats:[...at.heartbeats,...$.heartbeats]})}})()}}function q(F){return(0,oe.L)(JSON.stringify({version:2,heartbeats:F})).length}!function U(F){ct(new Q.wA("platform-logger",$=>new re($),"PRIVATE")),ct(new Q.wA("heartbeat",$=>new no($),"PRIVATE")),st(fe,"0.7.29",F),st(fe,"0.7.29","esm2017"),st("fire-js","")}("")},4859:(ot,be,P)=>{P.d(be,{H0:()=>fe,wA:()=>O});var v=P(5861),Q=P(2090);class O{constructor(j,B,K){this.name=j,this.instanceFactory=B,this.type=K,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(j){return this.instantiationMode=j,this}setMultipleInstances(j){return this.multipleInstances=j,this}setServiceProps(j){return this.serviceProps=j,this}setInstanceCreatedCallback(j){return this.onInstanceCreated=j,this}}const oe="[DEFAULT]";class te{constructor(j,B){this.name=j,this.container=B,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(j){const B=this.normalizeInstanceIdentifier(j);if(!this.instancesDeferred.has(B)){const K=new Q.BH;if(this.instancesDeferred.set(B,K),this.isInitialized(B)||this.shouldAutoInitialize())try{const Be=this.getOrInitializeService({instanceIdentifier:B});Be&&K.resolve(Be)}catch{}}return this.instancesDeferred.get(B).promise}getImmediate(j){var B;const K=this.normalizeInstanceIdentifier(j?.identifier),Be=null!==(B=j?.optional)&&void 0!==B&&B;if(!this.isInitialized(K)&&!this.shouldAutoInitialize()){if(Be)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:K})}catch(Ee){if(Be)return null;throw Ee}}getComponent(){return this.component}setComponent(j){if(j.name!==this.name)throw Error(`Mismatching Component ${j.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=j,this.shouldAutoInitialize()){if(function ge(he){return"EAGER"===he.instantiationMode}(j))try{this.getOrInitializeService({instanceIdentifier:oe})}catch{}for(const[B,K]of this.instancesDeferred.entries()){const Be=this.normalizeInstanceIdentifier(B);try{const Ee=this.getOrInitializeService({instanceIdentifier:Be});K.resolve(Ee)}catch{}}}}clearInstance(j=oe){this.instancesDeferred.delete(j),this.instancesOptions.delete(j),this.instances.delete(j)}delete(){var j=this;return(0,v.Z)(function*(){const B=Array.from(j.instances.values());yield Promise.all([...B.filter(K=>"INTERNAL"in K).map(K=>K.INTERNAL.delete()),...B.filter(K=>"_delete"in K).map(K=>K._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(j=oe){return this.instances.has(j)}getOptions(j=oe){return this.instancesOptions.get(j)||{}}initialize(j={}){const{options:B={}}=j,K=this.normalizeInstanceIdentifier(j.instanceIdentifier);if(this.isInitialized(K))throw Error(`${this.name}(${K}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Be=this.getOrInitializeService({instanceIdentifier:K,options:B});for(const[Ee,$e]of this.instancesDeferred.entries())K===this.normalizeInstanceIdentifier(Ee)&&$e.resolve(Be);return Be}onInit(j,B){var K;const Be=this.normalizeInstanceIdentifier(B),Ee=null!==(K=this.onInitCallbacks.get(Be))&&void 0!==K?K:new Set;Ee.add(j),this.onInitCallbacks.set(Be,Ee);const $e=this.instances.get(Be);return $e&&j($e,Be),()=>{Ee.delete(j)}}invokeOnInitCallbacks(j,B){const K=this.onInitCallbacks.get(B);if(K)for(const Be of K)try{Be(j,B)}catch{}}getOrInitializeService({instanceIdentifier:j,options:B={}}){let K=this.instances.get(j);if(!K&&this.component&&(K=this.component.instanceFactory(this.container,{instanceIdentifier:(he=j,he===oe?void 0:he),options:B}),this.instances.set(j,K),this.instancesOptions.set(j,B),this.invokeOnInitCallbacks(K,j),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,j,K)}catch{}var he;return K||null}normalizeInstanceIdentifier(j=oe){return this.component?this.component.multipleInstances?j:oe:j}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class fe{constructor(j){this.name=j,this.providers=new Map}addComponent(j){const B=this.getProvider(j.name);if(B.isComponentSet())throw new Error(`Component ${j.name} has already been registered with ${this.name}`);B.setComponent(j)}addOrOverwriteComponent(j){this.getProvider(j.name).isComponentSet()&&this.providers.delete(j.name),this.addComponent(j)}getProvider(j){if(this.providers.has(j))return this.providers.get(j);const B=new te(j,this);return this.providers.set(j,B),B}getProviders(){return Array.from(this.providers.values())}}},1877:(ot,be,P)=>{P.d(be,{Am:()=>he,Ub:()=>fe,Yd:()=>ge,in:()=>Q});const v=[];var Q=(()=>{return(j=Q||(Q={}))[j.DEBUG=0]="DEBUG",j[j.VERBOSE=1]="VERBOSE",j[j.INFO=2]="INFO",j[j.WARN=3]="WARN",j[j.ERROR=4]="ERROR",j[j.SILENT=5]="SILENT",Q;var j})();const O={debug:Q.DEBUG,verbose:Q.VERBOSE,info:Q.INFO,warn:Q.WARN,error:Q.ERROR,silent:Q.SILENT},oe=Q.INFO,te={[Q.DEBUG]:"log",[Q.VERBOSE]:"log",[Q.INFO]:"info",[Q.WARN]:"warn",[Q.ERROR]:"error"},re=(j,B,...K)=>{if(B<j.logLevel)return;const Be=(new Date).toISOString(),Ee=te[B];if(!Ee)throw new Error(`Attempted to log a message with an invalid logType (value: ${B})`);console[Ee](`[${Be}]  ${j.name}:`,...K)};class ge{constructor(B){this.name=B,this._logLevel=oe,this._logHandler=re,this._userLogHandler=null,v.push(this)}get logLevel(){return this._logLevel}set logLevel(B){if(!(B in Q))throw new TypeError(`Invalid value "${B}" assigned to \`logLevel\``);this._logLevel=B}setLogLevel(B){this._logLevel="string"==typeof B?O[B]:B}get logHandler(){return this._logHandler}set logHandler(B){if("function"!=typeof B)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=B}get userLogHandler(){return this._userLogHandler}set userLogHandler(B){this._userLogHandler=B}debug(...B){this._userLogHandler&&this._userLogHandler(this,Q.DEBUG,...B),this._logHandler(this,Q.DEBUG,...B)}log(...B){this._userLogHandler&&this._userLogHandler(this,Q.VERBOSE,...B),this._logHandler(this,Q.VERBOSE,...B)}info(...B){this._userLogHandler&&this._userLogHandler(this,Q.INFO,...B),this._logHandler(this,Q.INFO,...B)}warn(...B){this._userLogHandler&&this._userLogHandler(this,Q.WARN,...B),this._logHandler(this,Q.WARN,...B)}error(...B){this._userLogHandler&&this._userLogHandler(this,Q.ERROR,...B),this._logHandler(this,Q.ERROR,...B)}}function fe(j){v.forEach(B=>{B.setLogLevel(j)})}function he(j,B){for(const K of v){let Be=null;B&&B.level&&(Be=O[B.level]),K.userLogHandler=null===j?null:(Ee,$e,...nt)=>{const pe=nt.map(Ce=>{if(null==Ce)return null;if("string"==typeof Ce)return Ce;if("number"==typeof Ce||"boolean"==typeof Ce)return Ce.toString();if(Ce instanceof Error)return Ce.message;try{return JSON.stringify(Ce)}catch{return null}}).filter(Ce=>Ce).join(" ");$e>=(Be??Ee.logLevel)&&j({level:Q[$e].toLowerCase(),message:pe,args:nt,type:Ee.name})}}}},8766:(ot,be,P)=>{P.d(be,{Lj:()=>Ie,X3:()=>Ne});var v=P(5861);const Q=(V,ve)=>ve.some(Ve=>V instanceof Ve);let O,oe;const ge=new WeakMap,fe=new WeakMap,he=new WeakMap,j=new WeakMap,B=new WeakMap;let Ee={get(V,ve,Ve){if(V instanceof IDBTransaction){if("done"===ve)return fe.get(V);if("objectStoreNames"===ve)return V.objectStoreNames||he.get(V);if("store"===ve)return Ve.objectStoreNames[1]?void 0:Ve.objectStore(Ve.objectStoreNames[0])}return Ce(V[ve])},set:(V,ve,Ve)=>(V[ve]=Ve,!0),has:(V,ve)=>V instanceof IDBTransaction&&("done"===ve||"store"===ve)||ve in V};function pe(V){return"function"==typeof V?function nt(V){return V!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function re(){return oe||(oe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(V)?function(...ve){return V.apply(De(this),ve),Ce(ge.get(this))}:function(...ve){return Ce(V.apply(De(this),ve))}:function(ve,...Ve){const We=V.call(De(this),ve,...Ve);return he.set(We,ve.sort?ve.sort():[ve]),Ce(We)}}(V):(V instanceof IDBTransaction&&function Be(V){if(fe.has(V))return;const ve=new Promise((Ve,We)=>{const it=()=>{V.removeEventListener("complete",Ke),V.removeEventListener("error",an),V.removeEventListener("abort",an)},Ke=()=>{Ve(),it()},an=()=>{We(V.error||new DOMException("AbortError","AbortError")),it()};V.addEventListener("complete",Ke),V.addEventListener("error",an),V.addEventListener("abort",an)});fe.set(V,ve)}(V),Q(V,function te(){return O||(O=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(V,Ee):V)}function Ce(V){if(V instanceof IDBRequest)return function K(V){const ve=new Promise((Ve,We)=>{const it=()=>{V.removeEventListener("success",Ke),V.removeEventListener("error",an)},Ke=()=>{Ve(Ce(V.result)),it()},an=()=>{We(V.error),it()};V.addEventListener("success",Ke),V.addEventListener("error",an)});return ve.then(Ve=>{Ve instanceof IDBCursor&&ge.set(Ve,V)}).catch(()=>{}),B.set(ve,V),ve}(V);if(j.has(V))return j.get(V);const ve=pe(V);return ve!==V&&(j.set(V,ve),B.set(ve,V)),ve}const De=V=>B.get(V);function Ne(V,ve,{blocked:Ve,upgrade:We,blocking:it,terminated:Ke}={}){const an=indexedDB.open(V,ve),Zn=Ce(an);return We&&an.addEventListener("upgradeneeded",Pn=>{We(Ce(an.result),Pn.oldVersion,Pn.newVersion,Ce(an.transaction))}),Ve&&an.addEventListener("blocked",()=>Ve()),Zn.then(Pn=>{Ke&&Pn.addEventListener("close",()=>Ke()),it&&Pn.addEventListener("versionchange",()=>it())}).catch(()=>{}),Zn}function Ie(V,{blocked:ve}={}){const Ve=indexedDB.deleteDatabase(V);return ve&&Ve.addEventListener("blocked",()=>ve()),Ce(Ve).then(()=>{})}const _e=["get","getKey","getAll","getAllKeys","count"],Se=["put","add","delete","clear"],Ue=new Map;function Me(V,ve){if(!(V instanceof IDBDatabase)||ve in V||"string"!=typeof ve)return;if(Ue.get(ve))return Ue.get(ve);const Ve=ve.replace(/FromIndex$/,""),We=ve!==Ve,it=Se.includes(Ve);if(!(Ve in(We?IDBIndex:IDBObjectStore).prototype)||!it&&!_e.includes(Ve))return;const Ke=function(){var an=(0,v.Z)(function*(Zn,...Pn){const Si=this.transaction(Zn,it?"readwrite":"readonly");let ne=Si.store;return We&&(ne=ne.index(Pn.shift())),(yield Promise.all([ne[Ve](...Pn),it&&Si.done]))[0]});return function(Pn){return an.apply(this,arguments)}}();return Ue.set(ve,Ke),Ke}!function $e(V){Ee=V(Ee)}(V=>({...V,get:(ve,Ve,We)=>Me(ve,Ve)||V.get(ve,Ve,We),has:(ve,Ve)=>!!Me(ve,Ve)||V.has(ve,Ve)}))},5861:(ot,be,P)=>{function v(O,oe,te,re,ge,fe,he){try{var j=O[fe](he),B=j.value}catch(K){return void te(K)}j.done?oe(B):Promise.resolve(B).then(re,ge)}function Q(O){return function(){var oe=this,te=arguments;return new Promise(function(re,ge){var fe=O.apply(oe,te);function he(B){v(fe,re,ge,he,j,"next",B)}function j(B){v(fe,re,ge,he,j,"throw",B)}he(void 0)})}}P.d(be,{Z:()=>Q})},7582:(ot,be,P)=>{function oe(ne,ce){var ue={};for(var ee in ne)Object.prototype.hasOwnProperty.call(ne,ee)&&ce.indexOf(ee)<0&&(ue[ee]=ne[ee]);if(null!=ne&&"function"==typeof Object.getOwnPropertySymbols){var ke=0;for(ee=Object.getOwnPropertySymbols(ne);ke<ee.length;ke++)ce.indexOf(ee[ke])<0&&Object.prototype.propertyIsEnumerable.call(ne,ee[ke])&&(ue[ee[ke]]=ne[ee[ke]])}return ue}function K(ne,ce,ue,ee){return new(ue||(ue=Promise))(function(Oe,ct){function ze(kt){try{ft(ee.next(kt))}catch(Wt){ct(Wt)}}function Pt(kt){try{ft(ee.throw(kt))}catch(Wt){ct(Wt)}}function ft(kt){kt.done?Oe(kt.value):function ke(Oe){return Oe instanceof ue?Oe:new ue(function(ct){ct(Oe)})}(kt.value).then(ze,Pt)}ft((ee=ee.apply(ne,ce||[])).next())})}function Ie(ne){return this instanceof Ie?(this.v=ne,this):new Ie(ne)}function _e(ne,ce,ue){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ke,ee=ue.apply(ne,ce||[]),Oe=[];return ke={},ct("next"),ct("throw"),ct("return"),ke[Symbol.asyncIterator]=function(){return this},ke;function ct($t){ee[$t]&&(ke[$t]=function(Hn){return new Promise(function(Yn,fn){Oe.push([$t,Hn,Yn,fn])>1||ze($t,Hn)})})}function ze($t,Hn){try{!function Pt($t){$t.value instanceof Ie?Promise.resolve($t.value.v).then(ft,kt):Wt(Oe[0][2],$t)}(ee[$t](Hn))}catch(Yn){Wt(Oe[0][3],Yn)}}function ft($t){ze("next",$t)}function kt($t){ze("throw",$t)}function Wt($t,Hn){$t(Hn),Oe.shift(),Oe.length&&ze(Oe[0][0],Oe[0][1])}}function Ue(ne){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ue,ce=ne[Symbol.asyncIterator];return ce?ce.call(ne):(ne=function nt(ne){var ce="function"==typeof Symbol&&Symbol.iterator,ue=ce&&ne[ce],ee=0;if(ue)return ue.call(ne);if(ne&&"number"==typeof ne.length)return{next:function(){return ne&&ee>=ne.length&&(ne=void 0),{value:ne&&ne[ee++],done:!ne}}};throw new TypeError(ce?"Object is not iterable.":"Symbol.iterator is not defined.")}(ne),ue={},ee("next"),ee("throw"),ee("return"),ue[Symbol.asyncIterator]=function(){return this},ue);function ee(Oe){ue[Oe]=ne[Oe]&&function(ct){return new Promise(function(ze,Pt){!function ke(Oe,ct,ze,Pt){Promise.resolve(Pt).then(function(ft){Oe({value:ft,done:ze})},ct)}(ze,Pt,(ct=ne[Oe](ct)).done,ct.value)})}}}P.d(be,{FC:()=>_e,KL:()=>Ue,_T:()=>oe,mG:()=>K,qq:()=>Ie}),"function"==typeof SuppressedError&&SuppressedError}},ot=>{ot(ot.s=3730)}]);